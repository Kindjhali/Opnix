const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["chunks/c4Diagram-15b5d702-BtZobvnC.js","chunks/svgDrawCommon-3ba9043b-CdWgl4OJ.js","chunks/flowDiagram-cbd28bf7-BBGv6jIm.js","chunks/flowDb-7c981674-Cs1P2e6z.js","chunks/graph-BOs-OnYd.js","chunks/layout-DNdojMHx.js","chunks/styles-2ab5d517-BUsbNVXW.js","chunks/index-6079d271-DLy-BH91.js","chunks/clone-mG0sv98h.js","chunks/edges-332bd1c7-tGtFQZh9.js","chunks/createText-d213de94-Odh7ubiJ.js","chunks/line-D3neg19C.js","chunks/array-BKyUJesY.js","chunks/path-CbwjOpE9.js","chunks/channel-U8UvE9Nt.js","chunks/flowDiagram-v2-ffc7f31a-9uzUqGLS.js","chunks/erDiagram-880f2ed8-DGu80oZn.js","chunks/ganttDiagram-04f9e578-BHgJNci-.js","chunks/linear-Y3Id5j6t.js","chunks/init-Gi6I4Gst.js","chunks/pieDiagram-421022e6-Dv7vMdKC.js","chunks/arc-cNGY3eV4.js","chunks/ordinal-Cboi1Yqb.js","chunks/quadrantDiagram-0957ecba-CADpULQT.js","chunks/xychartDiagram-b6496bcd-C15EwDeW.js","chunks/requirementDiagram-23d650b8-fnGkM_1S.js","chunks/sequenceDiagram-17ac3bff-FpNbcy82.js","chunks/classDiagram-d40c83e7-Cj-mRfxo.js","chunks/styles-5f03d8d2-C8F4gO-F.js","chunks/classDiagram-v2-d5a6b087-CR3m-0v5.js","chunks/stateDiagram-9c5f0230-CBqKgsIg.js","chunks/styles-edf9a4b0-BZzAVlQz.js","chunks/stateDiagram-v2-51a3dcff-Bug3r4RQ.js","chunks/journeyDiagram-29694f62-BFvE3EY9.js","chunks/flowchart-elk-definition-36e2d292-DrgB5VCD.js","chunks/timeline-definition-7e6b55e7-CJ1Wwb16.js","chunks/mindmap-definition-ac74a2e8-CQsjJXmd.js","chunks/sankeyDiagram-23345273-C3k3szqQ.js","chunks/Tableau10-B-NsZVaP.js","chunks/blockDiagram-68f4deed-Cg9y_k4L.js"])))=>i.map(i=>d[i]);
var Rx=Object.defineProperty;var Wg=e=>{throw TypeError(e)};var Mx=(e,t,r)=>t in e?Rx(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Et=(e,t,r)=>Mx(e,typeof t!="symbol"?t+"":t,r),Px=(e,t,r)=>t.has(e)||Wg("Cannot "+r);var Ug=(e,t,r)=>t.has(e)?Wg("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r);var Nl=(e,t,r)=>(Px(e,t,"access private method"),r);/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function tv(e){const t=Object.create(null);for(const r of e.split(","))t[r]=1;return r=>r in t}const wt={},ua=[],Pi=()=>{},Ob=()=>!1,$u=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),rv=e=>e.startsWith("onUpdate:"),ur=Object.assign,iv=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Ix=Object.prototype.hasOwnProperty,vt=(e,t)=>Ix.call(e,t),Ge=Array.isArray,ha=e=>dl(e)==="[object Map]",zu=e=>dl(e)==="[object Set]",Vg=e=>dl(e)==="[object Date]",Qe=e=>typeof e=="function",zt=e=>typeof e=="string",Oi=e=>typeof e=="symbol",bt=e=>e!==null&&typeof e=="object",Nb=e=>(bt(e)||Qe(e))&&Qe(e.then)&&Qe(e.catch),$b=Object.prototype.toString,dl=e=>$b.call(e),Fx=e=>dl(e).slice(8,-1),zb=e=>dl(e)==="[object Object]",nv=e=>zt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,bo=tv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hu=e=>{const t=Object.create(null);return(r=>t[r]||(t[r]=e(r)))},Ox=/-\w/g,ai=Hu(e=>e.replace(Ox,t=>t.slice(1).toUpperCase())),Nx=/\B([A-Z])/g,Kn=Hu(e=>e.replace(Nx,"-$1").toLowerCase()),qu=Hu(e=>e.charAt(0).toUpperCase()+e.slice(1)),Hh=Hu(e=>e?`on${qu(e)}`:""),Mn=(e,t)=>!Object.is(e,t),fc=(e,...t)=>{for(let r=0;r<e.length;r++)e[r](...t)},Hb=(e,t,r,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:r})},zc=e=>{const t=parseFloat(e);return isNaN(t)?e:t},$x=e=>{const t=zt(e)?Number(e):NaN;return isNaN(t)?e:t};let jg;const Wu=()=>jg||(jg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Oa(e){if(Ge(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=zt(i)?Wx(i):Oa(i);if(n)for(const s in n)t[s]=n[s]}return t}else if(zt(e)||bt(e))return e}const zx=/;(?![^(]*\))/g,Hx=/:([^]+)/,qx=/\/\*[^]*?\*\//g;function Wx(e){const t={};return e.replace(qx,"").split(zx).forEach(r=>{if(r){const i=r.split(Hx);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ye(e){let t="";if(zt(e))t=e;else if(Ge(e))for(let r=0;r<e.length;r++){const i=Ye(e[r]);i&&(t+=i+" ")}else if(bt(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Ux(e){if(!e)return null;let{class:t,style:r}=e;return t&&!zt(t)&&(e.class=Ye(t)),r&&(e.style=Oa(r)),e}const Vx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",jx=tv(Vx);function qb(e){return!!e||e===""}function Gx(e,t){if(e.length!==t.length)return!1;let r=!0;for(let i=0;r&&i<e.length;i++)r=Uu(e[i],t[i]);return r}function Uu(e,t){if(e===t)return!0;let r=Vg(e),i=Vg(t);if(r||i)return r&&i?e.getTime()===t.getTime():!1;if(r=Oi(e),i=Oi(t),r||i)return e===t;if(r=Ge(e),i=Ge(t),r||i)return r&&i?Gx(e,t):!1;if(r=bt(e),i=bt(t),r||i){if(!r||!i)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const a in e){const o=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(o&&!l||!o&&l||!Uu(e[a],t[a]))return!1}}return String(e)===String(t)}function Kx(e,t){return e.findIndex(r=>Uu(r,t))}const Wb=e=>!!(e&&e.__v_isRef===!0),re=e=>zt(e)?e:e==null?"":Ge(e)||bt(e)&&(e.toString===$b||!Qe(e.toString))?Wb(e)?re(e.value):JSON.stringify(e,Ub,2):String(e),Ub=(e,t)=>Wb(t)?Ub(e,t.value):ha(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n],s)=>(r[qh(i,s)+" =>"]=n,r),{})}:zu(t)?{[`Set(${t.size})`]:[...t.values()].map(r=>qh(r))}:Oi(t)?qh(t):bt(t)&&!Ge(t)&&!zb(t)?String(t):t,qh=(e,t="")=>{var r;return Oi(e)?`Symbol(${(r=e.description)!=null?r:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fr;class Yx{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Fr,!t&&Fr&&(this.index=(Fr.scopes||(Fr.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].pause();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,r;if(this.scopes)for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].resume();for(t=0,r=this.effects.length;t<r;t++)this.effects[t].resume()}}run(t){if(this._active){const r=Fr;try{return Fr=this,t()}finally{Fr=r}}}on(){++this._on===1&&(this.prevScope=Fr,Fr=this)}off(){this._on>0&&--this._on===0&&(Fr=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(this.effects.length=0,r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.cleanups.length=0,this.scopes){for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Xx(){return Fr}let xt;const Wh=new WeakSet;class Vb{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Fr&&Fr.active&&Fr.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wh.has(this)&&(Wh.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gb(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Gg(this),Kb(this);const t=xt,r=gi;xt=this,gi=!0;try{return this.fn()}finally{Yb(this),xt=t,gi=r,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ov(t);this.deps=this.depsTail=void 0,Gg(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wh.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qf(this)&&this.run()}get dirty(){return Qf(this)}}let jb=0,Co,wo;function Gb(e,t=!1){if(e.flags|=8,t){e.next=wo,wo=e;return}e.next=Co,Co=e}function sv(){jb++}function av(){if(--jb>0)return;if(wo){let t=wo;for(wo=void 0;t;){const r=t.next;t.next=void 0,t.flags&=-9,t=r}}let e;for(;Co;){let t=Co;for(Co=void 0;t;){const r=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=r}}if(e)throw e}function Kb(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Yb(e){let t,r=e.depsTail,i=r;for(;i;){const n=i.prevDep;i.version===-1?(i===r&&(r=n),ov(i),Zx(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=n}e.deps=t,e.depsTail=r}function Qf(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Xb(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Xb(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===$o)||(e.globalVersion=$o,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Qf(e))))return;e.flags|=2;const t=e.dep,r=xt,i=gi;xt=e,gi=!0;try{Kb(e);const n=e.fn(e._value);(t.version===0||Mn(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{xt=r,gi=i,Yb(e),e.flags&=-3}}function ov(e,t=!1){const{dep:r,prevSub:i,nextSub:n}=e;if(i&&(i.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=i,e.nextSub=void 0),r.subs===e&&(r.subs=i,!i&&r.computed)){r.computed.flags&=-5;for(let s=r.computed.deps;s;s=s.nextDep)ov(s,!0)}!t&&!--r.sc&&r.map&&r.map.delete(r.key)}function Zx(e){const{prevDep:t,nextDep:r}=e;t&&(t.nextDep=r,e.prevDep=void 0),r&&(r.prevDep=t,e.nextDep=void 0)}let gi=!0;const Zb=[];function ln(){Zb.push(gi),gi=!1}function cn(){const e=Zb.pop();gi=e===void 0?!0:e}function Gg(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const r=xt;xt=void 0;try{t()}finally{xt=r}}}let $o=0;class Qx{constructor(t,r){this.sub=t,this.dep=r,this.version=r.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class lv{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!xt||!gi||xt===this.computed)return;let r=this.activeLink;if(r===void 0||r.sub!==xt)r=this.activeLink=new Qx(xt,this),xt.deps?(r.prevDep=xt.depsTail,xt.depsTail.nextDep=r,xt.depsTail=r):xt.deps=xt.depsTail=r,Qb(r);else if(r.version===-1&&(r.version=this.version,r.nextDep)){const i=r.nextDep;i.prevDep=r.prevDep,r.prevDep&&(r.prevDep.nextDep=i),r.prevDep=xt.depsTail,r.nextDep=void 0,xt.depsTail.nextDep=r,xt.depsTail=r,xt.deps===r&&(xt.deps=i)}return r}trigger(t){this.version++,$o++,this.notify(t)}notify(t){sv();try{for(let r=this.subs;r;r=r.prevSub)r.sub.notify()&&r.sub.dep.notify()}finally{av()}}}function Qb(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)Qb(i)}const r=e.dep.subs;r!==e&&(e.prevSub=r,r&&(r.nextSub=e)),e.dep.subs=e}}const Jf=new WeakMap,Ss=Symbol(""),ep=Symbol(""),zo=Symbol("");function mr(e,t,r){if(gi&&xt){let i=Jf.get(e);i||Jf.set(e,i=new Map);let n=i.get(r);n||(i.set(r,n=new lv),n.map=i,n.key=r),n.track()}}function en(e,t,r,i,n,s){const a=Jf.get(e);if(!a){$o++;return}const o=l=>{l&&l.trigger()};if(sv(),t==="clear")a.forEach(o);else{const l=Ge(e),c=l&&nv(r);if(l&&r==="length"){const u=Number(i);a.forEach((h,d)=>{(d==="length"||d===zo||!Oi(d)&&d>=u)&&o(h)})}else switch((r!==void 0||a.has(void 0))&&o(a.get(r)),c&&o(a.get(zo)),t){case"add":l?c&&o(a.get("length")):(o(a.get(Ss)),ha(e)&&o(a.get(ep)));break;case"delete":l||(o(a.get(Ss)),ha(e)&&o(a.get(ep)));break;case"set":ha(e)&&o(a.get(Ss));break}}av()}function Vs(e){const t=ft(e);return t===e?t:(mr(t,"iterate",zo),si(e)?t:t.map(or))}function Vu(e){return mr(e=ft(e),"iterate",zo),e}const Jx={__proto__:null,[Symbol.iterator](){return Uh(this,Symbol.iterator,or)},concat(...e){return Vs(this).concat(...e.map(t=>Ge(t)?Vs(t):t))},entries(){return Uh(this,"entries",e=>(e[1]=or(e[1]),e))},every(e,t){return Vi(this,"every",e,t,void 0,arguments)},filter(e,t){return Vi(this,"filter",e,t,r=>r.map(or),arguments)},find(e,t){return Vi(this,"find",e,t,or,arguments)},findIndex(e,t){return Vi(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Vi(this,"findLast",e,t,or,arguments)},findLastIndex(e,t){return Vi(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Vi(this,"forEach",e,t,void 0,arguments)},includes(...e){return Vh(this,"includes",e)},indexOf(...e){return Vh(this,"indexOf",e)},join(e){return Vs(this).join(e)},lastIndexOf(...e){return Vh(this,"lastIndexOf",e)},map(e,t){return Vi(this,"map",e,t,void 0,arguments)},pop(){return Ka(this,"pop")},push(...e){return Ka(this,"push",e)},reduce(e,...t){return Kg(this,"reduce",e,t)},reduceRight(e,...t){return Kg(this,"reduceRight",e,t)},shift(){return Ka(this,"shift")},some(e,t){return Vi(this,"some",e,t,void 0,arguments)},splice(...e){return Ka(this,"splice",e)},toReversed(){return Vs(this).toReversed()},toSorted(e){return Vs(this).toSorted(e)},toSpliced(...e){return Vs(this).toSpliced(...e)},unshift(...e){return Ka(this,"unshift",e)},values(){return Uh(this,"values",or)}};function Uh(e,t,r){const i=Vu(e),n=i[t]();return i!==e&&!si(e)&&(n._next=n.next,n.next=()=>{const s=n._next();return s.done||(s.value=r(s.value)),s}),n}const eT=Array.prototype;function Vi(e,t,r,i,n,s){const a=Vu(e),o=a!==e&&!si(e),l=a[t];if(l!==eT[t]){const h=l.apply(e,s);return o?or(h):h}let c=r;a!==e&&(o?c=function(h,d){return r.call(this,or(h),d,e)}:r.length>2&&(c=function(h,d){return r.call(this,h,d,e)}));const u=l.call(a,c,i);return o&&n?n(u):u}function Kg(e,t,r,i){const n=Vu(e);let s=r;return n!==e&&(si(e)?r.length>3&&(s=function(a,o,l){return r.call(this,a,o,l,e)}):s=function(a,o,l){return r.call(this,a,or(o),l,e)}),n[t](s,...i)}function Vh(e,t,r){const i=ft(e);mr(i,"iterate",zo);const n=i[t](...r);return(n===-1||n===!1)&&hv(r[0])?(r[0]=ft(r[0]),i[t](...r)):n}function Ka(e,t,r=[]){ln(),sv();const i=ft(e)[t].apply(e,r);return av(),cn(),i}const tT=tv("__proto__,__v_isRef,__isVue"),Jb=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Oi));function rT(e){Oi(e)||(e=String(e));const t=ft(this);return mr(t,"has",e),t.hasOwnProperty(e)}class e1{constructor(t=!1,r=!1){this._isReadonly=t,this._isShallow=r}get(t,r,i){if(r==="__v_skip")return t.__v_skip;const n=this._isReadonly,s=this._isShallow;if(r==="__v_isReactive")return!n;if(r==="__v_isReadonly")return n;if(r==="__v_isShallow")return s;if(r==="__v_raw")return i===(n?s?dT:n1:s?i1:r1).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const a=Ge(t);if(!n){let l;if(a&&(l=Jx[r]))return l;if(r==="hasOwnProperty")return rT}const o=Reflect.get(t,r,br(t)?t:i);if((Oi(r)?Jb.has(r):tT(r))||(n||mr(t,"get",r),s))return o;if(br(o)){const l=a&&nv(r)?o:o.value;return n&&bt(l)?rp(l):l}return bt(o)?n?rp(o):fl(o):o}}class t1 extends e1{constructor(t=!1){super(!1,t)}set(t,r,i,n){let s=t[r];if(!this._isShallow){const l=On(s);if(!si(i)&&!On(i)&&(s=ft(s),i=ft(i)),!Ge(t)&&br(s)&&!br(i))return l||(s.value=i),!0}const a=Ge(t)&&nv(r)?Number(r)<t.length:vt(t,r),o=Reflect.set(t,r,i,br(t)?t:n);return t===ft(n)&&(a?Mn(i,s)&&en(t,"set",r,i):en(t,"add",r,i)),o}deleteProperty(t,r){const i=vt(t,r);t[r];const n=Reflect.deleteProperty(t,r);return n&&i&&en(t,"delete",r,void 0),n}has(t,r){const i=Reflect.has(t,r);return(!Oi(r)||!Jb.has(r))&&mr(t,"has",r),i}ownKeys(t){return mr(t,"iterate",Ge(t)?"length":Ss),Reflect.ownKeys(t)}}class iT extends e1{constructor(t=!1){super(!0,t)}set(t,r){return!0}deleteProperty(t,r){return!0}}const nT=new t1,sT=new iT,aT=new t1(!0);const tp=e=>e,$l=e=>Reflect.getPrototypeOf(e);function oT(e,t,r){return function(...i){const n=this.__v_raw,s=ft(n),a=ha(s),o=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,c=n[e](...i),u=r?tp:t?Hc:or;return!t&&mr(s,"iterate",l?ep:Ss),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:o?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function zl(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function lT(e,t){const r={get(n){const s=this.__v_raw,a=ft(s),o=ft(n);e||(Mn(n,o)&&mr(a,"get",n),mr(a,"get",o));const{has:l}=$l(a),c=t?tp:e?Hc:or;if(l.call(a,n))return c(s.get(n));if(l.call(a,o))return c(s.get(o));s!==a&&s.get(n)},get size(){const n=this.__v_raw;return!e&&mr(ft(n),"iterate",Ss),n.size},has(n){const s=this.__v_raw,a=ft(s),o=ft(n);return e||(Mn(n,o)&&mr(a,"has",n),mr(a,"has",o)),n===o?s.has(n):s.has(n)||s.has(o)},forEach(n,s){const a=this,o=a.__v_raw,l=ft(o),c=t?tp:e?Hc:or;return!e&&mr(l,"iterate",Ss),o.forEach((u,h)=>n.call(s,c(u),c(h),a))}};return ur(r,e?{add:zl("add"),set:zl("set"),delete:zl("delete"),clear:zl("clear")}:{add(n){!t&&!si(n)&&!On(n)&&(n=ft(n));const s=ft(this);return $l(s).has.call(s,n)||(s.add(n),en(s,"add",n,n)),this},set(n,s){!t&&!si(s)&&!On(s)&&(s=ft(s));const a=ft(this),{has:o,get:l}=$l(a);let c=o.call(a,n);c||(n=ft(n),c=o.call(a,n));const u=l.call(a,n);return a.set(n,s),c?Mn(s,u)&&en(a,"set",n,s):en(a,"add",n,s),this},delete(n){const s=ft(this),{has:a,get:o}=$l(s);let l=a.call(s,n);l||(n=ft(n),l=a.call(s,n)),o&&o.call(s,n);const c=s.delete(n);return l&&en(s,"delete",n,void 0),c},clear(){const n=ft(this),s=n.size!==0,a=n.clear();return s&&en(n,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=oT(n,e,t)}),r}function cv(e,t){const r=lT(e,t);return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(vt(r,n)&&n in i?r:i,n,s)}const cT={get:cv(!1,!1)},uT={get:cv(!1,!0)},hT={get:cv(!0,!1)};const r1=new WeakMap,i1=new WeakMap,n1=new WeakMap,dT=new WeakMap;function fT(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function pT(e){return e.__v_skip||!Object.isExtensible(e)?0:fT(Fx(e))}function fl(e){return On(e)?e:uv(e,!1,nT,cT,r1)}function vT(e){return uv(e,!1,aT,uT,i1)}function rp(e){return uv(e,!0,sT,hT,n1)}function uv(e,t,r,i,n){if(!bt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=pT(e);if(s===0)return e;const a=n.get(e);if(a)return a;const o=new Proxy(e,s===2?i:r);return n.set(e,o),o}function da(e){return On(e)?da(e.__v_raw):!!(e&&e.__v_isReactive)}function On(e){return!!(e&&e.__v_isReadonly)}function si(e){return!!(e&&e.__v_isShallow)}function hv(e){return e?!!e.__v_raw:!1}function ft(e){const t=e&&e.__v_raw;return t?ft(t):e}function gT(e){return!vt(e,"__v_skip")&&Object.isExtensible(e)&&Hb(e,"__v_skip",!0),e}const or=e=>bt(e)?fl(e):e,Hc=e=>bt(e)?rp(e):e;function br(e){return e?e.__v_isRef===!0:!1}function ia(e){return mT(e,!1)}function mT(e,t){return br(e)?e:new yT(e,t)}class yT{constructor(t,r){this.dep=new lv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=r?t:ft(t),this._value=r?t:or(t),this.__v_isShallow=r}get value(){return this.dep.track(),this._value}set value(t){const r=this._rawValue,i=this.__v_isShallow||si(t)||On(t);t=i?t:ft(t),Mn(t,r)&&(this._rawValue=t,this._value=i?t:or(t),this.dep.trigger())}}function _T(e){return br(e)?e.value:e}const bT={get:(e,t,r)=>t==="__v_raw"?e:_T(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return br(n)&&!br(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function s1(e){return da(e)?e:new Proxy(e,bT)}class CT{constructor(t,r,i){this.fn=t,this.setter=r,this._value=void 0,this.dep=new lv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$o-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!r,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&xt!==this)return Gb(this,!0),!0}get value(){const t=this.dep.track();return Xb(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function wT(e,t,r=!1){let i,n;return Qe(e)?i=e:(i=e.get,n=e.set),new CT(i,n,r)}const Hl={},qc=new WeakMap;let hs;function ST(e,t=!1,r=hs){if(r){let i=qc.get(r);i||qc.set(r,i=[]),i.push(e)}}function kT(e,t,r=wt){const{immediate:i,deep:n,once:s,scheduler:a,augmentJob:o,call:l}=r,c=b=>n?b:si(b)||n===!1||n===0?tn(b,1):tn(b);let u,h,d,p,y=!1,_=!1;if(br(e)?(h=()=>e.value,y=si(e)):da(e)?(h=()=>c(e),y=!0):Ge(e)?(_=!0,y=e.some(b=>da(b)||si(b)),h=()=>e.map(b=>{if(br(b))return b.value;if(da(b))return c(b);if(Qe(b))return l?l(b,2):b()})):Qe(e)?t?h=l?()=>l(e,2):e:h=()=>{if(d){ln();try{d()}finally{cn()}}const b=hs;hs=u;try{return l?l(e,3,[p]):e(p)}finally{hs=b}}:h=Pi,t&&n){const b=h,C=n===!0?1/0:n;h=()=>tn(b(),C)}const v=Xx(),g=()=>{u.stop(),v&&v.active&&iv(v.effects,u)};if(s&&t){const b=t;t=(...C)=>{b(...C),g()}}let f=_?new Array(e.length).fill(Hl):Hl;const m=b=>{if(!(!(u.flags&1)||!u.dirty&&!b))if(t){const C=u.run();if(n||y||(_?C.some((S,k)=>Mn(S,f[k])):Mn(C,f))){d&&d();const S=hs;hs=u;try{const k=[C,f===Hl?void 0:_&&f[0]===Hl?[]:f,p];f=C,l?l(t,3,k):t(...k)}finally{hs=S}}}else u.run()};return o&&o(m),u=new Vb(h),u.scheduler=a?()=>a(m,!1):m,p=b=>ST(b,!1,u),d=u.onStop=()=>{const b=qc.get(u);if(b){if(l)l(b,4);else for(const C of b)C();qc.delete(u)}},t?i?m(!0):f=u.run():a?a(m.bind(null,!0),!0):u.run(),g.pause=u.pause.bind(u),g.resume=u.resume.bind(u),g.stop=g,g}function tn(e,t=1/0,r){if(t<=0||!bt(e)||e.__v_skip||(r=r||new Map,(r.get(e)||0)>=t))return e;if(r.set(e,t),t--,br(e))tn(e.value,t,r);else if(Ge(e))for(let i=0;i<e.length;i++)tn(e[i],t,r);else if(zu(e)||ha(e))e.forEach(i=>{tn(i,t,r)});else if(zb(e)){for(const i in e)tn(e[i],t,r);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&tn(e[i],t,r)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function pl(e,t,r,i){try{return i?e(...i):e()}catch(n){ju(n,t,r)}}function _i(e,t,r,i){if(Qe(e)){const n=pl(e,t,r,i);return n&&Nb(n)&&n.catch(s=>{ju(s,t,r)}),n}if(Ge(e)){const n=[];for(let s=0;s<e.length;s++)n.push(_i(e[s],t,r,i));return n}}function ju(e,t,r,i=!0){const n=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||wt;if(t){let o=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${r}`;for(;o;){const u=o.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,l,c)===!1)return}o=o.parent}if(s){ln(),pl(s,null,10,[e,l,c]),cn();return}}xT(e,r,n,i,a)}function xT(e,t,r,i=!0,n=!1){if(n)throw e;console.error(e)}const Br=[];let Ai=-1;const fa=[];let Sn=null,ta=0;const a1=Promise.resolve();let Wc=null;function o1(e){const t=Wc||a1;return e?t.then(this?e.bind(this):e):t}function TT(e){let t=Ai+1,r=Br.length;for(;t<r;){const i=t+r>>>1,n=Br[i],s=Ho(n);s<e||s===e&&n.flags&2?t=i+1:r=i}return t}function dv(e){if(!(e.flags&1)){const t=Ho(e),r=Br[Br.length-1];!r||!(e.flags&2)&&t>=Ho(r)?Br.push(e):Br.splice(TT(t),0,e),e.flags|=1,l1()}}function l1(){Wc||(Wc=a1.then(u1))}function ET(e){Ge(e)?fa.push(...e):Sn&&e.id===-1?Sn.splice(ta+1,0,e):e.flags&1||(fa.push(e),e.flags|=1),l1()}function Yg(e,t,r=Ai+1){for(;r<Br.length;r++){const i=Br[r];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Br.splice(r,1),r--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function c1(e){if(fa.length){const t=[...new Set(fa)].sort((r,i)=>Ho(r)-Ho(i));if(fa.length=0,Sn){Sn.push(...t);return}for(Sn=t,ta=0;ta<Sn.length;ta++){const r=Sn[ta];r.flags&4&&(r.flags&=-2),r.flags&8||r(),r.flags&=-2}Sn=null,ta=0}}const Ho=e=>e.id==null?e.flags&2?-1:1/0:e.id;function u1(e){try{for(Ai=0;Ai<Br.length;Ai++){const t=Br[Ai];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),pl(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ai<Br.length;Ai++){const t=Br[Ai];t&&(t.flags&=-2)}Ai=-1,Br.length=0,c1(),Wc=null,(Br.length||fa.length)&&u1()}}let Vr=null,h1=null;function Uc(e){const t=Vr;return Vr=e,h1=e&&e.type.__scopeId||null,t}function d1(e,t=Vr,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&Gc(-1);const s=Uc(t);let a;try{a=e(...n)}finally{Uc(s),i._d&&Gc(1)}return a};return i._n=!0,i._c=!0,i._d=!0,i}function an(e,t){if(Vr===null)return e;const r=Zu(Vr),i=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[s,a,o,l=wt]=t[n];s&&(Qe(s)&&(s={mounted:s,updated:s}),s.deep&&tn(a),i.push({dir:s,instance:r,value:a,oldValue:void 0,arg:o,modifiers:l}))}return e}function ss(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let a=0;a<n.length;a++){const o=n[a];s&&(o.oldValue=s[a].value);let l=o.dir[i];l&&(ln(),_i(l,r,8,[e.el,o,e,t]),cn())}}const AT=Symbol("_vte"),f1=e=>e.__isTeleport,Qi=Symbol("_leaveCb"),ql=Symbol("_enterCb");function BT(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return fv(()=>{e.isMounted=!0}),C1(()=>{e.isUnmounting=!0}),e}const Jr=[Function,Array],p1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Jr,onEnter:Jr,onAfterEnter:Jr,onEnterCancelled:Jr,onBeforeLeave:Jr,onLeave:Jr,onAfterLeave:Jr,onLeaveCancelled:Jr,onBeforeAppear:Jr,onAppear:Jr,onAfterAppear:Jr,onAppearCancelled:Jr},v1=e=>{const t=e.subTree;return t.component?v1(t.component):t},DT={name:"BaseTransition",props:p1,setup(e,{slots:t}){const r=q1(),i=BT();return()=>{const n=t.default&&y1(t.default(),!0);if(!n||!n.length)return;const s=g1(n),a=ft(e),{mode:o}=a;if(i.isLeaving)return jh(s);const l=Xg(s);if(!l)return jh(s);let c=ip(l,a,i,r,h=>c=h);l.type!==Dr&&qo(l,c);let u=r.subTree&&Xg(r.subTree);if(u&&u.type!==Dr&&!gs(u,l)&&v1(r).type!==Dr){let h=ip(u,a,i,r);if(qo(u,h),o==="out-in"&&l.type!==Dr)return i.isLeaving=!0,h.afterLeave=()=>{i.isLeaving=!1,r.job.flags&8||r.update(),delete h.afterLeave,u=void 0},jh(s);o==="in-out"&&l.type!==Dr?h.delayLeave=(d,p,y)=>{const _=m1(i,u);_[String(u.key)]=u,d[Qi]=()=>{p(),d[Qi]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{y(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return s}}};function g1(e){let t=e[0];if(e.length>1){for(const r of e)if(r.type!==Dr){t=r;break}}return t}const LT=DT;function m1(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function ip(e,t,r,i,n){const{appear:s,mode:a,persisted:o=!1,onBeforeEnter:l,onEnter:c,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:p,onAfterLeave:y,onLeaveCancelled:_,onBeforeAppear:v,onAppear:g,onAfterAppear:f,onAppearCancelled:m}=t,b=String(e.key),C=m1(r,e),S=(x,A)=>{x&&_i(x,i,9,A)},k=(x,A)=>{const D=A[1];S(x,A),Ge(x)?x.every(T=>T.length<=1)&&D():x.length<=1&&D()},w={mode:a,persisted:o,beforeEnter(x){let A=l;if(!r.isMounted)if(s)A=v||l;else return;x[Qi]&&x[Qi](!0);const D=C[b];D&&gs(e,D)&&D.el[Qi]&&D.el[Qi](),S(A,[x])},enter(x){let A=c,D=u,T=h;if(!r.isMounted)if(s)A=g||c,D=f||u,T=m||h;else return;let E=!1;const R=x[ql]=F=>{E||(E=!0,F?S(T,[x]):S(D,[x]),w.delayedLeave&&w.delayedLeave(),x[ql]=void 0)};A?k(A,[x,R]):R()},leave(x,A){const D=String(e.key);if(x[ql]&&x[ql](!0),r.isUnmounting)return A();S(d,[x]);let T=!1;const E=x[Qi]=R=>{T||(T=!0,A(),R?S(_,[x]):S(y,[x]),x[Qi]=void 0,C[D]===e&&delete C[D])};C[D]=e,p?k(p,[x,E]):E()},clone(x){const A=ip(x,t,r,i,n);return n&&n(A),A}};return w}function jh(e){if(Gu(e))return e=Nn(e),e.children=null,e}function Xg(e){if(!Gu(e))return f1(e.type)&&e.children?g1(e.children):e;if(e.component)return e.component.subTree;const{shapeFlag:t,children:r}=e;if(r){if(t&16)return r[0];if(t&32&&Qe(r.default))return r.default()}}function qo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,qo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function y1(e,t=!1,r){let i=[],n=0;for(let s=0;s<e.length;s++){let a=e[s];const o=r==null?a.key:String(r)+String(a.key!=null?a.key:s);a.type===Pe?(a.patchFlag&128&&n++,i=i.concat(y1(a.children,t,o))):(t||a.type!==Dr)&&i.push(o!=null?Nn(a,{key:o}):a)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function _1(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Vc=new WeakMap;function So(e,t,r,i,n=!1){if(Ge(e)){e.forEach((y,_)=>So(y,t&&(Ge(t)?t[_]:t),r,i,n));return}if(ko(i)&&!n){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&So(e,t,r,i.component.subTree);return}const s=i.shapeFlag&4?Zu(i.component):i.el,a=n?null:s,{i:o,r:l}=e,c=t&&t.r,u=o.refs===wt?o.refs={}:o.refs,h=o.setupState,d=ft(h),p=h===wt?Ob:y=>vt(d,y);if(c!=null&&c!==l){if(Zg(t),zt(c))u[c]=null,p(c)&&(h[c]=null);else if(br(c)){c.value=null;const y=t;y.k&&(u[y.k]=null)}}if(Qe(l))pl(l,o,12,[a,u]);else{const y=zt(l),_=br(l);if(y||_){const v=()=>{if(e.f){const g=y?p(l)?h[l]:u[l]:l.value;if(n)Ge(g)&&iv(g,s);else if(Ge(g))g.includes(s)||g.push(s);else if(y)u[l]=[s],p(l)&&(h[l]=u[l]);else{const f=[s];l.value=f,e.k&&(u[e.k]=f)}}else y?(u[l]=a,p(l)&&(h[l]=a)):_&&(l.value=a,e.k&&(u[e.k]=a))};if(a){const g=()=>{v(),Vc.delete(e)};g.id=-1,Vc.set(e,g),Wr(g,r)}else Zg(e),v()}}}function Zg(e){const t=Vc.get(e);t&&(t.flags|=8,Vc.delete(e))}Wu().requestIdleCallback;Wu().cancelIdleCallback;const ko=e=>!!e.type.__asyncLoader,Gu=e=>e.type.__isKeepAlive;function RT(e,t){b1(e,"a",t)}function MT(e,t){b1(e,"da",t)}function b1(e,t,r=yr){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Ku(t,i,r),r){let n=r.parent;for(;n&&n.parent;)Gu(n.parent.vnode)&&PT(i,t,r,n),n=n.parent}}function PT(e,t,r,i){const n=Ku(t,e,i,!0);pv(()=>{iv(i[t],n)},r)}function Ku(e,t,r=yr,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...a)=>{ln();const o=vl(r),l=_i(t,r,e,a);return o(),cn(),l});return i?n.unshift(s):n.push(s),s}}const fn=e=>(t,r=yr)=>{(!Vo||e==="sp")&&Ku(e,(...i)=>t(...i),r)},IT=fn("bm"),fv=fn("m"),FT=fn("bu"),OT=fn("u"),C1=fn("bum"),pv=fn("um"),NT=fn("sp"),$T=fn("rtg"),zT=fn("rtc");function HT(e,t=yr){Ku("ec",e,t)}const qT="components";function ot(e,t){return UT(qT,e,!0,t)||e}const WT=Symbol.for("v-ndc");function UT(e,t,r=!0,i=!1){const n=Vr||yr;if(n){const s=n.type;{const o=LE(s,!1);if(o&&(o===t||o===ai(t)||o===qu(ai(t))))return s}const a=Qg(n[e]||s[e],t)||Qg(n.appContext[e],t);return!a&&i?s:a}}function Qg(e,t){return e&&(e[t]||e[ai(t)]||e[qu(ai(t))])}function Ke(e,t,r,i){let n;const s=r,a=Ge(e);if(a||zt(e)){const o=a&&da(e);let l=!1,c=!1;o&&(l=!si(e),c=On(e),e=Vu(e)),n=new Array(e.length);for(let u=0,h=e.length;u<h;u++)n[u]=t(l?c?Hc(or(e[u])):or(e[u]):e[u],u,void 0,s)}else if(typeof e=="number"){n=new Array(e);for(let o=0;o<e;o++)n[o]=t(o+1,o,void 0,s)}else if(bt(e))if(e[Symbol.iterator])n=Array.from(e,(o,l)=>t(o,l,void 0,s));else{const o=Object.keys(e);n=new Array(o.length);for(let l=0,c=o.length;l<c;l++){const u=o[l];n[l]=t(e[u],u,l,s)}}else n=[];return n}const np=e=>e?W1(e)?Zu(e):np(e.parent):null,xo=ur(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>np(e.parent),$root:e=>np(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>S1(e),$forceUpdate:e=>e.f||(e.f=()=>{dv(e.update)}),$nextTick:e=>e.n||(e.n=o1.bind(e.proxy)),$watch:e=>dE.bind(e)}),Gh=(e,t)=>e!==wt&&!e.__isScriptSetup&&vt(e,t),VT={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:r,setupState:i,data:n,props:s,accessCache:a,type:o,appContext:l}=e;let c;if(t[0]!=="$"){const p=a[t];if(p!==void 0)switch(p){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(Gh(i,t))return a[t]=1,i[t];if(n!==wt&&vt(n,t))return a[t]=2,n[t];if((c=e.propsOptions[0])&&vt(c,t))return a[t]=3,s[t];if(r!==wt&&vt(r,t))return a[t]=4,r[t];sp&&(a[t]=0)}}const u=xo[t];let h,d;if(u)return t==="$attrs"&&mr(e.attrs,"get",""),u(e);if((h=o.__cssModules)&&(h=h[t]))return h;if(r!==wt&&vt(r,t))return a[t]=4,r[t];if(d=l.config.globalProperties,vt(d,t))return d[t]},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return Gh(n,t)?(n[t]=r,!0):i!==wt&&vt(i,t)?(i[t]=r,!0):vt(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s,type:a}},o){let l,c;return!!(r[o]||e!==wt&&o[0]!=="$"&&vt(e,o)||Gh(t,o)||(l=s[0])&&vt(l,o)||vt(i,o)||vt(xo,o)||vt(n.config.globalProperties,o)||(c=a.__cssModules)&&c[o])},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:vt(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};function Jg(e){return Ge(e)?e.reduce((t,r)=>(t[r]=null,t),{}):e}let sp=!0;function jT(e){const t=S1(e),r=e.proxy,i=e.ctx;sp=!1,t.beforeCreate&&em(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:a,watch:o,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:p,updated:y,activated:_,deactivated:v,beforeDestroy:g,beforeUnmount:f,destroyed:m,unmounted:b,render:C,renderTracked:S,renderTriggered:k,errorCaptured:w,serverPrefetch:x,expose:A,inheritAttrs:D,components:T,directives:E,filters:R}=t;if(c&&GT(c,i,null),a)for(const $ in a){const H=a[$];Qe(H)&&(i[$]=H.bind(r))}if(n){const $=n.call(r,r);bt($)&&(e.data=fl($))}if(sp=!0,s)for(const $ in s){const H=s[$],L=Qe(H)?H.bind(r,r):Qe(H.get)?H.get.bind(r,r):Pi,I=!Qe(H)&&Qe(H.set)?H.set.bind(r):Pi,P=Lt({get:L,set:I});Object.defineProperty(i,$,{enumerable:!0,configurable:!0,get:()=>P.value,set:z=>P.value=z})}if(o)for(const $ in o)w1(o[$],i,r,$);if(l){const $=Qe(l)?l.call(r):l;Reflect.ownKeys($).forEach(H=>{JT(H,$[H])})}u&&em(u,e,"c");function O($,H){Ge(H)?H.forEach(L=>$(L.bind(r))):H&&$(H.bind(r))}if(O(IT,h),O(fv,d),O(FT,p),O(OT,y),O(RT,_),O(MT,v),O(HT,w),O(zT,S),O($T,k),O(C1,f),O(pv,b),O(NT,x),Ge(A))if(A.length){const $=e.exposed||(e.exposed={});A.forEach(H=>{Object.defineProperty($,H,{get:()=>r[H],set:L=>r[H]=L,enumerable:!0})})}else e.exposed||(e.exposed={});C&&e.render===Pi&&(e.render=C),D!=null&&(e.inheritAttrs=D),T&&(e.components=T),E&&(e.directives=E),x&&_1(e)}function GT(e,t,r=Pi){Ge(e)&&(e=ap(e));for(const i in e){const n=e[i];let s;bt(n)?"default"in n?s=pc(n.from||i,n.default,!0):s=pc(n.from||i):s=pc(n),br(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:a=>s.value=a}):t[i]=s}}function em(e,t,r){_i(Ge(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function w1(e,t,r,i){let n=i.includes(".")?F1(r,i):()=>r[i];if(zt(e)){const s=t[e];Qe(s)&&va(n,s)}else if(Qe(e))va(n,e.bind(r));else if(bt(e))if(Ge(e))e.forEach(s=>w1(s,t,r,i));else{const s=Qe(e.handler)?e.handler.bind(r):t[e.handler];Qe(s)&&va(n,s,e)}}function S1(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:a}}=e.appContext,o=s.get(t);let l;return o?l=o:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(c=>jc(l,c,a,!0)),jc(l,t,a)),bt(t)&&s.set(t,l),l}function jc(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&jc(e,s,r,!0),n&&n.forEach(a=>jc(e,a,r,!0));for(const a in t)if(!(i&&a==="expose")){const o=KT[a]||r&&r[a];e[a]=o?o(e[a],t[a]):t[a]}return e}const KT={data:tm,props:rm,emits:rm,methods:ho,computed:ho,beforeCreate:Er,created:Er,beforeMount:Er,mounted:Er,beforeUpdate:Er,updated:Er,beforeDestroy:Er,beforeUnmount:Er,destroyed:Er,unmounted:Er,activated:Er,deactivated:Er,errorCaptured:Er,serverPrefetch:Er,components:ho,directives:ho,watch:XT,provide:tm,inject:YT};function tm(e,t){return t?e?function(){return ur(Qe(e)?e.call(this,this):e,Qe(t)?t.call(this,this):t)}:t:e}function YT(e,t){return ho(ap(e),ap(t))}function ap(e){if(Ge(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Er(e,t){return e?[...new Set([].concat(e,t))]:t}function ho(e,t){return e?ur(Object.create(null),e,t):t}function rm(e,t){return e?Ge(e)&&Ge(t)?[...new Set([...e,...t])]:ur(Object.create(null),Jg(e),Jg(t??{})):t}function XT(e,t){if(!e)return t;if(!t)return e;const r=ur(Object.create(null),e);for(const i in t)r[i]=Er(e[i],t[i]);return r}function k1(){return{app:null,config:{isNativeTag:Ob,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ZT=0;function QT(e,t){return function(i,n=null){Qe(i)||(i=ur({},i)),n!=null&&!bt(n)&&(n=null);const s=k1(),a=new WeakSet,o=[];let l=!1;const c=s.app={_uid:ZT++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:PE,get config(){return s.config},set config(u){},use(u,...h){return a.has(u)||(u&&Qe(u.install)?(a.add(u),u.install(c,...h)):Qe(u)&&(a.add(u),u(c,...h))),c},mixin(u){return s.mixins.includes(u)||s.mixins.push(u),c},component(u,h){return h?(s.components[u]=h,c):s.components[u]},directive(u,h){return h?(s.directives[u]=h,c):s.directives[u]},mount(u,h,d){if(!l){const p=c._ceVNode||st(i,n);return p.appContext=s,d===!0?d="svg":d===!1&&(d=void 0),e(p,u,d),l=!0,c._container=u,u.__vue_app__=c,Zu(p.component)}},onUnmount(u){o.push(u)},unmount(){l&&(_i(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(u,h){return s.provides[u]=h,c},runWithContext(u){const h=pa;pa=c;try{return u()}finally{pa=h}}};return c}}let pa=null;function JT(e,t){if(yr){let r=yr.provides;const i=yr.parent&&yr.parent.provides;i===r&&(r=yr.provides=Object.create(i)),r[e]=t}}function pc(e,t,r=!1){const i=q1();if(i||pa){let n=pa?pa._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return r&&Qe(t)?t.call(i&&i.proxy):t}}const x1={},T1=()=>Object.create(x1),E1=e=>Object.getPrototypeOf(e)===x1;function eE(e,t,r,i=!1){const n={},s=T1();e.propsDefaults=Object.create(null),A1(e,t,n,s);for(const a in e.propsOptions[0])a in n||(n[a]=void 0);r?e.props=i?n:vT(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function tE(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:a}}=e,o=ft(n),[l]=e.propsOptions;let c=!1;if((i||a>0)&&!(a&16)){if(a&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(Yu(e.emitsOptions,d))continue;const p=t[d];if(l)if(vt(s,d))p!==s[d]&&(s[d]=p,c=!0);else{const y=ai(d);n[y]=op(l,o,y,p,e,!1)}else p!==s[d]&&(s[d]=p,c=!0)}}}else{A1(e,t,n,s)&&(c=!0);let u;for(const h in o)(!t||!vt(t,h)&&((u=Kn(h))===h||!vt(t,u)))&&(l?r&&(r[h]!==void 0||r[u]!==void 0)&&(n[h]=op(l,o,h,void 0,e,!0)):delete n[h]);if(s!==o)for(const h in s)(!t||!vt(t,h))&&(delete s[h],c=!0)}c&&en(e.attrs,"set","")}function A1(e,t,r,i){const[n,s]=e.propsOptions;let a=!1,o;if(t)for(let l in t){if(bo(l))continue;const c=t[l];let u;n&&vt(n,u=ai(l))?!s||!s.includes(u)?r[u]=c:(o||(o={}))[u]=c:Yu(e.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,a=!0)}if(s){const l=ft(r),c=o||wt;for(let u=0;u<s.length;u++){const h=s[u];r[h]=op(n,l,h,c[h],e,!vt(c,h))}}return a}function op(e,t,r,i,n,s){const a=e[r];if(a!=null){const o=vt(a,"default");if(o&&i===void 0){const l=a.default;if(a.type!==Function&&!a.skipFactory&&Qe(l)){const{propsDefaults:c}=n;if(r in c)i=c[r];else{const u=vl(n);i=c[r]=l.call(null,t),u()}}else i=l;n.ce&&n.ce._setProp(r,i)}a[0]&&(s&&!o?i=!1:a[1]&&(i===""||i===Kn(r))&&(i=!0))}return i}const rE=new WeakMap;function B1(e,t,r=!1){const i=r?rE:t.propsCache,n=i.get(e);if(n)return n;const s=e.props,a={},o=[];let l=!1;if(!Qe(e)){const u=h=>{l=!0;const[d,p]=B1(h,t,!0);ur(a,d),p&&o.push(...p)};!r&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!s&&!l)return bt(e)&&i.set(e,ua),ua;if(Ge(s))for(let u=0;u<s.length;u++){const h=ai(s[u]);im(h)&&(a[h]=wt)}else if(s)for(const u in s){const h=ai(u);if(im(h)){const d=s[u],p=a[h]=Ge(d)||Qe(d)?{type:d}:ur({},d),y=p.type;let _=!1,v=!0;if(Ge(y))for(let g=0;g<y.length;++g){const f=y[g],m=Qe(f)&&f.name;if(m==="Boolean"){_=!0;break}else m==="String"&&(v=!1)}else _=Qe(y)&&y.name==="Boolean";p[0]=_,p[1]=v,(_||vt(p,"default"))&&o.push(h)}}const c=[a,o];return bt(e)&&i.set(e,c),c}function im(e){return e[0]!=="$"&&!bo(e)}const vv=e=>e==="_"||e==="_ctx"||e==="$stable",gv=e=>Ge(e)?e.map(Di):[Di(e)],iE=(e,t,r)=>{if(t._n)return t;const i=d1((...n)=>gv(t(...n)),r);return i._c=!1,i},D1=(e,t,r)=>{const i=e._ctx;for(const n in e){if(vv(n))continue;const s=e[n];if(Qe(s))t[n]=iE(n,s,i);else if(s!=null){const a=gv(s);t[n]=()=>a}}},L1=(e,t)=>{const r=gv(t);e.slots.default=()=>r},R1=(e,t,r)=>{for(const i in t)(r||!vv(i))&&(e[i]=t[i])},nE=(e,t,r)=>{const i=e.slots=T1();if(e.vnode.shapeFlag&32){const n=t._;n?(R1(i,t,r),r&&Hb(i,"_",n,!0)):D1(t,i)}else t&&L1(e,t)},sE=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,a=wt;if(i.shapeFlag&32){const o=t._;o?r&&o===1?s=!1:R1(n,t,r):(s=!t.$stable,D1(t,n)),a=t}else t&&(L1(e,t),a={default:1});if(s)for(const o in n)!vv(o)&&a[o]==null&&delete n[o]},Wr=bE;function aE(e){return oE(e)}function oE(e,t){const r=Wu();r.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:a,createText:o,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:p=Pi,insertStaticContent:y}=e,_=(M,q,Q,se=null,Z=null,Y=null,ae=void 0,he=null,ce=!!q.dynamicChildren)=>{if(M===q)return;M&&!gs(M,q)&&(se=V(M),z(M,Z,Y,!0),M=null),q.patchFlag===-2&&(ce=!1,q.dynamicChildren=null);const{type:ue,ref:ye,shapeFlag:ve}=q;switch(ue){case Xu:v(M,q,Q,se);break;case Dr:g(M,q,Q,se);break;case vc:M==null&&f(q,Q,se,ae);break;case Pe:T(M,q,Q,se,Z,Y,ae,he,ce);break;default:ve&1?C(M,q,Q,se,Z,Y,ae,he,ce):ve&6?E(M,q,Q,se,Z,Y,ae,he,ce):(ve&64||ve&128)&&ue.process(M,q,Q,se,Z,Y,ae,he,ce,U)}ye!=null&&Z?So(ye,M&&M.ref,Y,q||M,!q):ye==null&&M&&M.ref!=null&&So(M.ref,null,Y,M,!0)},v=(M,q,Q,se)=>{if(M==null)i(q.el=o(q.children),Q,se);else{const Z=q.el=M.el;q.children!==M.children&&c(Z,q.children)}},g=(M,q,Q,se)=>{M==null?i(q.el=l(q.children||""),Q,se):q.el=M.el},f=(M,q,Q,se)=>{[M.el,M.anchor]=y(M.children,q,Q,se,M.el,M.anchor)},m=({el:M,anchor:q},Q,se)=>{let Z;for(;M&&M!==q;)Z=d(M),i(M,Q,se),M=Z;i(q,Q,se)},b=({el:M,anchor:q})=>{let Q;for(;M&&M!==q;)Q=d(M),n(M),M=Q;n(q)},C=(M,q,Q,se,Z,Y,ae,he,ce)=>{q.type==="svg"?ae="svg":q.type==="math"&&(ae="mathml"),M==null?S(q,Q,se,Z,Y,ae,he,ce):x(M,q,Z,Y,ae,he,ce)},S=(M,q,Q,se,Z,Y,ae,he)=>{let ce,ue;const{props:ye,shapeFlag:ve,transition:_e,dirs:Ce}=M;if(ce=M.el=a(M.type,Y,ye&&ye.is,ye),ve&8?u(ce,M.children):ve&16&&w(M.children,ce,null,se,Z,Kh(M,Y),ae,he),Ce&&ss(M,null,se,"created"),k(ce,M,M.scopeId,ae,se),ye){for(const Me in ye)Me!=="value"&&!bo(Me)&&s(ce,Me,null,ye[Me],Y,se);"value"in ye&&s(ce,"value",null,ye.value,Y),(ue=ye.onVnodeBeforeMount)&&ki(ue,se,M)}Ce&&ss(M,null,se,"beforeMount");const ke=lE(Z,_e);ke&&_e.beforeEnter(ce),i(ce,q,Q),((ue=ye&&ye.onVnodeMounted)||ke||Ce)&&Wr(()=>{ue&&ki(ue,se,M),ke&&_e.enter(ce),Ce&&ss(M,null,se,"mounted")},Z)},k=(M,q,Q,se,Z)=>{if(Q&&p(M,Q),se)for(let Y=0;Y<se.length;Y++)p(M,se[Y]);if(Z){let Y=Z.subTree;if(q===Y||N1(Y.type)&&(Y.ssContent===q||Y.ssFallback===q)){const ae=Z.vnode;k(M,ae,ae.scopeId,ae.slotScopeIds,Z.parent)}}},w=(M,q,Q,se,Z,Y,ae,he,ce=0)=>{for(let ue=ce;ue<M.length;ue++){const ye=M[ue]=he?kn(M[ue]):Di(M[ue]);_(null,ye,q,Q,se,Z,Y,ae,he)}},x=(M,q,Q,se,Z,Y,ae)=>{const he=q.el=M.el;let{patchFlag:ce,dynamicChildren:ue,dirs:ye}=q;ce|=M.patchFlag&16;const ve=M.props||wt,_e=q.props||wt;let Ce;if(Q&&as(Q,!1),(Ce=_e.onVnodeBeforeUpdate)&&ki(Ce,Q,q,M),ye&&ss(q,M,Q,"beforeUpdate"),Q&&as(Q,!0),(ve.innerHTML&&_e.innerHTML==null||ve.textContent&&_e.textContent==null)&&u(he,""),ue?A(M.dynamicChildren,ue,he,Q,se,Kh(q,Z),Y):ae||H(M,q,he,null,Q,se,Kh(q,Z),Y,!1),ce>0){if(ce&16)D(he,ve,_e,Q,Z);else if(ce&2&&ve.class!==_e.class&&s(he,"class",null,_e.class,Z),ce&4&&s(he,"style",ve.style,_e.style,Z),ce&8){const ke=q.dynamicProps;for(let Me=0;Me<ke.length;Me++){const Ae=ke[Me],We=ve[Ae],Ee=_e[Ae];(Ee!==We||Ae==="value")&&s(he,Ae,We,Ee,Z,Q)}}ce&1&&M.children!==q.children&&u(he,q.children)}else!ae&&ue==null&&D(he,ve,_e,Q,Z);((Ce=_e.onVnodeUpdated)||ye)&&Wr(()=>{Ce&&ki(Ce,Q,q,M),ye&&ss(q,M,Q,"updated")},se)},A=(M,q,Q,se,Z,Y,ae)=>{for(let he=0;he<q.length;he++){const ce=M[he],ue=q[he],ye=ce.el&&(ce.type===Pe||!gs(ce,ue)||ce.shapeFlag&198)?h(ce.el):Q;_(ce,ue,ye,null,se,Z,Y,ae,!0)}},D=(M,q,Q,se,Z)=>{if(q!==Q){if(q!==wt)for(const Y in q)!bo(Y)&&!(Y in Q)&&s(M,Y,q[Y],null,Z,se);for(const Y in Q){if(bo(Y))continue;const ae=Q[Y],he=q[Y];ae!==he&&Y!=="value"&&s(M,Y,he,ae,Z,se)}"value"in Q&&s(M,"value",q.value,Q.value,Z)}},T=(M,q,Q,se,Z,Y,ae,he,ce)=>{const ue=q.el=M?M.el:o(""),ye=q.anchor=M?M.anchor:o("");let{patchFlag:ve,dynamicChildren:_e,slotScopeIds:Ce}=q;Ce&&(he=he?he.concat(Ce):Ce),M==null?(i(ue,Q,se),i(ye,Q,se),w(q.children||[],Q,ye,Z,Y,ae,he,ce)):ve>0&&ve&64&&_e&&M.dynamicChildren?(A(M.dynamicChildren,_e,Q,Z,Y,ae,he),(q.key!=null||Z&&q===Z.subTree)&&M1(M,q,!0)):H(M,q,Q,ye,Z,Y,ae,he,ce)},E=(M,q,Q,se,Z,Y,ae,he,ce)=>{q.slotScopeIds=he,M==null?q.shapeFlag&512?Z.ctx.activate(q,Q,se,ae,ce):R(q,Q,se,Z,Y,ae,ce):F(M,q,ce)},R=(M,q,Q,se,Z,Y,ae)=>{const he=M.component=TE(M,se,Z);if(Gu(M)&&(he.ctx.renderer=U),EE(he,!1,ae),he.asyncDep){if(Z&&Z.registerDep(he,O,ae),!M.el){const ce=he.subTree=st(Dr);g(null,ce,q,Q),M.placeholder=ce.el}}else O(he,M,q,Q,Z,Y,ae)},F=(M,q,Q)=>{const se=q.component=M.component;if(yE(M,q,Q))if(se.asyncDep&&!se.asyncResolved){$(se,q,Q);return}else se.next=q,se.update();else q.el=M.el,se.vnode=q},O=(M,q,Q,se,Z,Y,ae)=>{const he=()=>{if(M.isMounted){let{next:ve,bu:_e,u:Ce,parent:ke,vnode:Me}=M;{const de=P1(M);if(de){ve&&(ve.el=Me.el,$(M,ve,ae)),de.asyncDep.then(()=>{M.isUnmounted||he()});return}}let Ae=ve,We;as(M,!1),ve?(ve.el=Me.el,$(M,ve,ae)):ve=Me,_e&&fc(_e),(We=ve.props&&ve.props.onVnodeBeforeUpdate)&&ki(We,ke,ve,Me),as(M,!0);const Ee=sm(M),Se=M.subTree;M.subTree=Ee,_(Se,Ee,h(Se.el),V(Se),M,Z,Y),ve.el=Ee.el,Ae===null&&_E(M,Ee.el),Ce&&Wr(Ce,Z),(We=ve.props&&ve.props.onVnodeUpdated)&&Wr(()=>ki(We,ke,ve,Me),Z)}else{let ve;const{el:_e,props:Ce}=q,{bm:ke,m:Me,parent:Ae,root:We,type:Ee}=M,Se=ko(q);as(M,!1),ke&&fc(ke),!Se&&(ve=Ce&&Ce.onVnodeBeforeMount)&&ki(ve,Ae,q),as(M,!0);{We.ce&&We.ce._def.shadowRoot!==!1&&We.ce._injectChildStyle(Ee);const de=M.subTree=sm(M);_(null,de,Q,se,M,Z,Y),q.el=de.el}if(Me&&Wr(Me,Z),!Se&&(ve=Ce&&Ce.onVnodeMounted)){const de=q;Wr(()=>ki(ve,Ae,de),Z)}(q.shapeFlag&256||Ae&&ko(Ae.vnode)&&Ae.vnode.shapeFlag&256)&&M.a&&Wr(M.a,Z),M.isMounted=!0,q=Q=se=null}};M.scope.on();const ce=M.effect=new Vb(he);M.scope.off();const ue=M.update=ce.run.bind(ce),ye=M.job=ce.runIfDirty.bind(ce);ye.i=M,ye.id=M.uid,ce.scheduler=()=>dv(ye),as(M,!0),ue()},$=(M,q,Q)=>{q.component=M;const se=M.vnode.props;M.vnode=q,M.next=null,tE(M,q.props,se,Q),sE(M,q.children,Q),ln(),Yg(M),cn()},H=(M,q,Q,se,Z,Y,ae,he,ce=!1)=>{const ue=M&&M.children,ye=M?M.shapeFlag:0,ve=q.children,{patchFlag:_e,shapeFlag:Ce}=q;if(_e>0){if(_e&128){I(ue,ve,Q,se,Z,Y,ae,he,ce);return}else if(_e&256){L(ue,ve,Q,se,Z,Y,ae,he,ce);return}}Ce&8?(ye&16&&ne(ue,Z,Y),ve!==ue&&u(Q,ve)):ye&16?Ce&16?I(ue,ve,Q,se,Z,Y,ae,he,ce):ne(ue,Z,Y,!0):(ye&8&&u(Q,""),Ce&16&&w(ve,Q,se,Z,Y,ae,he,ce))},L=(M,q,Q,se,Z,Y,ae,he,ce)=>{M=M||ua,q=q||ua;const ue=M.length,ye=q.length,ve=Math.min(ue,ye);let _e;for(_e=0;_e<ve;_e++){const Ce=q[_e]=ce?kn(q[_e]):Di(q[_e]);_(M[_e],Ce,Q,null,Z,Y,ae,he,ce)}ue>ye?ne(M,Z,Y,!0,!1,ve):w(q,Q,se,Z,Y,ae,he,ce,ve)},I=(M,q,Q,se,Z,Y,ae,he,ce)=>{let ue=0;const ye=q.length;let ve=M.length-1,_e=ye-1;for(;ue<=ve&&ue<=_e;){const Ce=M[ue],ke=q[ue]=ce?kn(q[ue]):Di(q[ue]);if(gs(Ce,ke))_(Ce,ke,Q,null,Z,Y,ae,he,ce);else break;ue++}for(;ue<=ve&&ue<=_e;){const Ce=M[ve],ke=q[_e]=ce?kn(q[_e]):Di(q[_e]);if(gs(Ce,ke))_(Ce,ke,Q,null,Z,Y,ae,he,ce);else break;ve--,_e--}if(ue>ve){if(ue<=_e){const Ce=_e+1,ke=Ce<ye?q[Ce].el:se;for(;ue<=_e;)_(null,q[ue]=ce?kn(q[ue]):Di(q[ue]),Q,ke,Z,Y,ae,he,ce),ue++}}else if(ue>_e)for(;ue<=ve;)z(M[ue],Z,Y,!0),ue++;else{const Ce=ue,ke=ue,Me=new Map;for(ue=ke;ue<=_e;ue++){const fe=q[ue]=ce?kn(q[ue]):Di(q[ue]);fe.key!=null&&Me.set(fe.key,ue)}let Ae,We=0;const Ee=_e-ke+1;let Se=!1,de=0;const W=new Array(Ee);for(ue=0;ue<Ee;ue++)W[ue]=0;for(ue=Ce;ue<=ve;ue++){const fe=M[ue];if(We>=Ee){z(fe,Z,Y,!0);continue}let pe;if(fe.key!=null)pe=Me.get(fe.key);else for(Ae=ke;Ae<=_e;Ae++)if(W[Ae-ke]===0&&gs(fe,q[Ae])){pe=Ae;break}pe===void 0?z(fe,Z,Y,!0):(W[pe-ke]=ue+1,pe>=de?de=pe:Se=!0,_(fe,q[pe],Q,null,Z,Y,ae,he,ce),We++)}const oe=Se?cE(W):ua;for(Ae=oe.length-1,ue=Ee-1;ue>=0;ue--){const fe=ke+ue,pe=q[fe],ge=q[fe+1],De=fe+1<ye?ge.el||ge.placeholder:se;W[ue]===0?_(null,pe,Q,De,Z,Y,ae,he,ce):Se&&(Ae<0||ue!==oe[Ae]?P(pe,Q,De,2):Ae--)}}},P=(M,q,Q,se,Z=null)=>{const{el:Y,type:ae,transition:he,children:ce,shapeFlag:ue}=M;if(ue&6){P(M.component.subTree,q,Q,se);return}if(ue&128){M.suspense.move(q,Q,se);return}if(ue&64){ae.move(M,q,Q,U);return}if(ae===Pe){i(Y,q,Q);for(let ve=0;ve<ce.length;ve++)P(ce[ve],q,Q,se);i(M.anchor,q,Q);return}if(ae===vc){m(M,q,Q);return}if(se!==2&&ue&1&&he)if(se===0)he.beforeEnter(Y),i(Y,q,Q),Wr(()=>he.enter(Y),Z);else{const{leave:ve,delayLeave:_e,afterLeave:Ce}=he,ke=()=>{M.ctx.isUnmounted?n(Y):i(Y,q,Q)},Me=()=>{Y._isLeaving&&Y[Qi](!0),ve(Y,()=>{ke(),Ce&&Ce()})};_e?_e(Y,ke,Me):Me()}else i(Y,q,Q)},z=(M,q,Q,se=!1,Z=!1)=>{const{type:Y,props:ae,ref:he,children:ce,dynamicChildren:ue,shapeFlag:ye,patchFlag:ve,dirs:_e,cacheIndex:Ce}=M;if(ve===-2&&(Z=!1),he!=null&&(ln(),So(he,null,Q,M,!0),cn()),Ce!=null&&(q.renderCache[Ce]=void 0),ye&256){q.ctx.deactivate(M);return}const ke=ye&1&&_e,Me=!ko(M);let Ae;if(Me&&(Ae=ae&&ae.onVnodeBeforeUnmount)&&ki(Ae,q,M),ye&6)J(M.component,Q,se);else{if(ye&128){M.suspense.unmount(Q,se);return}ke&&ss(M,null,q,"beforeUnmount"),ye&64?M.type.remove(M,q,Q,U,se):ue&&!ue.hasOnce&&(Y!==Pe||ve>0&&ve&64)?ne(ue,q,Q,!1,!0):(Y===Pe&&ve&384||!Z&&ye&16)&&ne(ce,q,Q),se&&K(M)}(Me&&(Ae=ae&&ae.onVnodeUnmounted)||ke)&&Wr(()=>{Ae&&ki(Ae,q,M),ke&&ss(M,null,q,"unmounted")},Q)},K=M=>{const{type:q,el:Q,anchor:se,transition:Z}=M;if(q===Pe){te(Q,se);return}if(q===vc){b(M);return}const Y=()=>{n(Q),Z&&!Z.persisted&&Z.afterLeave&&Z.afterLeave()};if(M.shapeFlag&1&&Z&&!Z.persisted){const{leave:ae,delayLeave:he}=Z,ce=()=>ae(Q,Y);he?he(M.el,Y,ce):ce()}else Y()},te=(M,q)=>{let Q;for(;M!==q;)Q=d(M),n(M),M=Q;n(q)},J=(M,q,Q)=>{const{bum:se,scope:Z,job:Y,subTree:ae,um:he,m:ce,a:ue}=M;nm(ce),nm(ue),se&&fc(se),Z.stop(),Y&&(Y.flags|=8,z(ae,M,q,Q)),he&&Wr(he,q),Wr(()=>{M.isUnmounted=!0},q)},ne=(M,q,Q,se=!1,Z=!1,Y=0)=>{for(let ae=Y;ae<M.length;ae++)z(M[ae],q,Q,se,Z)},V=M=>{if(M.shapeFlag&6)return V(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const q=d(M.anchor||M.el),Q=q&&q[AT];return Q?d(Q):q};let N=!1;const ee=(M,q,Q)=>{M==null?q._vnode&&z(q._vnode,null,null,!0):_(q._vnode||null,M,q,null,null,null,Q),q._vnode=M,N||(N=!0,Yg(),c1(),N=!1)},U={p:_,um:z,m:P,r:K,mt:R,mc:w,pc:H,pbc:A,n:V,o:e};return{render:ee,hydrate:void 0,createApp:QT(ee)}}function Kh({type:e,props:t},r){return r==="svg"&&e==="foreignObject"||r==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:r}function as({effect:e,job:t},r){r?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function lE(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function M1(e,t,r=!1){const i=e.children,n=t.children;if(Ge(i)&&Ge(n))for(let s=0;s<i.length;s++){const a=i[s];let o=n[s];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=n[s]=kn(n[s]),o.el=a.el),!r&&o.patchFlag!==-2&&M1(a,o)),o.type===Xu&&o.patchFlag!==-1&&(o.el=a.el),o.type===Dr&&!o.el&&(o.el=a.el)}}function cE(e){const t=e.slice(),r=[0];let i,n,s,a,o;const l=e.length;for(i=0;i<l;i++){const c=e[i];if(c!==0){if(n=r[r.length-1],e[n]<c){t[i]=n,r.push(i);continue}for(s=0,a=r.length-1;s<a;)o=s+a>>1,e[r[o]]<c?s=o+1:a=o;c<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,a=r[s-1];s-- >0;)r[s]=a,a=t[a];return r}function P1(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:P1(t)}function nm(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const uE=Symbol.for("v-scx"),hE=()=>pc(uE);function va(e,t,r){return I1(e,t,r)}function I1(e,t,r=wt){const{immediate:i,deep:n,flush:s,once:a}=r,o=ur({},r),l=t&&i||!t&&s!=="post";let c;if(Vo){if(s==="sync"){const p=hE();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Pi,p.resume=Pi,p.pause=Pi,p}}const u=yr;o.call=(p,y,_)=>_i(p,u,y,_);let h=!1;s==="post"?o.scheduler=p=>{Wr(p,u&&u.suspense)}:s!=="sync"&&(h=!0,o.scheduler=(p,y)=>{y?p():dv(p)}),o.augmentJob=p=>{t&&(p.flags|=4),h&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const d=kT(e,t,o);return Vo&&(c?c.push(d):l&&d()),d}function dE(e,t,r){const i=this.proxy,n=zt(e)?e.includes(".")?F1(i,e):()=>i[e]:e.bind(i,i);let s;Qe(t)?s=t:(s=t.handler,r=t);const a=vl(this),o=I1(n,s.bind(i),r);return a(),o}function F1(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}const fE=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${ai(t)}Modifiers`]||e[`${Kn(t)}Modifiers`];function pE(e,t,...r){if(e.isUnmounted)return;const i=e.vnode.props||wt;let n=r;const s=t.startsWith("update:"),a=s&&fE(i,t.slice(7));a&&(a.trim&&(n=r.map(u=>zt(u)?u.trim():u)),a.number&&(n=r.map(zc)));let o,l=i[o=Hh(t)]||i[o=Hh(ai(t))];!l&&s&&(l=i[o=Hh(Kn(t))]),l&&_i(l,e,6,n);const c=i[o+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[o])return;e.emitted[o]=!0,_i(c,e,6,n)}}const vE=new WeakMap;function O1(e,t,r=!1){const i=r?vE:t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let a={},o=!1;if(!Qe(e)){const l=c=>{const u=O1(c,t,!0);u&&(o=!0,ur(a,u))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!o?(bt(e)&&i.set(e,null),null):(Ge(s)?s.forEach(l=>a[l]=null):ur(a,s),bt(e)&&i.set(e,a),a)}function Yu(e,t){return!e||!$u(t)?!1:(t=t.slice(2).replace(/Once$/,""),vt(e,t[0].toLowerCase()+t.slice(1))||vt(e,Kn(t))||vt(e,t))}function sm(e){const{type:t,vnode:r,proxy:i,withProxy:n,propsOptions:[s],slots:a,attrs:o,emit:l,render:c,renderCache:u,props:h,data:d,setupState:p,ctx:y,inheritAttrs:_}=e,v=Uc(e);let g,f;try{if(r.shapeFlag&4){const b=n||i,C=b;g=Di(c.call(C,b,u,h,p,d,y)),f=o}else{const b=t;g=Di(b.length>1?b(h,{attrs:o,slots:a,emit:l}):b(h,null)),f=t.props?o:gE(o)}}catch(b){To.length=0,ju(b,e,1),g=st(Dr)}let m=g;if(f&&_!==!1){const b=Object.keys(f),{shapeFlag:C}=m;b.length&&C&7&&(s&&b.some(rv)&&(f=mE(f,s)),m=Nn(m,f,!1,!0))}return r.dirs&&(m=Nn(m,null,!1,!0),m.dirs=m.dirs?m.dirs.concat(r.dirs):r.dirs),r.transition&&qo(m,r.transition),g=m,Uc(v),g}const gE=e=>{let t;for(const r in e)(r==="class"||r==="style"||$u(r))&&((t||(t={}))[r]=e[r]);return t},mE=(e,t)=>{const r={};for(const i in e)(!rv(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r};function yE(e,t,r){const{props:i,children:n,component:s}=e,{props:a,children:o,patchFlag:l}=t,c=s.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?am(i,a,c):!!a;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(a[d]!==i[d]&&!Yu(c,d))return!0}}}else return(n||o)&&(!o||!o.$stable)?!0:i===a?!1:i?a?am(i,a,c):!0:!!a;return!1}function am(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!Yu(r,s))return!0}return!1}function _E({vnode:e,parent:t},r){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=r,t=t.parent;else break}}const N1=e=>e.__isSuspense;function bE(e,t){t&&t.pendingBranch?Ge(e)?t.effects.push(...e):t.effects.push(e):ET(e)}const Pe=Symbol.for("v-fgt"),Xu=Symbol.for("v-txt"),Dr=Symbol.for("v-cmt"),vc=Symbol.for("v-stc"),To=[];let jr=null;function j(e=!1){To.push(jr=e?null:[])}function CE(){To.pop(),jr=To[To.length-1]||null}let Wo=1;function Gc(e,t=!1){Wo+=e,e<0&&jr&&t&&(jr.hasOnce=!0)}function $1(e){return e.dynamicChildren=Wo>0?jr||ua:null,CE(),Wo>0&&jr&&jr.push(e),e}function G(e,t,r,i,n,s){return $1(B(e,t,r,i,n,s,!0))}function $t(e,t,r,i,n){return $1(st(e,t,r,i,n,!0))}function Kc(e){return e?e.__v_isVNode===!0:!1}function gs(e,t){return e.type===t.type&&e.key===t.key}const z1=({key:e})=>e??null,gc=({ref:e,ref_key:t,ref_for:r})=>(typeof e=="number"&&(e=""+e),e!=null?zt(e)||br(e)||Qe(e)?{i:Vr,r:e,k:t,f:!!r}:e:null);function B(e,t=null,r=null,i=0,n=null,s=e===Pe?0:1,a=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&z1(t),ref:t&&gc(t),scopeId:h1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Vr};return o?(mv(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=zt(r)?8:16),Wo>0&&!a&&jr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&jr.push(l),l}const st=wE;function wE(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===WT)&&(e=Dr),Kc(e)){const o=Nn(e,t,!0);return r&&mv(o,r),Wo>0&&!s&&jr&&(o.shapeFlag&6?jr[jr.indexOf(e)]=o:jr.push(o)),o.patchFlag=-2,o}if(RE(e)&&(e=e.__vccOpts),t){t=SE(t);let{class:o,style:l}=t;o&&!zt(o)&&(t.class=Ye(o)),bt(l)&&(hv(l)&&!Ge(l)&&(l=ur({},l)),t.style=Oa(l))}const a=zt(e)?1:N1(e)?128:f1(e)?64:bt(e)?4:Qe(e)?2:0;return B(e,t,r,i,n,a,s,!0)}function SE(e){return e?hv(e)||E1(e)?ur({},e):e:null}function Nn(e,t,r=!1,i=!1){const{props:n,ref:s,patchFlag:a,children:o,transition:l}=e,c=t?H1(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&z1(c),ref:t&&t.ref?r&&s?Ge(s)?s.concat(gc(t)):[s,gc(t)]:gc(t):s,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:o,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pe?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Nn(e.ssContent),ssFallback:e.ssFallback&&Nn(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&i&&qo(u,l.clone(u)),u}function dt(e=" ",t=0){return st(Xu,null,e,t)}function Uo(e,t){const r=st(vc,null,e);return r.staticCount=t,r}function me(e="",t=!1){return t?(j(),$t(Dr,null,e)):st(Dr,null,e)}function Di(e){return e==null||typeof e=="boolean"?st(Dr):Ge(e)?st(Pe,null,e.slice()):Kc(e)?kn(e):st(Xu,null,String(e))}function kn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Nn(e)}function mv(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Ge(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),mv(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!E1(t)?t._ctx=Vr:n===3&&Vr&&(Vr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Qe(t)?(t={default:t,_ctx:Vr},r=32):(t=String(t),i&64?(r=16,t=[dt(t)]):r=8);e.children=t,e.shapeFlag|=r}function H1(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=Ye([t.class,i.class]));else if(n==="style")t.style=Oa([t.style,i.style]);else if($u(n)){const s=t[n],a=i[n];a&&s!==a&&!(Ge(s)&&s.includes(a))&&(t[n]=s?[].concat(s,a):a)}else n!==""&&(t[n]=i[n])}return t}function ki(e,t,r,i=null){_i(e,t,7,[r,i])}const kE=k1();let xE=0;function TE(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||kE,s={uid:xE++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Yx(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:B1(i,n),emitsOptions:O1(i,n),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:i.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=pE.bind(null,s),e.ce&&e.ce(s),s}let yr=null;const q1=()=>yr||Vr;let Yc,lp;{const e=Wu(),t=(r,i)=>{let n;return(n=e[r])||(n=e[r]=[]),n.push(i),s=>{n.length>1?n.forEach(a=>a(s)):n[0](s)}};Yc=t("__VUE_INSTANCE_SETTERS__",r=>yr=r),lp=t("__VUE_SSR_SETTERS__",r=>Vo=r)}const vl=e=>{const t=yr;return Yc(e),e.scope.on(),()=>{e.scope.off(),Yc(t)}},om=()=>{yr&&yr.scope.off(),Yc(null)};function W1(e){return e.vnode.shapeFlag&4}let Vo=!1;function EE(e,t=!1,r=!1){t&&lp(t);const{props:i,children:n}=e.vnode,s=W1(e);eE(e,i,s,t),nE(e,n,r||t);const a=s?AE(e,t):void 0;return t&&lp(!1),a}function AE(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,VT);const{setup:i}=r;if(i){ln();const n=e.setupContext=i.length>1?DE(e):null,s=vl(e),a=pl(i,e,0,[e.props,n]),o=Nb(a);if(cn(),s(),(o||e.sp)&&!ko(e)&&_1(e),o){if(a.then(om,om),t)return a.then(l=>{lm(e,l)}).catch(l=>{ju(l,e,0)});e.asyncDep=a}else lm(e,a)}else U1(e)}function lm(e,t,r){Qe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:bt(t)&&(e.setupState=s1(t)),U1(e)}function U1(e,t,r){const i=e.type;e.render||(e.render=i.render||Pi);{const n=vl(e);ln();try{jT(e)}finally{cn(),n()}}}const BE={get(e,t){return mr(e,"get",""),e[t]}};function DE(e){const t=r=>{e.exposed=r||{}};return{attrs:new Proxy(e.attrs,BE),slots:e.slots,emit:e.emit,expose:t}}function Zu(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(s1(gT(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in xo)return xo[r](e)},has(t,r){return r in t||r in xo}})):e.proxy}function LE(e,t=!0){return Qe(e)?e.displayName||e.name:e.name||t&&e.__name}function RE(e){return Qe(e)&&"__vccOpts"in e}const Lt=(e,t)=>wT(e,t,Vo);function ME(e,t,r){try{Gc(-1);const i=arguments.length;return i===2?bt(t)&&!Ge(t)?Kc(t)?st(e,null,[t]):st(e,t):st(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&Kc(r)&&(r=[r]),st(e,t,r))}finally{Gc(1)}}const PE="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let cp;const cm=typeof window<"u"&&window.trustedTypes;if(cm)try{cp=cm.createPolicy("vue",{createHTML:e=>e})}catch{}const V1=cp?e=>cp.createHTML(e):e=>e,IE="http://www.w3.org/2000/svg",FE="http://www.w3.org/1998/Math/MathML",Zi=typeof document<"u"?document:null,um=Zi&&Zi.createElement("template"),OE={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t==="svg"?Zi.createElementNS(IE,e):t==="mathml"?Zi.createElementNS(FE,e):r?Zi.createElement(e,{is:r}):Zi.createElement(e);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>Zi.createTextNode(e),createComment:e=>Zi.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Zi.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,r,i,n,s){const a=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{um.innerHTML=V1(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const o=um.content;if(i==="svg"||i==="mathml"){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}},yn="transition",Ya="animation",jo=Symbol("_vtc"),j1={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},NE=ur({},p1,j1),$E=e=>(e.displayName="Transition",e.props=NE,e),zE=$E((e,{slots:t})=>ME(LT,HE(e),t)),os=(e,t=[])=>{Ge(e)?e.forEach(r=>r(...t)):e&&e(...t)},hm=e=>e?Ge(e)?e.some(t=>t.length>1):e.length>1:!1;function HE(e){const t={};for(const T in e)T in j1||(t[T]=e[T]);if(e.css===!1)return t;const{name:r="v",type:i,duration:n,enterFromClass:s=`${r}-enter-from`,enterActiveClass:a=`${r}-enter-active`,enterToClass:o=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:c=a,appearToClass:u=o,leaveFromClass:h=`${r}-leave-from`,leaveActiveClass:d=`${r}-leave-active`,leaveToClass:p=`${r}-leave-to`}=e,y=qE(n),_=y&&y[0],v=y&&y[1],{onBeforeEnter:g,onEnter:f,onEnterCancelled:m,onLeave:b,onLeaveCancelled:C,onBeforeAppear:S=g,onAppear:k=f,onAppearCancelled:w=m}=t,x=(T,E,R,F)=>{T._enterCancelled=F,ls(T,E?u:o),ls(T,E?c:a),R&&R()},A=(T,E)=>{T._isLeaving=!1,ls(T,h),ls(T,p),ls(T,d),E&&E()},D=T=>(E,R)=>{const F=T?k:f,O=()=>x(E,T,R);os(F,[E,O]),dm(()=>{ls(E,T?l:s),ji(E,T?u:o),hm(F)||fm(E,i,_,O)})};return ur(t,{onBeforeEnter(T){os(g,[T]),ji(T,s),ji(T,a)},onBeforeAppear(T){os(S,[T]),ji(T,l),ji(T,c)},onEnter:D(!1),onAppear:D(!0),onLeave(T,E){T._isLeaving=!0;const R=()=>A(T,E);ji(T,h),T._enterCancelled?(ji(T,d),gm(T)):(gm(T),ji(T,d)),dm(()=>{T._isLeaving&&(ls(T,h),ji(T,p),hm(b)||fm(T,i,v,R))}),os(b,[T,R])},onEnterCancelled(T){x(T,!1,void 0,!0),os(m,[T])},onAppearCancelled(T){x(T,!0,void 0,!0),os(w,[T])},onLeaveCancelled(T){A(T),os(C,[T])}})}function qE(e){if(e==null)return null;if(bt(e))return[Yh(e.enter),Yh(e.leave)];{const t=Yh(e);return[t,t]}}function Yh(e){return $x(e)}function ji(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e[jo]||(e[jo]=new Set)).add(t)}function ls(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const r=e[jo];r&&(r.delete(t),r.size||(e[jo]=void 0))}function dm(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let WE=0;function fm(e,t,r,i){const n=e._endId=++WE,s=()=>{n===e._endId&&i()};if(r!=null)return setTimeout(s,r);const{type:a,timeout:o,propCount:l}=UE(e,t);if(!a)return i();const c=a+"end";let u=0;const h=()=>{e.removeEventListener(c,d),s()},d=p=>{p.target===e&&++u>=l&&h()};setTimeout(()=>{u<l&&h()},o+1),e.addEventListener(c,d)}function UE(e,t){const r=window.getComputedStyle(e),i=y=>(r[y]||"").split(", "),n=i(`${yn}Delay`),s=i(`${yn}Duration`),a=pm(n,s),o=i(`${Ya}Delay`),l=i(`${Ya}Duration`),c=pm(o,l);let u=null,h=0,d=0;t===yn?a>0&&(u=yn,h=a,d=s.length):t===Ya?c>0&&(u=Ya,h=c,d=l.length):(h=Math.max(a,c),u=h>0?a>c?yn:Ya:null,d=u?u===yn?s.length:l.length:0);const p=u===yn&&/\b(?:transform|all)(?:,|$)/.test(i(`${yn}Property`).toString());return{type:u,timeout:h,propCount:d,hasTransform:p}}function pm(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,i)=>vm(r)+vm(e[i])))}function vm(e){return e==="auto"?0:Number(e.slice(0,-1).replace(",","."))*1e3}function gm(e){return(e?e.ownerDocument:document).body.offsetHeight}function VE(e,t,r){const i=e[jo];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}const mm=Symbol("_vod"),jE=Symbol("_vsh"),GE=Symbol(""),KE=/(?:^|;)\s*display\s*:/;function YE(e,t,r){const i=e.style,n=zt(r);let s=!1;if(r&&!n){if(t)if(zt(t))for(const a of t.split(";")){const o=a.slice(0,a.indexOf(":")).trim();r[o]==null&&mc(i,o,"")}else for(const a in t)r[a]==null&&mc(i,a,"");for(const a in r)a==="display"&&(s=!0),mc(i,a,r[a])}else if(n){if(t!==r){const a=i[GE];a&&(r+=";"+a),i.cssText=r,s=KE.test(r)}}else t&&e.removeAttribute("style");mm in e&&(e[mm]=s?i.display:"",e[jE]&&(i.display="none"))}const ym=/\s*!important$/;function mc(e,t,r){if(Ge(r))r.forEach(i=>mc(e,t,i));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const i=XE(e,t);ym.test(r)?e.setProperty(Kn(i),r.replace(ym,""),"important"):e[i]=r}}const _m=["Webkit","Moz","ms"],Xh={};function XE(e,t){const r=Xh[t];if(r)return r;let i=ai(t);if(i!=="filter"&&i in e)return Xh[t]=i;i=qu(i);for(let n=0;n<_m.length;n++){const s=_m[n]+i;if(s in e)return Xh[t]=s}return t}const bm="http://www.w3.org/1999/xlink";function Cm(e,t,r,i,n,s=jx(t)){i&&t.startsWith("xlink:")?r==null?e.removeAttributeNS(bm,t.slice(6,t.length)):e.setAttributeNS(bm,t,r):r==null||s&&!qb(r)?e.removeAttribute(t):e.setAttribute(t,s?"":Oi(r)?String(r):r)}function wm(e,t,r,i,n){if(t==="innerHTML"||t==="textContent"){r!=null&&(e[t]=t==="innerHTML"?V1(r):r);return}const s=e.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?e.getAttribute("value")||"":e.value,l=r==null?e.type==="checkbox"?"on":"":String(r);(o!==l||!("_value"in e))&&(e.value=l),r==null&&e.removeAttribute(t),e._value=r;return}let a=!1;if(r===""||r==null){const o=typeof e[t];o==="boolean"?r=qb(r):r==null&&o==="string"?(r="",a=!0):o==="number"&&(r=0,a=!0)}try{e[t]=r}catch{}a&&e.removeAttribute(n||t)}function ms(e,t,r,i){e.addEventListener(t,r,i)}function ZE(e,t,r,i){e.removeEventListener(t,r,i)}const Sm=Symbol("_vei");function QE(e,t,r,i,n=null){const s=e[Sm]||(e[Sm]={}),a=s[t];if(i&&a)a.value=i;else{const[o,l]=JE(t);if(i){const c=s[t]=r2(i,n);ms(e,o,c,l)}else a&&(ZE(e,o,a,l),s[t]=void 0)}}const km=/(?:Once|Passive|Capture)$/;function JE(e){let t;if(km.test(e)){t={};let i;for(;i=e.match(km);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Kn(e.slice(2)),t]}let Zh=0;const e2=Promise.resolve(),t2=()=>Zh||(e2.then(()=>Zh=0),Zh=Date.now());function r2(e,t){const r=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=r.attached)return;_i(i2(i,r.value),t,5,[i])};return r.value=e,r.attached=t2(),r}function i2(e,t){if(Ge(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const xm=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,n2=(e,t,r,i,n,s)=>{const a=n==="svg";t==="class"?VE(e,i,a):t==="style"?YE(e,r,i):$u(t)?rv(t)||QE(e,t,r,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):s2(e,t,i,a))?(wm(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Cm(e,t,i,a,s,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!zt(i))?wm(e,ai(t),i,s,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),Cm(e,t,i,a))};function s2(e,t,r,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&xm(t)&&Qe(r));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return xm(t)&&zt(r)?!1:t in e}const Xc=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ge(t)?r=>fc(t,r):t};function a2(e){e.target.composing=!0}function Tm(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ga=Symbol("_assign"),Zc={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e[ga]=Xc(n);const s=i||n.props&&n.props.type==="number";ms(e,t?"change":"input",a=>{if(a.target.composing)return;let o=e.value;r&&(o=o.trim()),s&&(o=zc(o)),e[ga](o)}),r&&ms(e,"change",()=>{e.value=e.value.trim()}),t||(ms(e,"compositionstart",a2),ms(e,"compositionend",Tm),ms(e,"change",Tm))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:r,modifiers:{lazy:i,trim:n,number:s}},a){if(e[ga]=Xc(a),e.composing)return;const o=(s||e.type==="number")&&!/^0\d/.test(e.value)?zc(e.value):e.value,l=t??"";o!==l&&(document.activeElement===e&&e.type!=="range"&&(i&&t===r||n&&e.value.trim()===l)||(e.value=l))}},Go={deep:!0,created(e,{value:t,modifiers:{number:r}},i){const n=zu(t);ms(e,"change",()=>{const s=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?zc(Qc(a)):Qc(a));e[ga](e.multiple?n?new Set(s):s:s[0]),e._assigning=!0,o1(()=>{e._assigning=!1})}),e[ga]=Xc(i)},mounted(e,{value:t}){Em(e,t)},beforeUpdate(e,t,r){e[ga]=Xc(r)},updated(e,{value:t}){e._assigning||Em(e,t)}};function Em(e,t){const r=e.multiple,i=Ge(t);if(!(r&&!i&&!zu(t))){for(let n=0,s=e.options.length;n<s;n++){const a=e.options[n],o=Qc(a);if(r)if(i){const l=typeof o;l==="string"||l==="number"?a.selected=t.some(c=>String(c)===String(o)):a.selected=Kx(t,o)>-1}else a.selected=t.has(o);else if(Uu(Qc(a),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Qc(e){return"_value"in e?e._value:e.value}const o2=["ctrl","shift","alt","meta"],l2={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>o2.some(r=>e[`${r}Key`]&&!t.includes(r))},nn=(e,t)=>{const r=e._withMods||(e._withMods={}),i=t.join(".");return r[i]||(r[i]=((n,...s)=>{for(let a=0;a<t.length;a++){const o=l2[t[a]];if(o&&o(n,t))return}return e(n,...s)}))},c2={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},na=(e,t)=>{const r=e._withKeys||(e._withKeys={}),i=t.join(".");return r[i]||(r[i]=(n=>{if(!("key"in n))return;const s=Kn(n.key);if(t.some(a=>a===s||c2[a]===s))return e(n)}))},u2=ur({patchProp:n2},OE);let Am;function h2(){return Am||(Am=aE(u2))}const d2=((...e)=>{const t=h2().createApp(...e),{mount:r}=t;return t.mount=i=>{const n=p2(i);if(!n)return;const s=t._component;!Qe(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const a=r(n,!1,f2(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),a},t});function f2(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function p2(e){return zt(e)?document.querySelector(e):e}function up(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function v2(e){if(Array.isArray(e))return e}function g2(e){if(Array.isArray(e))return up(e)}function Yn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m2(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,K1(i.key),i)}}function Xn(e,t,r){return t&&m2(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function zr(e,t){var r=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=yv(e))||t){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(l){throw l},f:n}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var l=r.next();return a=l.done,l},e:function(l){o=!0,s=l},f:function(){try{a||r.return==null||r.return()}finally{if(o)throw s}}}}function G1(e,t,r){return(t=K1(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y2(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _2(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,n,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=s.call(r)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(u){c=!0,n=u}finally{try{if(!l&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw n}}return o}}function b2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function C2(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jt(e,t){return v2(e)||_2(e,t)||yv(e,t)||b2()}function Jc(e){return g2(e)||y2(e)||yv(e)||C2()}function w2(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function K1(e){var t=w2(e,"string");return typeof t=="symbol"?t:t+""}function Jt(e){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(e)}function yv(e,t){if(e){if(typeof e=="string")return up(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?up(e,t):void 0}}var Zt=typeof window>"u"?null:window,Bm=Zt?Zt.navigator:null;Zt&&Zt.document;var S2=Jt(""),Y1=Jt({}),k2=Jt(function(){}),x2=typeof HTMLElement>"u"?"undefined":Jt(HTMLElement),gl=function(t){return t&&t.instanceString&&It(t.instanceString)?t.instanceString():null},qe=function(t){return t!=null&&Jt(t)==S2},It=function(t){return t!=null&&Jt(t)===k2},St=function(t){return!Gr(t)&&(Array.isArray?Array.isArray(t):t!=null&&t instanceof Array)},lt=function(t){return t!=null&&Jt(t)===Y1&&!St(t)&&t.constructor===Object},T2=function(t){return t!=null&&Jt(t)===Y1},xe=function(t){return t!=null&&Jt(t)===Jt(1)&&!isNaN(t)},E2=function(t){return xe(t)&&Math.floor(t)===t},eu=function(t){if(x2!=="undefined")return t!=null&&t instanceof HTMLElement},Gr=function(t){return ml(t)||X1(t)},ml=function(t){return gl(t)==="collection"&&t._private.single},X1=function(t){return gl(t)==="collection"&&!t._private.single},_v=function(t){return gl(t)==="core"},Z1=function(t){return gl(t)==="stylesheet"},A2=function(t){return gl(t)==="event"},$n=function(t){return t==null?!0:!!(t===""||t.match(/^\s+$/))},B2=function(t){return typeof HTMLElement>"u"?!1:t instanceof HTMLElement},D2=function(t){return lt(t)&&xe(t.x1)&&xe(t.x2)&&xe(t.y1)&&xe(t.y2)},L2=function(t){return T2(t)&&It(t.then)},R2=function(){return Bm&&Bm.userAgent.match(/msie|trident|edge/i)},ka=function(t,r){r||(r=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var s=[],a=0;a<arguments.length;a++)s.push(arguments[a]);return s.join("$")});var i=function(){var s=this,a=arguments,o,l=r.apply(s,a),c=i.cache;return(o=c[l])||(o=c[l]=t.apply(s,a)),o};return i.cache={},i},bv=ka(function(e){return e.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}),Qu=ka(function(e){return e.replace(/(-\w)/g,function(t){return t[1].toUpperCase()})}),Q1=ka(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),Dm=function(t){return $n(t)?t:t.charAt(0).toUpperCase()+t.substring(1)},En=function(t,r){return t.slice(-1*r.length)===r},Qt="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",M2="rgb[a]?\\(("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)\\s*,\\s*("+Qt+"[%]?)(?:\\s*,\\s*("+Qt+"))?\\)",P2="rgb[a]?\\((?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)\\s*,\\s*(?:"+Qt+"[%]?)(?:\\s*,\\s*(?:"+Qt+"))?\\)",I2="hsl[a]?\\(("+Qt+")\\s*,\\s*("+Qt+"[%])\\s*,\\s*("+Qt+"[%])(?:\\s*,\\s*("+Qt+"))?\\)",F2="hsl[a]?\\((?:"+Qt+")\\s*,\\s*(?:"+Qt+"[%])\\s*,\\s*(?:"+Qt+"[%])(?:\\s*,\\s*(?:"+Qt+"))?\\)",O2="\\#[0-9a-fA-F]{3}",N2="\\#[0-9a-fA-F]{6}",J1=function(t,r){return t<r?-1:t>r?1:0},$2=function(t,r){return-1*J1(t,r)},je=Object.assign!=null?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var i=t[r];if(i!=null)for(var n=Object.keys(i),s=0;s<n.length;s++){var a=n[s];e[a]=i[a]}}return e},z2=function(t){if(!(!(t.length===4||t.length===7)||t[0]!=="#")){var r=t.length===4,i,n,s,a=16;return r?(i=parseInt(t[1]+t[1],a),n=parseInt(t[2]+t[2],a),s=parseInt(t[3]+t[3],a)):(i=parseInt(t[1]+t[2],a),n=parseInt(t[3]+t[4],a),s=parseInt(t[5]+t[6],a)),[i,n,s]}},H2=function(t){var r,i,n,s,a,o,l,c;function u(y,_,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?y+(_-y)*6*v:v<1/2?_:v<2/3?y+(_-y)*(2/3-v)*6:y}var h=new RegExp("^"+I2+"$").exec(t);if(h){if(i=parseInt(h[1]),i<0?i=(360- -1*i%360)%360:i>360&&(i=i%360),i/=360,n=parseFloat(h[2]),n<0||n>100||(n=n/100,s=parseFloat(h[3]),s<0||s>100)||(s=s/100,a=h[4],a!==void 0&&(a=parseFloat(a),a<0||a>1)))return;if(n===0)o=l=c=Math.round(s*255);else{var d=s<.5?s*(1+n):s+n-s*n,p=2*s-d;o=Math.round(255*u(p,d,i+1/3)),l=Math.round(255*u(p,d,i)),c=Math.round(255*u(p,d,i-1/3))}r=[o,l,c,a]}return r},q2=function(t){var r,i=new RegExp("^"+M2+"$").exec(t);if(i){r=[];for(var n=[],s=1;s<=3;s++){var a=i[s];if(a[a.length-1]==="%"&&(n[s]=!0),a=parseFloat(a),n[s]&&(a=a/100*255),a<0||a>255)return;r.push(Math.floor(a))}var o=n[1]||n[2]||n[3],l=n[1]&&n[2]&&n[3];if(o&&!l)return;var c=i[4];if(c!==void 0){if(c=parseFloat(c),c<0||c>1)return;r.push(c)}}return r},W2=function(t){return U2[t.toLowerCase()]},eC=function(t){return(St(t)?t:null)||W2(t)||z2(t)||q2(t)||H2(t)},U2={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},tC=function(t){for(var r=t.map,i=t.keys,n=i.length,s=0;s<n;s++){var a=i[s];if(lt(a))throw Error("Tried to set map with object key");s<i.length-1?(r[a]==null&&(r[a]={}),r=r[a]):r[a]=t.value}},rC=function(t){for(var r=t.map,i=t.keys,n=i.length,s=0;s<n;s++){var a=i[s];if(lt(a))throw Error("Tried to get map with object key");if(r=r[a],r==null)return r}return r},Wl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Qh,Lm;function _l(){if(Lm)return Qh;Lm=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Qh=e,Qh}var Jh,Rm;function V2(){if(Rm)return Jh;Rm=1;var e=typeof Wl=="object"&&Wl&&Wl.Object===Object&&Wl;return Jh=e,Jh}var ed,Mm;function Ju(){if(Mm)return ed;Mm=1;var e=V2(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return ed=r,ed}var td,Pm;function j2(){if(Pm)return td;Pm=1;var e=Ju(),t=function(){return e.Date.now()};return td=t,td}var rd,Im;function G2(){if(Im)return rd;Im=1;var e=/\s/;function t(r){for(var i=r.length;i--&&e.test(r.charAt(i)););return i}return rd=t,rd}var id,Fm;function K2(){if(Fm)return id;Fm=1;var e=G2(),t=/^\s+/;function r(i){return i&&i.slice(0,e(i)+1).replace(t,"")}return id=r,id}var nd,Om;function Cv(){if(Om)return nd;Om=1;var e=Ju(),t=e.Symbol;return nd=t,nd}var sd,Nm;function Y2(){if(Nm)return sd;Nm=1;var e=Cv(),t=Object.prototype,r=t.hasOwnProperty,i=t.toString,n=e?e.toStringTag:void 0;function s(a){var o=r.call(a,n),l=a[n];try{a[n]=void 0;var c=!0}catch{}var u=i.call(a);return c&&(o?a[n]=l:delete a[n]),u}return sd=s,sd}var ad,$m;function X2(){if($m)return ad;$m=1;var e=Object.prototype,t=e.toString;function r(i){return t.call(i)}return ad=r,ad}var od,zm;function iC(){if(zm)return od;zm=1;var e=Cv(),t=Y2(),r=X2(),i="[object Null]",n="[object Undefined]",s=e?e.toStringTag:void 0;function a(o){return o==null?o===void 0?n:i:s&&s in Object(o)?t(o):r(o)}return od=a,od}var ld,Hm;function Z2(){if(Hm)return ld;Hm=1;function e(t){return t!=null&&typeof t=="object"}return ld=e,ld}var cd,qm;function bl(){if(qm)return cd;qm=1;var e=iC(),t=Z2(),r="[object Symbol]";function i(n){return typeof n=="symbol"||t(n)&&e(n)==r}return cd=i,cd}var ud,Wm;function Q2(){if(Wm)return ud;Wm=1;var e=K2(),t=_l(),r=bl(),i=NaN,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt;function l(c){if(typeof c=="number")return c;if(r(c))return i;if(t(c)){var u=typeof c.valueOf=="function"?c.valueOf():c;c=t(u)?u+"":u}if(typeof c!="string")return c===0?c:+c;c=e(c);var h=s.test(c);return h||a.test(c)?o(c.slice(2),h?2:8):n.test(c)?i:+c}return ud=l,ud}var hd,Um;function J2(){if(Um)return hd;Um=1;var e=_l(),t=j2(),r=Q2(),i="Expected a function",n=Math.max,s=Math.min;function a(o,l,c){var u,h,d,p,y,_,v=0,g=!1,f=!1,m=!0;if(typeof o!="function")throw new TypeError(i);l=r(l)||0,e(c)&&(g=!!c.leading,f="maxWait"in c,d=f?n(r(c.maxWait)||0,l):d,m="trailing"in c?!!c.trailing:m);function b(E){var R=u,F=h;return u=h=void 0,v=E,p=o.apply(F,R),p}function C(E){return v=E,y=setTimeout(w,l),g?b(E):p}function S(E){var R=E-_,F=E-v,O=l-R;return f?s(O,d-F):O}function k(E){var R=E-_,F=E-v;return _===void 0||R>=l||R<0||f&&F>=d}function w(){var E=t();if(k(E))return x(E);y=setTimeout(w,S(E))}function x(E){return y=void 0,m&&u?b(E):(u=h=void 0,p)}function A(){y!==void 0&&clearTimeout(y),v=0,u=_=h=y=void 0}function D(){return y===void 0?p:x(t())}function T(){var E=t(),R=k(E);if(u=arguments,h=this,_=E,R){if(y===void 0)return C(_);if(f)return clearTimeout(y),y=setTimeout(w,l),b(_)}return y===void 0&&(y=setTimeout(w,l)),p}return T.cancel=A,T.flush=D,T}return hd=a,hd}var eA=J2(),Cl=yl(eA),dd=Zt?Zt.performance:null,nC=dd&&dd.now?function(){return dd.now()}:function(){return Date.now()},tA=(function(){if(Zt){if(Zt.requestAnimationFrame)return function(e){Zt.requestAnimationFrame(e)};if(Zt.mozRequestAnimationFrame)return function(e){Zt.mozRequestAnimationFrame(e)};if(Zt.webkitRequestAnimationFrame)return function(e){Zt.webkitRequestAnimationFrame(e)};if(Zt.msRequestAnimationFrame)return function(e){Zt.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(nC())},1e3/60)}})(),tu=function(t){return tA(t)},un=nC,ys=9261,sC=65599,ra=5381,aC=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ys,i=r,n;n=t.next(),!n.done;)i=i*sC+n.value|0;return i},Ko=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ys;return r*sC+t|0},Yo=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ra;return(r<<5)+r+t|0},rA=function(t,r){return t*2097152+r},_n=function(t){return t[0]*2097152+t[1]},Ul=function(t,r){return[Ko(t[0],r[0]),Yo(t[1],r[1])]},Vm=function(t,r){var i={value:0,done:!1},n=0,s=t.length,a={next:function(){return n<s?i.value=t[n++]:i.done=!0,i}};return aC(a,r)},Ts=function(t,r){var i={value:0,done:!1},n=0,s=t.length,a={next:function(){return n<s?i.value=t.charCodeAt(n++):i.done=!0,i}};return aC(a,r)},oC=function(){return iA(arguments)},iA=function(t){for(var r,i=0;i<t.length;i++){var n=t[i];i===0?r=Ts(n):r=Ts(n,r)}return r};function nA(e,t,r,i,n){var s=n*Math.PI/180,a=Math.cos(s)*(e-r)-Math.sin(s)*(t-i)+r,o=Math.sin(s)*(e-r)+Math.cos(s)*(t-i)+i;return{x:a,y:o}}var sA=function(t,r,i,n,s,a){return{x:(t-i)*s+i,y:(r-n)*a+n}};function aA(e,t,r){if(r===0)return e;var i=(t.x1+t.x2)/2,n=(t.y1+t.y2)/2,s=t.w/t.h,a=1/s,o=nA(e.x,e.y,i,n,r),l=sA(o.x,o.y,i,n,s,a);return{x:l.x,y:l.y}}var jm=!0,oA=console.warn!=null,lA=console.trace!=null,wv=Number.MAX_SAFE_INTEGER||9007199254740991,lC=function(){return!0},ru=function(){return!1},Gm=function(){return 0},Sv=function(){},Rt=function(t){throw new Error(t)},cC=function(t){if(t!==void 0)jm=!!t;else return jm},mt=function(t){cC()&&(oA?console.warn(t):(console.log(t),lA&&console.trace()))},cA=function(t){return je({},t)},Li=function(t){return t==null?t:St(t)?t.slice():lt(t)?cA(t):t},uA=function(t){return t.slice()},uC=function(t,r){for(r=t="";t++<36;r+=t*51&52?(t^15?8^Math.random()*(t^20?16:4):4).toString(16):"-");return r},hA={},hC=function(){return hA},hr=function(t){var r=Object.keys(t);return function(i){for(var n={},s=0;s<r.length;s++){var a=r[s],o=i==null?void 0:i[a];n[a]=o===void 0?t[a]:o}return n}},zn=function(t,r,i){for(var n=t.length-1;n>=0;n--)t[n]===r&&t.splice(n,1)},kv=function(t){t.splice(0,t.length)},dA=function(t,r){for(var i=0;i<r.length;i++){var n=r[i];t.push(n)}},Or=function(t,r,i){return i&&(r=Q1(i,r)),t[r]},Ji=function(t,r,i,n){i&&(r=Q1(i,r)),t[r]=n},fA=(function(){function e(){Yn(this,e),this._obj={}}return Xn(e,[{key:"set",value:function(r,i){return this._obj[r]=i,this}},{key:"delete",value:function(r){return this._obj[r]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(r){return this._obj[r]!==void 0}},{key:"get",value:function(r){return this._obj[r]}}])})(),sn=typeof Map<"u"?Map:fA,pA="undefined",vA=(function(){function e(t){if(Yn(this,e),this._obj=Object.create(null),this.size=0,t!=null){var r;t.instanceString!=null&&t.instanceString()===this.instanceString()?r=t.toArray():r=t;for(var i=0;i<r.length;i++)this.add(r[i])}}return Xn(e,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(r){var i=this._obj;i[r]!==1&&(i[r]=1,this.size++)}},{key:"delete",value:function(r){var i=this._obj;i[r]===1&&(i[r]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(r){return this._obj[r]===1}},{key:"toArray",value:function(){var r=this;return Object.keys(this._obj).filter(function(i){return r.has(i)})}},{key:"forEach",value:function(r,i){return this.toArray().forEach(r,i)}}])})(),Na=(typeof Set>"u"?"undefined":Jt(Set))!==pA?Set:vA,eh=function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(t===void 0||r===void 0||!_v(t)){Rt("An element must have a core reference and parameters set");return}var n=r.group;if(n==null&&(r.data&&r.data.source!=null&&r.data.target!=null?n="edges":n="nodes"),n!=="nodes"&&n!=="edges"){Rt("An element must be of type `nodes` or `edges`; you specified `"+n+"`");return}this.length=1,this[0]=this;var s=this._private={cy:t,single:!0,data:r.data||{},position:r.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!r.selected,selectable:r.selectable===void 0?!0:!!r.selectable,locked:!!r.locked,grabbed:!1,grabbable:r.grabbable===void 0?!0:!!r.grabbable,pannable:r.pannable===void 0?n==="edges":!!r.pannable,active:!1,classes:new Na,animation:{current:[],queue:[]},rscratch:{},scratch:r.scratch||{},edges:[],children:[],parent:r.parent&&r.parent.isNode()?r.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(s.position.x==null&&(s.position.x=0),s.position.y==null&&(s.position.y=0),r.renderedPosition){var a=r.renderedPosition,o=t.pan(),l=t.zoom();s.position={x:(a.x-o.x)/l,y:(a.y-o.y)/l}}var c=[];St(r.classes)?c=r.classes:qe(r.classes)&&(c=r.classes.split(/\s+/));for(var u=0,h=c.length;u<h;u++){var d=c[u];!d||d===""||s.classes.add(d)}this.createEmitter(),(i===void 0||i)&&this.restore();var p=r.style||r.css;p&&(mt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p))},Km=function(t){return t={bfs:t.bfs||!t.dfs,dfs:t.dfs||!t.bfs},function(i,n,s){var a;lt(i)&&!Gr(i)&&(a=i,i=a.roots||a.root,n=a.visit,s=a.directed),s=arguments.length===2&&!It(n)?n:s,n=It(n)?n:function(){};for(var o=this._private.cy,l=i=qe(i)?this.filter(i):i,c=[],u=[],h={},d={},p={},y=0,_,v=this.byGroup(),g=v.nodes,f=v.edges,m=0;m<l.length;m++){var b=l[m],C=b.id();b.isNode()&&(c.unshift(b),t.bfs&&(p[C]=!0,u.push(b)),d[C]=0)}for(var S=function(){var E=t.bfs?c.shift():c.pop(),R=E.id();if(t.dfs){if(p[R])return 0;p[R]=!0,u.push(E)}var F=d[R],O=h[R],$=O!=null?O.source():null,H=O!=null?O.target():null,L=O==null?void 0:E.same($)?H[0]:$[0],I;if(I=n(E,O,L,y++,F),I===!0)return _=E,1;if(I===!1)return 1;for(var P=E.connectedEdges().filter(function(ne){return(!s||ne.source().same(E))&&f.has(ne)}),z=0;z<P.length;z++){var K=P[z],te=K.connectedNodes().filter(function(ne){return!ne.same(E)&&g.has(ne)}),J=te.id();te.length!==0&&!p[J]&&(te=te[0],c.push(te),t.bfs&&(p[J]=!0,u.push(te)),h[J]=K,d[J]=d[R]+1)}},k;c.length!==0&&(k=S(),!(k!==0&&k===1)););for(var w=o.collection(),x=0;x<u.length;x++){var A=u[x],D=h[A.id()];D!=null&&w.push(D),w.push(A)}return{path:o.collection(w),found:o.collection(_)}}},Xo={breadthFirstSearch:Km({bfs:!0}),depthFirstSearch:Km({dfs:!0})};Xo.bfs=Xo.breadthFirstSearch;Xo.dfs=Xo.depthFirstSearch;var yc={exports:{}},gA=yc.exports,Ym;function mA(){return Ym||(Ym=1,(function(e,t){(function(){var r,i,n,s,a,o,l,c,u,h,d,p,y,_,v;n=Math.floor,h=Math.min,i=function(g,f){return g<f?-1:g>f?1:0},u=function(g,f,m,b,C){var S;if(m==null&&(m=0),C==null&&(C=i),m<0)throw new Error("lo must be non-negative");for(b==null&&(b=g.length);m<b;)S=n((m+b)/2),C(f,g[S])<0?b=S:m=S+1;return[].splice.apply(g,[m,m-m].concat(f)),f},o=function(g,f,m){return m==null&&(m=i),g.push(f),_(g,0,g.length-1,m)},a=function(g,f){var m,b;return f==null&&(f=i),m=g.pop(),g.length?(b=g[0],g[0]=m,v(g,0,f)):b=m,b},c=function(g,f,m){var b;return m==null&&(m=i),b=g[0],g[0]=f,v(g,0,m),b},l=function(g,f,m){var b;return m==null&&(m=i),g.length&&m(g[0],f)<0&&(b=[g[0],f],f=b[0],g[0]=b[1],v(g,0,m)),f},s=function(g,f){var m,b,C,S,k,w;for(f==null&&(f=i),S=(function(){w=[];for(var x=0,A=n(g.length/2);0<=A?x<A:x>A;0<=A?x++:x--)w.push(x);return w}).apply(this).reverse(),k=[],b=0,C=S.length;b<C;b++)m=S[b],k.push(v(g,m,f));return k},y=function(g,f,m){var b;if(m==null&&(m=i),b=g.indexOf(f),b!==-1)return _(g,0,b,m),v(g,b,m)},d=function(g,f,m){var b,C,S,k,w;if(m==null&&(m=i),C=g.slice(0,f),!C.length)return C;for(s(C,m),w=g.slice(f),S=0,k=w.length;S<k;S++)b=w[S],l(C,b,m);return C.sort(m).reverse()},p=function(g,f,m){var b,C,S,k,w,x,A,D,T;if(m==null&&(m=i),f*10<=g.length){if(S=g.slice(0,f).sort(m),!S.length)return S;for(C=S[S.length-1],A=g.slice(f),k=0,x=A.length;k<x;k++)b=A[k],m(b,C)<0&&(u(S,b,0,null,m),S.pop(),C=S[S.length-1]);return S}for(s(g,m),T=[],w=0,D=h(f,g.length);0<=D?w<D:w>D;0<=D?++w:--w)T.push(a(g,m));return T},_=function(g,f,m,b){var C,S,k;for(b==null&&(b=i),C=g[m];m>f;){if(k=m-1>>1,S=g[k],b(C,S)<0){g[m]=S,m=k;continue}break}return g[m]=C},v=function(g,f,m){var b,C,S,k,w;for(m==null&&(m=i),C=g.length,w=f,S=g[f],b=2*f+1;b<C;)k=b+1,k<C&&!(m(g[b],g[k])<0)&&(b=k),g[f]=g[b],f=b,b=2*f+1;return g[f]=S,_(g,w,f,m)},r=(function(){g.push=o,g.pop=a,g.replace=c,g.pushpop=l,g.heapify=s,g.updateItem=y,g.nlargest=d,g.nsmallest=p;function g(f){this.cmp=f??i,this.nodes=[]}return g.prototype.push=function(f){return o(this.nodes,f,this.cmp)},g.prototype.pop=function(){return a(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(f){return this.nodes.indexOf(f)!==-1},g.prototype.replace=function(f){return c(this.nodes,f,this.cmp)},g.prototype.pushpop=function(f){return l(this.nodes,f,this.cmp)},g.prototype.heapify=function(){return s(this.nodes,this.cmp)},g.prototype.updateItem=function(f){return y(this.nodes,f,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var f;return f=new g,f.nodes=this.nodes.slice(0),f},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g})(),(function(g,f){return e.exports=f()})(this,function(){return r})}).call(gA)})(yc)),yc.exports}var fd,Xm;function yA(){return Xm||(Xm=1,fd=mA()),fd}var _A=yA(),wl=yl(_A),bA=hr({root:null,weight:function(t){return 1},directed:!1}),CA={dijkstra:function(t){if(!lt(t)){var r=arguments;t={root:r[0],weight:r[1],directed:r[2]}}var i=bA(t),n=i.root,s=i.weight,a=i.directed,o=this,l=s,c=qe(n)?this.filter(n)[0]:n[0],u={},h={},d={},p=this.byGroup(),y=p.nodes,_=p.edges;_.unmergeBy(function(F){return F.isLoop()});for(var v=function(O){return u[O.id()]},g=function(O,$){u[O.id()]=$,f.updateItem(O)},f=new wl(function(F,O){return v(F)-v(O)}),m=0;m<y.length;m++){var b=y[m];u[b.id()]=b.same(c)?0:1/0,f.push(b)}for(var C=function(O,$){for(var H=(a?O.edgesTo($):O.edgesWith($)).intersect(_),L=1/0,I,P=0;P<H.length;P++){var z=H[P],K=l(z);(K<L||!I)&&(L=K,I=z)}return{edge:I,dist:L}};f.size()>0;){var S=f.pop(),k=v(S),w=S.id();if(d[w]=k,k!==1/0)for(var x=S.neighborhood().intersect(y),A=0;A<x.length;A++){var D=x[A],T=D.id(),E=C(S,D),R=k+E.dist;R<v(D)&&(g(D,R),h[T]={node:S,edge:E.edge})}}return{distanceTo:function(O){var $=qe(O)?y.filter(O)[0]:O[0];return d[$.id()]},pathTo:function(O){var $=qe(O)?y.filter(O)[0]:O[0],H=[],L=$,I=L.id();if($.length>0)for(H.unshift($);h[I];){var P=h[I];H.unshift(P.edge),H.unshift(P.node),L=P.node,I=L.id()}return o.spawn(H)}}}},wA={kruskal:function(t){t=t||function(m){return 1};for(var r=this.byGroup(),i=r.nodes,n=r.edges,s=i.length,a=new Array(s),o=i,l=function(b){for(var C=0;C<a.length;C++){var S=a[C];if(S.has(b))return C}},c=0;c<s;c++)a[c]=this.spawn(i[c]);for(var u=n.sort(function(m,b){return t(m)-t(b)}),h=0;h<u.length;h++){var d=u[h],p=d.source()[0],y=d.target()[0],_=l(p),v=l(y),g=a[_],f=a[v];_!==v&&(o.merge(d),g.merge(f),a.splice(v,1))}return o}},SA=hr({root:null,goal:null,weight:function(t){return 1},heuristic:function(t){return 0},directed:!1}),kA={aStar:function(t){var r=this.cy(),i=SA(t),n=i.root,s=i.goal,a=i.heuristic,o=i.directed,l=i.weight;n=r.collection(n)[0],s=r.collection(s)[0];var c=n.id(),u=s.id(),h={},d={},p={},y=new wl(function(I,P){return d[I.id()]-d[P.id()]}),_=new Na,v={},g={},f=function(P,z){y.push(P),_.add(z)},m,b,C=function(){m=y.pop(),b=m.id(),_.delete(b)},S=function(P){return _.has(P)};f(n,c),h[c]=0,d[c]=a(n);for(var k=0;y.size()>0;){if(C(),k++,b===u){for(var w=[],x=s,A=u,D=g[A];w.unshift(x),D!=null&&w.unshift(D),x=v[A],x!=null;)A=x.id(),D=g[A];return{found:!0,distance:h[b],path:this.spawn(w),steps:k}}p[b]=!0;for(var T=m._private.edges,E=0;E<T.length;E++){var R=T[E];if(this.hasElementWithId(R.id())&&!(o&&R.data("source")!==b)){var F=R.source(),O=R.target(),$=F.id()!==b?F:O,H=$.id();if(this.hasElementWithId(H)&&!p[H]){var L=h[b]+l(R);if(!S(H)){h[H]=L,d[H]=L+a($),f($,H),v[H]=m,g[H]=R;continue}L<h[H]&&(h[H]=L,d[H]=L+a($),v[H]=m,g[H]=R)}}}}return{found:!1,distance:void 0,path:void 0,steps:k}}},xA=hr({weight:function(t){return 1},directed:!1}),TA={floydWarshall:function(t){for(var r=this.cy(),i=xA(t),n=i.weight,s=i.directed,a=n,o=this.byGroup(),l=o.nodes,c=o.edges,u=l.length,h=u*u,d=function(K){return l.indexOf(K)},p=function(K){return l[K]},y=new Array(h),_=0;_<h;_++){var v=_%u,g=(_-v)/u;g===v?y[_]=0:y[_]=1/0}for(var f=new Array(h),m=new Array(h),b=0;b<c.length;b++){var C=c[b],S=C.source()[0],k=C.target()[0];if(S!==k){var w=d(S),x=d(k),A=w*u+x,D=a(C);if(y[A]>D&&(y[A]=D,f[A]=x,m[A]=C),!s){var T=x*u+w;!s&&y[T]>D&&(y[T]=D,f[T]=w,m[T]=C)}}}for(var E=0;E<u;E++)for(var R=0;R<u;R++)for(var F=R*u+E,O=0;O<u;O++){var $=R*u+O,H=E*u+O;y[F]+y[H]<y[$]&&(y[$]=y[F]+y[H],f[$]=f[F])}var L=function(K){return(qe(K)?r.filter(K):K)[0]},I=function(K){return d(L(K))},P={distance:function(K,te){var J=I(K),ne=I(te);return y[J*u+ne]},path:function(K,te){var J=I(K),ne=I(te),V=p(J);if(J===ne)return V.collection();if(f[J*u+ne]==null)return r.collection();var N=r.collection(),ee=J,U;for(N.merge(V);J!==ne;)ee=J,J=f[J*u+ne],U=m[ee*u+J],N.merge(U),N.merge(p(J));return N}};return P}},EA=hr({weight:function(t){return 1},directed:!1,root:null}),AA={bellmanFord:function(t){var r=this,i=EA(t),n=i.weight,s=i.directed,a=i.root,o=n,l=this,c=this.cy(),u=this.byGroup(),h=u.edges,d=u.nodes,p=d.length,y=new sn,_=!1,v=[];a=c.collection(a)[0],h.unmergeBy(function(Y){return Y.isLoop()});for(var g=h.length,f=function(ae){var he=y.get(ae.id());return he||(he={},y.set(ae.id(),he)),he},m=function(ae){return(qe(ae)?c.$(ae):ae)[0]},b=function(ae){return f(m(ae)).dist},C=function(ae){for(var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:a,ce=m(ae),ue=[],ye=ce;;){if(ye==null)return r.spawn();var ve=f(ye),_e=ve.edge,Ce=ve.pred;if(ue.unshift(ye[0]),ye.same(he)&&ue.length>0)break;_e!=null&&ue.unshift(_e),ye=Ce}return l.spawn(ue)},S=0;S<p;S++){var k=d[S],w=f(k);k.same(a)?w.dist=0:w.dist=1/0,w.pred=null,w.edge=null}for(var x=!1,A=function(ae,he,ce,ue,ye,ve){var _e=ue.dist+ve;_e<ye.dist&&!ce.same(ue.edge)&&(ye.dist=_e,ye.pred=ae,ye.edge=ce,x=!0)},D=1;D<p;D++){x=!1;for(var T=0;T<g;T++){var E=h[T],R=E.source(),F=E.target(),O=o(E),$=f(R),H=f(F);A(R,F,E,$,H,O),s||A(F,R,E,H,$,O)}if(!x)break}if(x)for(var L=[],I=0;I<g;I++){var P=h[I],z=P.source(),K=P.target(),te=o(P),J=f(z).dist,ne=f(K).dist;if(J+te<ne||!s&&ne+te<J)if(_||(mt("Graph contains a negative weight cycle for Bellman-Ford"),_=!0),t.findNegativeWeightCycles!==!1){var V=[];J+te<ne&&V.push(z),!s&&ne+te<J&&V.push(K);for(var N=V.length,ee=0;ee<N;ee++){var U=V[ee],X=[U];X.push(f(U).edge);for(var M=f(U).pred;X.indexOf(M)===-1;)X.push(M),X.push(f(M).edge),M=f(M).pred;X=X.slice(X.indexOf(M));for(var q=X[0].id(),Q=0,se=2;se<X.length;se+=2)X[se].id()<q&&(q=X[se].id(),Q=se);X=X.slice(Q).concat(X.slice(0,Q)),X.push(X[0]);var Z=X.map(function(Y){return Y.id()}).join(",");L.indexOf(Z)===-1&&(v.push(l.spawn(X)),L.push(Z))}}else break}return{distanceTo:b,pathTo:C,hasNegativeWeightCycle:_,negativeWeightCycles:v}}},BA=Math.sqrt(2),DA=function(t,r,i){i.length===0&&Rt("Karger-Stein must be run on a connected (sub)graph");for(var n=i[t],s=n[1],a=n[2],o=r[s],l=r[a],c=i,u=c.length-1;u>=0;u--){var h=c[u],d=h[1],p=h[2];(r[d]===o&&r[p]===l||r[d]===l&&r[p]===o)&&c.splice(u,1)}for(var y=0;y<c.length;y++){var _=c[y];_[1]===l?(c[y]=_.slice(),c[y][1]=o):_[2]===l&&(c[y]=_.slice(),c[y][2]=o)}for(var v=0;v<r.length;v++)r[v]===l&&(r[v]=o);return c},pd=function(t,r,i,n){for(;i>n;){var s=Math.floor(Math.random()*r.length);r=DA(s,t,r),i--}return r},LA={kargerStein:function(){var t=this,r=this.byGroup(),i=r.nodes,n=r.edges;n.unmergeBy(function(H){return H.isLoop()});var s=i.length,a=n.length,o=Math.ceil(Math.pow(Math.log(s)/Math.LN2,2)),l=Math.floor(s/BA);if(s<2){Rt("At least 2 nodes are required for Karger-Stein algorithm");return}for(var c=[],u=0;u<a;u++){var h=n[u];c.push([u,i.indexOf(h.source()),i.indexOf(h.target())])}for(var d=1/0,p=[],y=new Array(s),_=new Array(s),v=new Array(s),g=function(L,I){for(var P=0;P<s;P++)I[P]=L[P]},f=0;f<=o;f++){for(var m=0;m<s;m++)_[m]=m;var b=pd(_,c.slice(),s,l),C=b.slice();g(_,v);var S=pd(_,b,l,2),k=pd(v,C,l,2);S.length<=k.length&&S.length<d?(d=S.length,p=S,g(_,y)):k.length<=S.length&&k.length<d&&(d=k.length,p=k,g(v,y))}for(var w=this.spawn(p.map(function(H){return n[H[0]]})),x=this.spawn(),A=this.spawn(),D=y[0],T=0;T<y.length;T++){var E=y[T],R=i[T];E===D?x.merge(R):A.merge(R)}var F=function(L){var I=t.spawn();return L.forEach(function(P){I.merge(P),P.connectedEdges().forEach(function(z){t.contains(z)&&!w.contains(z)&&I.merge(z)})}),I},O=[F(x),F(A)],$={cut:w,components:O,partition1:x,partition2:A};return $}},vd,RA=function(t){return{x:t.x,y:t.y}},th=function(t,r,i){return{x:t.x*r+i.x,y:t.y*r+i.y}},dC=function(t,r,i){return{x:(t.x-i.x)/r,y:(t.y-i.y)/r}},sa=function(t){return{x:t[0],y:t[1]}},MA=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=1/0,s=r;s<i;s++){var a=t[s];isFinite(a)&&(n=Math.min(a,n))}return n},PA=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=-1/0,s=r;s<i;s++){var a=t[s];isFinite(a)&&(n=Math.max(a,n))}return n},IA=function(t){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=0,s=0,a=r;a<i;a++){var o=t[a];isFinite(o)&&(n+=o,s++)}return n/s},FA=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.length,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;n?t=t.slice(r,i):(i<t.length&&t.splice(i,t.length-i),r>0&&t.splice(0,r));for(var o=0,l=t.length-1;l>=0;l--){var c=t[l];a?isFinite(c)||(t[l]=-1/0,o++):t.splice(l,1)}s&&t.sort(function(d,p){return d-p});var u=t.length,h=Math.floor(u/2);return u%2!==0?t[h+1+o]:(t[h-1+o]+t[h+o])/2},OA=function(t){return Math.PI*t/180},Vl=function(t,r){return Math.atan2(r,t)-Math.PI/2},xv=Math.log2||function(e){return Math.log(e)/Math.log(2)},Tv=function(t){return t>0?1:t<0?-1:0},Es=function(t,r){return Math.sqrt(ds(t,r))},ds=function(t,r){var i=r.x-t.x,n=r.y-t.y;return i*i+n*n},NA=function(t){for(var r=t.length,i=0,n=0;n<r;n++)i+=t[n];for(var s=0;s<r;s++)t[s]=t[s]/i;return t},ir=function(t,r,i,n){return(1-n)*(1-n)*t+2*(1-n)*n*r+n*n*i},ma=function(t,r,i,n){return{x:ir(t.x,r.x,i.x,n),y:ir(t.y,r.y,i.y,n)}},$A=function(t,r,i,n){var s={x:r.x-t.x,y:r.y-t.y},a=Es(t,r),o={x:s.x/a,y:s.y/a};return i=i??0,n=n??i*a,{x:t.x+o.x*n,y:t.y+o.y*n}},Zo=function(t,r,i){return Math.max(t,Math.min(i,r))},Mr=function(t){if(t==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(t.x1!=null&&t.y1!=null){if(t.x2!=null&&t.y2!=null&&t.x2>=t.x1&&t.y2>=t.y1)return{x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,w:t.x2-t.x1,h:t.y2-t.y1};if(t.w!=null&&t.h!=null&&t.w>=0&&t.h>=0)return{x1:t.x1,y1:t.y1,x2:t.x1+t.w,y2:t.y1+t.h,w:t.w,h:t.h}}},zA=function(t){return{x1:t.x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h}},HA=function(t){t.x1=1/0,t.y1=1/0,t.x2=-1/0,t.y2=-1/0,t.w=0,t.h=0},qA=function(t,r){t.x1=Math.min(t.x1,r.x1),t.x2=Math.max(t.x2,r.x2),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,r.y1),t.y2=Math.max(t.y2,r.y2),t.h=t.y2-t.y1},fC=function(t,r,i){t.x1=Math.min(t.x1,r),t.x2=Math.max(t.x2,r),t.w=t.x2-t.x1,t.y1=Math.min(t.y1,i),t.y2=Math.max(t.y2,i),t.h=t.y2-t.y1},_c=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return t.x1-=r,t.x2+=r,t.y1-=r,t.y2+=r,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},bc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],i,n,s,a;if(r.length===1)i=n=s=a=r[0];else if(r.length===2)i=s=r[0],a=n=r[1];else if(r.length===4){var o=jt(r,4);i=o[0],n=o[1],s=o[2],a=o[3]}return t.x1-=a,t.x2+=n,t.y1-=i,t.y2+=s,t.w=t.x2-t.x1,t.h=t.y2-t.y1,t},Zm=function(t,r){t.x1=r.x1,t.y1=r.y1,t.x2=r.x2,t.y2=r.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1},Ev=function(t,r){return!(t.x1>r.x2||r.x1>t.x2||t.x2<r.x1||r.x2<t.x1||t.y2<r.y1||r.y2<t.y1||t.y1>r.y2||r.y1>t.y2)},An=function(t,r,i){return t.x1<=r&&r<=t.x2&&t.y1<=i&&i<=t.y2},Qm=function(t,r){return An(t,r.x,r.y)},pC=function(t,r){return An(t,r.x1,r.y1)&&An(t,r.x2,r.y2)},WA=(vd=Math.hypot)!==null&&vd!==void 0?vd:function(e,t){return Math.sqrt(e*e+t*t)};function UA(e,t){if(e.length<3)throw new Error("Need at least 3 vertices");var r=function(w,x){return{x:w.x+x.x,y:w.y+x.y}},i=function(w,x){return{x:w.x-x.x,y:w.y-x.y}},n=function(w,x){return{x:w.x*x,y:w.y*x}},s=function(w,x){return w.x*x.y-w.y*x.x},a=function(w){var x=WA(w.x,w.y);return x===0?{x:0,y:0}:{x:w.x/x,y:w.y/x}},o=function(w){for(var x=0,A=0;A<w.length;A++){var D=w[A],T=w[(A+1)%w.length];x+=D.x*T.y-T.x*D.y}return x/2},l=function(w,x,A,D){var T=i(x,w),E=i(D,A),R=s(T,E);if(Math.abs(R)<1e-9)return r(w,n(T,.5));var F=s(i(A,w),E)/R;return r(w,n(T,F))},c=e.map(function(k){return{x:k.x,y:k.y}});o(c)<0&&c.reverse();for(var u=c.length,h=[],d=0;d<u;d++){var p=c[d],y=c[(d+1)%u],_=i(y,p),v=a({x:_.y,y:-_.x});h.push(v)}for(var g=h.map(function(k,w){var x=r(c[w],n(k,t)),A=r(c[(w+1)%u],n(k,t));return{p1:x,p2:A}}),f=[],m=0;m<u;m++){var b=g[(m-1+u)%u],C=g[m],S=l(b.p1,b.p2,C.p1,C.p2);f.push(S)}return f}function VA(e,t,r,i,n,s){var a=eB(e,t,r,i,n),o=UA(a,s),l=Mr();return o.forEach(function(c){return fC(l,c.x,c.y)}),l}var vC=function(t,r,i,n,s,a,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",c=l==="auto"?Hn(s,a):l,u=s/2,h=a/2;c=Math.min(c,u,h);var d=c!==u,p=c!==h,y;if(d){var _=i-u+c-o,v=n-h-o,g=i+u-c+o,f=v;if(y=Bn(t,r,i,n,_,v,g,f,!1),y.length>0)return y}if(p){var m=i+u+o,b=n-h+c-o,C=m,S=n+h-c+o;if(y=Bn(t,r,i,n,m,b,C,S,!1),y.length>0)return y}if(d){var k=i-u+c-o,w=n+h+o,x=i+u-c+o,A=w;if(y=Bn(t,r,i,n,k,w,x,A,!1),y.length>0)return y}if(p){var D=i-u-o,T=n-h+c-o,E=D,R=n+h-c+o;if(y=Bn(t,r,i,n,D,T,E,R,!1),y.length>0)return y}var F;{var O=i-u+c,$=n-h+c;if(F=fo(t,r,i,n,O,$,c+o),F.length>0&&F[0]<=O&&F[1]<=$)return[F[0],F[1]]}{var H=i+u-c,L=n-h+c;if(F=fo(t,r,i,n,H,L,c+o),F.length>0&&F[0]>=H&&F[1]<=L)return[F[0],F[1]]}{var I=i+u-c,P=n+h-c;if(F=fo(t,r,i,n,I,P,c+o),F.length>0&&F[0]>=I&&F[1]>=P)return[F[0],F[1]]}{var z=i-u+c,K=n+h-c;if(F=fo(t,r,i,n,z,K,c+o),F.length>0&&F[0]<=z&&F[1]>=K)return[F[0],F[1]]}return[]},jA=function(t,r,i,n,s,a,o){var l=o,c=Math.min(i,s),u=Math.max(i,s),h=Math.min(n,a),d=Math.max(n,a);return c-l<=t&&t<=u+l&&h-l<=r&&r<=d+l},GA=function(t,r,i,n,s,a,o,l,c){var u={x1:Math.min(i,o,s)-c,x2:Math.max(i,o,s)+c,y1:Math.min(n,l,a)-c,y2:Math.max(n,l,a)+c};return!(t<u.x1||t>u.x2||r<u.y1||r>u.y2)},KA=function(t,r,i,n){i-=n;var s=r*r-4*t*i;if(s<0)return[];var a=Math.sqrt(s),o=2*t,l=(-r+a)/o,c=(-r-a)/o;return[l,c]},YA=function(t,r,i,n,s){var a=1e-5;t===0&&(t=a),r/=t,i/=t,n/=t;var o,l,c,u,h,d,p,y;if(l=(3*i-r*r)/9,c=-(27*n)+r*(9*i-2*(r*r)),c/=54,o=l*l*l+c*c,s[1]=0,p=r/3,o>0){h=c+Math.sqrt(o),h=h<0?-Math.pow(-h,1/3):Math.pow(h,1/3),d=c-Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),s[0]=-p+h+d,p+=(h+d)/2,s[4]=s[2]=-p,p=Math.sqrt(3)*(-d+h)/2,s[3]=p,s[5]=-p;return}if(s[5]=s[3]=0,o===0){y=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),s[0]=-p+2*y,s[4]=s[2]=-(y+p);return}l=-l,u=l*l*l,u=Math.acos(c/Math.sqrt(u)),y=2*Math.sqrt(l),s[0]=-p+y*Math.cos(u/3),s[2]=-p+y*Math.cos((u+2*Math.PI)/3),s[4]=-p+y*Math.cos((u+4*Math.PI)/3)},XA=function(t,r,i,n,s,a,o,l){var c=1*i*i-4*i*s+2*i*o+4*s*s-4*s*o+o*o+n*n-4*n*a+2*n*l+4*a*a-4*a*l+l*l,u=9*i*s-3*i*i-3*i*o-6*s*s+3*s*o+9*n*a-3*n*n-3*n*l-6*a*a+3*a*l,h=3*i*i-6*i*s+i*o-i*t+2*s*s+2*s*t-o*t+3*n*n-6*n*a+n*l-n*r+2*a*a+2*a*r-l*r,d=1*i*s-i*i+i*t-s*t+n*a-n*n+n*r-a*r,p=[];YA(c,u,h,d,p);for(var y=1e-7,_=[],v=0;v<6;v+=2)Math.abs(p[v+1])<y&&p[v]>=0&&p[v]<=1&&_.push(p[v]);_.push(1),_.push(0);for(var g=-1,f,m,b,C=0;C<_.length;C++)f=Math.pow(1-_[C],2)*i+2*(1-_[C])*_[C]*s+_[C]*_[C]*o,m=Math.pow(1-_[C],2)*n+2*(1-_[C])*_[C]*a+_[C]*_[C]*l,b=Math.pow(f-t,2)+Math.pow(m-r,2),g>=0?b<g&&(g=b):g=b;return g},ZA=function(t,r,i,n,s,a){var o=[t-i,r-n],l=[s-i,a-n],c=l[0]*l[0]+l[1]*l[1],u=o[0]*o[0]+o[1]*o[1],h=o[0]*l[0]+o[1]*l[1],d=h*h/c;return h<0?u:d>c?(t-s)*(t-s)+(r-a)*(r-a):u-d},Nr=function(t,r,i){for(var n,s,a,o,l,c=0,u=0;u<i.length/2;u++)if(n=i[u*2],s=i[u*2+1],u+1<i.length/2?(a=i[(u+1)*2],o=i[(u+1)*2+1]):(a=i[(u+1-i.length/2)*2],o=i[(u+1-i.length/2)*2+1]),!(n==t&&a==t))if(n>=t&&t>=a||n<=t&&t<=a)l=(t-n)/(a-n)*(o-s)+s,l>r&&c++;else continue;return c%2!==0},hn=function(t,r,i,n,s,a,o,l,c){var u=new Array(i.length),h;l[0]!=null?(h=Math.atan(l[1]/l[0]),l[0]<0?h=h+Math.PI/2:h=-h-Math.PI/2):h=l;for(var d=Math.cos(-h),p=Math.sin(-h),y=0;y<u.length/2;y++)u[y*2]=a/2*(i[y*2]*d-i[y*2+1]*p),u[y*2+1]=o/2*(i[y*2+1]*d+i[y*2]*p),u[y*2]+=n,u[y*2+1]+=s;var _;if(c>0){var v=nu(u,-c);_=iu(v)}else _=u;return Nr(t,r,_)},QA=function(t,r,i,n,s,a,o,l){for(var c=new Array(i.length*2),u=0;u<l.length;u++){var h=l[u];c[u*4+0]=h.startX,c[u*4+1]=h.startY,c[u*4+2]=h.stopX,c[u*4+3]=h.stopY;var d=Math.pow(h.cx-t,2)+Math.pow(h.cy-r,2);if(d<=Math.pow(h.radius,2))return!0}return Nr(t,r,c)},iu=function(t){for(var r=new Array(t.length/2),i,n,s,a,o,l,c,u,h=0;h<t.length/4;h++){i=t[h*4],n=t[h*4+1],s=t[h*4+2],a=t[h*4+3],h<t.length/4-1?(o=t[(h+1)*4],l=t[(h+1)*4+1],c=t[(h+1)*4+2],u=t[(h+1)*4+3]):(o=t[0],l=t[1],c=t[2],u=t[3]);var d=Bn(i,n,s,a,o,l,c,u,!0);r[h*2]=d[0],r[h*2+1]=d[1]}return r},nu=function(t,r){for(var i=new Array(t.length*2),n,s,a,o,l=0;l<t.length/2;l++){n=t[l*2],s=t[l*2+1],l<t.length/2-1?(a=t[(l+1)*2],o=t[(l+1)*2+1]):(a=t[0],o=t[1]);var c=o-s,u=-(a-n),h=Math.sqrt(c*c+u*u),d=c/h,p=u/h;i[l*4]=n+d*r,i[l*4+1]=s+p*r,i[l*4+2]=a+d*r,i[l*4+3]=o+p*r}return i},JA=function(t,r,i,n,s,a){var o=i-t,l=n-r;o/=s,l/=a;var c=Math.sqrt(o*o+l*l),u=c-1;if(u<0)return[];var h=u/c;return[(i-t)*h+t,(n-r)*h+r]},bs=function(t,r,i,n,s,a,o){return t-=s,r-=a,t/=i/2+o,r/=n/2+o,t*t+r*r<=1},fo=function(t,r,i,n,s,a,o){var l=[i-t,n-r],c=[t-s,r-a],u=l[0]*l[0]+l[1]*l[1],h=2*(c[0]*l[0]+c[1]*l[1]),d=c[0]*c[0]+c[1]*c[1]-o*o,p=h*h-4*u*d;if(p<0)return[];var y=(-h+Math.sqrt(p))/(2*u),_=(-h-Math.sqrt(p))/(2*u),v=Math.min(y,_),g=Math.max(y,_),f=[];if(v>=0&&v<=1&&f.push(v),g>=0&&g<=1&&f.push(g),f.length===0)return[];var m=f[0]*l[0]+t,b=f[0]*l[1]+r;if(f.length>1){if(f[0]==f[1])return[m,b];var C=f[1]*l[0]+t,S=f[1]*l[1]+r;return[m,b,C,S]}else return[m,b]},gd=function(t,r,i){return r<=t&&t<=i||i<=t&&t<=r?t:t<=r&&r<=i||i<=r&&r<=t?r:i},Bn=function(t,r,i,n,s,a,o,l,c){var u=t-s,h=i-t,d=o-s,p=r-a,y=n-r,_=l-a,v=d*p-_*u,g=h*p-y*u,f=_*h-d*y;if(f!==0){var m=v/f,b=g/f,C=.001,S=0-C,k=1+C;return S<=m&&m<=k&&S<=b&&b<=k?[t+m*h,r+m*y]:c?[t+m*h,r+m*y]:[]}else return v===0||g===0?gd(t,i,o)===o?[o,l]:gd(t,i,s)===s?[s,a]:gd(s,o,i)===i?[i,n]:[]:[]},eB=function(t,r,i,n,s){var a=[],o=n/2,l=s/2,c=r,u=i;a.push({x:c+o*t[0],y:u+l*t[1]});for(var h=1;h<t.length/2;h++)a.push({x:c+o*t[h*2],y:u+l*t[h*2+1]});return a},Qo=function(t,r,i,n,s,a,o,l){var c=[],u,h=new Array(i.length),d=!0;a==null&&(d=!1);var p;if(d){for(var y=0;y<h.length/2;y++)h[y*2]=i[y*2]*a+n,h[y*2+1]=i[y*2+1]*o+s;if(l>0){var _=nu(h,-l);p=iu(_)}else p=h}else p=i;for(var v,g,f,m,b=0;b<p.length/2;b++)v=p[b*2],g=p[b*2+1],b<p.length/2-1?(f=p[(b+1)*2],m=p[(b+1)*2+1]):(f=p[0],m=p[1]),u=Bn(t,r,n,s,v,g,f,m),u.length!==0&&c.push(u[0],u[1]);return c},tB=function(t,r,i,n,s,a,o,l,c){var u=[],h,d=new Array(i.length*2);c.forEach(function(f,m){m===0?(d[d.length-2]=f.startX,d[d.length-1]=f.startY):(d[m*4-2]=f.startX,d[m*4-1]=f.startY),d[m*4]=f.stopX,d[m*4+1]=f.stopY,h=fo(t,r,n,s,f.cx,f.cy,f.radius),h.length!==0&&u.push(h[0],h[1])});for(var p=0;p<d.length/4;p++)h=Bn(t,r,n,s,d[p*4],d[p*4+1],d[p*4+2],d[p*4+3],!1),h.length!==0&&u.push(h[0],h[1]);if(u.length>2){for(var y=[u[0],u[1]],_=Math.pow(y[0]-t,2)+Math.pow(y[1]-r,2),v=1;v<u.length/2;v++){var g=Math.pow(u[v*2]-t,2)+Math.pow(u[v*2+1]-r,2);g<=_&&(y[0]=u[v*2],y[1]=u[v*2+1],_=g)}return y}return u},jl=function(t,r,i){var n=[t[0]-r[0],t[1]-r[1]],s=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(s-i)/s;return a<0&&(a=1e-5),[r[0]+a*n[0],r[1]+a*n[1]]},Ar=function(t,r){var i=hp(t,r);return i=gC(i),i},gC=function(t){for(var r,i,n=t.length/2,s=1/0,a=1/0,o=-1/0,l=-1/0,c=0;c<n;c++)r=t[2*c],i=t[2*c+1],s=Math.min(s,r),o=Math.max(o,r),a=Math.min(a,i),l=Math.max(l,i);for(var u=2/(o-s),h=2/(l-a),d=0;d<n;d++)r=t[2*d]=t[2*d]*u,i=t[2*d+1]=t[2*d+1]*h,s=Math.min(s,r),o=Math.max(o,r),a=Math.min(a,i),l=Math.max(l,i);if(a<-1)for(var p=0;p<n;p++)i=t[2*p+1]=t[2*p+1]+(-1-a);return t},hp=function(t,r){var i=1/t*2*Math.PI,n=t%2===0?Math.PI/2+i/2:Math.PI/2;n+=r;for(var s=new Array(t*2),a,o=0;o<t;o++)a=o*i+n,s[2*o]=Math.cos(a),s[2*o+1]=Math.sin(-a);return s},Hn=function(t,r){return Math.min(t/4,r/4,8)},mC=function(t,r){return Math.min(t/10,r/10,8)},Av=function(){return 8},rB=function(t,r,i){return[t-2*r+i,2*(r-t),t]},dp=function(t,r){return{heightOffset:Math.min(15,.05*r),widthOffset:Math.min(100,.25*t),ctrlPtOffsetPct:.05}};function md(e,t){function r(h){for(var d=[],p=0;p<h.length;p++){var y=h[p],_=h[(p+1)%h.length],v={x:_.x-y.x,y:_.y-y.y},g={x:-v.y,y:v.x},f=Math.sqrt(g.x*g.x+g.y*g.y);d.push({x:g.x/f,y:g.y/f})}return d}function i(h,d){var p=1/0,y=-1/0,_=zr(h),v;try{for(_.s();!(v=_.n()).done;){var g=v.value,f=g.x*d.x+g.y*d.y;p=Math.min(p,f),y=Math.max(y,f)}}catch(m){_.e(m)}finally{_.f()}return{min:p,max:y}}function n(h,d){return!(h.max<d.min||d.max<h.min)}var s=[].concat(Jc(r(e)),Jc(r(t))),a=zr(s),o;try{for(a.s();!(o=a.n()).done;){var l=o.value,c=i(e,l),u=i(t,l);if(!n(c,u))return!1}}catch(h){a.e(h)}finally{a.f()}return!0}var iB=hr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(t){return 1}}),nB={pageRank:function(t){for(var r=iB(t),i=r.dampingFactor,n=r.precision,s=r.iterations,a=r.weight,o=this._private.cy,l=this.byGroup(),c=l.nodes,u=l.edges,h=c.length,d=h*h,p=u.length,y=new Array(d),_=new Array(h),v=(1-i)/h,g=0;g<h;g++){for(var f=0;f<h;f++){var m=g*h+f;y[m]=0}_[g]=0}for(var b=0;b<p;b++){var C=u[b],S=C.data("source"),k=C.data("target");if(S!==k){var w=c.indexOfId(S),x=c.indexOfId(k),A=a(C),D=x*h+w;y[D]+=A,_[w]+=A}}for(var T=1/h+v,E=0;E<h;E++)if(_[E]===0)for(var R=0;R<h;R++){var F=R*h+E;y[F]=T}else for(var O=0;O<h;O++){var $=O*h+E;y[$]=y[$]/_[E]+v}for(var H=new Array(h),L=new Array(h),I,P=0;P<h;P++)H[P]=1;for(var z=0;z<s;z++){for(var K=0;K<h;K++)L[K]=0;for(var te=0;te<h;te++)for(var J=0;J<h;J++){var ne=te*h+J;L[te]+=y[ne]*H[J]}NA(L),I=H,H=L,L=I;for(var V=0,N=0;N<h;N++){var ee=I[N]-H[N];V+=ee*ee}if(V<n)break}var U={rank:function(M){return M=o.collection(M)[0],H[c.indexOf(M)]}};return U}},Jm=hr({root:null,weight:function(t){return 1},directed:!1,alpha:0}),ya={degreeCentralityNormalized:function(t){t=Jm(t);var r=this.cy(),i=this.nodes(),n=i.length;if(t.directed){for(var u={},h={},d=0,p=0,y=0;y<n;y++){var _=i[y],v=_.id();t.root=_;var g=this.degreeCentrality(t);d<g.indegree&&(d=g.indegree),p<g.outdegree&&(p=g.outdegree),u[v]=g.indegree,h[v]=g.outdegree}return{indegree:function(m){return d==0?0:(qe(m)&&(m=r.filter(m)),u[m.id()]/d)},outdegree:function(m){return p===0?0:(qe(m)&&(m=r.filter(m)),h[m.id()]/p)}}}else{for(var s={},a=0,o=0;o<n;o++){var l=i[o];t.root=l;var c=this.degreeCentrality(t);a<c.degree&&(a=c.degree),s[l.id()]=c.degree}return{degree:function(m){return a===0?0:(qe(m)&&(m=r.filter(m)),s[m.id()]/a)}}}},degreeCentrality:function(t){t=Jm(t);var r=this.cy(),i=this,n=t,s=n.root,a=n.weight,o=n.directed,l=n.alpha;if(s=r.collection(s)[0],o){for(var p=s.connectedEdges(),y=p.filter(function(S){return S.target().same(s)&&i.has(S)}),_=p.filter(function(S){return S.source().same(s)&&i.has(S)}),v=y.length,g=_.length,f=0,m=0,b=0;b<y.length;b++)f+=a(y[b]);for(var C=0;C<_.length;C++)m+=a(_[C]);return{indegree:Math.pow(v,1-l)*Math.pow(f,l),outdegree:Math.pow(g,1-l)*Math.pow(m,l)}}else{for(var c=s.connectedEdges().intersection(i),u=c.length,h=0,d=0;d<c.length;d++)h+=a(c[d]);return{degree:Math.pow(u,1-l)*Math.pow(h,l)}}}};ya.dc=ya.degreeCentrality;ya.dcn=ya.degreeCentralityNormalised=ya.degreeCentralityNormalized;var ey=hr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),_a={closenessCentralityNormalized:function(t){for(var r=ey(t),i=r.harmonic,n=r.weight,s=r.directed,a=this.cy(),o={},l=0,c=this.nodes(),u=this.floydWarshall({weight:n,directed:s}),h=0;h<c.length;h++){for(var d=0,p=c[h],y=0;y<c.length;y++)if(h!==y){var _=u.distance(p,c[y]);i?d+=1/_:d+=_}i||(d=1/d),l<d&&(l=d),o[p.id()]=d}return{closeness:function(g){return l==0?0:(qe(g)?g=a.filter(g)[0].id():g=g.id(),o[g]/l)}}},closenessCentrality:function(t){var r=ey(t),i=r.root,n=r.weight,s=r.directed,a=r.harmonic;i=this.filter(i)[0];for(var o=this.dijkstra({root:i,weight:n,directed:s}),l=0,c=this.nodes(),u=0;u<c.length;u++){var h=c[u];if(!h.same(i)){var d=o.distanceTo(h);a?l+=1/d:l+=d}}return a?l:1/l}};_a.cc=_a.closenessCentrality;_a.ccn=_a.closenessCentralityNormalised=_a.closenessCentralityNormalized;var sB=hr({weight:null,directed:!1}),fp={betweennessCentrality:function(t){for(var r=sB(t),i=r.directed,n=r.weight,s=n!=null,a=this.cy(),o=this.nodes(),l={},c={},u=0,h={set:function(m,b){c[m]=b,b>u&&(u=b)},get:function(m){return c[m]}},d=0;d<o.length;d++){var p=o[d],y=p.id();i?l[y]=p.outgoers().nodes():l[y]=p.openNeighborhood().nodes(),h.set(y,0)}for(var _=function(){for(var m=o[v].id(),b=[],C={},S={},k={},w=new wl(function(te,J){return k[te]-k[J]}),x=0;x<o.length;x++){var A=o[x].id();C[A]=[],S[A]=0,k[A]=1/0}for(S[m]=1,k[m]=0,w.push(m);!w.empty();){var D=w.pop();if(b.push(D),s)for(var T=0;T<l[D].length;T++){var E=l[D][T],R=a.getElementById(D),F=void 0;R.edgesTo(E).length>0?F=R.edgesTo(E)[0]:F=E.edgesTo(R)[0];var O=n(F);E=E.id(),k[E]>k[D]+O&&(k[E]=k[D]+O,w.nodes.indexOf(E)<0?w.push(E):w.updateItem(E),S[E]=0,C[E]=[]),k[E]==k[D]+O&&(S[E]=S[E]+S[D],C[E].push(D))}else for(var $=0;$<l[D].length;$++){var H=l[D][$].id();k[H]==1/0&&(w.push(H),k[H]=k[D]+1),k[H]==k[D]+1&&(S[H]=S[H]+S[D],C[H].push(D))}}for(var L={},I=0;I<o.length;I++)L[o[I].id()]=0;for(;b.length>0;){for(var P=b.pop(),z=0;z<C[P].length;z++){var K=C[P][z];L[K]=L[K]+S[K]/S[P]*(1+L[P])}P!=o[v].id()&&h.set(P,h.get(P)+L[P])}},v=0;v<o.length;v++)_();var g={betweenness:function(m){var b=a.collection(m).id();return h.get(b)},betweennessNormalized:function(m){if(u==0)return 0;var b=a.collection(m).id();return h.get(b)/u}};return g.betweennessNormalised=g.betweennessNormalized,g}};fp.bc=fp.betweennessCentrality;var aB=hr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),oB=function(t){return aB(t)},lB=function(t,r){for(var i=0,n=0;n<r.length;n++)i+=r[n](t);return i},cB=function(t,r,i){for(var n=0;n<r;n++)t[n*r+n]=i},yC=function(t,r){for(var i,n=0;n<r;n++){i=0;for(var s=0;s<r;s++)i+=t[s*r+n];for(var a=0;a<r;a++)t[a*r+n]=t[a*r+n]/i}},uB=function(t,r,i){for(var n=new Array(i*i),s=0;s<i;s++){for(var a=0;a<i;a++)n[s*i+a]=0;for(var o=0;o<i;o++)for(var l=0;l<i;l++)n[s*i+l]+=t[s*i+o]*r[o*i+l]}return n},hB=function(t,r,i){for(var n=t.slice(0),s=1;s<i;s++)t=uB(t,n,r);return t},dB=function(t,r,i){for(var n=new Array(r*r),s=0;s<r*r;s++)n[s]=Math.pow(t[s],i);return yC(n,r),n},fB=function(t,r,i,n){for(var s=0;s<i;s++){var a=Math.round(t[s]*Math.pow(10,n))/Math.pow(10,n),o=Math.round(r[s]*Math.pow(10,n))/Math.pow(10,n);if(a!==o)return!1}return!0},pB=function(t,r,i,n){for(var s=[],a=0;a<r;a++){for(var o=[],l=0;l<r;l++)Math.round(t[a*r+l]*1e3)/1e3>0&&o.push(i[l]);o.length!==0&&s.push(n.collection(o))}return s},vB=function(t,r){for(var i=0;i<t.length;i++)if(!r[i]||t[i].id()!==r[i].id())return!1;return!0},gB=function(t){for(var r=0;r<t.length;r++)for(var i=0;i<t.length;i++)r!=i&&vB(t[r],t[i])&&t.splice(i,1);return t},ty=function(t){for(var r=this.nodes(),i=this.edges(),n=this.cy(),s=oB(t),a={},o=0;o<r.length;o++)a[r[o].id()]=o;for(var l=r.length,c=l*l,u=new Array(c),h,d=0;d<c;d++)u[d]=0;for(var p=0;p<i.length;p++){var y=i[p],_=a[y.source().id()],v=a[y.target().id()],g=lB(y,s.attributes);u[_*l+v]+=g,u[v*l+_]+=g}cB(u,l,s.multFactor),yC(u,l);for(var f=!0,m=0;f&&m<s.maxIterations;)f=!1,h=hB(u,l,s.expandFactor),u=dB(h,l,s.inflateFactor),fB(u,h,c,4)||(f=!0),m++;var b=pB(u,l,r,n);return b=gB(b),b},mB={markovClustering:ty,mcl:ty},yB=function(t){return t},_C=function(t,r){return Math.abs(r-t)},ry=function(t,r,i){return t+_C(r,i)},iy=function(t,r,i){return t+Math.pow(i-r,2)},_B=function(t){return Math.sqrt(t)},bB=function(t,r,i){return Math.max(t,_C(r,i))},Xa=function(t,r,i,n,s){for(var a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:yB,o=n,l,c,u=0;u<t;u++)l=r(u),c=i(u),o=s(o,l,c);return a(o)},xa={euclidean:function(t,r,i){return t>=2?Xa(t,r,i,0,iy,_B):Xa(t,r,i,0,ry)},squaredEuclidean:function(t,r,i){return Xa(t,r,i,0,iy)},manhattan:function(t,r,i){return Xa(t,r,i,0,ry)},max:function(t,r,i){return Xa(t,r,i,-1/0,bB)}};xa["squared-euclidean"]=xa.squaredEuclidean;xa.squaredeuclidean=xa.squaredEuclidean;function rh(e,t,r,i,n,s){var a;return It(e)?a=e:a=xa[e]||xa.euclidean,t===0&&It(e)?a(n,s):a(t,r,i,n,s)}var CB=hr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Bv=function(t){return CB(t)},su=function(t,r,i,n,s){var a=s!=="kMedoids",o=a?function(h){return i[h]}:function(h){return n[h](i)},l=function(d){return n[d](r)},c=i,u=r;return rh(t,n.length,o,l,c,u)},yd=function(t,r,i){for(var n=i.length,s=new Array(n),a=new Array(n),o=new Array(r),l=null,c=0;c<n;c++)s[c]=t.min(i[c]).value,a[c]=t.max(i[c]).value;for(var u=0;u<r;u++){l=[];for(var h=0;h<n;h++)l[h]=Math.random()*(a[h]-s[h])+s[h];o[u]=l}return o},bC=function(t,r,i,n,s){for(var a=1/0,o=0,l=0;l<r.length;l++){var c=su(i,t,r[l],n,s);c<a&&(a=c,o=l)}return o},CC=function(t,r,i){for(var n=[],s=null,a=0;a<r.length;a++)s=r[a],i[s.id()]===t&&n.push(s);return n},wB=function(t,r,i){return Math.abs(r-t)<=i},SB=function(t,r,i){for(var n=0;n<t.length;n++)for(var s=0;s<t[n].length;s++){var a=Math.abs(t[n][s]-r[n][s]);if(a>i)return!1}return!0},kB=function(t,r,i){for(var n=0;n<i;n++)if(t===r[n])return!0;return!1},ny=function(t,r){var i=new Array(r);if(t.length<50)for(var n=0;n<r;n++){for(var s=t[Math.floor(Math.random()*t.length)];kB(s,i,n);)s=t[Math.floor(Math.random()*t.length)];i[n]=s}else for(var a=0;a<r;a++)i[a]=t[Math.floor(Math.random()*t.length)];return i},sy=function(t,r,i){for(var n=0,s=0;s<r.length;s++)n+=su("manhattan",r[s],t,i,"kMedoids");return n},xB=function(t){var r=this.cy(),i=this.nodes(),n=null,s=Bv(t),a=new Array(s.k),o={},l;s.testMode?typeof s.testCentroids=="number"?(s.testCentroids,l=yd(i,s.k,s.attributes)):Jt(s.testCentroids)==="object"?l=s.testCentroids:l=yd(i,s.k,s.attributes):l=yd(i,s.k,s.attributes);for(var c=!0,u=0;c&&u<s.maxIterations;){for(var h=0;h<i.length;h++)n=i[h],o[n.id()]=bC(n,l,s.distance,s.attributes,"kMeans");c=!1;for(var d=0;d<s.k;d++){var p=CC(d,i,o);if(p.length!==0){for(var y=s.attributes.length,_=l[d],v=new Array(y),g=new Array(y),f=0;f<y;f++){g[f]=0;for(var m=0;m<p.length;m++)n=p[m],g[f]+=s.attributes[f](n);v[f]=g[f]/p.length,wB(v[f],_[f],s.sensitivityThreshold)||(c=!0)}l[d]=v,a[d]=r.collection(p)}}u++}return a},TB=function(t){var r=this.cy(),i=this.nodes(),n=null,s=Bv(t),a=new Array(s.k),o,l={},c,u=new Array(s.k);s.testMode?typeof s.testCentroids=="number"||(Jt(s.testCentroids)==="object"?o=s.testCentroids:o=ny(i,s.k)):o=ny(i,s.k);for(var h=!0,d=0;h&&d<s.maxIterations;){for(var p=0;p<i.length;p++)n=i[p],l[n.id()]=bC(n,o,s.distance,s.attributes,"kMedoids");h=!1;for(var y=0;y<o.length;y++){var _=CC(y,i,l);if(_.length!==0){u[y]=sy(o[y],_,s.attributes);for(var v=0;v<_.length;v++)c=sy(_[v],_,s.attributes),c<u[y]&&(u[y]=c,o[y]=_[v],h=!0);a[y]=r.collection(_)}}d++}return a},EB=function(t,r,i,n,s){for(var a,o,l=0;l<r.length;l++)for(var c=0;c<t.length;c++)n[l][c]=Math.pow(i[l][c],s.m);for(var u=0;u<t.length;u++)for(var h=0;h<s.attributes.length;h++){a=0,o=0;for(var d=0;d<r.length;d++)a+=n[d][u]*s.attributes[h](r[d]),o+=n[d][u];t[u][h]=a/o}},AB=function(t,r,i,n,s){for(var a=0;a<t.length;a++)r[a]=t[a].slice();for(var o,l,c,u=2/(s.m-1),h=0;h<i.length;h++)for(var d=0;d<n.length;d++){o=0;for(var p=0;p<i.length;p++)l=su(s.distance,n[d],i[h],s.attributes,"cmeans"),c=su(s.distance,n[d],i[p],s.attributes,"cmeans"),o+=Math.pow(l/c,u);t[d][h]=1/o}},BB=function(t,r,i,n){for(var s=new Array(i.k),a=0;a<s.length;a++)s[a]=[];for(var o,l,c=0;c<r.length;c++){o=-1/0,l=-1;for(var u=0;u<r[0].length;u++)r[c][u]>o&&(o=r[c][u],l=u);s[l].push(t[c])}for(var h=0;h<s.length;h++)s[h]=n.collection(s[h]);return s},ay=function(t){var r=this.cy(),i=this.nodes(),n=Bv(t),s,a,o,l,c;l=new Array(i.length);for(var u=0;u<i.length;u++)l[u]=new Array(n.k);o=new Array(i.length);for(var h=0;h<i.length;h++)o[h]=new Array(n.k);for(var d=0;d<i.length;d++){for(var p=0,y=0;y<n.k;y++)o[d][y]=Math.random(),p+=o[d][y];for(var _=0;_<n.k;_++)o[d][_]=o[d][_]/p}a=new Array(n.k);for(var v=0;v<n.k;v++)a[v]=new Array(n.attributes.length);c=new Array(i.length);for(var g=0;g<i.length;g++)c[g]=new Array(n.k);for(var f=!0,m=0;f&&m<n.maxIterations;)f=!1,EB(a,i,o,c,n),AB(o,l,a,i,n),SB(o,l,n.sensitivityThreshold)||(f=!0),m++;return s=BB(i,o,n,r),{clusters:s,degreeOfMembership:o}},DB={kMeans:xB,kMedoids:TB,fuzzyCMeans:ay,fcm:ay},LB=hr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),RB={single:"min",complete:"max"},MB=function(t){var r=LB(t),i=RB[r.linkage];return i!=null&&(r.linkage=i),r},oy=function(t,r,i,n,s){for(var a=0,o=1/0,l,c=s.attributes,u=function(x,A){return rh(s.distance,c.length,function(D){return c[D](x)},function(D){return c[D](A)},x,A)},h=0;h<t.length;h++){var d=t[h].key,p=i[d][n[d]];p<o&&(a=d,o=p)}if(s.mode==="threshold"&&o>=s.threshold||s.mode==="dendrogram"&&t.length===1)return!1;var y=r[a],_=r[n[a]],v;s.mode==="dendrogram"?v={left:y,right:_,key:y.key}:v={value:y.value.concat(_.value),key:y.key},t[y.index]=v,t.splice(_.index,1),r[y.key]=v;for(var g=0;g<t.length;g++){var f=t[g];y.key===f.key?l=1/0:s.linkage==="min"?(l=i[y.key][f.key],i[y.key][f.key]>i[_.key][f.key]&&(l=i[_.key][f.key])):s.linkage==="max"?(l=i[y.key][f.key],i[y.key][f.key]<i[_.key][f.key]&&(l=i[_.key][f.key])):s.linkage==="mean"?l=(i[y.key][f.key]*y.size+i[_.key][f.key]*_.size)/(y.size+_.size):s.mode==="dendrogram"?l=u(f.value,y.value):l=u(f.value[0],y.value[0]),i[y.key][f.key]=i[f.key][y.key]=l}for(var m=0;m<t.length;m++){var b=t[m].key;if(n[b]===y.key||n[b]===_.key){for(var C=b,S=0;S<t.length;S++){var k=t[S].key;i[b][k]<i[b][C]&&(C=k)}n[b]=C}t[m].index=m}return y.key=_.key=y.index=_.index=null,!0},aa=function(t,r,i){t&&(t.value?r.push(t.value):(t.left&&aa(t.left,r),t.right&&aa(t.right,r)))},pp=function(t,r){if(!t)return"";if(t.left&&t.right){var i=pp(t.left,r),n=pp(t.right,r),s=r.add({group:"nodes",data:{id:i+","+n}});return r.add({group:"edges",data:{source:i,target:s.id()}}),r.add({group:"edges",data:{source:n,target:s.id()}}),s.id()}else if(t.value)return t.value.id()},vp=function(t,r,i){if(!t)return[];var n=[],s=[],a=[];return r===0?(t.left&&aa(t.left,n),t.right&&aa(t.right,s),a=n.concat(s),[i.collection(a)]):r===1?t.value?[i.collection(t.value)]:(t.left&&aa(t.left,n),t.right&&aa(t.right,s),[i.collection(n),i.collection(s)]):t.value?[i.collection(t.value)]:(t.left&&(n=vp(t.left,r-1,i)),t.right&&(s=vp(t.right,r-1,i)),n.concat(s))},ly=function(t){for(var r=this.cy(),i=this.nodes(),n=MB(t),s=n.attributes,a=function(m,b){return rh(n.distance,s.length,function(C){return s[C](m)},function(C){return s[C](b)},m,b)},o=[],l=[],c=[],u=[],h=0;h<i.length;h++){var d={value:n.mode==="dendrogram"?i[h]:[i[h]],key:h,index:h};o[h]=d,u[h]=d,l[h]=[],c[h]=0}for(var p=0;p<o.length;p++)for(var y=0;y<=p;y++){var _=void 0;n.mode==="dendrogram"?_=p===y?1/0:a(o[p].value,o[y].value):_=p===y?1/0:a(o[p].value[0],o[y].value[0]),l[p][y]=_,l[y][p]=_,_<l[p][c[p]]&&(c[p]=y)}for(var v=oy(o,u,l,c,n);v;)v=oy(o,u,l,c,n);var g;return n.mode==="dendrogram"?(g=vp(o[0],n.dendrogramDepth,r),n.addDendrogram&&pp(o[0],r)):(g=new Array(o.length),o.forEach(function(f,m){f.key=f.index=null,g[m]=r.collection(f.value)})),g},PB={hierarchicalClustering:ly,hca:ly},IB=hr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),FB=function(t){var r=t.damping,i=t.preference;.5<=r&&r<1||Rt("Damping must range on [0.5, 1).  Got: ".concat(r));var n=["median","mean","min","max"];return n.some(function(s){return s===i})||xe(i)||Rt("Preference must be one of [".concat(n.map(function(s){return"'".concat(s,"'")}).join(", "),"] or a number.  Got: ").concat(i)),IB(t)},OB=function(t,r,i,n){var s=function(o,l){return n[l](o)};return-rh(t,n.length,function(a){return s(r,a)},function(a){return s(i,a)},r,i)},NB=function(t,r){var i=null;return r==="median"?i=FA(t):r==="mean"?i=IA(t):r==="min"?i=MA(t):r==="max"?i=PA(t):i=r,i},$B=function(t,r,i){for(var n=[],s=0;s<t;s++)r[s*t+s]+i[s*t+s]>0&&n.push(s);return n},cy=function(t,r,i){for(var n=[],s=0;s<t;s++){for(var a=-1,o=-1/0,l=0;l<i.length;l++){var c=i[l];r[s*t+c]>o&&(a=c,o=r[s*t+c])}a>0&&n.push(a)}for(var u=0;u<i.length;u++)n[i[u]]=i[u];return n},zB=function(t,r,i){for(var n=cy(t,r,i),s=0;s<i.length;s++){for(var a=[],o=0;o<n.length;o++)n[o]===i[s]&&a.push(o);for(var l=-1,c=-1/0,u=0;u<a.length;u++){for(var h=0,d=0;d<a.length;d++)h+=r[a[d]*t+a[u]];h>c&&(l=u,c=h)}i[s]=a[l]}return n=cy(t,r,i),n},uy=function(t){for(var r=this.cy(),i=this.nodes(),n=FB(t),s={},a=0;a<i.length;a++)s[i[a].id()]=a;var o,l,c,u,h,d;o=i.length,l=o*o,c=new Array(l);for(var p=0;p<l;p++)c[p]=-1/0;for(var y=0;y<o;y++)for(var _=0;_<o;_++)y!==_&&(c[y*o+_]=OB(n.distance,i[y],i[_],n.attributes));u=NB(c,n.preference);for(var v=0;v<o;v++)c[v*o+v]=u;h=new Array(l);for(var g=0;g<l;g++)h[g]=0;d=new Array(l);for(var f=0;f<l;f++)d[f]=0;for(var m=new Array(o),b=new Array(o),C=new Array(o),S=0;S<o;S++)m[S]=0,b[S]=0,C[S]=0;for(var k=new Array(o*n.minIterations),w=0;w<k.length;w++)k[w]=0;var x;for(x=0;x<n.maxIterations;x++){for(var A=0;A<o;A++){for(var D=-1/0,T=-1/0,E=-1,R=0,F=0;F<o;F++)m[F]=h[A*o+F],R=d[A*o+F]+c[A*o+F],R>=D?(T=D,D=R,E=F):R>T&&(T=R);for(var O=0;O<o;O++)h[A*o+O]=(1-n.damping)*(c[A*o+O]-D)+n.damping*m[O];h[A*o+E]=(1-n.damping)*(c[A*o+E]-T)+n.damping*m[E]}for(var $=0;$<o;$++){for(var H=0,L=0;L<o;L++)m[L]=d[L*o+$],b[L]=Math.max(0,h[L*o+$]),H+=b[L];H-=b[$],b[$]=h[$*o+$],H+=b[$];for(var I=0;I<o;I++)d[I*o+$]=(1-n.damping)*Math.min(0,H-b[I])+n.damping*m[I];d[$*o+$]=(1-n.damping)*(H-b[$])+n.damping*m[$]}for(var P=0,z=0;z<o;z++){var K=d[z*o+z]+h[z*o+z]>0?1:0;k[x%n.minIterations*o+z]=K,P+=K}if(P>0&&(x>=n.minIterations-1||x==n.maxIterations-1)){for(var te=0,J=0;J<o;J++){C[J]=0;for(var ne=0;ne<n.minIterations;ne++)C[J]+=k[ne*o+J];(C[J]===0||C[J]===n.minIterations)&&te++}if(te===o)break}}for(var V=$B(o,h,d),N=zB(o,c,V),ee={},U=0;U<V.length;U++)ee[V[U]]=[];for(var X=0;X<i.length;X++){var M=s[i[X].id()],q=N[M];q!=null&&ee[q].push(i[X])}for(var Q=new Array(V.length),se=0;se<V.length;se++)Q[se]=r.collection(ee[V[se]]);return Q},HB={affinityPropagation:uy,ap:uy},qB=hr({root:void 0,directed:!1}),WB={hierholzer:function(t){if(!lt(t)){var r=arguments;t={root:r[0],directed:r[1]}}var i=qB(t),n=i.root,s=i.directed,a=this,o=!1,l,c,u;n&&(u=qe(n)?this.filter(n)[0].id():n[0].id());var h={},d={};s?a.forEach(function(f){var m=f.id();if(f.isNode()){var b=f.indegree(!0),C=f.outdegree(!0),S=b-C,k=C-b;S==1?l?o=!0:l=m:k==1?c?o=!0:c=m:(k>1||S>1)&&(o=!0),h[m]=[],f.outgoers().forEach(function(w){w.isEdge()&&h[m].push(w.id())})}else d[m]=[void 0,f.target().id()]}):a.forEach(function(f){var m=f.id();if(f.isNode()){var b=f.degree(!0);b%2&&(l?c?o=!0:c=m:l=m),h[m]=[],f.connectedEdges().forEach(function(C){return h[m].push(C.id())})}else d[m]=[f.source().id(),f.target().id()]});var p={found:!1,trail:void 0};if(o)return p;if(c&&l)if(s){if(u&&c!=u)return p;u=c}else{if(u&&c!=u&&l!=u)return p;u||(u=c)}else u||(u=a[0].id());var y=function(m){for(var b=m,C=[m],S,k,w;h[b].length;)S=h[b].shift(),k=d[S][0],w=d[S][1],b!=w?(h[w]=h[w].filter(function(x){return x!=S}),b=w):!s&&b!=k&&(h[k]=h[k].filter(function(x){return x!=S}),b=k),C.unshift(S),C.unshift(b);return C},_=[],v=[];for(v=y(u);v.length!=1;)h[v[0]].length==0?(_.unshift(a.getElementById(v.shift())),_.unshift(a.getElementById(v.shift()))):v=y(v.shift()).concat(v);_.unshift(a.getElementById(v.shift()));for(var g in h)if(h[g].length)return p;return p.found=!0,p.trail=this.spawn(_,!0),p}},Gl=function(){var t=this,r={},i=0,n=0,s=[],a=[],o={},l=function(d,p){for(var y=a.length-1,_=[],v=t.spawn();a[y].x!=d||a[y].y!=p;)_.push(a.pop().edge),y--;_.push(a.pop().edge),_.forEach(function(g){var f=g.connectedNodes().intersection(t);v.merge(g),f.forEach(function(m){var b=m.id(),C=m.connectedEdges().intersection(t);v.merge(m),r[b].cutVertex?v.merge(C.filter(function(S){return S.isLoop()})):v.merge(C)})}),s.push(v)},c=function(d,p,y){d===y&&(n+=1),r[p]={id:i,low:i++,cutVertex:!1};var _=t.getElementById(p).connectedEdges().intersection(t);if(_.size()===0)s.push(t.spawn(t.getElementById(p)));else{var v,g,f,m;_.forEach(function(b){v=b.source().id(),g=b.target().id(),f=v===p?g:v,f!==y&&(m=b.id(),o[m]||(o[m]=!0,a.push({x:p,y:f,edge:b})),f in r?r[p].low=Math.min(r[p].low,r[f].id):(c(d,f,p),r[p].low=Math.min(r[p].low,r[f].low),r[p].id<=r[f].low&&(r[p].cutVertex=!0,l(p,f))))})}};t.forEach(function(h){if(h.isNode()){var d=h.id();d in r||(n=0,c(d,d),r[d].cutVertex=n>1)}});var u=Object.keys(r).filter(function(h){return r[h].cutVertex}).map(function(h){return t.getElementById(h)});return{cut:t.spawn(u),components:s}},UB={hopcroftTarjanBiconnected:Gl,htbc:Gl,htb:Gl,hopcroftTarjanBiconnectedComponents:Gl},Kl=function(){var t=this,r={},i=0,n=[],s=[],a=t.spawn(t),o=function(c){s.push(c),r[c]={index:i,low:i++,explored:!1};var u=t.getElementById(c).connectedEdges().intersection(t);if(u.forEach(function(_){var v=_.target().id();v!==c&&(v in r||o(v),r[v].explored||(r[c].low=Math.min(r[c].low,r[v].low)))}),r[c].index===r[c].low){for(var h=t.spawn();;){var d=s.pop();if(h.merge(t.getElementById(d)),r[d].low=r[c].index,r[d].explored=!0,d===c)break}var p=h.edgesWith(h),y=h.merge(p);n.push(y),a=a.difference(y)}};return t.forEach(function(l){if(l.isNode()){var c=l.id();c in r||o(c)}}),{cut:a,components:n}},VB={tarjanStronglyConnected:Kl,tsc:Kl,tscc:Kl,tarjanStronglyConnectedComponents:Kl},wC={};[Xo,CA,wA,kA,TA,AA,LA,nB,ya,_a,fp,mB,DB,PB,HB,WB,UB,VB].forEach(function(e){je(wC,e)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var SC=0,kC=1,xC=2,bi=function(t){if(!(this instanceof bi))return new bi(t);this.id="Thenable/1.0.7",this.state=SC,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof t=="function"&&t.call(this,this.fulfill.bind(this),this.reject.bind(this))};bi.prototype={fulfill:function(t){return hy(this,kC,"fulfillValue",t)},reject:function(t){return hy(this,xC,"rejectReason",t)},then:function(t,r){var i=this,n=new bi;return i.onFulfilled.push(fy(t,n,"fulfill")),i.onRejected.push(fy(r,n,"reject")),TC(i),n.proxy}};var hy=function(t,r,i,n){return t.state===SC&&(t.state=r,t[i]=n,TC(t)),t},TC=function(t){t.state===kC?dy(t,"onFulfilled",t.fulfillValue):t.state===xC&&dy(t,"onRejected",t.rejectReason)},dy=function(t,r,i){if(t[r].length!==0){var n=t[r];t[r]=[];var s=function(){for(var o=0;o<n.length;o++)n[o](i)};typeof setImmediate=="function"?setImmediate(s):setTimeout(s,0)}},fy=function(t,r,i){return function(n){if(typeof t!="function")r[i].call(r,n);else{var s;try{s=t(n)}catch(a){r.reject(a);return}EC(r,s)}}},EC=function(t,r){if(t===r||t.proxy===r){t.reject(new TypeError("cannot resolve promise with itself"));return}var i;if(Jt(r)==="object"&&r!==null||typeof r=="function")try{i=r.then}catch(s){t.reject(s);return}if(typeof i=="function"){var n=!1;try{i.call(r,function(s){n||(n=!0,s===r?t.reject(new TypeError("circular thenable chain")):EC(t,s))},function(s){n||(n=!0,t.reject(s))})}catch(s){n||t.reject(s)}return}t.fulfill(r)};bi.all=function(e){return new bi(function(t,r){for(var i=new Array(e.length),n=0,s=function(l,c){i[l]=c,n++,n===e.length&&t(i)},a=0;a<e.length;a++)(function(o){var l=e[o],c=l!=null&&l.then!=null;if(c)l.then(function(h){s(o,h)},function(h){r(h)});else{var u=l;s(o,u)}})(a)})};bi.resolve=function(e){return new bi(function(t,r){t(e)})};bi.reject=function(e){return new bi(function(t,r){r(e)})};var $a=typeof Promise<"u"?Promise:bi,gp=function(t,r,i){var n=_v(t),s=!n,a=this._private=je({duration:1e3},r,i);if(a.target=t,a.style=a.style||a.css,a.started=!1,a.playing=!1,a.hooked=!1,a.applying=!1,a.progress=0,a.completes=[],a.frames=[],a.complete&&It(a.complete)&&a.completes.push(a.complete),s){var o=t.position();a.startPosition=a.startPosition||{x:o.x,y:o.y},a.startStyle=a.startStyle||t.cy().style().getAnimationStartStyle(t,a.style)}if(n){var l=t.pan();a.startPan={x:l.x,y:l.y},a.startZoom=t.zoom()}this.length=1,this[0]=this},As=gp.prototype;je(As,{instanceString:function(){return"animation"},hook:function(){var t=this._private;if(!t.hooked){var r,i=t.target._private.animation;t.queue?r=i.queue:r=i.current,r.push(this),Gr(t.target)&&t.target.cy().addToAnimationPool(t.target),t.hooked=!0}return this},play:function(){var t=this._private;return t.progress===1&&(t.progress=0),t.playing=!0,t.started=!1,t.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var t=this._private;return t.applying=!0,t.started=!1,t.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var t=this._private;return t.playing=!1,t.started=!1,this},stop:function(){var t=this._private;return t.playing=!1,t.started=!1,t.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(t){var r=this._private;return t===void 0?r.progress*r.duration:this.progress(t/r.duration)},progress:function(t){var r=this._private,i=r.playing;return t===void 0?r.progress:(i&&this.pause(),r.progress=t,r.started=!1,i&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var t=this._private,r=t.playing;r&&this.pause(),t.progress=1-t.progress,t.started=!1;var i=function(c,u){var h=t[c];h!=null&&(t[c]=t[u],t[u]=h)};if(i("zoom","startZoom"),i("pan","startPan"),i("position","startPosition"),t.style)for(var n=0;n<t.style.length;n++){var s=t.style[n],a=s.name,o=t.startStyle[a];t.startStyle[a]=s,t.style[n]=o}return r&&this.play(),this},promise:function(t){var r=this._private,i;switch(t){case"frame":i=r.frames;break;default:case"complete":case"completed":i=r.completes}return new $a(function(n,s){i.push(function(){n()})})}});As.complete=As.completed;As.run=As.play;As.running=As.playing;var jB={animated:function(){return function(){var r=this,i=r.length!==void 0,n=i?r:[r],s=this._private.cy||this;if(!s.styleEnabled())return!1;var a=n[0];if(a)return a._private.animation.current.length>0}},clearQueue:function(){return function(){var r=this,i=r.length!==void 0,n=i?r:[r],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var a=0;a<n.length;a++){var o=n[a];o._private.animation.queue=[]}return this}},delay:function(){return function(r,i){var n=this._private.cy||this;return n.styleEnabled()?this.animate({delay:r,duration:r,complete:i}):this}},delayAnimation:function(){return function(r,i){var n=this._private.cy||this;return n.styleEnabled()?this.animation({delay:r,duration:r,complete:i}):this}},animation:function(){return function(r,i){var n=this,s=n.length!==void 0,a=s?n:[n],o=this._private.cy||this,l=!s,c=!l;if(!o.styleEnabled())return this;var u=o.style();r=je({},r,i);var h=Object.keys(r).length===0;if(h)return new gp(a[0],r);switch(r.duration===void 0&&(r.duration=400),r.duration){case"slow":r.duration=600;break;case"fast":r.duration=200;break}if(c&&(r.style=u.getPropsList(r.style||r.css),r.css=void 0),c&&r.renderedPosition!=null){var d=r.renderedPosition,p=o.pan(),y=o.zoom();r.position=dC(d,y,p)}if(l&&r.panBy!=null){var _=r.panBy,v=o.pan();r.pan={x:v.x+_.x,y:v.y+_.y}}var g=r.center||r.centre;if(l&&g!=null){var f=o.getCenterPan(g.eles,r.zoom);f!=null&&(r.pan=f)}if(l&&r.fit!=null){var m=r.fit,b=o.getFitViewport(m.eles||m.boundingBox,m.padding);b!=null&&(r.pan=b.pan,r.zoom=b.zoom)}if(l&&lt(r.zoom)){var C=o.getZoomedViewport(r.zoom);C!=null?(C.zoomed&&(r.zoom=C.zoom),C.panned&&(r.pan=C.pan)):r.zoom=null}return new gp(a[0],r)}},animate:function(){return function(r,i){var n=this,s=n.length!==void 0,a=s?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;i&&(r=je({},r,i));for(var l=0;l<a.length;l++){var c=a[l],u=c.animated()&&(r.queue===void 0||r.queue),h=c.animation(r,u?{queue:!0}:void 0);h.play()}return this}},stop:function(){return function(r,i){var n=this,s=n.length!==void 0,a=s?n:[n],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var l=0;l<a.length;l++){for(var c=a[l],u=c._private,h=u.animation.current,d=0;d<h.length;d++){var p=h[d],y=p._private;i&&(y.duration=0)}r&&(u.animation.queue=[]),i||(u.animation.current=[])}return o.notify("draw"),this}}},_d,py;function ih(){if(py)return _d;py=1;var e=Array.isArray;return _d=e,_d}var bd,vy;function GB(){if(vy)return bd;vy=1;var e=ih(),t=bl(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function n(s,a){if(e(s))return!1;var o=typeof s;return o=="number"||o=="symbol"||o=="boolean"||s==null||t(s)?!0:i.test(s)||!r.test(s)||a!=null&&s in Object(a)}return bd=n,bd}var Cd,gy;function KB(){if(gy)return Cd;gy=1;var e=iC(),t=_l(),r="[object AsyncFunction]",i="[object Function]",n="[object GeneratorFunction]",s="[object Proxy]";function a(o){if(!t(o))return!1;var l=e(o);return l==i||l==n||l==r||l==s}return Cd=a,Cd}var wd,my;function YB(){if(my)return wd;my=1;var e=Ju(),t=e["__core-js_shared__"];return wd=t,wd}var Sd,yy;function XB(){if(yy)return Sd;yy=1;var e=YB(),t=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function r(i){return!!t&&t in i}return Sd=r,Sd}var kd,_y;function ZB(){if(_y)return kd;_y=1;var e=Function.prototype,t=e.toString;function r(i){if(i!=null){try{return t.call(i)}catch{}try{return i+""}catch{}}return""}return kd=r,kd}var xd,by;function QB(){if(by)return xd;by=1;var e=KB(),t=XB(),r=_l(),i=ZB(),n=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=Function.prototype,o=Object.prototype,l=a.toString,c=o.hasOwnProperty,u=RegExp("^"+l.call(c).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(d){if(!r(d)||t(d))return!1;var p=e(d)?u:s;return p.test(i(d))}return xd=h,xd}var Td,Cy;function JB(){if(Cy)return Td;Cy=1;function e(t,r){return t==null?void 0:t[r]}return Td=e,Td}var Ed,wy;function Dv(){if(wy)return Ed;wy=1;var e=QB(),t=JB();function r(i,n){var s=t(i,n);return e(s)?s:void 0}return Ed=r,Ed}var Ad,Sy;function nh(){if(Sy)return Ad;Sy=1;var e=Dv(),t=e(Object,"create");return Ad=t,Ad}var Bd,ky;function eD(){if(ky)return Bd;ky=1;var e=nh();function t(){this.__data__=e?e(null):{},this.size=0}return Bd=t,Bd}var Dd,xy;function tD(){if(xy)return Dd;xy=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Dd=e,Dd}var Ld,Ty;function rD(){if(Ty)return Ld;Ty=1;var e=nh(),t="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function n(s){var a=this.__data__;if(e){var o=a[s];return o===t?void 0:o}return i.call(a,s)?a[s]:void 0}return Ld=n,Ld}var Rd,Ey;function iD(){if(Ey)return Rd;Ey=1;var e=nh(),t=Object.prototype,r=t.hasOwnProperty;function i(n){var s=this.__data__;return e?s[n]!==void 0:r.call(s,n)}return Rd=i,Rd}var Md,Ay;function nD(){if(Ay)return Md;Ay=1;var e=nh(),t="__lodash_hash_undefined__";function r(i,n){var s=this.__data__;return this.size+=this.has(i)?0:1,s[i]=e&&n===void 0?t:n,this}return Md=r,Md}var Pd,By;function sD(){if(By)return Pd;By=1;var e=eD(),t=tD(),r=rD(),i=iD(),n=nD();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=n,Pd=s,Pd}var Id,Dy;function aD(){if(Dy)return Id;Dy=1;function e(){this.__data__=[],this.size=0}return Id=e,Id}var Fd,Ly;function AC(){if(Ly)return Fd;Ly=1;function e(t,r){return t===r||t!==t&&r!==r}return Fd=e,Fd}var Od,Ry;function sh(){if(Ry)return Od;Ry=1;var e=AC();function t(r,i){for(var n=r.length;n--;)if(e(r[n][0],i))return n;return-1}return Od=t,Od}var Nd,My;function oD(){if(My)return Nd;My=1;var e=sh(),t=Array.prototype,r=t.splice;function i(n){var s=this.__data__,a=e(s,n);if(a<0)return!1;var o=s.length-1;return a==o?s.pop():r.call(s,a,1),--this.size,!0}return Nd=i,Nd}var $d,Py;function lD(){if(Py)return $d;Py=1;var e=sh();function t(r){var i=this.__data__,n=e(i,r);return n<0?void 0:i[n][1]}return $d=t,$d}var zd,Iy;function cD(){if(Iy)return zd;Iy=1;var e=sh();function t(r){return e(this.__data__,r)>-1}return zd=t,zd}var Hd,Fy;function uD(){if(Fy)return Hd;Fy=1;var e=sh();function t(r,i){var n=this.__data__,s=e(n,r);return s<0?(++this.size,n.push([r,i])):n[s][1]=i,this}return Hd=t,Hd}var qd,Oy;function hD(){if(Oy)return qd;Oy=1;var e=aD(),t=oD(),r=lD(),i=cD(),n=uD();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=n,qd=s,qd}var Wd,Ny;function dD(){if(Ny)return Wd;Ny=1;var e=Dv(),t=Ju(),r=e(t,"Map");return Wd=r,Wd}var Ud,$y;function fD(){if($y)return Ud;$y=1;var e=sD(),t=hD(),r=dD();function i(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return Ud=i,Ud}var Vd,zy;function pD(){if(zy)return Vd;zy=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return Vd=e,Vd}var jd,Hy;function ah(){if(Hy)return jd;Hy=1;var e=pD();function t(r,i){var n=r.__data__;return e(i)?n[typeof i=="string"?"string":"hash"]:n.map}return jd=t,jd}var Gd,qy;function vD(){if(qy)return Gd;qy=1;var e=ah();function t(r){var i=e(this,r).delete(r);return this.size-=i?1:0,i}return Gd=t,Gd}var Kd,Wy;function gD(){if(Wy)return Kd;Wy=1;var e=ah();function t(r){return e(this,r).get(r)}return Kd=t,Kd}var Yd,Uy;function mD(){if(Uy)return Yd;Uy=1;var e=ah();function t(r){return e(this,r).has(r)}return Yd=t,Yd}var Xd,Vy;function yD(){if(Vy)return Xd;Vy=1;var e=ah();function t(r,i){var n=e(this,r),s=n.size;return n.set(r,i),this.size+=n.size==s?0:1,this}return Xd=t,Xd}var Zd,jy;function _D(){if(jy)return Zd;jy=1;var e=fD(),t=vD(),r=gD(),i=mD(),n=yD();function s(a){var o=-1,l=a==null?0:a.length;for(this.clear();++o<l;){var c=a[o];this.set(c[0],c[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=r,s.prototype.has=i,s.prototype.set=n,Zd=s,Zd}var Qd,Gy;function bD(){if(Gy)return Qd;Gy=1;var e=_D(),t="Expected a function";function r(i,n){if(typeof i!="function"||n!=null&&typeof n!="function")throw new TypeError(t);var s=function(){var a=arguments,o=n?n.apply(this,a):a[0],l=s.cache;if(l.has(o))return l.get(o);var c=i.apply(this,a);return s.cache=l.set(o,c)||l,c};return s.cache=new(r.Cache||e),s}return r.Cache=e,Qd=r,Qd}var Jd,Ky;function CD(){if(Ky)return Jd;Ky=1;var e=bD(),t=500;function r(i){var n=e(i,function(a){return s.size===t&&s.clear(),a}),s=n.cache;return n}return Jd=r,Jd}var ef,Yy;function BC(){if(Yy)return ef;Yy=1;var e=CD(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=e(function(n){var s=[];return n.charCodeAt(0)===46&&s.push(""),n.replace(t,function(a,o,l,c){s.push(l?c.replace(r,"$1"):o||a)}),s});return ef=i,ef}var tf,Xy;function DC(){if(Xy)return tf;Xy=1;function e(t,r){for(var i=-1,n=t==null?0:t.length,s=Array(n);++i<n;)s[i]=r(t[i],i,t);return s}return tf=e,tf}var rf,Zy;function wD(){if(Zy)return rf;Zy=1;var e=Cv(),t=DC(),r=ih(),i=bl(),n=e?e.prototype:void 0,s=n?n.toString:void 0;function a(o){if(typeof o=="string")return o;if(r(o))return t(o,a)+"";if(i(o))return s?s.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return rf=a,rf}var nf,Qy;function LC(){if(Qy)return nf;Qy=1;var e=wD();function t(r){return r==null?"":e(r)}return nf=t,nf}var sf,Jy;function RC(){if(Jy)return sf;Jy=1;var e=ih(),t=GB(),r=BC(),i=LC();function n(s,a){return e(s)?s:t(s,a)?[s]:r(i(s))}return sf=n,sf}var af,e0;function Lv(){if(e0)return af;e0=1;var e=bl();function t(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return af=t,af}var of,t0;function SD(){if(t0)return of;t0=1;var e=RC(),t=Lv();function r(i,n){n=e(n,i);for(var s=0,a=n.length;i!=null&&s<a;)i=i[t(n[s++])];return s&&s==a?i:void 0}return of=r,of}var lf,r0;function kD(){if(r0)return lf;r0=1;var e=SD();function t(r,i,n){var s=r==null?void 0:e(r,i);return s===void 0?n:s}return lf=t,lf}var xD=kD(),TD=yl(xD),cf,i0;function ED(){if(i0)return cf;i0=1;var e=Dv(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return cf=t,cf}var uf,n0;function AD(){if(n0)return uf;n0=1;var e=ED();function t(r,i,n){i=="__proto__"&&e?e(r,i,{configurable:!0,enumerable:!0,value:n,writable:!0}):r[i]=n}return uf=t,uf}var hf,s0;function BD(){if(s0)return hf;s0=1;var e=AD(),t=AC(),r=Object.prototype,i=r.hasOwnProperty;function n(s,a,o){var l=s[a];(!(i.call(s,a)&&t(l,o))||o===void 0&&!(a in s))&&e(s,a,o)}return hf=n,hf}var df,a0;function DD(){if(a0)return df;a0=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(i,n){var s=typeof i;return n=n??e,!!n&&(s=="number"||s!="symbol"&&t.test(i))&&i>-1&&i%1==0&&i<n}return df=r,df}var ff,o0;function LD(){if(o0)return ff;o0=1;var e=BD(),t=RC(),r=DD(),i=_l(),n=Lv();function s(a,o,l,c){if(!i(a))return a;o=t(o,a);for(var u=-1,h=o.length,d=h-1,p=a;p!=null&&++u<h;){var y=n(o[u]),_=l;if(y==="__proto__"||y==="constructor"||y==="prototype")return a;if(u!=d){var v=p[y];_=c?c(v,y,p):void 0,_===void 0&&(_=i(v)?v:r(o[u+1])?[]:{})}e(p,y,_),p=p[y]}return a}return ff=s,ff}var pf,l0;function RD(){if(l0)return pf;l0=1;var e=LD();function t(r,i,n){return r==null?r:e(r,i,n)}return pf=t,pf}var MD=RD(),PD=yl(MD),vf,c0;function ID(){if(c0)return vf;c0=1;function e(t,r){var i=-1,n=t.length;for(r||(r=Array(n));++i<n;)r[i]=t[i];return r}return vf=e,vf}var gf,u0;function FD(){if(u0)return gf;u0=1;var e=DC(),t=ID(),r=ih(),i=bl(),n=BC(),s=Lv(),a=LC();function o(l){return r(l)?e(l,s):i(l)?[l]:t(n(a(l)))}return gf=o,gf}var OD=FD(),ND=yl(OD),$D={data:function(t){var r={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(n){},beforeSet:function(n,s){},onSet:function(n){},canSet:function(n){return!0}};return t=je({},r,t),function(n,s){var a=t,o=this,l=o.length!==void 0,c=l?o:[o],u=l?o[0]:o;if(qe(n)){var h=n.indexOf(".")!==-1,d=h&&ND(n);if(a.allowGetting&&s===void 0){var p;return u&&(a.beforeGet(u),d&&u._private[a.field][n]===void 0?p=TD(u._private[a.field],d):p=u._private[a.field][n]),p}else if(a.allowSetting&&s!==void 0){var y=!a.immutableKeys[n];if(y){var _=G1({},n,s);a.beforeSet(o,_);for(var v=0,g=c.length;v<g;v++){var f=c[v];a.canSet(f)&&(d&&u._private[a.field][n]===void 0?PD(f._private[a.field],d,s):f._private[a.field][n]=s)}a.updateStyle&&o.updateStyle(),a.onSet(o),a.settingTriggersEvent&&o[a.triggerFnName](a.settingEvent)}}}else if(a.allowSetting&&lt(n)){var m=n,b,C,S=Object.keys(m);a.beforeSet(o,m);for(var k=0;k<S.length;k++){b=S[k],C=m[b];var w=!a.immutableKeys[b];if(w)for(var x=0;x<c.length;x++){var A=c[x];a.canSet(A)&&(A._private[a.field][b]=C)}}a.updateStyle&&o.updateStyle(),a.onSet(o),a.settingTriggersEvent&&o[a.triggerFnName](a.settingEvent)}else if(a.allowBinding&&It(n)){var D=n;o.on(a.bindingEvent,D)}else if(a.allowGetting&&n===void 0){var T;return u&&(a.beforeGet(u),T=u._private[a.field]),T}return o}},removeData:function(t){var r={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return t=je({},r,t),function(n){var s=t,a=this,o=a.length!==void 0,l=o?a:[a];if(qe(n)){for(var c=n.split(/\s+/),u=c.length,h=0;h<u;h++){var d=c[h];if(!$n(d)){var p=!s.immutableKeys[d];if(p)for(var y=0,_=l.length;y<_;y++)l[y]._private[s.field][d]=void 0}}s.triggerEvent&&a[s.triggerFnName](s.event)}else if(n===void 0){for(var v=0,g=l.length;v<g;v++)for(var f=l[v]._private[s.field],m=Object.keys(f),b=0;b<m.length;b++){var C=m[b],S=!s.immutableKeys[C];S&&(f[C]=void 0)}s.triggerEvent&&a[s.triggerFnName](s.event)}return a}}},zD={eventAliasesOn:function(t){var r=t;r.addListener=r.listen=r.bind=r.on,r.unlisten=r.unbind=r.off=r.removeListener,r.trigger=r.emit,r.pon=r.promiseOn=function(i,n){var s=this,a=Array.prototype.slice.call(arguments,0);return new $a(function(o,l){var c=function(p){s.off.apply(s,h),o(p)},u=a.concat([c]),h=u.concat([]);s.on.apply(s,u)})}}},gt={};[jB,$D,zD].forEach(function(e){je(gt,e)});var HD={animate:gt.animate(),animation:gt.animation(),animated:gt.animated(),clearQueue:gt.clearQueue(),delay:gt.delay(),delayAnimation:gt.delayAnimation(),stop:gt.stop()},Cc={classes:function(t){var r=this;if(t===void 0){var i=[];return r[0]._private.classes.forEach(function(y){return i.push(y)}),i}else St(t)||(t=(t||"").match(/\S+/g)||[]);for(var n=[],s=new Na(t),a=0;a<r.length;a++){for(var o=r[a],l=o._private,c=l.classes,u=!1,h=0;h<t.length;h++){var d=t[h],p=c.has(d);if(!p){u=!0;break}}u||(u=c.size!==t.length),u&&(l.classes=s,n.push(o))}return n.length>0&&this.spawn(n).updateStyle().emit("class"),r},addClass:function(t){return this.toggleClass(t,!0)},hasClass:function(t){var r=this[0];return r!=null&&r._private.classes.has(t)},toggleClass:function(t,r){St(t)||(t=t.match(/\S+/g)||[]);for(var i=this,n=r===void 0,s=[],a=0,o=i.length;a<o;a++)for(var l=i[a],c=l._private.classes,u=!1,h=0;h<t.length;h++){var d=t[h],p=c.has(d),y=!1;r||n&&!p?(c.add(d),y=!0):(!r||n&&p)&&(c.delete(d),y=!0),!u&&y&&(s.push(l),u=!0)}return s.length>0&&this.spawn(s).updateStyle().emit("class"),i},removeClass:function(t){return this.toggleClass(t,!1)},flashClass:function(t,r){var i=this;if(r==null)r=250;else if(r===0)return i;return i.addClass(t),setTimeout(function(){i.removeClass(t)},r),i}};Cc.className=Cc.classNames=Cc.classes;var at={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:Qt,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};at.variable="(?:[\\w-.]|(?:\\\\"+at.metaChar+"))+";at.className="(?:[\\w-]|(?:\\\\"+at.metaChar+"))+";at.value=at.string+"|"+at.number;at.id=at.variable;(function(){var e,t,r;for(e=at.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],at.comparatorOp+="|@"+t;for(e=at.comparatorOp.split("|"),r=0;r<e.length;r++)t=e[r],!(t.indexOf("!")>=0)&&t!=="="&&(at.comparatorOp+="|\\!"+t)})();var _t=function(){return{checks:[]}},Le={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},mp=[{selector:":selected",matches:function(t){return t.selected()}},{selector:":unselected",matches:function(t){return!t.selected()}},{selector:":selectable",matches:function(t){return t.selectable()}},{selector:":unselectable",matches:function(t){return!t.selectable()}},{selector:":locked",matches:function(t){return t.locked()}},{selector:":unlocked",matches:function(t){return!t.locked()}},{selector:":visible",matches:function(t){return t.visible()}},{selector:":hidden",matches:function(t){return!t.visible()}},{selector:":transparent",matches:function(t){return t.transparent()}},{selector:":grabbed",matches:function(t){return t.grabbed()}},{selector:":free",matches:function(t){return!t.grabbed()}},{selector:":removed",matches:function(t){return t.removed()}},{selector:":inside",matches:function(t){return!t.removed()}},{selector:":grabbable",matches:function(t){return t.grabbable()}},{selector:":ungrabbable",matches:function(t){return!t.grabbable()}},{selector:":animated",matches:function(t){return t.animated()}},{selector:":unanimated",matches:function(t){return!t.animated()}},{selector:":parent",matches:function(t){return t.isParent()}},{selector:":childless",matches:function(t){return t.isChildless()}},{selector:":child",matches:function(t){return t.isChild()}},{selector:":orphan",matches:function(t){return t.isOrphan()}},{selector:":nonorphan",matches:function(t){return t.isChild()}},{selector:":compound",matches:function(t){return t.isNode()?t.isParent():t.source().isParent()||t.target().isParent()}},{selector:":loop",matches:function(t){return t.isLoop()}},{selector:":simple",matches:function(t){return t.isSimple()}},{selector:":active",matches:function(t){return t.active()}},{selector:":inactive",matches:function(t){return!t.active()}},{selector:":backgrounding",matches:function(t){return t.backgrounding()}},{selector:":nonbackgrounding",matches:function(t){return!t.backgrounding()}}].sort(function(e,t){return $2(e.selector,t.selector)}),qD=(function(){for(var e={},t,r=0;r<mp.length;r++)t=mp[r],e[t.selector]=t.matches;return e})(),WD=function(t,r){return qD[t](r)},UD="("+mp.map(function(e){return e.selector}).join("|")+")",js=function(t){return t.replace(new RegExp("\\\\("+at.metaChar+")","g"),function(r,i){return i})},bn=function(t,r,i){t[t.length-1]=i},yp=[{name:"group",query:!0,regex:"("+at.group+")",populate:function(t,r,i){var n=jt(i,1),s=n[0];r.checks.push({type:Le.GROUP,value:s==="*"?s:s+"s"})}},{name:"state",query:!0,regex:UD,populate:function(t,r,i){var n=jt(i,1),s=n[0];r.checks.push({type:Le.STATE,value:s})}},{name:"id",query:!0,regex:"\\#("+at.id+")",populate:function(t,r,i){var n=jt(i,1),s=n[0];r.checks.push({type:Le.ID,value:js(s)})}},{name:"className",query:!0,regex:"\\.("+at.className+")",populate:function(t,r,i){var n=jt(i,1),s=n[0];r.checks.push({type:Le.CLASS,value:js(s)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+at.variable+")\\s*\\]",populate:function(t,r,i){var n=jt(i,1),s=n[0];r.checks.push({type:Le.DATA_EXIST,field:js(s)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+at.variable+")\\s*("+at.comparatorOp+")\\s*("+at.value+")\\s*\\]",populate:function(t,r,i){var n=jt(i,3),s=n[0],a=n[1],o=n[2],l=new RegExp("^"+at.string+"$").exec(o)!=null;l?o=o.substring(1,o.length-1):o=parseFloat(o),r.checks.push({type:Le.DATA_COMPARE,field:js(s),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+at.boolOp+")\\s*("+at.variable+")\\s*\\]",populate:function(t,r,i){var n=jt(i,2),s=n[0],a=n[1];r.checks.push({type:Le.DATA_BOOL,field:js(a),operator:s})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+at.meta+")\\s*("+at.comparatorOp+")\\s*("+at.number+")\\s*\\]\\]",populate:function(t,r,i){var n=jt(i,3),s=n[0],a=n[1],o=n[2];r.checks.push({type:Le.META_COMPARE,field:js(s),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:at.separator,populate:function(t,r){var i=t.currentSubject,n=t.edgeCount,s=t.compoundCount,a=t[t.length-1];i!=null&&(a.subject=i,t.currentSubject=null),a.edgeCount=n,a.compoundCount=s,t.edgeCount=0,t.compoundCount=0;var o=t[t.length++]=_t();return o}},{name:"directedEdge",separator:!0,regex:at.directedEdge,populate:function(t,r){if(t.currentSubject==null){var i=_t(),n=r,s=_t();return i.checks.push({type:Le.DIRECTED_EDGE,source:n,target:s}),bn(t,r,i),t.edgeCount++,s}else{var a=_t(),o=r,l=_t();return a.checks.push({type:Le.NODE_SOURCE,source:o,target:l}),bn(t,r,a),t.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:at.undirectedEdge,populate:function(t,r){if(t.currentSubject==null){var i=_t(),n=r,s=_t();return i.checks.push({type:Le.UNDIRECTED_EDGE,nodes:[n,s]}),bn(t,r,i),t.edgeCount++,s}else{var a=_t(),o=r,l=_t();return a.checks.push({type:Le.NODE_NEIGHBOR,node:o,neighbor:l}),bn(t,r,a),l}}},{name:"child",separator:!0,regex:at.child,populate:function(t,r){if(t.currentSubject==null){var i=_t(),n=_t(),s=t[t.length-1];return i.checks.push({type:Le.CHILD,parent:s,child:n}),bn(t,r,i),t.compoundCount++,n}else if(t.currentSubject===r){var a=_t(),o=t[t.length-1],l=_t(),c=_t(),u=_t(),h=_t();return a.checks.push({type:Le.COMPOUND_SPLIT,left:o,right:l,subject:c}),c.checks=r.checks,r.checks=[{type:Le.TRUE}],h.checks.push({type:Le.TRUE}),l.checks.push({type:Le.PARENT,parent:h,child:u}),bn(t,o,a),t.currentSubject=c,t.compoundCount++,u}else{var d=_t(),p=_t(),y=[{type:Le.PARENT,parent:d,child:p}];return d.checks=r.checks,r.checks=y,t.compoundCount++,p}}},{name:"descendant",separator:!0,regex:at.descendant,populate:function(t,r){if(t.currentSubject==null){var i=_t(),n=_t(),s=t[t.length-1];return i.checks.push({type:Le.DESCENDANT,ancestor:s,descendant:n}),bn(t,r,i),t.compoundCount++,n}else if(t.currentSubject===r){var a=_t(),o=t[t.length-1],l=_t(),c=_t(),u=_t(),h=_t();return a.checks.push({type:Le.COMPOUND_SPLIT,left:o,right:l,subject:c}),c.checks=r.checks,r.checks=[{type:Le.TRUE}],h.checks.push({type:Le.TRUE}),l.checks.push({type:Le.ANCESTOR,ancestor:h,descendant:u}),bn(t,o,a),t.currentSubject=c,t.compoundCount++,u}else{var d=_t(),p=_t(),y=[{type:Le.ANCESTOR,ancestor:d,descendant:p}];return d.checks=r.checks,r.checks=y,t.compoundCount++,p}}},{name:"subject",modifier:!0,regex:at.subject,populate:function(t,r){if(t.currentSubject!=null&&t.currentSubject!==r)return mt("Redefinition of subject in selector `"+t.toString()+"`"),!1;t.currentSubject=r;var i=t[t.length-1],n=i.checks[0],s=n==null?null:n.type;s===Le.DIRECTED_EDGE?n.type=Le.NODE_TARGET:s===Le.UNDIRECTED_EDGE&&(n.type=Le.NODE_NEIGHBOR,n.node=n.nodes[1],n.neighbor=n.nodes[0],n.nodes=null)}}];yp.forEach(function(e){return e.regexObj=new RegExp("^"+e.regex)});var VD=function(t){for(var r,i,n,s=0;s<yp.length;s++){var a=yp[s],o=a.name,l=t.match(a.regexObj);if(l!=null){i=l,r=a,n=o;var c=l[0];t=t.substring(c.length);break}}return{expr:r,match:i,name:n,remaining:t}},jD=function(t){var r=t.match(/^\s+/);if(r){var i=r[0];t=t.substring(i.length)}return t},GD=function(t){var r=this,i=r.inputText=t,n=r[0]=_t();for(r.length=1,i=jD(i);;){var s=VD(i);if(s.expr==null)return mt("The selector `"+t+"`is invalid"),!1;var a=s.match.slice(1),o=s.expr.populate(r,n,a);if(o===!1)return!1;if(o!=null&&(n=o),i=s.remaining,i.match(/^\s*$/))break}var l=r[r.length-1];r.currentSubject!=null&&(l.subject=r.currentSubject),l.edgeCount=r.edgeCount,l.compoundCount=r.compoundCount;for(var c=0;c<r.length;c++){var u=r[c];if(u.compoundCount>0&&u.edgeCount>0)return mt("The selector `"+t+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(u.edgeCount>1)return mt("The selector `"+t+"` is invalid because it uses multiple edge selectors"),!1;u.edgeCount===1&&mt("The selector `"+t+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},KD=function(){if(this.toStringCache!=null)return this.toStringCache;for(var t=function(u){return u??""},r=function(u){return qe(u)?'"'+u+'"':t(u)},i=function(u){return" "+u+" "},n=function(u,h){var d=u.type,p=u.value;switch(d){case Le.GROUP:{var y=t(p);return y.substring(0,y.length-1)}case Le.DATA_COMPARE:{var _=u.field,v=u.operator;return"["+_+i(t(v))+r(p)+"]"}case Le.DATA_BOOL:{var g=u.operator,f=u.field;return"["+t(g)+f+"]"}case Le.DATA_EXIST:{var m=u.field;return"["+m+"]"}case Le.META_COMPARE:{var b=u.operator,C=u.field;return"[["+C+i(t(b))+r(p)+"]]"}case Le.STATE:return p;case Le.ID:return"#"+p;case Le.CLASS:return"."+p;case Le.PARENT:case Le.CHILD:return s(u.parent,h)+i(">")+s(u.child,h);case Le.ANCESTOR:case Le.DESCENDANT:return s(u.ancestor,h)+" "+s(u.descendant,h);case Le.COMPOUND_SPLIT:{var S=s(u.left,h),k=s(u.subject,h),w=s(u.right,h);return S+(S.length>0?" ":"")+k+w}case Le.TRUE:return""}},s=function(u,h){return u.checks.reduce(function(d,p,y){return d+(h===u&&y===0?"$":"")+n(p,h)},"")},a="",o=0;o<this.length;o++){var l=this[o];a+=s(l,l.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a},YD={parse:GD,toString:KD},MC=function(t,r,i){var n,s=qe(t),a=xe(t),o=qe(i),l,c,u=!1,h=!1,d=!1;switch(r.indexOf("!")>=0&&(r=r.replace("!",""),h=!0),r.indexOf("@")>=0&&(r=r.replace("@",""),u=!0),(s||o||u)&&(l=!s&&!a?"":""+t,c=""+i),u&&(t=l=l.toLowerCase(),i=c=c.toLowerCase()),r){case"*=":n=l.indexOf(c)>=0;break;case"$=":n=l.indexOf(c,l.length-c.length)>=0;break;case"^=":n=l.indexOf(c)===0;break;case"=":n=t===i;break;case">":d=!0,n=t>i;break;case">=":d=!0,n=t>=i;break;case"<":d=!0,n=t<i;break;case"<=":d=!0,n=t<=i;break;default:n=!1;break}return h&&(t!=null||!d)&&(n=!n),n},XD=function(t,r){switch(r){case"?":return!!t;case"!":return!t;case"^":return t===void 0}},ZD=function(t){return t!==void 0},Rv=function(t,r){return t.data(r)},QD=function(t,r){return t[r]()},Ht=[],Bt=function(t,r){return t.checks.every(function(i){return Ht[i.type](i,r)})};Ht[Le.GROUP]=function(e,t){var r=e.value;return r==="*"||r===t.group()};Ht[Le.STATE]=function(e,t){var r=e.value;return WD(r,t)};Ht[Le.ID]=function(e,t){var r=e.value;return t.id()===r};Ht[Le.CLASS]=function(e,t){var r=e.value;return t.hasClass(r)};Ht[Le.META_COMPARE]=function(e,t){var r=e.field,i=e.operator,n=e.value;return MC(QD(t,r),i,n)};Ht[Le.DATA_COMPARE]=function(e,t){var r=e.field,i=e.operator,n=e.value;return MC(Rv(t,r),i,n)};Ht[Le.DATA_BOOL]=function(e,t){var r=e.field,i=e.operator;return XD(Rv(t,r),i)};Ht[Le.DATA_EXIST]=function(e,t){var r=e.field;return e.operator,ZD(Rv(t,r))};Ht[Le.UNDIRECTED_EDGE]=function(e,t){var r=e.nodes[0],i=e.nodes[1],n=t.source(),s=t.target();return Bt(r,n)&&Bt(i,s)||Bt(i,n)&&Bt(r,s)};Ht[Le.NODE_NEIGHBOR]=function(e,t){return Bt(e.node,t)&&t.neighborhood().some(function(r){return r.isNode()&&Bt(e.neighbor,r)})};Ht[Le.DIRECTED_EDGE]=function(e,t){return Bt(e.source,t.source())&&Bt(e.target,t.target())};Ht[Le.NODE_SOURCE]=function(e,t){return Bt(e.source,t)&&t.outgoers().some(function(r){return r.isNode()&&Bt(e.target,r)})};Ht[Le.NODE_TARGET]=function(e,t){return Bt(e.target,t)&&t.incomers().some(function(r){return r.isNode()&&Bt(e.source,r)})};Ht[Le.CHILD]=function(e,t){return Bt(e.child,t)&&Bt(e.parent,t.parent())};Ht[Le.PARENT]=function(e,t){return Bt(e.parent,t)&&t.children().some(function(r){return Bt(e.child,r)})};Ht[Le.DESCENDANT]=function(e,t){return Bt(e.descendant,t)&&t.ancestors().some(function(r){return Bt(e.ancestor,r)})};Ht[Le.ANCESTOR]=function(e,t){return Bt(e.ancestor,t)&&t.descendants().some(function(r){return Bt(e.descendant,r)})};Ht[Le.COMPOUND_SPLIT]=function(e,t){return Bt(e.subject,t)&&Bt(e.left,t)&&Bt(e.right,t)};Ht[Le.TRUE]=function(){return!0};Ht[Le.COLLECTION]=function(e,t){var r=e.value;return r.has(t)};Ht[Le.FILTER]=function(e,t){var r=e.value;return r(t)};var JD=function(t){var r=this;if(r.length===1&&r[0].checks.length===1&&r[0].checks[0].type===Le.ID)return t.getElementById(r[0].checks[0].value).collection();var i=function(s){for(var a=0;a<r.length;a++){var o=r[a];if(Bt(o,s))return!0}return!1};return r.text()==null&&(i=function(){return!0}),t.filter(i)},eL=function(t){for(var r=this,i=0;i<r.length;i++){var n=r[i];if(Bt(n,t))return!0}return!1},tL={matches:eL,filter:JD},qn=function(t){this.inputText=t,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,t==null||qe(t)&&t.match(/^\s*$/)||(Gr(t)?this.addQuery({checks:[{type:Le.COLLECTION,value:t.collection()}]}):It(t)?this.addQuery({checks:[{type:Le.FILTER,value:t}]}):qe(t)?this.parse(t)||(this.invalid=!0):Rt("A selector must be created from a string; found "))},Wn=qn.prototype;[YD,tL].forEach(function(e){return je(Wn,e)});Wn.text=function(){return this.inputText};Wn.size=function(){return this.length};Wn.eq=function(e){return this[e]};Wn.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()};Wn.addQuery=function(e){this[this.length++]=e};Wn.selector=Wn.toString;var Pn={allAre:function(t){var r=new qn(t);return this.every(function(i){return r.matches(i)})},is:function(t){var r=new qn(t);return this.some(function(i){return r.matches(i)})},some:function(t,r){for(var i=0;i<this.length;i++){var n=r?t.apply(r,[this[i],i,this]):t(this[i],i,this);if(n)return!0}return!1},every:function(t,r){for(var i=0;i<this.length;i++){var n=r?t.apply(r,[this[i],i,this]):t(this[i],i,this);if(!n)return!1}return!0},same:function(t){if(this===t)return!0;t=this.cy().collection(t);var r=this.length,i=t.length;return r!==i?!1:r===1?this[0]===t[0]:this.every(function(n){return t.hasElementWithId(n.id())})},anySame:function(t){return t=this.cy().collection(t),this.some(function(r){return t.hasElementWithId(r.id())})},allAreNeighbors:function(t){t=this.cy().collection(t);var r=this.neighborhood();return t.every(function(i){return r.hasElementWithId(i.id())})},contains:function(t){t=this.cy().collection(t);var r=this;return t.every(function(i){return r.hasElementWithId(i.id())})}};Pn.allAreNeighbours=Pn.allAreNeighbors;Pn.has=Pn.contains;Pn.equal=Pn.equals=Pn.same;var ni=function(t,r){return function(n,s,a,o){var l=n,c=this,u;if(l==null?u="":Gr(l)&&l.length===1&&(u=l.id()),c.length===1&&u){var h=c[0]._private,d=h.traversalCache=h.traversalCache||{},p=d[r]=d[r]||[],y=Ts(u),_=p[y];return _||(p[y]=t.call(c,n,s,a,o))}else return t.call(c,n,s,a,o)}},Ta={parent:function(t){var r=[];if(this.length===1){var i=this[0]._private.parent;if(i)return i}for(var n=0;n<this.length;n++){var s=this[n],a=s._private.parent;a&&r.push(a)}return this.spawn(r,!0).filter(t)},parents:function(t){for(var r=[],i=this.parent();i.nonempty();){for(var n=0;n<i.length;n++){var s=i[n];r.push(s)}i=i.parent()}return this.spawn(r,!0).filter(t)},commonAncestors:function(t){for(var r,i=0;i<this.length;i++){var n=this[i],s=n.parents();r=r||s,r=r.intersect(s)}return r.filter(t)},orphans:function(t){return this.stdFilter(function(r){return r.isOrphan()}).filter(t)},nonorphans:function(t){return this.stdFilter(function(r){return r.isChild()}).filter(t)},children:ni(function(e){for(var t=[],r=0;r<this.length;r++)for(var i=this[r],n=i._private.children,s=0;s<n.length;s++)t.push(n[s]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(t){return this.parent().children().not(this).filter(t)},isParent:function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length!==0},isChildless:function(){var t=this[0];if(t)return t.isNode()&&t._private.children.length===0},isChild:function(){var t=this[0];if(t)return t.isNode()&&t._private.parent!=null},isOrphan:function(){var t=this[0];if(t)return t.isNode()&&t._private.parent==null},descendants:function(t){var r=[];function i(n){for(var s=0;s<n.length;s++){var a=n[s];r.push(a),a.children().nonempty()&&i(a.children())}}return i(this.children()),this.spawn(r,!0).filter(t)}};function Mv(e,t,r,i){for(var n=[],s=new Na,a=e.cy(),o=a.hasCompoundNodes(),l=0;l<e.length;l++){var c=e[l];r?n.push(c):o&&i(n,s,c)}for(;n.length>0;){var u=n.shift();t(u),s.add(u.id()),o&&i(n,s,u)}return e}function PC(e,t,r){if(r.isParent())for(var i=r._private.children,n=0;n<i.length;n++){var s=i[n];t.has(s.id())||e.push(s)}}Ta.forEachDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mv(this,e,t,PC)};function IC(e,t,r){if(r.isChild()){var i=r._private.parent;t.has(i.id())||e.push(i)}}Ta.forEachUp=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mv(this,e,t,IC)};function rL(e,t,r){IC(e,t,r),PC(e,t,r)}Ta.forEachUpAndDown=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mv(this,e,t,rL)};Ta.ancestors=Ta.parents;var Jo,FC;Jo=FC={data:gt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:gt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:gt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:gt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:gt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:gt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var t=this[0];if(t)return t._private.data.id}};Jo.attr=Jo.data;Jo.removeAttr=Jo.removeData;var iL=FC,oh={};function mf(e){return function(t){var r=this;if(t===void 0&&(t=!0),r.length!==0)if(r.isNode()&&!r.removed()){for(var i=0,n=r[0],s=n._private.edges,a=0;a<s.length;a++){var o=s[a];!t&&o.isLoop()||(i+=e(n,o))}return i}else return}}je(oh,{degree:mf(function(e,t){return t.source().same(t.target())?2:1}),indegree:mf(function(e,t){return t.target().same(e)?1:0}),outdegree:mf(function(e,t){return t.source().same(e)?1:0})});function Gs(e,t){return function(r){for(var i,n=this.nodes(),s=0;s<n.length;s++){var a=n[s],o=a[e](r);o!==void 0&&(i===void 0||t(o,i))&&(i=o)}return i}}je(oh,{minDegree:Gs("degree",function(e,t){return e<t}),maxDegree:Gs("degree",function(e,t){return e>t}),minIndegree:Gs("indegree",function(e,t){return e<t}),maxIndegree:Gs("indegree",function(e,t){return e>t}),minOutdegree:Gs("outdegree",function(e,t){return e<t}),maxOutdegree:Gs("outdegree",function(e,t){return e>t})});je(oh,{totalDegree:function(t){for(var r=0,i=this.nodes(),n=0;n<i.length;n++)r+=i[n].degree(t);return r}});var mi,OC,NC=function(t,r,i){for(var n=0;n<t.length;n++){var s=t[n];if(!s.locked()){var a=s._private.position,o={x:r.x!=null?r.x-a.x:0,y:r.y!=null?r.y-a.y:0};s.isParent()&&!(o.x===0&&o.y===0)&&s.children().shift(o,i),s.dirtyBoundingBoxCache()}}},h0={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(t){t.updateCompoundBounds()},beforeSet:function(t,r){NC(t,r,!1)},onSet:function(t){t.dirtyCompoundBoundsCache()},canSet:function(t){return!t.locked()}};mi=OC={position:gt.data(h0),silentPosition:gt.data(je({},h0,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(t,r){NC(t,r,!0)},onSet:function(t){t.dirtyCompoundBoundsCache()}})),positions:function(t,r){if(lt(t))r?this.silentPosition(t):this.position(t);else if(It(t)){var i=t,n=this.cy();n.startBatch();for(var s=0;s<this.length;s++){var a=this[s],o=void 0;(o=i(a,s))&&(r?a.silentPosition(o):a.position(o))}n.endBatch()}return this},silentPositions:function(t){return this.positions(t,!0)},shift:function(t,r,i){var n;if(lt(t)?(n={x:xe(t.x)?t.x:0,y:xe(t.y)?t.y:0},i=r):qe(t)&&xe(r)&&(n={x:0,y:0},n[t]=r),n!=null){var s=this.cy();s.startBatch();for(var a=0;a<this.length;a++){var o=this[a];if(!(s.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var l=o.position(),c={x:l.x+n.x,y:l.y+n.y};i?o.silentPosition(c):o.position(c)}}s.endBatch()}return this},silentShift:function(t,r){return lt(t)?this.shift(t,!0):qe(t)&&xe(r)&&this.shift(t,r,!0),this},renderedPosition:function(t,r){var i=this[0],n=this.cy(),s=n.zoom(),a=n.pan(),o=lt(t)?t:void 0,l=o!==void 0||r!==void 0&&qe(t);if(i&&i.isNode())if(l)for(var c=0;c<this.length;c++){var u=this[c];r!==void 0?u.position(t,(r-a[t])/s):o!==void 0&&u.position(dC(o,s,a))}else{var h=i.position();return o=th(h,s,a),t===void 0?o:o[t]}else if(!l)return;return this},relativePosition:function(t,r){var i=this[0],n=this.cy(),s=lt(t)?t:void 0,a=s!==void 0||r!==void 0&&qe(t),o=n.hasCompoundNodes();if(i&&i.isNode())if(a)for(var l=0;l<this.length;l++){var c=this[l],u=o?c.parent():null,h=u&&u.length>0,d=h;h&&(u=u[0]);var p=d?u.position():{x:0,y:0};r!==void 0?c.position(t,r+p[t]):s!==void 0&&c.position({x:s.x+p.x,y:s.y+p.y})}else{var y=i.position(),_=o?i.parent():null,v=_&&_.length>0,g=v;v&&(_=_[0]);var f=g?_.position():{x:0,y:0};return s={x:y.x-f.x,y:y.y-f.y},t===void 0?s:s[t]}else if(!a)return;return this}};mi.modelPosition=mi.point=mi.position;mi.modelPositions=mi.points=mi.positions;mi.renderedPoint=mi.renderedPosition;mi.relativePoint=mi.relativePosition;var nL=OC,ba,Zn;ba=Zn={};Zn.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),i=r.zoom(),n=r.pan(),s=t.x1*i+n.x,a=t.x2*i+n.x,o=t.y1*i+n.y,l=t.y2*i+n.y;return{x1:s,x2:a,y1:o,y2:l,w:a-s,h:l-o}};Zn.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();return!t.styleEnabled()||!t.hasCompoundNodes()?this:(this.forEachUp(function(r){if(r.isParent()){var i=r._private;i.compoundBoundsClean=!1,i.bbCache=null,e||r.emitAndNotify("bounds")}}),this)};Zn.updateCompoundBounds=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes())return this;if(!e&&t.batching())return this;function r(a){if(!a.isParent())return;var o=a._private,l=a.children(),c=a.pstyle("compound-sizing-wrt-labels").value==="include",u={width:{val:a.pstyle("min-width").pfValue,left:a.pstyle("min-width-bias-left"),right:a.pstyle("min-width-bias-right")},height:{val:a.pstyle("min-height").pfValue,top:a.pstyle("min-height-bias-top"),bottom:a.pstyle("min-height-bias-bottom")}},h=l.boundingBox({includeLabels:c,includeOverlays:!1,useCache:!1}),d=o.position;(h.w===0||h.h===0)&&(h={w:a.pstyle("width").pfValue,h:a.pstyle("height").pfValue},h.x1=d.x-h.w/2,h.x2=d.x+h.w/2,h.y1=d.y-h.h/2,h.y2=d.y+h.h/2);function p(x,A,D){var T=0,E=0,R=A+D;return x>0&&R>0&&(T=A/R*x,E=D/R*x),{biasDiff:T,biasComplementDiff:E}}function y(x,A,D,T){if(D.units==="%")switch(T){case"width":return x>0?D.pfValue*x:0;case"height":return A>0?D.pfValue*A:0;case"average":return x>0&&A>0?D.pfValue*(x+A)/2:0;case"min":return x>0&&A>0?x>A?D.pfValue*A:D.pfValue*x:0;case"max":return x>0&&A>0?x>A?D.pfValue*x:D.pfValue*A:0;default:return 0}else return D.units==="px"?D.pfValue:0}var _=u.width.left.value;u.width.left.units==="px"&&u.width.val>0&&(_=_*100/u.width.val);var v=u.width.right.value;u.width.right.units==="px"&&u.width.val>0&&(v=v*100/u.width.val);var g=u.height.top.value;u.height.top.units==="px"&&u.height.val>0&&(g=g*100/u.height.val);var f=u.height.bottom.value;u.height.bottom.units==="px"&&u.height.val>0&&(f=f*100/u.height.val);var m=p(u.width.val-h.w,_,v),b=m.biasDiff,C=m.biasComplementDiff,S=p(u.height.val-h.h,g,f),k=S.biasDiff,w=S.biasComplementDiff;o.autoPadding=y(h.w,h.h,a.pstyle("padding"),a.pstyle("padding-relative-to").value),o.autoWidth=Math.max(h.w,u.width.val),d.x=(-b+h.x1+h.x2+C)/2,o.autoHeight=Math.max(h.h,u.height.val),d.y=(-k+h.y1+h.y2+w)/2}for(var i=0;i<this.length;i++){var n=this[i],s=n._private;(!s.compoundBoundsClean||e)&&(r(n),t.batching()||(s.compoundBoundsClean=!0))}return this};var ii=function(t){return t===1/0||t===-1/0?0:t},pi=function(t,r,i,n,s){n-r===0||s-i===0||r==null||i==null||n==null||s==null||(t.x1=r<t.x1?r:t.x1,t.x2=n>t.x2?n:t.x2,t.y1=i<t.y1?i:t.y1,t.y2=s>t.y2?s:t.y2,t.w=t.x2-t.x1,t.h=t.y2-t.y1)},xn=function(t,r){return r==null?t:pi(t,r.x1,r.y1,r.x2,r.y2)},Za=function(t,r,i){return Or(t,r,i)},Yl=function(t,r,i){if(!r.cy().headless()){var n=r._private,s=n.rstyle,a=s.arrowWidth/2,o=r.pstyle(i+"-arrow-shape").value,l,c;if(o!=="none"){i==="source"?(l=s.srcX,c=s.srcY):i==="target"?(l=s.tgtX,c=s.tgtY):(l=s.midX,c=s.midY);var u=n.arrowBounds=n.arrowBounds||{},h=u[i]=u[i]||{};h.x1=l-a,h.y1=c-a,h.x2=l+a,h.y2=c+a,h.w=h.x2-h.x1,h.h=h.y2-h.y1,_c(h,1),pi(t,h.x1,h.y1,h.x2,h.y2)}}},yf=function(t,r,i){if(!r.cy().headless()){var n;i?n=i+"-":n="";var s=r._private,a=s.rstyle,o=r.pstyle(n+"label").strValue;if(o){var l=r.pstyle("text-halign"),c=r.pstyle("text-valign"),u=Za(a,"labelWidth",i),h=Za(a,"labelHeight",i),d=Za(a,"labelX",i),p=Za(a,"labelY",i),y=r.pstyle(n+"text-margin-x").pfValue,_=r.pstyle(n+"text-margin-y").pfValue,v=r.isEdge(),g=r.pstyle(n+"text-rotation"),f=r.pstyle("text-outline-width").pfValue,m=r.pstyle("text-border-width").pfValue,b=m/2,C=r.pstyle("text-background-padding").pfValue,S=2,k=h,w=u,x=w/2,A=k/2,D,T,E,R;if(v)D=d-x,T=d+x,E=p-A,R=p+A;else{switch(l.value){case"left":D=d-w,T=d;break;case"center":D=d-x,T=d+x;break;case"right":D=d,T=d+w;break}switch(c.value){case"top":E=p-k,R=p;break;case"center":E=p-A,R=p+A;break;case"bottom":E=p,R=p+k;break}}var F=y-Math.max(f,b)-C-S,O=y+Math.max(f,b)+C+S,$=_-Math.max(f,b)-C-S,H=_+Math.max(f,b)+C+S;D+=F,T+=O,E+=$,R+=H;var L=i||"main",I=s.labelBounds,P=I[L]=I[L]||{};P.x1=D,P.y1=E,P.x2=T,P.y2=R,P.w=T-D,P.h=R-E,P.leftPad=F,P.rightPad=O,P.topPad=$,P.botPad=H;var z=v&&g.strValue==="autorotate",K=g.pfValue!=null&&g.pfValue!==0;if(z||K){var te=z?Za(s.rstyle,"labelAngle",i):g.pfValue,J=Math.cos(te),ne=Math.sin(te),V=(D+T)/2,N=(E+R)/2;if(!v){switch(l.value){case"left":V=T;break;case"right":V=D;break}switch(c.value){case"top":N=R;break;case"bottom":N=E;break}}var ee=function(Y,ae){return Y=Y-V,ae=ae-N,{x:Y*J-ae*ne+V,y:Y*ne+ae*J+N}},U=ee(D,E),X=ee(D,R),M=ee(T,E),q=ee(T,R);D=Math.min(U.x,X.x,M.x,q.x),T=Math.max(U.x,X.x,M.x,q.x),E=Math.min(U.y,X.y,M.y,q.y),R=Math.max(U.y,X.y,M.y,q.y)}var Q=L+"Rot",se=I[Q]=I[Q]||{};se.x1=D,se.y1=E,se.x2=T,se.y2=R,se.w=T-D,se.h=R-E,pi(t,D,E,T,R),pi(s.labelBounds.all,D,E,T,R)}return t}},d0=function(t,r){if(!r.cy().headless()){var i=r.pstyle("outline-opacity").value,n=r.pstyle("outline-width").value,s=r.pstyle("outline-offset").value,a=n+s;$C(t,r,i,a,"outside",a/2)}},$C=function(t,r,i,n,s,a){if(!(i===0||n<=0||s==="inside")){var o=r.cy(),l=r.pstyle("shape").value,c=o.renderer().nodeShapes[l],u=r.position(),h=u.x,d=u.y,p=r.width(),y=r.height();if(c.hasMiterBounds){s==="center"&&(n/=2);var _=c.miterBounds(h,d,p,y,n);xn(t,_)}else a!=null&&a>0&&bc(t,[a,a,a,a])}},sL=function(t,r){if(!r.cy().headless()){var i=r.pstyle("border-opacity").value,n=r.pstyle("border-width").pfValue,s=r.pstyle("border-position").value;$C(t,r,i,n,s)}},aL=function(t,r){var i=t._private.cy,n=i.styleEnabled(),s=i.headless(),a=Mr(),o=t._private,l=t.isNode(),c=t.isEdge(),u,h,d,p,y,_,v=o.rstyle,g=l&&n?t.pstyle("bounds-expansion").pfValue:[0],f=function(Z){return Z.pstyle("display").value!=="none"},m=!n||f(t)&&(!c||f(t.source())&&f(t.target()));if(m){var b=0,C=0;n&&r.includeOverlays&&(b=t.pstyle("overlay-opacity").value,b!==0&&(C=t.pstyle("overlay-padding").value));var S=0,k=0;n&&r.includeUnderlays&&(S=t.pstyle("underlay-opacity").value,S!==0&&(k=t.pstyle("underlay-padding").value));var w=Math.max(C,k),x=0,A=0;if(n&&(x=t.pstyle("width").pfValue,A=x/2),l&&r.includeNodes){var D=t.position();y=D.x,_=D.y;var T=t.outerWidth(),E=T/2,R=t.outerHeight(),F=R/2;u=y-E,h=y+E,d=_-F,p=_+F,pi(a,u,d,h,p),n&&d0(a,t),n&&r.includeOutlines&&!s&&d0(a,t),n&&sL(a,t)}else if(c&&r.includeEdges)if(n&&!s){var O=t.pstyle("curve-style").strValue;if(u=Math.min(v.srcX,v.midX,v.tgtX),h=Math.max(v.srcX,v.midX,v.tgtX),d=Math.min(v.srcY,v.midY,v.tgtY),p=Math.max(v.srcY,v.midY,v.tgtY),u-=A,h+=A,d-=A,p+=A,pi(a,u,d,h,p),O==="haystack"){var $=v.haystackPts;if($&&$.length===2){if(u=$[0].x,d=$[0].y,h=$[1].x,p=$[1].y,u>h){var H=u;u=h,h=H}if(d>p){var L=d;d=p,p=L}pi(a,u-A,d-A,h+A,p+A)}}else if(O==="bezier"||O==="unbundled-bezier"||En(O,"segments")||En(O,"taxi")){var I;switch(O){case"bezier":case"unbundled-bezier":I=v.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":I=v.linePts;break}if(I!=null)for(var P=0;P<I.length;P++){var z=I[P];u=z.x-A,h=z.x+A,d=z.y-A,p=z.y+A,pi(a,u,d,h,p)}}}else{var K=t.source(),te=K.position(),J=t.target(),ne=J.position();if(u=te.x,h=ne.x,d=te.y,p=ne.y,u>h){var V=u;u=h,h=V}if(d>p){var N=d;d=p,p=N}u-=A,h+=A,d-=A,p+=A,pi(a,u,d,h,p)}if(n&&r.includeEdges&&c&&(Yl(a,t,"mid-source"),Yl(a,t,"mid-target"),Yl(a,t,"source"),Yl(a,t,"target")),n){var ee=t.pstyle("ghost").value==="yes";if(ee){var U=t.pstyle("ghost-offset-x").pfValue,X=t.pstyle("ghost-offset-y").pfValue;pi(a,a.x1+U,a.y1+X,a.x2+U,a.y2+X)}}var M=o.bodyBounds=o.bodyBounds||{};Zm(M,a),bc(M,g),_c(M,1),n&&(u=a.x1,h=a.x2,d=a.y1,p=a.y2,pi(a,u-w,d-w,h+w,p+w));var q=o.overlayBounds=o.overlayBounds||{};Zm(q,a),bc(q,g),_c(q,1);var Q=o.labelBounds=o.labelBounds||{};Q.all!=null?HA(Q.all):Q.all=Mr(),n&&r.includeLabels&&(r.includeMainLabels&&yf(a,t,null),c&&(r.includeSourceLabels&&yf(a,t,"source"),r.includeTargetLabels&&yf(a,t,"target")))}return a.x1=ii(a.x1),a.y1=ii(a.y1),a.x2=ii(a.x2),a.y2=ii(a.y2),a.w=ii(a.x2-a.x1),a.h=ii(a.y2-a.y1),a.w>0&&a.h>0&&m&&(bc(a,g),_c(a,1)),a},zC=function(t){var r=0,i=function(a){return(a?1:0)<<r++},n=0;return n+=i(t.incudeNodes),n+=i(t.includeEdges),n+=i(t.includeLabels),n+=i(t.includeMainLabels),n+=i(t.includeSourceLabels),n+=i(t.includeTargetLabels),n+=i(t.includeOverlays),n+=i(t.includeOutlines),n},HC=function(t){var r=function(o){return Math.round(o)};if(t.isEdge()){var i=t.source().position(),n=t.target().position();return Vm([r(i.x),r(i.y),r(n.x),r(n.y)])}else{var s=t.position();return Vm([r(s.x),r(s.y)])}},f0=function(t,r){var i=t._private,n,s=t.isEdge(),a=r==null?p0:zC(r),o=a===p0;if(i.bbCache==null?(n=aL(t,el),i.bbCache=n,i.bbCachePosKey=HC(t)):n=i.bbCache,!o){var l=t.isNode();n=Mr(),(r.includeNodes&&l||r.includeEdges&&!l)&&(r.includeOverlays?xn(n,i.overlayBounds):xn(n,i.bodyBounds)),r.includeLabels&&(r.includeMainLabels&&(!s||r.includeSourceLabels&&r.includeTargetLabels)?xn(n,i.labelBounds.all):(r.includeMainLabels&&xn(n,i.labelBounds.mainRot),r.includeSourceLabels&&xn(n,i.labelBounds.sourceRot),r.includeTargetLabels&&xn(n,i.labelBounds.targetRot))),n.w=n.x2-n.x1,n.h=n.y2-n.y1}return n},el={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},p0=zC(el),v0=hr(el);Zn.boundingBox=function(e){var t,r=e===void 0||e.useCache===void 0||e.useCache===!0,i=ka(function(u){var h=u._private;return h.bbCache==null||h.styleDirty||h.bbCachePosKey!==HC(u)},function(u){return u.id()});if(r&&this.length===1&&!i(this[0]))e===void 0?e=el:e=v0(e),t=f0(this[0],e);else{t=Mr(),e=e||el;var n=v0(e),s=this,a=s.cy(),o=a.styleEnabled();this.edges().forEach(i),this.nodes().forEach(i),o&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var l=0;l<s.length;l++){var c=s[l];i(c)&&c.dirtyBoundingBoxCache(),xn(t,f0(c,n))}}return t.x1=ii(t.x1),t.y1=ii(t.y1),t.x2=ii(t.x2),t.y2=ii(t.y2),t.w=ii(t.x2-t.x1),t.h=ii(t.y2-t.y1),t};Zn.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};Zn.boundingBoxAt=function(e){var t=this.nodes(),r=this.cy(),i=r.hasCompoundNodes(),n=r.collection();if(i&&(n=t.filter(function(c){return c.isParent()}),t=t.not(n)),lt(e)){var s=e;e=function(){return s}}var a=function(u,h){return u._private.bbAtOldPos=e(u,h)},o=function(u){return u._private.bbAtOldPos};r.startBatch(),t.forEach(a).silentPositions(e),i&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0));var l=zA(this.boundingBox({useCache:!1}));return t.silentPositions(o),i&&(n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),n.updateCompoundBounds(!0)),r.endBatch(),l};ba.boundingbox=ba.bb=ba.boundingBox;ba.renderedBoundingbox=ba.renderedBoundingBox;var oL=Zn,po,Sl;po=Sl={};var qC=function(t){t.uppercaseName=Dm(t.name),t.autoName="auto"+t.uppercaseName,t.labelName="label"+t.uppercaseName,t.outerName="outer"+t.uppercaseName,t.uppercaseOuterName=Dm(t.outerName),po[t.name]=function(){var i=this[0],n=i._private,s=n.cy,a=s._private.styleEnabled;if(i)if(a){if(i.isParent())return i.updateCompoundBounds(),n[t.autoName]||0;var o=i.pstyle(t.name);switch(o.strValue){case"label":return i.recalculateRenderedStyle(),n.rstyle[t.labelName]||0;default:return o.pfValue}}else return 1},po["outer"+t.uppercaseName]=function(){var i=this[0],n=i._private,s=n.cy,a=s._private.styleEnabled;if(i)if(a){var o=i[t.name](),l=i.pstyle("border-position").value,c;l==="center"?c=i.pstyle("border-width").pfValue:l==="outside"?c=2*i.pstyle("border-width").pfValue:c=0;var u=2*i.padding();return o+c+u}else return 1},po["rendered"+t.uppercaseName]=function(){var i=this[0];if(i){var n=i[t.name]();return n*this.cy().zoom()}},po["rendered"+t.uppercaseOuterName]=function(){var i=this[0];if(i){var n=i[t.outerName]();return n*this.cy().zoom()}}};qC({name:"width"});qC({name:"height"});Sl.padding=function(){var e=this[0],t=e._private;return e.isParent()?(e.updateCompoundBounds(),t.autoPadding!==void 0?t.autoPadding:e.pstyle("padding").pfValue):e.pstyle("padding").pfValue};Sl.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()};Sl.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var lL=Sl,cL=function(t,r){if(t.isEdge()&&t.takesUpSpace())return r(t)},uL=function(t,r){if(t.isEdge()&&t.takesUpSpace()){var i=t.cy();return th(r(t),i.zoom(),i.pan())}},hL=function(t,r){if(t.isEdge()&&t.takesUpSpace()){var i=t.cy(),n=i.pan(),s=i.zoom();return r(t).map(function(a){return th(a,s,n)})}},dL=function(t){return t.renderer().getControlPoints(t)},fL=function(t){return t.renderer().getSegmentPoints(t)},pL=function(t){return t.renderer().getSourceEndpoint(t)},vL=function(t){return t.renderer().getTargetEndpoint(t)},gL=function(t){return t.renderer().getEdgeMidpoint(t)},g0={controlPoints:{get:dL,mult:!0},segmentPoints:{get:fL,mult:!0},sourceEndpoint:{get:pL},targetEndpoint:{get:vL},midpoint:{get:gL}},mL=function(t){return"rendered"+t[0].toUpperCase()+t.substr(1)},yL=Object.keys(g0).reduce(function(e,t){var r=g0[t],i=mL(t);return e[t]=function(){return cL(this,r.get)},r.mult?e[i]=function(){return hL(this,r.get)}:e[i]=function(){return uL(this,r.get)},e},{}),_L=je({},nL,oL,lL,yL);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var WC=function(t,r){this.recycle(t,r)};function Qa(){return!1}function Xl(){return!0}WC.prototype={instanceString:function(){return"event"},recycle:function(t,r){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Qa,t!=null&&t.preventDefault?(this.type=t.type,this.isDefaultPrevented=t.defaultPrevented?Xl:Qa):t!=null&&t.type?r=t:this.type=t,r!=null&&(this.originalEvent=r.originalEvent,this.type=r.type!=null?r.type:this.type,this.cy=r.cy,this.target=r.target,this.position=r.position,this.renderedPosition=r.renderedPosition,this.namespace=r.namespace,this.layout=r.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var i=this.position,n=this.cy.zoom(),s=this.cy.pan();this.renderedPosition={x:i.x*n+s.x,y:i.y*n+s.y}}this.timeStamp=t&&t.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Xl;var t=this.originalEvent;t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Xl;var t=this.originalEvent;t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Xl,this.stopPropagation()},isDefaultPrevented:Qa,isPropagationStopped:Qa,isImmediatePropagationStopped:Qa};var UC=/^([^.]+)(\.(?:[^.]+))?$/,bL=".*",VC={qualifierCompare:function(t,r){return t===r},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(t){return t},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},m0=Object.keys(VC),CL={};function lh(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:CL,t=arguments.length>1?arguments[1]:void 0,r=0;r<m0.length;r++){var i=m0[r];this[i]=e[i]||VC[i]}this.context=t||this.context,this.listeners=[],this.emitting=0}var Un=lh.prototype,jC=function(t,r,i,n,s,a,o){It(n)&&(s=n,n=null),o&&(a==null?a=o:a=je({},a,o));for(var l=St(i)?i:i.split(/\s+/),c=0;c<l.length;c++){var u=l[c];if(!$n(u)){var h=u.match(UC);if(h){var d=h[1],p=h[2]?h[2]:null,y=r(t,u,d,p,n,s,a);if(y===!1)break}}}},y0=function(t,r){return t.addEventFields(t.context,r),new WC(r.type,r)},wL=function(t,r,i){if(A2(i)){r(t,i);return}else if(lt(i)){r(t,y0(t,i));return}for(var n=St(i)?i:i.split(/\s+/),s=0;s<n.length;s++){var a=n[s];if(!$n(a)){var o=a.match(UC);if(o){var l=o[1],c=o[2]?o[2]:null,u=y0(t,{type:l,namespace:c,target:t.context});r(t,u)}}}};Un.on=Un.addListener=function(e,t,r,i,n){return jC(this,function(s,a,o,l,c,u,h){It(u)&&s.listeners.push({event:a,callback:u,type:o,namespace:l,qualifier:c,conf:h})},e,t,r,i,n),this};Un.one=function(e,t,r,i){return this.on(e,t,r,i,{one:!0})};Un.removeListener=Un.off=function(e,t,r,i){var n=this;this.emitting!==0&&(this.listeners=uA(this.listeners));for(var s=this.listeners,a=function(c){var u=s[c];jC(n,function(h,d,p,y,_,v){if((u.type===p||e==="*")&&(!y&&u.namespace!==".*"||u.namespace===y)&&(!_||h.qualifierCompare(u.qualifier,_))&&(!v||u.callback===v))return s.splice(c,1),!1},e,t,r,i)},o=s.length-1;o>=0;o--)a(o);return this};Un.removeAllListeners=function(){return this.removeListener("*")};Un.emit=Un.trigger=function(e,t,r){var i=this.listeners,n=i.length;return this.emitting++,St(t)||(t=[t]),wL(this,function(s,a){r!=null&&(i=[{event:a.event,type:a.type,namespace:a.namespace,callback:r}],n=i.length);for(var o=function(){var u=i[l];if(u.type===a.type&&(!u.namespace||u.namespace===a.namespace||u.namespace===bL)&&s.eventMatches(s.context,u,a)){var h=[a];t!=null&&dA(h,t),s.beforeEmit(s.context,u,a),u.conf&&u.conf.one&&(s.listeners=s.listeners.filter(function(y){return y!==u}));var d=s.callbackContext(s.context,u,a),p=u.callback.apply(d,h);s.afterEmit(s.context,u,a),p===!1&&(a.stopPropagation(),a.preventDefault())}},l=0;l<n;l++)o();s.bubble(s.context)&&!a.isPropagationStopped()&&s.parent(s.context).emit(a,t)},e),this.emitting--,this};var SL={qualifierCompare:function(t,r){return t==null||r==null?t==null&&r==null:t.sameText(r)},eventMatches:function(t,r,i){var n=r.qualifier;return n!=null?t!==i.target&&ml(i.target)&&n.matches(i.target):!0},addEventFields:function(t,r){r.cy=t.cy(),r.target=t},callbackContext:function(t,r,i){return r.qualifier!=null?i.target:t},beforeEmit:function(t,r){r.conf&&r.conf.once&&r.conf.onceCollection.removeListener(r.event,r.qualifier,r.callback)},bubble:function(){return!0},parent:function(t){return t.isChild()?t.parent():t.cy()}},Zl=function(t){return qe(t)?new qn(t):t},GC={createEmitter:function(){for(var t=0;t<this.length;t++){var r=this[t],i=r._private;i.emitter||(i.emitter=new lh(SL,r))}return this},emitter:function(){return this._private.emitter},on:function(t,r,i){for(var n=Zl(r),s=0;s<this.length;s++){var a=this[s];a.emitter().on(t,n,i)}return this},removeListener:function(t,r,i){for(var n=Zl(r),s=0;s<this.length;s++){var a=this[s];a.emitter().removeListener(t,n,i)}return this},removeAllListeners:function(){for(var t=0;t<this.length;t++){var r=this[t];r.emitter().removeAllListeners()}return this},one:function(t,r,i){for(var n=Zl(r),s=0;s<this.length;s++){var a=this[s];a.emitter().one(t,n,i)}return this},once:function(t,r,i){for(var n=Zl(r),s=0;s<this.length;s++){var a=this[s];a.emitter().on(t,n,i,{once:!0,onceCollection:this})}},emit:function(t,r){for(var i=0;i<this.length;i++){var n=this[i];n.emitter().emit(t,r)}return this},emitAndNotify:function(t,r){if(this.length!==0)return this.cy().notify(t,this),this.emit(t,r),this}};gt.eventAliasesOn(GC);var KC={nodes:function(t){return this.filter(function(r){return r.isNode()}).filter(t)},edges:function(t){return this.filter(function(r){return r.isEdge()}).filter(t)},byGroup:function(){for(var t=this.spawn(),r=this.spawn(),i=0;i<this.length;i++){var n=this[i];n.isNode()?t.push(n):r.push(n)}return{nodes:t,edges:r}},filter:function(t,r){if(t===void 0)return this;if(qe(t)||Gr(t))return new qn(t).filter(this);if(It(t)){for(var i=this.spawn(),n=this,s=0;s<n.length;s++){var a=n[s],o=r?t.apply(r,[a,s,n]):t(a,s,n);o&&i.push(a)}return i}return this.spawn()},not:function(t){if(t){qe(t)&&(t=this.filter(t));for(var r=this.spawn(),i=0;i<this.length;i++){var n=this[i],s=t.has(n);s||r.push(n)}return r}else return this},absoluteComplement:function(){var t=this.cy();return t.mutableElements().not(this)},intersect:function(t){if(qe(t)){var r=t;return this.filter(r)}for(var i=this.spawn(),n=this,s=t,a=this.length<t.length,o=a?n:s,l=a?s:n,c=0;c<o.length;c++){var u=o[c];l.has(u)&&i.push(u)}return i},xor:function(t){var r=this._private.cy;qe(t)&&(t=r.$(t));var i=this.spawn(),n=this,s=t,a=function(l,c){for(var u=0;u<l.length;u++){var h=l[u],d=h._private.data.id,p=c.hasElementWithId(d);p||i.push(h)}};return a(n,s),a(s,n),i},diff:function(t){var r=this._private.cy;qe(t)&&(t=r.$(t));var i=this.spawn(),n=this.spawn(),s=this.spawn(),a=this,o=t,l=function(u,h,d){for(var p=0;p<u.length;p++){var y=u[p],_=y._private.data.id,v=h.hasElementWithId(_);v?s.merge(y):d.push(y)}};return l(a,o,i),l(o,a,n),{left:i,right:n,both:s}},add:function(t){var r=this._private.cy;if(!t)return this;if(qe(t)){var i=t;t=r.mutableElements().filter(i)}for(var n=this.spawnSelf(),s=0;s<t.length;s++){var a=t[s],o=!this.has(a);o&&n.push(a)}return n},merge:function(t){var r=this._private,i=r.cy;if(!t)return this;if(t&&qe(t)){var n=t;t=i.mutableElements().filter(n)}for(var s=r.map,a=0;a<t.length;a++){var o=t[a],l=o._private.data.id,c=!s.has(l);if(c){var u=this.length++;this[u]=o,s.set(l,{ele:o,index:u})}}return this},unmergeAt:function(t){var r=this[t],i=r.id(),n=this._private,s=n.map;this[t]=void 0,s.delete(i);var a=t===this.length-1;if(this.length>1&&!a){var o=this.length-1,l=this[o],c=l._private.data.id;this[o]=void 0,this[t]=l,s.set(c,{ele:l,index:t})}return this.length--,this},unmergeOne:function(t){t=t[0];var r=this._private,i=t._private.data.id,n=r.map,s=n.get(i);if(!s)return this;var a=s.index;return this.unmergeAt(a),this},unmerge:function(t){var r=this._private.cy;if(!t)return this;if(t&&qe(t)){var i=t;t=r.mutableElements().filter(i)}for(var n=0;n<t.length;n++)this.unmergeOne(t[n]);return this},unmergeBy:function(t){for(var r=this.length-1;r>=0;r--){var i=this[r];t(i)&&this.unmergeAt(r)}return this},map:function(t,r){for(var i=[],n=this,s=0;s<n.length;s++){var a=n[s],o=r?t.apply(r,[a,s,n]):t(a,s,n);i.push(o)}return i},reduce:function(t,r){for(var i=r,n=this,s=0;s<n.length;s++)i=t(i,n[s],s,n);return i},max:function(t,r){for(var i=-1/0,n,s=this,a=0;a<s.length;a++){var o=s[a],l=r?t.apply(r,[o,a,s]):t(o,a,s);l>i&&(i=l,n=o)}return{value:i,ele:n}},min:function(t,r){for(var i=1/0,n,s=this,a=0;a<s.length;a++){var o=s[a],l=r?t.apply(r,[o,a,s]):t(o,a,s);l<i&&(i=l,n=o)}return{value:i,ele:n}}},ct=KC;ct.u=ct["|"]=ct["+"]=ct.union=ct.or=ct.add;ct["\\"]=ct["!"]=ct["-"]=ct.difference=ct.relativeComplement=ct.subtract=ct.not;ct.n=ct["&"]=ct["."]=ct.and=ct.intersection=ct.intersect;ct["^"]=ct["(+)"]=ct["(-)"]=ct.symmetricDifference=ct.symdiff=ct.xor;ct.fnFilter=ct.filterFn=ct.stdFilter=ct.filter;ct.complement=ct.abscomp=ct.absoluteComplement;var kL={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var t=this[0];if(t)return t._private.group}},YC=function(t,r){var i=t.cy(),n=i.hasCompoundNodes();function s(u){var h=u.pstyle("z-compound-depth");return h.value==="auto"?n?u.zDepth():0:h.value==="bottom"?-1:h.value==="top"?wv:0}var a=s(t)-s(r);if(a!==0)return a;function o(u){var h=u.pstyle("z-index-compare");return h.value==="auto"&&u.isNode()?1:0}var l=o(t)-o(r);if(l!==0)return l;var c=t.pstyle("z-index").value-r.pstyle("z-index").value;return c!==0?c:t.poolIndex()-r.poolIndex()},au={forEach:function(t,r){if(It(t))for(var i=this.length,n=0;n<i;n++){var s=this[n],a=r?t.apply(r,[s,n,this]):t(s,n,this);if(a===!1)break}return this},toArray:function(){for(var t=[],r=0;r<this.length;r++)t.push(this[r]);return t},slice:function(t,r){var i=[],n=this.length;r==null&&(r=n),t==null&&(t=0),t<0&&(t=n+t),r<0&&(r=n+r);for(var s=t;s>=0&&s<r&&s<n;s++)i.push(this[s]);return this.spawn(i)},size:function(){return this.length},eq:function(t){return this[t]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(t){if(!It(t))return this;var r=this.toArray().sort(t);return this.spawn(r)},sortByZIndex:function(){return this.sort(YC)},zDepth:function(){var t=this[0];if(t){var r=t._private,i=r.group;if(i==="nodes"){var n=r.data.parent?t.parents().size():0;return t.isParent()?n:wv-1}else{var s=r.source,a=r.target,o=s.zDepth(),l=a.zDepth();return Math.max(o,l,0)}}}};au.each=au.forEach;var xL=function(){var t="undefined",r=(typeof Symbol>"u"?"undefined":Jt(Symbol))!=t&&Jt(Symbol.iterator)!=t;r&&(au[Symbol.iterator]=function(){var i=this,n={value:void 0,done:!1},s=0,a=this.length;return G1({next:function(){return s<a?n.value=i[s++]:(n.value=void 0,n.done=!0),n}},Symbol.iterator,function(){return this})})};xL();var TL=hr({nodeDimensionsIncludeLabels:!1}),wc={layoutDimensions:function(t){t=TL(t);var r;if(!this.takesUpSpace())r={w:0,h:0};else if(t.nodeDimensionsIncludeLabels){var i=this.boundingBox();r={w:i.w,h:i.h}}else r={w:this.outerWidth(),h:this.outerHeight()};return(r.w===0||r.h===0)&&(r.w=r.h=1),r},layoutPositions:function(t,r,i){var n=this.nodes().filter(function(C){return!C.isParent()}),s=this.cy(),a=r.eles,o=function(S){return S.id()},l=ka(i,o);t.emit({type:"layoutstart",layout:t}),t.animations=[];var c=function(S,k,w){var x={x:k.x1+k.w/2,y:k.y1+k.h/2},A={x:(w.x-x.x)*S,y:(w.y-x.y)*S};return{x:x.x+A.x,y:x.y+A.y}},u=r.spacingFactor&&r.spacingFactor!==1,h=function(){if(!u)return null;for(var S=Mr(),k=0;k<n.length;k++){var w=n[k],x=l(w,k);fC(S,x.x,x.y)}return S},d=h(),p=ka(function(C,S){var k=l(C,S);if(u){var w=Math.abs(r.spacingFactor);k=c(w,d,k)}return r.transform!=null&&(k=r.transform(C,k)),k},o);if(r.animate){for(var y=0;y<n.length;y++){var _=n[y],v=p(_,y),g=r.animateFilter==null||r.animateFilter(_,y);if(g){var f=_.animation({position:v,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(f)}else _.position(v)}if(r.fit){var m=s.animation({fit:{boundingBox:a.boundingBoxAt(p),padding:r.padding},duration:r.animationDuration,easing:r.animationEasing});t.animations.push(m)}else if(r.zoom!==void 0&&r.pan!==void 0){var b=s.animation({zoom:r.zoom,pan:r.pan,duration:r.animationDuration,easing:r.animationEasing});t.animations.push(b)}t.animations.forEach(function(C){return C.play()}),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),$a.all(t.animations.map(function(C){return C.promise()})).then(function(){t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t})})}else n.positions(p),r.fit&&s.fit(r.eles,r.padding),r.zoom!=null&&s.zoom(r.zoom),r.pan&&s.pan(r.pan),t.one("layoutready",r.ready),t.emit({type:"layoutready",layout:t}),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});return this},layout:function(t){var r=this.cy();return r.makeLayout(je({},t,{eles:this}))}};wc.createLayout=wc.makeLayout=wc.layout;function XC(e,t,r){var i=r._private,n=i.styleCache=i.styleCache||[],s;return(s=n[e])!=null||(s=n[e]=t(r)),s}function ch(e,t){return e=Ts(e),function(i){return XC(e,t,i)}}function uh(e,t){e=Ts(e);var r=function(n){return t.call(n)};return function(){var n=this[0];if(n)return XC(e,r,n)}}var lr={recalculateRenderedStyle:function(t){var r=this.cy(),i=r.renderer(),n=r.styleEnabled();return i&&n&&i.recalculateRenderedStyle(this,t),this},dirtyStyleCache:function(){var t=this.cy(),r=function(s){return s._private.styleCache=null};if(t.hasCompoundNodes()){var i;i=this.spawnSelf().merge(this.descendants()).merge(this.parents()),i.merge(i.connectedEdges()),i.forEach(r)}else this.forEach(function(n){r(n),n.connectedEdges().forEach(r)});return this},updateStyle:function(t){var r=this._private.cy;if(!r.styleEnabled())return this;if(r.batching()){var i=r._private.batchStyleEles;return i.merge(this),this}var n=r.hasCompoundNodes(),s=this;t=!!(t||t===void 0),n&&(s=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var a=s;return t?a.emitAndNotify("style"):a.emit("style"),s.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var t=this.cy();if(t.styleEnabled())for(var r=0;r<this.length;r++){var i=this[r];i._private.styleDirty&&(i._private.styleDirty=!1,t.style().apply(i))}},parsedStyle:function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,i=this[0],n=i.cy();if(n.styleEnabled()&&i){i._private.styleDirty&&(i._private.styleDirty=!1,n.style().apply(i));var s=i._private.style[t];return s??(r?n.style().getDefaultProperty(t):null)}},numericStyle:function(t){var r=this[0];if(r.cy().styleEnabled()&&r){var i=r.pstyle(t);return i.pfValue!==void 0?i.pfValue:i.value}},numericStyleUnits:function(t){var r=this[0];if(r.cy().styleEnabled()&&r)return r.pstyle(t).units},renderedStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var i=this[0];if(i)return r.style().getRenderedStyle(i,t)},style:function(t,r){var i=this.cy();if(!i.styleEnabled())return this;var n=!1,s=i.style();if(lt(t)){var a=t;s.applyBypass(this,a,n),this.emitAndNotify("style")}else if(qe(t))if(r===void 0){var o=this[0];return o?s.getStylePropertyValue(o,t):void 0}else s.applyBypass(this,t,r,n),this.emitAndNotify("style");else if(t===void 0){var l=this[0];return l?s.getRawStyle(l):void 0}return this},removeStyle:function(t){var r=this.cy();if(!r.styleEnabled())return this;var i=!1,n=r.style(),s=this;if(t===void 0)for(var a=0;a<s.length;a++){var o=s[a];n.removeAllBypasses(o,i)}else{t=t.split(/\s+/);for(var l=0;l<s.length;l++){var c=s[l];n.removeBypasses(c,t,i)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var t=this.cy();if(!t.styleEnabled())return 1;var r=t.hasCompoundNodes(),i=this[0];if(i){var n=i._private,s=i.pstyle("opacity").value;if(!r)return s;var a=n.data.parent?i.parents():null;if(a)for(var o=0;o<a.length;o++){var l=a[o],c=l.pstyle("opacity").value;s=c*s}return s}},transparent:function(){var t=this.cy();if(!t.styleEnabled())return!1;var r=this[0],i=r.cy().hasCompoundNodes();if(r)return i?r.effectiveOpacity()===0:r.pstyle("opacity").value===0},backgrounding:function(){var t=this.cy();if(!t.styleEnabled())return!1;var r=this[0];return!!r._private.backgrounding}};function _f(e,t){var r=e._private,i=r.data.parent?e.parents():null;if(i)for(var n=0;n<i.length;n++){var s=i[n];if(!t(s))return!1}return!0}function Pv(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,i=e.parentOk||e.ok;return function(){var n=this.cy();if(!n.styleEnabled())return!0;var s=this[0],a=n.hasCompoundNodes();if(s){var o=s._private;if(!t(s))return!1;if(s.isNode())return!a||_f(s,i);var l=o.source,c=o.target;return r(l)&&(!a||_f(l,r))&&(l===c||r(c)&&(!a||_f(c,r)))}}}var za=ch("eleTakesUpSpace",function(e){return e.pstyle("display").value==="element"&&e.width()!==0&&(e.isNode()?e.height()!==0:!0)});lr.takesUpSpace=uh("takesUpSpace",Pv({ok:za}));var EL=ch("eleInteractive",function(e){return e.pstyle("events").value==="yes"&&e.pstyle("visibility").value==="visible"&&za(e)}),AL=ch("parentInteractive",function(e){return e.pstyle("visibility").value==="visible"&&za(e)});lr.interactive=uh("interactive",Pv({ok:EL,parentOk:AL,edgeOkViaNode:za}));lr.noninteractive=function(){var e=this[0];if(e)return!e.interactive()};var BL=ch("eleVisible",function(e){return e.pstyle("visibility").value==="visible"&&e.pstyle("opacity").pfValue!==0&&za(e)}),DL=za;lr.visible=uh("visible",Pv({ok:BL,edgeOkViaNode:DL}));lr.hidden=function(){var e=this[0];if(e)return!e.visible()};lr.isBundledBezier=uh("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});lr.bypass=lr.css=lr.style;lr.renderedCss=lr.renderedStyle;lr.removeBypass=lr.removeCss=lr.removeStyle;lr.pstyle=lr.parsedStyle;var In={};function _0(e){return function(){var t=arguments,r=[];if(t.length===2){var i=t[0],n=t[1];this.on(e.event,i,n)}else if(t.length===1&&It(t[0])){var s=t[0];this.on(e.event,s)}else if(t.length===0||t.length===1&&St(t[0])){for(var a=t.length===1?t[0]:null,o=0;o<this.length;o++){var l=this[o],c=!e.ableField||l._private[e.ableField],u=l._private[e.field]!=e.value;if(e.overrideAble){var h=e.overrideAble(l);if(h!==void 0&&(c=h,!h))return this}c&&(l._private[e.field]=e.value,u&&r.push(l))}var d=this.spawn(r);d.updateStyle(),d.emit(e.event),a&&d.emit(a)}return this}}function Ha(e){In[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(r!==void 0)return r}return t._private[e.field]}},In[e.on]=_0({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),In[e.off]=_0({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}Ha({field:"locked",overrideField:function(t){return t.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Ha({field:"grabbable",overrideField:function(t){return t.cy().autoungrabify()||t.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Ha({field:"selected",ableField:"selectable",overrideAble:function(t){return t.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Ha({field:"selectable",overrideField:function(t){return t.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});In.deselect=In.unselect;In.grabbed=function(){var e=this[0];if(e)return e._private.grabbed};Ha({field:"active",on:"activate",off:"unactivate"});Ha({field:"pannable",on:"panify",off:"unpanify"});In.inactive=function(){var e=this[0];if(e)return!e._private.active};var wr={},b0=function(t){return function(i){for(var n=this,s=[],a=0;a<n.length;a++){var o=n[a];if(o.isNode()){for(var l=!1,c=o.connectedEdges(),u=0;u<c.length;u++){var h=c[u],d=h.source(),p=h.target();if(t.noIncomingEdges&&p===o&&d!==o||t.noOutgoingEdges&&d===o&&p!==o){l=!0;break}}l||s.push(o)}}return this.spawn(s,!0).filter(i)}},C0=function(t){return function(r){for(var i=this,n=[],s=0;s<i.length;s++){var a=i[s];if(a.isNode())for(var o=a.connectedEdges(),l=0;l<o.length;l++){var c=o[l],u=c.source(),h=c.target();t.outgoing&&u===a?(n.push(c),n.push(h)):t.incoming&&h===a&&(n.push(c),n.push(u))}}return this.spawn(n,!0).filter(r)}},w0=function(t){return function(r){for(var i=this,n=[],s={};;){var a=t.outgoing?i.outgoers():i.incomers();if(a.length===0)break;for(var o=!1,l=0;l<a.length;l++){var c=a[l],u=c.id();s[u]||(s[u]=!0,n.push(c),o=!0)}if(!o)break;i=a}return this.spawn(n,!0).filter(r)}};wr.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null};je(wr,{roots:b0({noIncomingEdges:!0}),leaves:b0({noOutgoingEdges:!0}),outgoers:ni(C0({outgoing:!0}),"outgoers"),successors:w0({outgoing:!0}),incomers:ni(C0({incoming:!0}),"incomers"),predecessors:w0({})});je(wr,{neighborhood:ni(function(e){for(var t=[],r=this.nodes(),i=0;i<r.length;i++)for(var n=r[i],s=n.connectedEdges(),a=0;a<s.length;a++){var o=s[a],l=o.source(),c=o.target(),u=n===l?c:l;u.length>0&&t.push(u[0]),t.push(o[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(t){return this.neighborhood().add(this).filter(t)},openNeighborhood:function(t){return this.neighborhood(t)}});wr.neighbourhood=wr.neighborhood;wr.closedNeighbourhood=wr.closedNeighborhood;wr.openNeighbourhood=wr.openNeighborhood;je(wr,{source:ni(function(t){var r=this[0],i;return r&&(i=r._private.source||r.cy().collection()),i&&t?i.filter(t):i},"source"),target:ni(function(t){var r=this[0],i;return r&&(i=r._private.target||r.cy().collection()),i&&t?i.filter(t):i},"target"),sources:S0({attr:"source"}),targets:S0({attr:"target"})});function S0(e){return function(r){for(var i=[],n=0;n<this.length;n++){var s=this[n],a=s._private[e.attr];a&&i.push(a)}return this.spawn(i,!0).filter(r)}}je(wr,{edgesWith:ni(k0(),"edgesWith"),edgesTo:ni(k0({thisIsSrc:!0}),"edgesTo")});function k0(e){return function(r){var i=[],n=this._private.cy,s=e||{};qe(r)&&(r=n.$(r));for(var a=0;a<r.length;a++)for(var o=r[a]._private.edges,l=0;l<o.length;l++){var c=o[l],u=c._private.data,h=this.hasElementWithId(u.source)&&r.hasElementWithId(u.target),d=r.hasElementWithId(u.source)&&this.hasElementWithId(u.target),p=h||d;p&&((s.thisIsSrc||s.thisIsTgt)&&(s.thisIsSrc&&!h||s.thisIsTgt&&!d)||i.push(c))}return this.spawn(i,!0)}}je(wr,{connectedEdges:ni(function(e){for(var t=[],r=this,i=0;i<r.length;i++){var n=r[i];if(n.isNode())for(var s=n._private.edges,a=0;a<s.length;a++){var o=s[a];t.push(o)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:ni(function(e){for(var t=[],r=this,i=0;i<r.length;i++){var n=r[i];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:ni(x0(),"parallelEdges"),codirectedEdges:ni(x0({codirected:!0}),"codirectedEdges")});function x0(e){var t={codirected:!1};return e=je({},t,e),function(i){for(var n=[],s=this.edges(),a=e,o=0;o<s.length;o++)for(var l=s[o],c=l._private,u=c.source,h=u._private.data.id,d=c.data.target,p=u._private.edges,y=0;y<p.length;y++){var _=p[y],v=_._private.data,g=v.target,f=v.source,m=g===d&&f===h,b=h===g&&d===f;(a.codirected&&m||!a.codirected&&(m||b))&&n.push(_)}return this.spawn(n,!0).filter(i)}}je(wr,{components:function(t){var r=this,i=r.cy(),n=i.collection(),s=t==null?r.nodes():t.nodes(),a=[];t!=null&&s.empty()&&(s=t.sources());var o=function(u,h){n.merge(u),s.unmerge(u),h.merge(u)};if(s.empty())return r.spawn();var l=function(){var u=i.collection();a.push(u);var h=s[0];o(h,u),r.bfs({directed:!1,roots:h,visit:function(p){return o(p,u)}}),u.forEach(function(d){d.connectedEdges().forEach(function(p){r.has(p)&&u.has(p.source())&&u.has(p.target())&&u.merge(p)})})};do l();while(s.length>0);return a},component:function(){var t=this[0];return t.cy().mutableElements().components(t)[0]}});wr.componentsOf=wr.components;var cr=function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t===void 0){Rt("A collection must have a reference to the core");return}var s=new sn,a=!1;if(!r)r=[];else if(r.length>0&&lt(r[0])&&!ml(r[0])){a=!0;for(var o=[],l=new Na,c=0,u=r.length;c<u;c++){var h=r[c];h.data==null&&(h.data={});var d=h.data;if(d.id==null)d.id=uC();else if(t.hasElementWithId(d.id)||l.has(d.id))continue;var p=new eh(t,h,!1);o.push(p),l.add(d.id)}r=o}this.length=0;for(var y=0,_=r.length;y<_;y++){var v=r[y][0];if(v!=null){var g=v._private.data.id;(!i||!s.has(g))&&(i&&s.set(g,{index:this.length,ele:v}),this[this.length]=v,this.length++)}}this._private={eles:this,cy:t,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(f){this.lazyMap=f},rebuildMap:function(){for(var m=this.lazyMap=new sn,b=this.eles,C=0;C<b.length;C++){var S=b[C];m.set(S.id(),{index:C,ele:S})}}},i&&(this._private.map=s),a&&!n&&this.restore()},Tt=eh.prototype=cr.prototype=Object.create(Array.prototype);Tt.instanceString=function(){return"collection"};Tt.spawn=function(e,t){return new cr(this.cy(),e,t)};Tt.spawnSelf=function(){return this.spawn(this)};Tt.cy=function(){return this._private.cy};Tt.renderer=function(){return this._private.cy.renderer()};Tt.element=function(){return this[0]};Tt.collection=function(){return X1(this)?this:new cr(this._private.cy,[this])};Tt.unique=function(){return new cr(this._private.cy,this,!0)};Tt.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)};Tt.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new cr(t)};Tt.$id=Tt.getElementById;Tt.poolIndex=function(){var e=this._private.cy,t=e._private.elements,r=this[0]._private.data.id;return t._private.map.get(r).index};Tt.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index};Tt.indexOfId=function(e){return e=""+e,this._private.map.get(e).index};Tt.json=function(e){var t=this.element(),r=this.cy();if(t==null&&e)return this;if(t!=null){var i=t._private;if(lt(e)){if(r.startBatch(),e.data){t.data(e.data);var n=i.data;if(t.isEdge()){var s=!1,a={},o=e.data.source,l=e.data.target;o!=null&&o!=n.source&&(a.source=""+o,s=!0),l!=null&&l!=n.target&&(a.target=""+l,s=!0),s&&(t=t.move(a))}else{var c="parent"in e.data,u=e.data.parent;c&&(u!=null||n.parent!=null)&&u!=n.parent&&(u===void 0&&(u=null),u!=null&&(u=""+u),t=t.move({parent:u}))}}e.position&&t.position(e.position);var h=function(_,v,g){var f=e[_];f!=null&&f!==i[_]&&(f?t[v]():t[g]())};return h("removed","remove","restore"),h("selected","select","unselect"),h("selectable","selectify","unselectify"),h("locked","lock","unlock"),h("grabbable","grabify","ungrabify"),h("pannable","panify","unpanify"),e.classes!=null&&t.classes(e.classes),r.endBatch(),this}else if(e===void 0){var d={data:Li(i.data),position:Li(i.position),group:i.group,removed:i.removed,selected:i.selected,selectable:i.selectable,locked:i.locked,grabbable:i.grabbable,pannable:i.pannable,classes:null};d.classes="";var p=0;return i.classes.forEach(function(y){return d.classes+=p++===0?y:" "+y}),d}}};Tt.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t],i=r.json();e.push(i)}return e};Tt.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var i=this[r],n=i.json(),s=new eh(e,n,!1);t.push(s)}return new cr(e,t)};Tt.copy=Tt.clone;Tt.restore=function(){for(var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,i=r.cy(),n=i._private,s=[],a=[],o,l=0,c=r.length;l<c;l++){var u=r[l];t&&!u.removed()||(u.isNode()?s.push(u):a.push(u))}o=s.concat(a);var h,d=function(){o.splice(h,1),h--};for(h=0;h<o.length;h++){var p=o[h],y=p._private,_=y.data;if(p.clearTraversalCache(),!(!t&&!y.removed)){if(_.id===void 0)_.id=uC();else if(xe(_.id))_.id=""+_.id;else if($n(_.id)||!qe(_.id)){Rt("Can not create element with invalid string ID `"+_.id+"`"),d();continue}else if(i.hasElementWithId(_.id)){Rt("Can not create second element with ID `"+_.id+"`"),d();continue}}var v=_.id;if(p.isNode()){var g=y.position;g.x==null&&(g.x=0),g.y==null&&(g.y=0)}if(p.isEdge()){for(var f=p,m=["source","target"],b=m.length,C=!1,S=0;S<b;S++){var k=m[S],w=_[k];xe(w)&&(w=_[k]=""+_[k]),w==null||w===""?(Rt("Can not create edge `"+v+"` with unspecified "+k),C=!0):i.hasElementWithId(w)||(Rt("Can not create edge `"+v+"` with nonexistant "+k+" `"+w+"`"),C=!0)}if(C){d();continue}var x=i.getElementById(_.source),A=i.getElementById(_.target);x.same(A)?x._private.edges.push(f):(x._private.edges.push(f),A._private.edges.push(f)),f._private.source=x,f._private.target=A}y.map=new sn,y.map.set(v,{ele:p,index:0}),y.removed=!1,t&&i.addToPool(p)}for(var D=0;D<s.length;D++){var T=s[D],E=T._private.data;xe(E.parent)&&(E.parent=""+E.parent);var R=E.parent,F=R!=null;if(F||T._private.parent){var O=T._private.parent?i.collection().merge(T._private.parent):i.getElementById(R);if(O.empty())E.parent=void 0;else if(O[0].removed())mt("Node added with missing parent, reference to parent removed"),E.parent=void 0,T._private.parent=null;else{for(var $=!1,H=O;!H.empty();){if(T.same(H)){$=!0,E.parent=void 0;break}H=H.parent()}$||(O[0]._private.children.push(T),T._private.parent=O[0],n.hasCompoundNodes=!0)}}}if(o.length>0){for(var L=o.length===r.length?r:new cr(i,o),I=0;I<L.length;I++){var P=L[I];P.isNode()||(P.parallelEdges().clearTraversalCache(),P.source().clearTraversalCache(),P.target().clearTraversalCache())}var z;n.hasCompoundNodes?z=i.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):z=L,z.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?L.emitAndNotify("add"):t&&L.emit("add")}return r};Tt.removed=function(){var e=this[0];return e&&e._private.removed};Tt.inside=function(){var e=this[0];return e&&!e._private.removed};Tt.remove=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this,i=[],n={},s=r._private.cy;function a(R){for(var F=R._private.edges,O=0;O<F.length;O++)l(F[O])}function o(R){for(var F=R._private.children,O=0;O<F.length;O++)l(F[O])}function l(R){var F=n[R.id()];t&&R.removed()||F||(n[R.id()]=!0,R.isNode()?(i.push(R),a(R),o(R)):i.unshift(R))}for(var c=0,u=r.length;c<u;c++){var h=r[c];l(h)}function d(R,F){var O=R._private.edges;zn(O,F),R.clearTraversalCache()}function p(R){R.clearTraversalCache()}var y=[];y.ids={};function _(R,F){F=F[0],R=R[0];var O=R._private.children,$=R.id();zn(O,F),F._private.parent=null,y.ids[$]||(y.ids[$]=!0,y.push(R))}r.dirtyCompoundBoundsCache(),t&&s.removeFromPool(i);for(var v=0;v<i.length;v++){var g=i[v];if(g.isEdge()){var f=g.source()[0],m=g.target()[0];d(f,g),d(m,g);for(var b=g.parallelEdges(),C=0;C<b.length;C++){var S=b[C];p(S),S.isBundledBezier()&&S.dirtyBoundingBoxCache()}}else{var k=g.parent();k.length!==0&&_(k,g)}t&&(g._private.removed=!0)}var w=s._private.elements;s._private.hasCompoundNodes=!1;for(var x=0;x<w.length;x++){var A=w[x];if(A.isParent()){s._private.hasCompoundNodes=!0;break}}var D=new cr(this.cy(),i);D.size()>0&&(e?D.emitAndNotify("remove"):t&&D.emit("remove"));for(var T=0;T<y.length;T++){var E=y[T];(!t||!E.removed())&&E.updateStyle()}return D};Tt.move=function(e){var t=this._private.cy,r=this,i=!1,n=!1,s=function(y){return y==null?y:""+y};if(e.source!==void 0||e.target!==void 0){var a=s(e.source),o=s(e.target),l=a!=null&&t.hasElementWithId(a),c=o!=null&&t.hasElementWithId(o);(l||c)&&(t.batch(function(){r.remove(i,n),r.emitAndNotify("moveout");for(var p=0;p<r.length;p++){var y=r[p],_=y._private.data;y.isEdge()&&(l&&(_.source=a),c&&(_.target=o))}r.restore(i,n)}),r.emitAndNotify("move"))}else if(e.parent!==void 0){var u=s(e.parent),h=u===null||t.hasElementWithId(u);if(h){var d=u===null?void 0:u;t.batch(function(){var p=r.remove(i,n);p.emitAndNotify("moveout");for(var y=0;y<r.length;y++){var _=r[y],v=_._private.data;_.isNode()&&(v.parent=d)}p.restore(i,n)}),r.emitAndNotify("move")}}return this};[wC,HD,Cc,Pn,Ta,iL,oh,_L,GC,KC,kL,au,wc,lr,In,wr].forEach(function(e){je(Tt,e)});var LL={add:function(t){var r,i=this;if(Gr(t)){var n=t;if(n._private.cy===i)r=n.restore();else{for(var s=[],a=0;a<n.length;a++){var o=n[a];s.push(o.json())}r=new cr(i,s)}}else if(St(t)){var l=t;r=new cr(i,l)}else if(lt(t)&&(St(t.nodes)||St(t.edges))){for(var c=t,u=[],h=["nodes","edges"],d=0,p=h.length;d<p;d++){var y=h[d],_=c[y];if(St(_))for(var v=0,g=_.length;v<g;v++){var f=je({group:y},_[v]);u.push(f)}}r=new cr(i,u)}else{var m=t;r=new eh(i,m).collection()}return r},remove:function(t){if(!Gr(t)){if(qe(t)){var r=t;t=this.$(r)}}return t.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function RL(e,t,r,i){var n=4,s=.001,a=1e-7,o=10,l=11,c=1/(l-1),u=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var h=0;h<4;++h)if(typeof arguments[h]!="number"||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var d=u?new Float32Array(l):new Array(l);function p(A,D){return 1-3*D+3*A}function y(A,D){return 3*D-6*A}function _(A){return 3*A}function v(A,D,T){return((p(D,T)*A+y(D,T))*A+_(D))*A}function g(A,D,T){return 3*p(D,T)*A*A+2*y(D,T)*A+_(D)}function f(A,D){for(var T=0;T<n;++T){var E=g(D,e,r);if(E===0)return D;var R=v(D,e,r)-A;D-=R/E}return D}function m(){for(var A=0;A<l;++A)d[A]=v(A*c,e,r)}function b(A,D,T){var E,R,F=0;do R=D+(T-D)/2,E=v(R,e,r)-A,E>0?T=R:D=R;while(Math.abs(E)>a&&++F<o);return R}function C(A){for(var D=0,T=1,E=l-1;T!==E&&d[T]<=A;++T)D+=c;--T;var R=(A-d[T])/(d[T+1]-d[T]),F=D+R*c,O=g(F,e,r);return O>=s?f(A,F):O===0?F:b(A,D,D+c)}var S=!1;function k(){S=!0,(e!==t||r!==i)&&m()}var w=function(D){return S||k(),e===t&&r===i?D:D===0?0:D===1?1:v(C(D),t,i)};w.getControlPoints=function(){return[{x:e,y:t},{x:r,y:i}]};var x="generateBezier("+[e,t,r,i]+")";return w.toString=function(){return x},w}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var ML=(function(){function e(i){return-i.tension*i.x-i.friction*i.v}function t(i,n,s){var a={x:i.x+s.dx*n,v:i.v+s.dv*n,tension:i.tension,friction:i.friction};return{dx:a.v,dv:e(a)}}function r(i,n){var s={dx:i.v,dv:e(i)},a=t(i,n*.5,s),o=t(i,n*.5,a),l=t(i,n,o),c=1/6*(s.dx+2*(a.dx+o.dx)+l.dx),u=1/6*(s.dv+2*(a.dv+o.dv)+l.dv);return i.x=i.x+c*n,i.v=i.v+u*n,i}return function i(n,s,a){var o={x:-1,v:0,tension:null,friction:null},l=[0],c=0,u=1/1e4,h=16/1e3,d,p,y;for(n=parseFloat(n)||500,s=parseFloat(s)||20,a=a||null,o.tension=n,o.friction=s,d=a!==null,d?(c=i(n,s),p=c/a*h):p=h;y=r(y||o,p),l.push(1+y.x),c+=16,Math.abs(y.x)>u&&Math.abs(y.v)>u;);return d?function(_){return l[_*(l.length-1)|0]}:c}})(),kt=function(t,r,i,n){var s=RL(t,r,i,n);return function(a,o,l){return a+(o-a)*s(l)}},Sc={linear:function(t,r,i){return t+(r-t)*i},ease:kt(.25,.1,.25,1),"ease-in":kt(.42,0,1,1),"ease-out":kt(0,0,.58,1),"ease-in-out":kt(.42,0,.58,1),"ease-in-sine":kt(.47,0,.745,.715),"ease-out-sine":kt(.39,.575,.565,1),"ease-in-out-sine":kt(.445,.05,.55,.95),"ease-in-quad":kt(.55,.085,.68,.53),"ease-out-quad":kt(.25,.46,.45,.94),"ease-in-out-quad":kt(.455,.03,.515,.955),"ease-in-cubic":kt(.55,.055,.675,.19),"ease-out-cubic":kt(.215,.61,.355,1),"ease-in-out-cubic":kt(.645,.045,.355,1),"ease-in-quart":kt(.895,.03,.685,.22),"ease-out-quart":kt(.165,.84,.44,1),"ease-in-out-quart":kt(.77,0,.175,1),"ease-in-quint":kt(.755,.05,.855,.06),"ease-out-quint":kt(.23,1,.32,1),"ease-in-out-quint":kt(.86,0,.07,1),"ease-in-expo":kt(.95,.05,.795,.035),"ease-out-expo":kt(.19,1,.22,1),"ease-in-out-expo":kt(1,0,0,1),"ease-in-circ":kt(.6,.04,.98,.335),"ease-out-circ":kt(.075,.82,.165,1),"ease-in-out-circ":kt(.785,.135,.15,.86),spring:function(t,r,i){if(i===0)return Sc.linear;var n=ML(t,r,i);return function(s,a,o){return s+(a-s)*n(o)}},"cubic-bezier":kt};function T0(e,t,r,i,n){if(i===1||t===r)return r;var s=n(t,r,i);return e==null||((e.roundValue||e.color)&&(s=Math.round(s)),e.min!==void 0&&(s=Math.max(s,e.min)),e.max!==void 0&&(s=Math.min(s,e.max))),s}function E0(e,t){return e.pfValue!=null||e.value!=null?e.pfValue!=null&&(t==null||t.type.units!=="%")?e.pfValue:e.value:e}function Ks(e,t,r,i,n){var s=n!=null?n.type:null;r<0?r=0:r>1&&(r=1);var a=E0(e,n),o=E0(t,n);if(xe(a)&&xe(o))return T0(s,a,o,r,i);if(St(a)&&St(o)){for(var l=[],c=0;c<o.length;c++){var u=a[c],h=o[c];if(u!=null&&h!=null){var d=T0(s,u,h,r,i);l.push(d)}else l.push(h)}return l}}function PL(e,t,r,i){var n=!i,s=e._private,a=t._private,o=a.easing,l=a.startTime,c=i?e:e.cy(),u=c.style();if(!a.easingImpl)if(o==null)a.easingImpl=Sc.linear;else{var h;if(qe(o)){var d=u.parse("transition-timing-function",o);h=d.value}else h=o;var p,y;qe(h)?(p=h,y=[]):(p=h[1],y=h.slice(2).map(function(L){return+L})),y.length>0?(p==="spring"&&y.push(a.duration),a.easingImpl=Sc[p].apply(null,y)):a.easingImpl=Sc[p]}var _=a.easingImpl,v;if(a.duration===0?v=1:v=(r-l)/a.duration,a.applying&&(v=a.progress),v<0?v=0:v>1&&(v=1),a.delay==null){var g=a.startPosition,f=a.position;if(f&&n&&!e.locked()){var m={};Ja(g.x,f.x)&&(m.x=Ks(g.x,f.x,v,_)),Ja(g.y,f.y)&&(m.y=Ks(g.y,f.y,v,_)),e.position(m)}var b=a.startPan,C=a.pan,S=s.pan,k=C!=null&&i;k&&(Ja(b.x,C.x)&&(S.x=Ks(b.x,C.x,v,_)),Ja(b.y,C.y)&&(S.y=Ks(b.y,C.y,v,_)),e.emit("pan"));var w=a.startZoom,x=a.zoom,A=x!=null&&i;A&&(Ja(w,x)&&(s.zoom=Zo(s.minZoom,Ks(w,x,v,_),s.maxZoom)),e.emit("zoom")),(k||A)&&e.emit("viewport");var D=a.style;if(D&&D.length>0&&n){for(var T=0;T<D.length;T++){var E=D[T],R=E.name,F=E,O=a.startStyle[R],$=u.properties[O.name],H=Ks(O,F,v,_,$);u.overrideBypass(e,R,H)}e.emit("style")}}return a.progress=v,v}function Ja(e,t){return e==null||t==null?!1:xe(e)&&xe(t)?!0:!!(e&&t)}function IL(e,t,r,i){var n=t._private;n.started=!0,n.startTime=r-n.progress*n.duration}function A0(e,t){var r=t._private.aniEles,i=[];function n(u,h){var d=u._private,p=d.animation.current,y=d.animation.queue,_=!1;if(p.length===0){var v=y.shift();v&&p.push(v)}for(var g=function(S){for(var k=S.length-1;k>=0;k--){var w=S[k];w()}S.splice(0,S.length)},f=p.length-1;f>=0;f--){var m=p[f],b=m._private;if(b.stopped){p.splice(f,1),b.hooked=!1,b.playing=!1,b.started=!1,g(b.frames);continue}!b.playing&&!b.applying||(b.playing&&b.applying&&(b.applying=!1),b.started||IL(u,m,e),PL(u,m,e,h),b.applying&&(b.applying=!1),g(b.frames),b.step!=null&&b.step(e),m.completed()&&(p.splice(f,1),b.hooked=!1,b.playing=!1,b.started=!1,g(b.completes)),_=!0)}return!h&&p.length===0&&y.length===0&&i.push(u),_}for(var s=!1,a=0;a<r.length;a++){var o=r[a],l=n(o);s=s||l}var c=n(t,!0);(s||c)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(i),t.emit("step")}var FL={animate:gt.animate(),animation:gt.animation(),animated:gt.animated(),clearQueue:gt.clearQueue(),delay:gt.delay(),delayAnimation:gt.delayAnimation(),stop:gt.stop(),addToAnimationPool:function(t){var r=this;r.styleEnabled()&&r._private.aniEles.merge(t)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var t=this;if(t._private.animationsRunning=!0,!t.styleEnabled())return;function r(){t._private.animationsRunning&&tu(function(s){A0(s,t),r()})}var i=t.renderer();i&&i.beforeRender?i.beforeRender(function(s,a){A0(a,t)},i.beforeRenderPriorities.animations):r()}},OL={qualifierCompare:function(t,r){return t==null||r==null?t==null&&r==null:t.sameText(r)},eventMatches:function(t,r,i){var n=r.qualifier;return n!=null?t!==i.target&&ml(i.target)&&n.matches(i.target):!0},addEventFields:function(t,r){r.cy=t,r.target=t},callbackContext:function(t,r,i){return r.qualifier!=null?i.target:t}},Ql=function(t){return qe(t)?new qn(t):t},ZC={createEmitter:function(){var t=this._private;return t.emitter||(t.emitter=new lh(OL,this)),this},emitter:function(){return this._private.emitter},on:function(t,r,i){return this.emitter().on(t,Ql(r),i),this},removeListener:function(t,r,i){return this.emitter().removeListener(t,Ql(r),i),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(t,r,i){return this.emitter().one(t,Ql(r),i),this},once:function(t,r,i){return this.emitter().one(t,Ql(r),i),this},emit:function(t,r){return this.emitter().emit(t,r),this},emitAndNotify:function(t,r){return this.emit(t),this.notify(t,r),this}};gt.eventAliasesOn(ZC);var _p={png:function(t){var r=this._private.renderer;return t=t||{},r.png(t)},jpg:function(t){var r=this._private.renderer;return t=t||{},t.bg=t.bg||"#fff",r.jpg(t)}};_p.jpeg=_p.jpg;var kc={layout:function(t){var r=this;if(t==null){Rt("Layout options must be specified to make a layout");return}if(t.name==null){Rt("A `name` must be specified to make a layout");return}var i=t.name,n=r.extension("layout",i);if(n==null){Rt("No such layout `"+i+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var s;qe(t.eles)?s=r.$(t.eles):s=t.eles!=null?t.eles:r.$();var a=new n(je({},t,{cy:r,eles:s}));return a}};kc.createLayout=kc.makeLayout=kc.layout;var NL={notify:function(t,r){var i=this._private;if(this.batching()){i.batchNotifications=i.batchNotifications||{};var n=i.batchNotifications[t]=i.batchNotifications[t]||this.collection();r!=null&&n.merge(r);return}if(i.notificationsEnabled){var s=this.renderer();this.destroyed()||!s||s.notify(t,r)}},notifications:function(t){var r=this._private;return t===void 0?r.notificationsEnabled:(r.notificationsEnabled=!!t,this)},noNotifications:function(t){this.notifications(!1),t(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var t=this._private;return t.batchCount==null&&(t.batchCount=0),t.batchCount===0&&(t.batchStyleEles=this.collection(),t.batchNotifications={}),t.batchCount++,this},endBatch:function(){var t=this._private;if(t.batchCount===0)return this;if(t.batchCount--,t.batchCount===0){t.batchStyleEles.updateStyle();var r=this.renderer();Object.keys(t.batchNotifications).forEach(function(i){var n=t.batchNotifications[i];n.empty()?r.notify(i):r.notify(i,n)})}return this},batch:function(t){return this.startBatch(),t(),this.endBatch(),this},batchData:function(t){var r=this;return this.batch(function(){for(var i=Object.keys(t),n=0;n<i.length;n++){var s=i[n],a=t[s],o=r.getElementById(s);o.data(a)}})}},$L=hr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),bp={renderTo:function(t,r,i,n){var s=this._private.renderer;return s.renderTo(t,r,i,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(t){var r=this,i=r.extension("renderer",t.name);if(i==null){Rt("Can not initialise: No such renderer `".concat(t.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}t.wheelSensitivity!==void 0&&mt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var n=$L(t);n.cy=r,r._private.renderer=new i(n),this.notify("init")},destroyRenderer:function(){var t=this;t.notify("destroy");var r=t.container();if(r)for(r._cyreg=null;r.childNodes.length>0;)r.removeChild(r.childNodes[0]);t._private.renderer=null,t.mutableElements().forEach(function(i){var n=i._private;n.rscratch={},n.rstyle={},n.animation.current=[],n.animation.queue=[]})},onRender:function(t){return this.on("render",t)},offRender:function(t){return this.off("render",t)}};bp.invalidateDimensions=bp.resize;var xc={collection:function(t,r){return qe(t)?this.$(t):Gr(t)?t.collection():St(t)?(r||(r={}),new cr(this,t,r.unique,r.removed)):new cr(this)},nodes:function(t){var r=this.$(function(i){return i.isNode()});return t?r.filter(t):r},edges:function(t){var r=this.$(function(i){return i.isEdge()});return t?r.filter(t):r},$:function(t){var r=this._private.elements;return t?r.filter(t):r.spawnSelf()},mutableElements:function(){return this._private.elements}};xc.elements=xc.filter=xc.$;var sr={},Eo="t",zL="f";sr.apply=function(e){for(var t=this,r=t._private,i=r.cy,n=i.collection(),s=0;s<e.length;s++){var a=e[s],o=t.getContextMeta(a);if(!o.empty){var l=t.getContextStyle(o),c=t.applyContextStyle(o,l,a);a._private.appliedInitStyle?t.updateTransitions(a,c.diffProps):a._private.appliedInitStyle=!0;var u=t.updateStyleHints(a);u&&n.push(a)}}return n};sr.getPropertiesDiff=function(e,t){var r=this,i=r._private.propDiffs=r._private.propDiffs||{},n=e+"-"+t,s=i[n];if(s)return s;for(var a=[],o={},l=0;l<r.length;l++){var c=r[l],u=e[l]===Eo,h=t[l]===Eo,d=u!==h,p=c.mappedProperties.length>0;if(d||h&&p){var y=void 0;d&&p||d?y=c.properties:p&&(y=c.mappedProperties);for(var _=0;_<y.length;_++){for(var v=y[_],g=v.name,f=!1,m=l+1;m<r.length;m++){var b=r[m],C=t[m]===Eo;if(C&&(f=b.properties[v.name]!=null,f))break}!o[g]&&!f&&(o[g]=!0,a.push(g))}}}return i[n]=a,a};sr.getContextMeta=function(e){for(var t=this,r="",i,n=e._private.styleCxtKey||"",s=0;s<t.length;s++){var a=t[s],o=a.selector&&a.selector.matches(e);o?r+=Eo:r+=zL}return i=t.getPropertiesDiff(n,r),e._private.styleCxtKey=r,{key:r,diffPropNames:i,empty:i.length===0}};sr.getContextStyle=function(e){var t=e.key,r=this,i=this._private.contextStyles=this._private.contextStyles||{};if(i[t])return i[t];for(var n={_private:{key:t}},s=0;s<r.length;s++){var a=r[s],o=t[s]===Eo;if(o)for(var l=0;l<a.properties.length;l++){var c=a.properties[l];n[c.name]=c}}return i[t]=n,n};sr.applyContextStyle=function(e,t,r){for(var i=this,n=e.diffPropNames,s={},a=i.types,o=0;o<n.length;o++){var l=n[o],c=t[l],u=r.pstyle(l);if(!c)if(u)u.bypass?c={name:l,deleteBypassed:!0}:c={name:l,delete:!0};else continue;if(u!==c){if(c.mapped===a.fn&&u!=null&&u.mapping!=null&&u.mapping.value===c.value){var h=u.mapping,d=h.fnValue=c.value(r);if(d===h.prevFnValue)continue}var p=s[l]={prev:u};i.applyParsedProperty(r,c),p.next=r.pstyle(l),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:s}};sr.updateStyleHints=function(e){var t=e._private,r=this,i=r.propertyGroupNames,n=r.propertyGroupKeys,s=function(M,q,Q){return r.getPropertiesHash(M,q,Q)},a=t.styleKey;if(e.removed())return!1;var o=t.group==="nodes",l=e._private.style;i=Object.keys(l);for(var c=0;c<n.length;c++){var u=n[c];t.styleKeys[u]=[ys,ra]}for(var h=function(M,q){return t.styleKeys[q][0]=Ko(M,t.styleKeys[q][0])},d=function(M,q){return t.styleKeys[q][1]=Yo(M,t.styleKeys[q][1])},p=function(M,q){h(M,q),d(M,q)},y=function(M,q){for(var Q=0;Q<M.length;Q++){var se=M.charCodeAt(Q);h(se,q),d(se,q)}},_=2e9,v=function(M){return-128<M&&M<128&&Math.floor(M)!==M?_-(M*1024|0):M},g=0;g<i.length;g++){var f=i[g],m=l[f];if(m!=null){var b=this.properties[f],C=b.type,S=b.groupKey,k=void 0;b.hashOverride!=null?k=b.hashOverride(e,m):m.pfValue!=null&&(k=m.pfValue);var w=b.enums==null?m.value:null,x=k!=null,A=w!=null,D=x||A,T=m.units;if(C.number&&D&&!C.multiple){var E=x?k:w;p(v(E),S),!x&&T!=null&&y(T,S)}else y(m.strValue,S)}}for(var R=[ys,ra],F=0;F<n.length;F++){var O=n[F],$=t.styleKeys[O];R[0]=Ko($[0],R[0]),R[1]=Yo($[1],R[1])}t.styleKey=rA(R[0],R[1]);var H=t.styleKeys;t.labelDimsKey=_n(H.labelDimensions);var L=s(e,["label"],H.labelDimensions);if(t.labelKey=_n(L),t.labelStyleKey=_n(Ul(H.commonLabel,L)),!o){var I=s(e,["source-label"],H.labelDimensions);t.sourceLabelKey=_n(I),t.sourceLabelStyleKey=_n(Ul(H.commonLabel,I));var P=s(e,["target-label"],H.labelDimensions);t.targetLabelKey=_n(P),t.targetLabelStyleKey=_n(Ul(H.commonLabel,P))}if(o){var z=t.styleKeys,K=z.nodeBody,te=z.nodeBorder,J=z.nodeOutline,ne=z.backgroundImage,V=z.compound,N=z.pie,ee=z.stripe,U=[K,te,J,ne,V,N,ee].filter(function(X){return X!=null}).reduce(Ul,[ys,ra]);t.nodeKey=_n(U),t.hasPie=N!=null&&N[0]!==ys&&N[1]!==ra,t.hasStripe=ee!=null&&ee[0]!==ys&&ee[1]!==ra}return a!==t.styleKey};sr.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null};sr.applyParsedProperty=function(e,t){var r=this,i=t,n=e._private.style,s,a=r.types,o=r.properties[i.name].type,l=i.bypass,c=n[i.name],u=c&&c.bypass,h=e._private,d="mapping",p=function(K){return K==null?null:K.pfValue!=null?K.pfValue:K.value},y=function(){var K=p(c),te=p(i);r.checkTriggers(e,i.name,K,te)};if(t.name==="curve-style"&&e.isEdge()&&(t.value!=="bezier"&&e.isLoop()||t.value==="haystack"&&(e.source().isParent()||e.target().isParent()))&&(i=t=this.parse(t.name,"bezier",l)),i.delete)return n[i.name]=void 0,y(),!0;if(i.deleteBypassed)return c?c.bypass?(c.bypassed=void 0,y(),!0):!1:(y(),!0);if(i.deleteBypass)return c?c.bypass?(n[i.name]=c.bypassed,y(),!0):!1:(y(),!0);var _=function(){mt("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+i.name+"` with data field `"+i.field+"`); try a `["+i.field+"]` selector to limit scope to elements with `"+i.field+"` defined")};switch(i.mapped){case a.mapData:{for(var v=i.field.split("."),g=h.data,f=0;f<v.length&&g;f++){var m=v[f];g=g[m]}if(g==null)return _(),!1;var b;if(xe(g)){var C=i.fieldMax-i.fieldMin;C===0?b=0:b=(g-i.fieldMin)/C}else return mt("Do not use continuous mappers without specifying numeric data (i.e. `"+i.field+": "+g+"` for `"+e.id()+"` is non-numeric)"),!1;if(b<0?b=0:b>1&&(b=1),o.color){var S=i.valueMin[0],k=i.valueMax[0],w=i.valueMin[1],x=i.valueMax[1],A=i.valueMin[2],D=i.valueMax[2],T=i.valueMin[3]==null?1:i.valueMin[3],E=i.valueMax[3]==null?1:i.valueMax[3],R=[Math.round(S+(k-S)*b),Math.round(w+(x-w)*b),Math.round(A+(D-A)*b),Math.round(T+(E-T)*b)];s={bypass:i.bypass,name:i.name,value:R,strValue:"rgb("+R[0]+", "+R[1]+", "+R[2]+")"}}else if(o.number){var F=i.valueMin+(i.valueMax-i.valueMin)*b;s=this.parse(i.name,F,i.bypass,d)}else return!1;if(!s)return _(),!1;s.mapping=i,i=s;break}case a.data:{for(var O=i.field.split("."),$=h.data,H=0;H<O.length&&$;H++){var L=O[H];$=$[L]}if($!=null&&(s=this.parse(i.name,$,i.bypass,d)),!s)return _(),!1;s.mapping=i,i=s;break}case a.fn:{var I=i.value,P=i.fnValue!=null?i.fnValue:I(e);if(i.prevFnValue=P,P==null)return mt("Custom function mappers may not return null (i.e. `"+i.name+"` for ele `"+e.id()+"` is null)"),!1;if(s=this.parse(i.name,P,i.bypass,d),!s)return mt("Custom function mappers may not return invalid values for the property type (i.e. `"+i.name+"` for ele `"+e.id()+"` is invalid)"),!1;s.mapping=Li(i),i=s;break}case void 0:break;default:return!1}return l?(u?i.bypassed=c.bypassed:i.bypassed=c,n[i.name]=i):u?c.bypassed=i:n[i.name]=i,y(),!0};sr.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var i=e[r];if(this.clearStyleHints(i),i.dirtyCompoundBoundsCache(),i.dirtyBoundingBoxCache(),!t)i._private.style={};else for(var n=i._private.style,s=Object.keys(n),a=0;a<s.length;a++){var o=s[a],l=n[o];l!=null&&(l.bypass?l.bypassed=null:n[o]=null)}}};sr.update=function(){var e=this._private.cy,t=e.mutableElements();t.updateStyle()};sr.updateTransitions=function(e,t){var r=this,i=e._private,n=e.pstyle("transition-property").value,s=e.pstyle("transition-duration").pfValue,a=e.pstyle("transition-delay").pfValue;if(n.length>0&&s>0){for(var o={},l=!1,c=0;c<n.length;c++){var u=n[c],h=e.pstyle(u),d=t[u];if(d){var p=d.prev,y=p,_=d.next!=null?d.next:h,v=!1,g=void 0,f=1e-6;y&&(xe(y.pfValue)&&xe(_.pfValue)?(v=_.pfValue-y.pfValue,g=y.pfValue+f*v):xe(y.value)&&xe(_.value)?(v=_.value-y.value,g=y.value+f*v):St(y.value)&&St(_.value)&&(v=y.value[0]!==_.value[0]||y.value[1]!==_.value[1]||y.value[2]!==_.value[2],g=y.strValue),v&&(o[u]=_.strValue,this.applyBypass(e,u,g),l=!0))}}if(!l)return;i.transitioning=!0,new $a(function(m){a>0?e.delayAnimation(a).play().promise().then(m):m()}).then(function(){return e.animation({style:o,duration:s,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,n),e.emitAndNotify("style"),i.transitioning=!1})}else i.transitioning&&(this.removeBypasses(e,n),e.emitAndNotify("style"),i.transitioning=!1)};sr.checkTrigger=function(e,t,r,i,n,s){var a=this.properties[t],o=n(a);e.removed()||o!=null&&o(r,i,e)&&s(a)};sr.checkZOrderTrigger=function(e,t,r,i){var n=this;this.checkTrigger(e,t,r,i,function(s){return s.triggersZOrder},function(){n._private.cy.notify("zorder",e)})};sr.checkBoundsTrigger=function(e,t,r,i){this.checkTrigger(e,t,r,i,function(n){return n.triggersBounds},function(n){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})};sr.checkConnectedEdgesBoundsTrigger=function(e,t,r,i){this.checkTrigger(e,t,r,i,function(n){return n.triggersBoundsOfConnectedEdges},function(n){e.connectedEdges().forEach(function(s){s.dirtyBoundingBoxCache()})})};sr.checkParallelEdgesBoundsTrigger=function(e,t,r,i){this.checkTrigger(e,t,r,i,function(n){return n.triggersBoundsOfParallelEdges},function(n){e.parallelEdges().forEach(function(s){s.dirtyBoundingBoxCache()})})};sr.checkTriggers=function(e,t,r,i){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,i),this.checkBoundsTrigger(e,t,r,i),this.checkConnectedEdgesBoundsTrigger(e,t,r,i),this.checkParallelEdgesBoundsTrigger(e,t,r,i)};var kl={};kl.applyBypass=function(e,t,r,i){var n=this,s=[],a=!0;if(t==="*"||t==="**"){if(r!==void 0)for(var o=0;o<n.properties.length;o++){var l=n.properties[o],c=l.name,u=this.parse(c,r,!0);u&&s.push(u)}}else if(qe(t)){var h=this.parse(t,r,!0);h&&s.push(h)}else if(lt(t)){var d=t;i=r;for(var p=Object.keys(d),y=0;y<p.length;y++){var _=p[y],v=d[_];if(v===void 0&&(v=d[Qu(_)]),v!==void 0){var g=this.parse(_,v,!0);g&&s.push(g)}}}else return!1;if(s.length===0)return!1;for(var f=!1,m=0;m<e.length;m++){for(var b=e[m],C={},S=void 0,k=0;k<s.length;k++){var w=s[k];if(i){var x=b.pstyle(w.name);S=C[w.name]={prev:x}}f=this.applyParsedProperty(b,Li(w))||f,i&&(S.next=b.pstyle(w.name))}f&&this.updateStyleHints(b),i&&this.updateTransitions(b,C,a)}return f};kl.overrideBypass=function(e,t,r){t=bv(t);for(var i=0;i<e.length;i++){var n=e[i],s=n._private.style[t],a=this.properties[t].type,o=a.color,l=a.mutiple,c=s?s.pfValue!=null?s.pfValue:s.value:null;!s||!s.bypass?this.applyBypass(n,t,r):(s.value=r,s.pfValue!=null&&(s.pfValue=r),o?s.strValue="rgb("+r.join(",")+")":l?s.strValue=r.join(" "):s.strValue=""+r,this.updateStyleHints(n)),this.checkTriggers(n,t,c,r)}};kl.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)};kl.removeBypasses=function(e,t,r){for(var i=!0,n=0;n<e.length;n++){for(var s=e[n],a={},o=0;o<t.length;o++){var l=t[o],c=this.properties[l],u=s.pstyle(c.name);if(!(!u||!u.bypass)){var h="",d=this.parse(l,h,!0),p=a[c.name]={prev:u};this.applyParsedProperty(s,d),p.next=s.pstyle(c.name)}}this.updateStyleHints(s),r&&this.updateTransitions(s,a,i)}};var Iv={};Iv.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return e!=null?parseFloat(e):1};Iv.containerCss=function(e){var t=this._private.cy,r=t.container(),i=t.window();if(i&&r&&i.getComputedStyle)return i.getComputedStyle(r).getPropertyValue(e)};var Ni={};Ni.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)};Ni.getRawStyle=function(e,t){var r=this;if(e=e[0],e){for(var i={},n=0;n<r.properties.length;n++){var s=r.properties[n],a=r.getStylePropertyValue(e,s.name,t);a!=null&&(i[s.name]=a,i[Qu(s.name)]=a)}return i}};Ni.getIndexedStyle=function(e,t,r,i){var n=e.pstyle(t)[r][i];return n??e.cy().style().getDefaultProperty(t)[r][0]};Ni.getStylePropertyValue=function(e,t,r){var i=this;if(e=e[0],e){var n=i.properties[t];n.alias&&(n=n.pointsTo);var s=n.type,a=e.pstyle(n.name);if(a){var o=a.value,l=a.units,c=a.strValue;if(r&&s.number&&o!=null&&xe(o)){var u=e.cy().zoom(),h=function(v){return v*u},d=function(v,g){return h(v)+g},p=St(o),y=p?l.every(function(_){return _!=null}):l!=null;return y?p?o.map(function(_,v){return d(_,l[v])}).join(" "):d(o,l):p?o.map(function(_){return qe(_)?_:""+h(_)}).join(" "):""+h(o)}else if(c!=null)return c}return null}};Ni.getAnimationStartStyle=function(e,t){for(var r={},i=0;i<t.length;i++){var n=t[i],s=n.name,a=e.pstyle(s);a!==void 0&&(lt(a)?a=this.parse(s,a.strValue):a=this.parse(s,a)),a&&(r[s]=a)}return r};Ni.getPropsList=function(e){var t=this,r=[],i=e,n=t.properties;if(i)for(var s=Object.keys(i),a=0;a<s.length;a++){var o=s[a],l=i[o],c=n[o]||n[bv(o)],u=this.parse(c.name,l);u&&r.push(u)}return r};Ni.getNonDefaultPropertiesHash=function(e,t,r){var i=r.slice(),n,s,a,o,l,c;for(l=0;l<t.length;l++)if(n=t[l],s=e.pstyle(n,!1),s!=null)if(s.pfValue!=null)i[0]=Ko(o,i[0]),i[1]=Yo(o,i[1]);else for(a=s.strValue,c=0;c<a.length;c++)o=a.charCodeAt(c),i[0]=Ko(o,i[0]),i[1]=Yo(o,i[1]);return i};Ni.getPropertiesHash=Ni.getNonDefaultPropertiesHash;var hh={};hh.appendFromJson=function(e){for(var t=this,r=0;r<e.length;r++){var i=e[r],n=i.selector,s=i.style||i.css,a=Object.keys(s);t.selector(n);for(var o=0;o<a.length;o++){var l=a[o],c=s[l];t.css(l,c)}}return t};hh.fromJson=function(e){var t=this;return t.resetToDefault(),t.appendFromJson(e),t};hh.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],i=r.selector,n=r.properties,s={},a=0;a<n.length;a++){var o=n[a];s[o.name]=o.strValue}e.push({selector:i?i.toString():"core",style:s})}return e};var Fv={};Fv.appendFromString=function(e){var t=this,r=this,i=""+e,n,s,a;i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){i.length>n.length?i=i.substr(n.length):i=""}function l(){s.length>a.length?s=s.substr(a.length):s=""}for(;;){var c=i.match(/^\s*$/);if(c)break;var u=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!u){mt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}n=u[0];var h=u[1];if(h!=="core"){var d=new qn(h);if(d.invalid){mt("Skipping parsing of block: Invalid selector found in string stylesheet: "+h),o();continue}}var p=u[2],y=!1;s=p;for(var _=[];;){var v=s.match(/^\s*$/);if(v)break;var g=s.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!g){mt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),y=!0;break}a=g[0];var f=g[1],m=g[2],b=t.properties[f];if(!b){mt("Skipping property: Invalid property name in: "+a),l();continue}var C=r.parse(f,m);if(!C){mt("Skipping property: Invalid property definition in: "+a),l();continue}_.push({name:f,val:m}),l()}if(y){o();break}r.selector(h);for(var S=0;S<_.length;S++){var k=_[S];r.css(k.name,k.val)}o()}return r};Fv.fromString=function(e){var t=this;return t.resetToDefault(),t.appendFromString(e),t};var Vt={};(function(){var e=Qt,t=P2,r=F2,i=O2,n=N2,s=function(X){return"^"+X+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},a=function(X){var M=e+"|\\w+|"+t+"|"+r+"|"+i+"|"+n;return"^"+X+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+e+")\\s*\\,\\s*("+e+")\\s*,\\s*("+M+")\\s*\\,\\s*("+M+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Vt.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:s("data")},layoutData:{mapping:!0,regex:s("layoutData")},scratch:{mapping:!0,regex:s("scratch")},mapData:{mapping:!0,regex:a("mapData")},mapLayoutData:{mapping:!0,regex:a("mapLayoutData")},mapScratch:{mapping:!0,regex:a("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(X,M){switch(X.length){case 2:return M[0]!=="deg"&&M[0]!=="rad"&&M[1]!=="deg"&&M[1]!=="rad";case 1:return qe(X[0])||M[0]==="deg"||M[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*,\\s*("+e+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(X){var M=X.length;return M===1||M===2||M===4}}};var l={zeroNonZero:function(X,M){return(X==null||M==null)&&X!==M||X==0&&M!=0?!0:X!=0&&M==0},any:function(X,M){return X!=M},emptyNonEmpty:function(X,M){var q=$n(X),Q=$n(M);return q&&!Q||!q&&Q}},c=Vt.types,u=[{name:"label",type:c.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any}],h=[{name:"source-label",type:c.text,triggersBounds:l.any},{name:"source-text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:c.size,triggersBounds:l.any}],d=[{name:"target-label",type:c.text,triggersBounds:l.any},{name:"target-text-rotation",type:c.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:c.size,triggersBounds:l.any}],p=[{name:"font-family",type:c.fontFamily,triggersBounds:l.any},{name:"font-style",type:c.fontStyle,triggersBounds:l.any},{name:"font-weight",type:c.fontWeight,triggersBounds:l.any},{name:"font-size",type:c.size,triggersBounds:l.any},{name:"text-transform",type:c.textTransform,triggersBounds:l.any},{name:"text-wrap",type:c.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:c.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:c.size,triggersBounds:l.any},{name:"text-outline-width",type:c.size,triggersBounds:l.any},{name:"line-height",type:c.positiveNumber,triggersBounds:l.any}],y=[{name:"text-valign",type:c.valign,triggersBounds:l.any},{name:"text-halign",type:c.halign,triggersBounds:l.any},{name:"color",type:c.color},{name:"text-outline-color",type:c.color},{name:"text-outline-opacity",type:c.zeroOneNumber},{name:"text-background-color",type:c.color},{name:"text-background-opacity",type:c.zeroOneNumber},{name:"text-background-padding",type:c.size,triggersBounds:l.any},{name:"text-border-opacity",type:c.zeroOneNumber},{name:"text-border-color",type:c.color},{name:"text-border-width",type:c.size,triggersBounds:l.any},{name:"text-border-style",type:c.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:c.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:c.justification},{name:"box-select-labels",type:c.bool,triggersBounds:l.any}],_=[{name:"events",type:c.bool,triggersZOrder:l.any},{name:"text-events",type:c.bool,triggersZOrder:l.any},{name:"box-selection",type:c.boxSelection,triggersZOrder:l.any}],v=[{name:"display",type:c.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(X,M,q){return X===M?!1:q.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:c.visibility,triggersZOrder:l.any},{name:"opacity",type:c.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:c.zeroOneNumber},{name:"min-zoomed-font-size",type:c.size},{name:"z-compound-depth",type:c.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:c.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:c.number,triggersZOrder:l.any}],g=[{name:"overlay-padding",type:c.size,triggersBounds:l.any},{name:"overlay-color",type:c.color},{name:"overlay-opacity",type:c.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:c.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:c.cornerRadius}],f=[{name:"underlay-padding",type:c.size,triggersBounds:l.any},{name:"underlay-color",type:c.color},{name:"underlay-opacity",type:c.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:c.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:c.cornerRadius}],m=[{name:"transition-property",type:c.propList},{name:"transition-duration",type:c.time},{name:"transition-delay",type:c.time},{name:"transition-timing-function",type:c.easing}],b=function(X,M){return M.value==="label"?-X.poolIndex():M.pfValue},C=[{name:"height",type:c.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"width",type:c.nodeSize,triggersBounds:l.any,hashOverride:b},{name:"shape",type:c.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:c.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:c.cornerRadius},{name:"background-color",type:c.color},{name:"background-fill",type:c.fill},{name:"background-opacity",type:c.zeroOneNumber},{name:"background-blacken",type:c.nOneOneNumber},{name:"background-gradient-stop-colors",type:c.colors},{name:"background-gradient-stop-positions",type:c.percentages},{name:"background-gradient-direction",type:c.gradientDirection},{name:"padding",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:c.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:c.boundsExpansion,triggersBounds:l.any}],S=[{name:"border-color",type:c.color},{name:"border-opacity",type:c.zeroOneNumber},{name:"border-width",type:c.size,triggersBounds:l.any},{name:"border-style",type:c.borderStyle},{name:"border-cap",type:c.lineCap},{name:"border-join",type:c.lineJoin},{name:"border-dash-pattern",type:c.numbers},{name:"border-dash-offset",type:c.number},{name:"border-position",type:c.linePosition}],k=[{name:"outline-color",type:c.color},{name:"outline-opacity",type:c.zeroOneNumber},{name:"outline-width",type:c.size,triggersBounds:l.any},{name:"outline-style",type:c.borderStyle},{name:"outline-offset",type:c.size,triggersBounds:l.any}],w=[{name:"background-image",type:c.urls},{name:"background-image-crossorigin",type:c.bgCrossOrigin},{name:"background-image-opacity",type:c.zeroOneNumbers},{name:"background-image-containment",type:c.bgContainment},{name:"background-image-smoothing",type:c.bools},{name:"background-position-x",type:c.bgPos},{name:"background-position-y",type:c.bgPos},{name:"background-width-relative-to",type:c.bgRelativeTo},{name:"background-height-relative-to",type:c.bgRelativeTo},{name:"background-repeat",type:c.bgRepeat},{name:"background-fit",type:c.bgFit},{name:"background-clip",type:c.bgClip},{name:"background-width",type:c.bgWH},{name:"background-height",type:c.bgWH},{name:"background-offset-x",type:c.bgPos},{name:"background-offset-y",type:c.bgPos}],x=[{name:"position",type:c.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:c.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:c.size,triggersBounds:l.any},{name:"min-width-bias-left",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:c.size,triggersBounds:l.any},{name:"min-height-bias-top",type:c.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:c.sizeMaybePercent,triggersBounds:l.any}],A=[{name:"line-style",type:c.lineStyle},{name:"line-color",type:c.color},{name:"line-fill",type:c.fill},{name:"line-cap",type:c.lineCap},{name:"line-opacity",type:c.zeroOneNumber},{name:"line-dash-pattern",type:c.numbers},{name:"line-dash-offset",type:c.number},{name:"line-outline-width",type:c.size},{name:"line-outline-color",type:c.color},{name:"line-gradient-stop-colors",type:c.colors},{name:"line-gradient-stop-positions",type:c.percentages},{name:"curve-style",type:c.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(X,M){return X===M?!1:X==="bezier"||M==="bezier"}},{name:"haystack-radius",type:c.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:c.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:c.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:c.size,triggersBounds:l.any},{name:"control-point-distances",type:c.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:c.numbers,triggersBounds:l.any},{name:"segment-distances",type:c.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:c.numbers,triggersBounds:l.any},{name:"segment-radii",type:c.numbers,triggersBounds:l.any},{name:"radius-type",type:c.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:c.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:c.size,triggersBounds:l.any},{name:"taxi-direction",type:c.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:c.number,triggersBounds:l.any},{name:"edge-distances",type:c.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:c.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:c.angle,triggersBounds:l.any},{name:"loop-sweep",type:c.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:c.size,triggersBounds:l.any},{name:"target-distance-from-node",type:c.size,triggersBounds:l.any}],D=[{name:"ghost",type:c.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:c.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:c.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:c.zeroOneNumber}],T=[{name:"selection-box-color",type:c.color},{name:"selection-box-opacity",type:c.zeroOneNumber},{name:"selection-box-border-color",type:c.color},{name:"selection-box-border-width",type:c.size},{name:"active-bg-color",type:c.color},{name:"active-bg-opacity",type:c.zeroOneNumber},{name:"active-bg-size",type:c.size},{name:"outside-texture-bg-color",type:c.color},{name:"outside-texture-bg-opacity",type:c.zeroOneNumber}],E=[];Vt.pieBackgroundN=16,E.push({name:"pie-size",type:c.sizeMaybePercent}),E.push({name:"pie-hole",type:c.sizeMaybePercent}),E.push({name:"pie-start-angle",type:c.angle});for(var R=1;R<=Vt.pieBackgroundN;R++)E.push({name:"pie-"+R+"-background-color",type:c.color}),E.push({name:"pie-"+R+"-background-size",type:c.percent}),E.push({name:"pie-"+R+"-background-opacity",type:c.zeroOneNumber});var F=[];Vt.stripeBackgroundN=16,F.push({name:"stripe-size",type:c.sizeMaybePercent}),F.push({name:"stripe-direction",type:c.axisDirectionPrimary});for(var O=1;O<=Vt.stripeBackgroundN;O++)F.push({name:"stripe-"+O+"-background-color",type:c.color}),F.push({name:"stripe-"+O+"-background-size",type:c.percent}),F.push({name:"stripe-"+O+"-background-opacity",type:c.zeroOneNumber});var $=[],H=Vt.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:c.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:c.color},{name:"arrow-fill",type:c.arrowFill},{name:"arrow-width",type:c.arrowWidth}].forEach(function(U){H.forEach(function(X){var M=X+"-"+U.name,q=U.type,Q=U.triggersBounds;$.push({name:M,type:q,triggersBounds:Q})})},{});var L=Vt.properties=[].concat(_,m,v,g,f,D,y,p,u,h,d,C,S,k,w,E,F,x,A,$,T),I=Vt.propertyGroups={behavior:_,transition:m,visibility:v,overlay:g,underlay:f,ghost:D,commonLabel:y,labelDimensions:p,mainLabel:u,sourceLabel:h,targetLabel:d,nodeBody:C,nodeBorder:S,nodeOutline:k,backgroundImage:w,pie:E,stripe:F,compound:x,edgeLine:A,edgeArrow:$,core:T},P=Vt.propertyGroupNames={},z=Vt.propertyGroupKeys=Object.keys(I);z.forEach(function(U){P[U]=I[U].map(function(X){return X.name}),I[U].forEach(function(X){return X.groupKey=U})});var K=Vt.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Vt.propertyNames=L.map(function(U){return U.name});for(var te=0;te<L.length;te++){var J=L[te];L[J.name]=J}for(var ne=0;ne<K.length;ne++){var V=K[ne],N=L[V.pointsTo],ee={name:V.name,alias:!0,pointsTo:N};L.push(ee),L[V.name]=ee}})();Vt.getDefaultProperty=function(e){return this.getDefaultProperties()[e]};Vt.getDefaultProperties=function(){var e=this._private;if(e.defaultProperties!=null)return e.defaultProperties;for(var t=je({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,c){for(var u=1;u<=Vt.pieBackgroundN;u++){var h=c.name.replace("{{i}}",u),d=c.value;l[h]=d}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,c){for(var u=1;u<=Vt.stripeBackgroundN;u++){var h=c.name.replace("{{i}}",u),d=c.value;l[h]=d}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,c){return Vt.arrowPrefixes.forEach(function(u){var h=u+"-"+c.name,d=c.value;l[h]=d}),l},{})),r={},i=0;i<this.properties.length;i++){var n=this.properties[i];if(!n.pointsTo){var s=n.name,a=t[s],o=this.parse(s,a);r[s]=o}}return e.defaultProperties=r,e.defaultProperties};Vt.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var dh={};dh.parse=function(e,t,r,i){var n=this;if(It(t))return n.parseImplWarn(e,t,r,i);var s=i==="mapping"||i===!0||i===!1||i==null?"dontcare":i,a=r?"t":"f",o=""+t,l=oC(e,o,a,s),c=n.propCache=n.propCache||[],u;return(u=c[l])||(u=c[l]=n.parseImplWarn(e,t,r,i)),(r||i==="mapping")&&(u=Li(u),u&&(u.value=Li(u.value))),u};dh.parseImplWarn=function(e,t,r,i){var n=this.parseImpl(e,t,r,i);return!n&&t!=null&&mt("The style property `".concat(e,": ").concat(t,"` is invalid")),n&&(n.name==="width"||n.name==="height")&&t==="label"&&mt("The style value of `label` is deprecated for `"+n.name+"`"),n};dh.parseImpl=function(e,t,r,i){var n=this;e=bv(e);var s=n.properties[e],a=t,o=n.types;if(!s||t===void 0)return null;s.alias&&(s=s.pointsTo,e=s.name);var l=qe(t);l&&(t=t.trim());var c=s.type;if(!c)return null;if(r&&(t===""||t===null))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(It(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};var u,h;if(!(!l||i||t.length<7||t[1]!=="a")){if(t.length>=7&&t[0]==="d"&&(u=new RegExp(o.data.regex).exec(t))){if(r)return!1;var d=o.data;return{name:e,value:u,strValue:""+t,mapped:d,field:u[1],bypass:r}}else if(t.length>=10&&t[0]==="m"&&(h=new RegExp(o.mapData.regex).exec(t))){if(r||c.multiple)return!1;var p=o.mapData;if(!(c.color||c.number))return!1;var y=this.parse(e,h[4]);if(!y||y.mapped)return!1;var _=this.parse(e,h[5]);if(!_||_.mapped)return!1;if(y.pfValue===_.pfValue||y.strValue===_.strValue)return mt("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+y.strValue+"`"),this.parse(e,y.strValue);if(c.color){var v=y.value,g=_.value,f=v[0]===g[0]&&v[1]===g[1]&&v[2]===g[2]&&(v[3]===g[3]||(v[3]==null||v[3]===1)&&(g[3]==null||g[3]===1));if(f)return!1}return{name:e,value:h,strValue:""+t,mapped:p,field:h[1],fieldMin:parseFloat(h[2]),fieldMax:parseFloat(h[3]),valueMin:y.value,valueMax:_.value,bypass:r}}}if(c.multiple&&i!=="multiple"){var m;if(l?m=t.split(/\s+/):St(t)?m=t:m=[t],c.evenMultiple&&m.length%2!==0)return null;for(var b=[],C=[],S=[],k="",w=!1,x=0;x<m.length;x++){var A=n.parse(e,m[x],r,"multiple");w=w||qe(A.value),b.push(A.value),S.push(A.pfValue!=null?A.pfValue:A.value),C.push(A.units),k+=(x>0?" ":"")+A.strValue}return c.validate&&!c.validate(b,C)?null:c.singleEnum&&w?b.length===1&&qe(b[0])?{name:e,value:b[0],strValue:b[0],bypass:r}:null:{name:e,value:b,pfValue:S,strValue:k,bypass:r,units:C}}var D=function(){for(var ee=0;ee<c.enums.length;ee++){var U=c.enums[ee];if(U===t)return{name:e,value:t,strValue:""+t,bypass:r}}return null};if(c.number){var T,E="px";if(c.units&&(T=c.units),c.implicitUnits&&(E=c.implicitUnits),!c.unitless)if(l){var R="px|em"+(c.allowPercent?"|\\%":"");T&&(R=T);var F=t.match("^("+Qt+")("+R+")?$");F&&(t=F[1],T=F[2]||E)}else(!T||c.implicitUnits)&&(T=E);if(t=parseFloat(t),isNaN(t)&&c.enums===void 0)return null;if(isNaN(t)&&c.enums!==void 0)return t=a,D();if(c.integer&&!E2(t)||c.min!==void 0&&(t<c.min||c.strictMin&&t===c.min)||c.max!==void 0&&(t>c.max||c.strictMax&&t===c.max))return null;var O={name:e,value:t,strValue:""+t+(T||""),units:T,bypass:r};return c.unitless||T!=="px"&&T!=="em"?O.pfValue=t:O.pfValue=T==="px"||!T?t:this.getEmSizeInPixels()*t,(T==="ms"||T==="s")&&(O.pfValue=T==="ms"?t:1e3*t),(T==="deg"||T==="rad")&&(O.pfValue=T==="rad"?t:OA(t)),T==="%"&&(O.pfValue=t/100),O}else if(c.propList){var $=[],H=""+t;if(H!=="none"){for(var L=H.split(/\s*,\s*|\s+/),I=0;I<L.length;I++){var P=L[I].trim();n.properties[P]?$.push(P):mt("`"+P+"` is not a valid property name")}if($.length===0)return null}return{name:e,value:$,strValue:$.length===0?"none":$.join(" "),bypass:r}}else if(c.color){var z=eC(t);return z?{name:e,value:z,pfValue:z,strValue:"rgb("+z[0]+","+z[1]+","+z[2]+")",bypass:r}:null}else if(c.regex||c.regexes){if(c.enums){var K=D();if(K)return K}for(var te=c.regexes?c.regexes:[c.regex],J=0;J<te.length;J++){var ne=new RegExp(te[J]),V=ne.exec(t);if(V)return{name:e,value:c.singleRegexMatchValue?V[1]:V,strValue:""+t,bypass:r}}return null}else return c.string?{name:e,value:""+t,strValue:""+t,bypass:r}:c.enums?D():null};var nr=function(t){if(!(this instanceof nr))return new nr(t);if(!_v(t)){Rt("A style must have a core reference");return}this._private={cy:t,coreStyle:{}},this.length=0,this.resetToDefault()},Sr=nr.prototype;Sr.instanceString=function(){return"style"};Sr.clear=function(){for(var e=this._private,t=e.cy,r=t.elements(),i=0;i<this.length;i++)this[i]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(r,!0),r.forEach(function(n){var s=n[0]._private;s.styleDirty=!0,s.appliedInitStyle=!1}),this};Sr.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Sr.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)};Sr.selector=function(e){var t=e==="core"?null:new qn(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this};Sr.css=function(){var e=this,t=arguments;if(t.length===1)for(var r=t[0],i=0;i<e.properties.length;i++){var n=e.properties[i],s=r[n.name];s===void 0&&(s=r[Qu(n.name)]),s!==void 0&&this.cssRule(n.name,s)}else t.length===2&&this.cssRule(t[0],t[1]);return this};Sr.style=Sr.css;Sr.cssRule=function(e,t){var r=this.parse(e,t);if(r){var i=this.length-1;this[i].properties.push(r),this[i].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[i].mappedProperties.push(r);var n=!this[i].selector;n&&(this._private.coreStyle[r.name]=r)}return this};Sr.append=function(e){return Z1(e)?e.appendToStyle(this):St(e)?this.appendFromJson(e):qe(e)&&this.appendFromString(e),this};nr.fromJson=function(e,t){var r=new nr(e);return r.fromJson(t),r};nr.fromString=function(e,t){return new nr(e).fromString(t)};[sr,kl,Iv,Ni,hh,Fv,Vt,dh].forEach(function(e){je(Sr,e)});nr.types=Sr.types;nr.properties=Sr.properties;nr.propertyGroups=Sr.propertyGroups;nr.propertyGroupNames=Sr.propertyGroupNames;nr.propertyGroupKeys=Sr.propertyGroupKeys;var HL={style:function(t){if(t){var r=this.setStyle(t);r.update()}return this._private.style},setStyle:function(t){var r=this._private;return Z1(t)?r.style=t.generateStyle(this):St(t)?r.style=nr.fromJson(this,t):qe(t)?r.style=nr.fromString(this,t):r.style=nr(this),r.style},updateStyle:function(){this.mutableElements().updateStyle()}},qL="single",Bs={autolock:function(t){if(t!==void 0)this._private.autolock=!!t;else return this._private.autolock;return this},autoungrabify:function(t){if(t!==void 0)this._private.autoungrabify=!!t;else return this._private.autoungrabify;return this},autounselectify:function(t){if(t!==void 0)this._private.autounselectify=!!t;else return this._private.autounselectify;return this},selectionType:function(t){var r=this._private;if(r.selectionType==null&&(r.selectionType=qL),t!==void 0)(t==="additive"||t==="single")&&(r.selectionType=t);else return r.selectionType;return this},panningEnabled:function(t){if(t!==void 0)this._private.panningEnabled=!!t;else return this._private.panningEnabled;return this},userPanningEnabled:function(t){if(t!==void 0)this._private.userPanningEnabled=!!t;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(t){if(t!==void 0)this._private.zoomingEnabled=!!t;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(t){if(t!==void 0)this._private.userZoomingEnabled=!!t;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(t){if(t!==void 0)this._private.boxSelectionEnabled=!!t;else return this._private.boxSelectionEnabled;return this},pan:function(){var t=arguments,r=this._private.pan,i,n,s,a,o;switch(t.length){case 0:return r;case 1:if(qe(t[0]))return i=t[0],r[i];if(lt(t[0])){if(!this._private.panningEnabled)return this;s=t[0],a=s.x,o=s.y,xe(a)&&(r.x=a),xe(o)&&(r.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;i=t[0],n=t[1],(i==="x"||i==="y")&&xe(n)&&(r[i]=n),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(t,r){var i=arguments,n=this._private.pan,s,a,o,l,c;if(!this._private.panningEnabled)return this;switch(i.length){case 1:lt(t)&&(o=i[0],l=o.x,c=o.y,xe(l)&&(n.x+=l),xe(c)&&(n.y+=c),this.emit("pan viewport"));break;case 2:s=t,a=r,(s==="x"||s==="y")&&xe(a)&&(n[s]+=a),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(t,r){var i=this.getFitViewport(t,r);if(i){var n=this._private;n.zoom=i.zoom,n.pan=i.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(t,r){if(xe(t)&&r===void 0&&(r=t,t=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var i;if(qe(t)){var n=t;t=this.$(n)}else if(D2(t)){var s=t;i={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2},i.w=i.x2-i.x1,i.h=i.y2-i.y1}else Gr(t)||(t=this.mutableElements());if(!(Gr(t)&&t.empty())){i=i||t.boundingBox();var a=this.width(),o=this.height(),l;if(r=xe(r)?r:0,!isNaN(a)&&!isNaN(o)&&a>0&&o>0&&!isNaN(i.w)&&!isNaN(i.h)&&i.w>0&&i.h>0){l=Math.min((a-2*r)/i.w,(o-2*r)/i.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var c={x:(a-l*(i.x1+i.x2))/2,y:(o-l*(i.y1+i.y2))/2};return{zoom:l,pan:c}}}}},zoomRange:function(t,r){var i=this._private;if(r==null){var n=t;t=n.min,r=n.max}return xe(t)&&xe(r)&&t<=r?(i.minZoom=t,i.maxZoom=r):xe(t)&&r===void 0&&t<=i.maxZoom?i.minZoom=t:xe(r)&&t===void 0&&r>=i.minZoom&&(i.maxZoom=r),this},minZoom:function(t){return t===void 0?this._private.minZoom:this.zoomRange({min:t})},maxZoom:function(t){return t===void 0?this._private.maxZoom:this.zoomRange({max:t})},getZoomedViewport:function(t){var r=this._private,i=r.pan,n=r.zoom,s,a,o=!1;if(r.zoomingEnabled||(o=!0),xe(t)?a=t:lt(t)&&(a=t.level,t.position!=null?s=th(t.position,n,i):t.renderedPosition!=null&&(s=t.renderedPosition),s!=null&&!r.panningEnabled&&(o=!0)),a=a>r.maxZoom?r.maxZoom:a,a=a<r.minZoom?r.minZoom:a,o||!xe(a)||a===n||s!=null&&(!xe(s.x)||!xe(s.y)))return null;if(s!=null){var l=i,c=n,u=a,h={x:-u/c*(s.x-l.x)+s.x,y:-u/c*(s.y-l.y)+s.y};return{zoomed:!0,panned:!0,zoom:u,pan:h}}else return{zoomed:!0,panned:!1,zoom:a,pan:i}},zoom:function(t){if(t===void 0)return this._private.zoom;var r=this.getZoomedViewport(t),i=this._private;return r==null||!r.zoomed?this:(i.zoom=r.zoom,r.panned&&(i.pan.x=r.pan.x,i.pan.y=r.pan.y),this.emit("zoom"+(r.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(t){var r=this._private,i=!0,n=!0,s=[],a=!1,o=!1;if(!t)return this;if(xe(t.zoom)||(i=!1),lt(t.pan)||(n=!1),!i&&!n)return this;if(i){var l=t.zoom;l<r.minZoom||l>r.maxZoom||!r.zoomingEnabled?a=!0:(r.zoom=l,s.push("zoom"))}if(n&&(!a||!t.cancelOnFailedZoom)&&r.panningEnabled){var c=t.pan;xe(c.x)&&(r.pan.x=c.x,o=!1),xe(c.y)&&(r.pan.y=c.y,o=!1),o||s.push("pan")}return s.length>0&&(s.push("viewport"),this.emit(s.join(" ")),this.notify("viewport")),this},center:function(t){var r=this.getCenterPan(t);return r&&(this._private.pan=r,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(t,r){if(this._private.panningEnabled){if(qe(t)){var i=t;t=this.mutableElements().filter(i)}else Gr(t)||(t=this.mutableElements());if(t.length!==0){var n=t.boundingBox(),s=this.width(),a=this.height();r=r===void 0?this._private.zoom:r;var o={x:(s-r*(n.x1+n.x2))/2,y:(a-r*(n.y1+n.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var t=this._private,r=t.container,i=this;return t.sizeCache=t.sizeCache||(r?(function(){var n=i.window().getComputedStyle(r),s=function(o){return parseFloat(n.getPropertyValue(o))};return{width:r.clientWidth-s("padding-left")-s("padding-right"),height:r.clientHeight-s("padding-top")-s("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var t=this._private.pan,r=this._private.zoom,i=this.renderedExtent(),n={x1:(i.x1-t.x)/r,x2:(i.x2-t.x)/r,y1:(i.y1-t.y)/r,y2:(i.y2-t.y)/r};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var t=this.width(),r=this.height();return{x1:0,y1:0,x2:t,y2:r,w:t,h:r}},multiClickDebounceTime:function(t){if(t)this._private.multiClickDebounceTime=t;else return this._private.multiClickDebounceTime;return this}};Bs.centre=Bs.center;Bs.autolockNodes=Bs.autolock;Bs.autoungrabifyNodes=Bs.autoungrabify;var tl={data:gt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:gt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:gt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:gt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};tl.attr=tl.data;tl.removeAttr=tl.removeData;var rl=function(t){var r=this;t=je({},t);var i=t.container;i&&!eu(i)&&eu(i[0])&&(i=i[0]);var n=i?i._cyreg:null;n=n||{},n&&n.cy&&(n.cy.destroy(),n={});var s=n.readies=n.readies||[];i&&(i._cyreg=n),n.cy=r;var a=Zt!==void 0&&i!==void 0&&!t.headless,o=t;o.layout=je({name:a?"grid":"null"},o.layout),o.renderer=je({name:a?"canvas":"null"},o.renderer);var l=function(y,_,v){return _!==void 0?_:v!==void 0?v:y},c=this._private={container:i,ready:!1,options:o,elements:new cr(this),listeners:[],aniEles:new cr(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?a:o.styleEnabled,zoom:xe(o.zoom)?o.zoom:1,pan:{x:lt(o.pan)&&xe(o.pan.x)?o.pan.x:0,y:lt(o.pan)&&xe(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var u=function(y,_){var v=y.some(L2);if(v)return $a.all(y).then(_);_(y)};c.styleEnabled&&r.setStyle([]);var h=je({},o,o.renderer);r.initRenderer(h);var d=function(y,_,v){r.notifications(!1);var g=r.mutableElements();g.length>0&&g.remove(),y!=null&&(lt(y)||St(y))&&r.add(y),r.one("layoutready",function(m){r.notifications(!0),r.emit(m),r.one("load",_),r.emitAndNotify("load")}).one("layoutstop",function(){r.one("done",v),r.emit("done")});var f=je({},r._private.options.layout);f.eles=r.elements(),r.layout(f).run()};u([o.style,o.elements],function(p){var y=p[0],_=p[1];c.styleEnabled&&r.style().append(y),d(_,function(){r.startAnimationLoop(),c.ready=!0,It(o.ready)&&r.on("ready",o.ready);for(var v=0;v<s.length;v++){var g=s[v];r.on("ready",g)}n&&(n.readies=[]),r.emit("ready")},o.done)})},ou=rl.prototype;je(ou,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(t){return this.isReady()?this.emitter().emit("ready",[],t):this.on("ready",t),this},destroy:function(){var t=this;if(!t.destroyed())return t.stopAnimationLoop(),t.destroyRenderer(),this.emit("destroy"),t._private.destroyed=!0,t},hasElementWithId:function(t){return this._private.elements.hasElementWithId(t)},getElementById:function(t){return this._private.elements.getElementById(t)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(t){return this._private.elements.merge(t),this},removeFromPool:function(t){return this._private.elements.unmerge(t),this},container:function(){return this._private.container||null},window:function(){var t=this._private.container;if(t==null)return Zt;var r=this._private.container.ownerDocument;return r===void 0||r==null?Zt:r.defaultView||Zt},mount:function(t){if(t!=null){var r=this,i=r._private,n=i.options;return!eu(t)&&eu(t[0])&&(t=t[0]),r.stopAnimationLoop(),r.destroyRenderer(),i.container=t,i.styleEnabled=!0,r.invalidateSize(),r.initRenderer(je({},n,n.renderer,{name:n.renderer.name==="null"?"canvas":n.renderer.name})),r.startAnimationLoop(),r.style(n.style),r.emit("mount"),r}},unmount:function(){var t=this;return t.stopAnimationLoop(),t.destroyRenderer(),t.initRenderer({name:"null"}),t.emit("unmount"),t},options:function(){return Li(this._private.options)},json:function(t){var r=this,i=r._private,n=r.mutableElements(),s=function(b){return r.getElementById(b.id())};if(lt(t)){if(r.startBatch(),t.elements){var a={},o=function(b,C){for(var S=[],k=[],w=0;w<b.length;w++){var x=b[w];if(!x.data.id){mt("cy.json() cannot handle elements without an ID attribute");continue}var A=""+x.data.id,D=r.getElementById(A);a[A]=!0,D.length!==0?k.push({ele:D,json:x}):(C&&(x.group=C),S.push(x))}r.add(S);for(var T=0;T<k.length;T++){var E=k[T],R=E.ele,F=E.json;R.json(F)}};if(St(t.elements))o(t.elements);else for(var l=["nodes","edges"],c=0;c<l.length;c++){var u=l[c],h=t.elements[u];St(h)&&o(h,u)}var d=r.collection();n.filter(function(m){return!a[m.id()]}).forEach(function(m){m.isParent()?d.merge(m):m.remove()}),d.forEach(function(m){return m.children().move({parent:null})}),d.forEach(function(m){return s(m).remove()})}t.style&&r.style(t.style),t.zoom!=null&&t.zoom!==i.zoom&&r.zoom(t.zoom),t.pan&&(t.pan.x!==i.pan.x||t.pan.y!==i.pan.y)&&r.pan(t.pan),t.data&&r.data(t.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],y=0;y<p.length;y++){var _=p[y];t[_]!=null&&r[_](t[_])}return r.endBatch(),this}else{var v=!!t,g={};v?g.elements=this.elements().map(function(m){return m.json()}):(g.elements={},n.forEach(function(m){var b=m.group();g.elements[b]||(g.elements[b]=[]),g.elements[b].push(m.json())})),this._private.styleEnabled&&(g.style=r.style().json()),g.data=Li(r.data());var f=i.options;return g.zoomingEnabled=i.zoomingEnabled,g.userZoomingEnabled=i.userZoomingEnabled,g.zoom=i.zoom,g.minZoom=i.minZoom,g.maxZoom=i.maxZoom,g.panningEnabled=i.panningEnabled,g.userPanningEnabled=i.userPanningEnabled,g.pan=Li(i.pan),g.boxSelectionEnabled=i.boxSelectionEnabled,g.renderer=Li(f.renderer),g.hideEdgesOnViewport=f.hideEdgesOnViewport,g.textureOnViewport=f.textureOnViewport,g.wheelSensitivity=f.wheelSensitivity,g.motionBlur=f.motionBlur,g.multiClickDebounceTime=f.multiClickDebounceTime,g}}});ou.$id=ou.getElementById;[LL,FL,ZC,_p,kc,NL,bp,xc,HL,Bs,tl].forEach(function(e){je(ou,e)});var WL={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}},UL={maximal:!1,acyclic:!1},Ys=function(t){return t.scratch("breadthfirst")},B0=function(t,r){return t.scratch("breadthfirst",r)};function QC(e){this.options=je({},WL,UL,e)}QC.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,i=r.nodes().filter(function(he){return he.isChildless()}),n=r,s=e.directed,a=e.acyclic||e.maximal||e.maximalAdjustments>0,o=!!e.boundingBox,l=Mr(o?e.boundingBox:structuredClone(t.extent())),c;if(Gr(e.roots))c=e.roots;else if(St(e.roots)){for(var u=[],h=0;h<e.roots.length;h++){var d=e.roots[h],p=t.getElementById(d);u.push(p)}c=t.collection(u)}else if(qe(e.roots))c=t.$(e.roots);else if(s)c=i.roots();else{var y=r.components();c=t.collection();for(var _=function(){var ce=y[v],ue=ce.maxDegree(!1),ye=ce.filter(function(ve){return ve.degree(!1)===ue});c=c.add(ye)},v=0;v<y.length;v++)_()}var g=[],f={},m=function(ce,ue){g[ue]==null&&(g[ue]=[]);var ye=g[ue].length;g[ue].push(ce),B0(ce,{index:ye,depth:ue})},b=function(ce,ue){var ye=Ys(ce),ve=ye.depth,_e=ye.index;g[ve][_e]=null,ce.isChildless()&&m(ce,ue)};n.bfs({roots:c,directed:e.directed,visit:function(ce,ue,ye,ve,_e){var Ce=ce[0],ke=Ce.id();Ce.isChildless()&&m(Ce,_e),f[ke]=!0}});for(var C=[],S=0;S<i.length;S++){var k=i[S];f[k.id()]||C.push(k)}var w=function(ce){for(var ue=g[ce],ye=0;ye<ue.length;ye++){var ve=ue[ye];if(ve==null){ue.splice(ye,1),ye--;continue}B0(ve,{depth:ce,index:ye})}},x=function(ce,ue){for(var ye=Ys(ce),ve=ce.incomers().filter(function(Ee){return Ee.isNode()&&r.has(Ee)}),_e=-1,Ce=ce.id(),ke=0;ke<ve.length;ke++){var Me=ve[ke],Ae=Ys(Me);_e=Math.max(_e,Ae.depth)}if(ye.depth<=_e){if(!e.acyclic&&ue[Ce])return null;var We=_e+1;return b(ce,We),ue[Ce]=We,!0}return!1};if(s&&a){var A=[],D={},T=function(ce){return A.push(ce)},E=function(){return A.shift()};for(i.forEach(function(he){return A.push(he)});A.length>0;){var R=E(),F=x(R,D);if(F)R.outgoers().filter(function(he){return he.isNode()&&r.has(he)}).forEach(T);else if(F===null){mt("Detected double maximal shift for node `"+R.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var O=0;if(e.avoidOverlap)for(var $=0;$<i.length;$++){var H=i[$],L=H.layoutDimensions(e),I=L.w,P=L.h;O=Math.max(O,I,P)}var z={},K=function(ce){if(z[ce.id()])return z[ce.id()];for(var ue=Ys(ce).depth,ye=ce.neighborhood(),ve=0,_e=0,Ce=0;Ce<ye.length;Ce++){var ke=ye[Ce];if(!(ke.isEdge()||ke.isParent()||!i.has(ke))){var Me=Ys(ke);if(Me!=null){var Ae=Me.index,We=Me.depth;if(!(Ae==null||We==null)){var Ee=g[We].length;We<ue&&(ve+=Ae/Ee,_e++)}}}}return _e=Math.max(1,_e),ve=ve/_e,_e===0&&(ve=0),z[ce.id()]=ve,ve},te=function(ce,ue){var ye=K(ce),ve=K(ue),_e=ye-ve;return _e===0?J1(ce.id(),ue.id()):_e};e.depthSort!==void 0&&(te=e.depthSort);for(var J=g.length,ne=0;ne<J;ne++)g[ne].sort(te),w(ne);for(var V=[],N=0;N<C.length;N++)V.push(C[N]);var ee=function(){for(var ce=0;ce<J;ce++)w(ce)};V.length&&(g.unshift(V),J=g.length,ee());for(var U=0,X=0;X<J;X++)U=Math.max(g[X].length,U);var M={x:l.x1+l.w/2,y:l.y1+l.h/2},q=i.reduce(function(he,ce){return(function(ue){return{w:he.w===-1?ue.w:(he.w+ue.w)/2,h:he.h===-1?ue.h:(he.h+ue.h)/2}})(ce.boundingBox({includeLabels:e.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),Q=Math.max(J===1?0:o?(l.h-e.padding*2-q.h)/(J-1):(l.h-e.padding*2-q.h)/(J+1),O),se=g.reduce(function(he,ce){return Math.max(he,ce.length)},0),Z=function(ce){var ue=Ys(ce),ye=ue.depth,ve=ue.index;if(e.circle){var _e=Math.min(l.w/2/J,l.h/2/J);_e=Math.max(_e,O);var Ce=_e*ye+_e-(J>0&&g[0].length<=3?_e/2:0),ke=2*Math.PI/g[ye].length*ve;return ye===0&&g[0].length===1&&(Ce=1),{x:M.x+Ce*Math.cos(ke),y:M.y+Ce*Math.sin(ke)}}else{var Me=g[ye].length,Ae=Math.max(Me===1?0:o?(l.w-e.padding*2-q.w)/((e.grid?se:Me)-1):(l.w-e.padding*2-q.w)/((e.grid?se:Me)+1),O),We={x:M.x+(ve+1-(Me+1)/2)*Ae,y:M.y+(ye+1-(J+1)/2)*Q};return We}},Y={downward:0,leftward:90,upward:180,rightward:-90};Object.keys(Y).indexOf(e.direction)===-1&&Rt("Invalid direction '".concat(e.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(Y).join(", ")));var ae=function(ce){return aA(Z(ce),l,Y[e.direction])};return r.nodes().layoutPositions(this,e,ae),this};var VL={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function JC(e){this.options=je({},VL,e)}JC.prototype.run=function(){var e=this.options,t=e,r=e.cy,i=t.eles,n=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,s=i.nodes().not(":parent");t.sort&&(s=s.sort(t.sort));for(var a=Mr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:a.x1+a.w/2,y:a.y1+a.h/2},l=t.sweep===void 0?2*Math.PI-2*Math.PI/s.length:t.sweep,c=l/Math.max(1,s.length-1),u,h=0,d=0;d<s.length;d++){var p=s[d],y=p.layoutDimensions(t),_=y.w,v=y.h;h=Math.max(h,_,v)}if(xe(t.radius)?u=t.radius:s.length<=1?u=0:u=Math.min(a.h,a.w)/2-h,s.length>1&&t.avoidOverlap){h*=1.75;var g=Math.cos(c)-Math.cos(0),f=Math.sin(c)-Math.sin(0),m=Math.sqrt(h*h/(g*g+f*f));u=Math.max(m,u)}var b=function(S,k){var w=t.startAngle+k*c*(n?1:-1),x=u*Math.cos(w),A=u*Math.sin(w),D={x:o.x+x,y:o.y+A};return D};return i.nodes().layoutPositions(this,t,b),this};var jL={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(t){return t.degree()},levelWidth:function(t){return t.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function ew(e){this.options=je({},jL,e)}ew.prototype.run=function(){for(var e=this.options,t=e,r=t.counterclockwise!==void 0?!t.counterclockwise:t.clockwise,i=e.cy,n=t.eles,s=n.nodes().not(":parent"),a=Mr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:i.width(),h:i.height()}),o={x:a.x1+a.w/2,y:a.y1+a.h/2},l=[],c=0,u=0;u<s.length;u++){var h=s[u],d=void 0;d=t.concentric(h),l.push({value:d,node:h}),h._private.scratch.concentric=d}s.updateStyle();for(var p=0;p<s.length;p++){var y=s[p],_=y.layoutDimensions(t);c=Math.max(c,_.w,_.h)}l.sort(function(Q,se){return se.value-Q.value});for(var v=t.levelWidth(s),g=[[]],f=g[0],m=0;m<l.length;m++){var b=l[m];if(f.length>0){var C=Math.abs(f[0].value-b.value);C>=v&&(f=[],g.push(f))}f.push(b)}var S=c+t.minNodeSpacing;if(!t.avoidOverlap){var k=g.length>0&&g[0].length>1,w=Math.min(a.w,a.h)/2-S,x=w/(g.length+k?1:0);S=Math.min(S,x)}for(var A=0,D=0;D<g.length;D++){var T=g[D],E=t.sweep===void 0?2*Math.PI-2*Math.PI/T.length:t.sweep,R=T.dTheta=E/Math.max(1,T.length-1);if(T.length>1&&t.avoidOverlap){var F=Math.cos(R)-Math.cos(0),O=Math.sin(R)-Math.sin(0),$=Math.sqrt(S*S/(F*F+O*O));A=Math.max($,A)}T.r=A,A+=S}if(t.equidistant){for(var H=0,L=0,I=0;I<g.length;I++){var P=g[I],z=P.r-L;H=Math.max(H,z)}L=0;for(var K=0;K<g.length;K++){var te=g[K];K===0&&(L=te.r),te.r=L,L+=H}}for(var J={},ne=0;ne<g.length;ne++)for(var V=g[ne],N=V.dTheta,ee=V.r,U=0;U<V.length;U++){var X=V[U],M=t.startAngle+(r?1:-1)*N*U,q={x:o.x+ee*Math.cos(M),y:o.y+ee*Math.sin(M)};J[X.node.id()]=q}return n.nodes().layoutPositions(this,t,function(Q){var se=Q.id();return J[se]}),this};var bf,GL={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(t,r){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(t){return 2048},nodeOverlap:4,idealEdgeLength:function(t){return 32},edgeElasticity:function(t){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function fh(e){this.options=je({},GL,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges(),i=r.filter(function(n){var s=n.source().data("id"),a=n.target().data("id"),o=t.some(function(c){return c.data("id")===s}),l=t.some(function(c){return c.data("id")===a});return!o||!l});this.options.eles=this.options.eles.not(i)}fh.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(e.animate===!0||e.animate===!1)&&r.emit({type:"layoutstart",layout:r}),e.debug===!0?bf=!0:bf=!1;var i=KL(t,r,e);bf&&XL(i),e.randomize&&ZL(i);var n=un(),s=function(){QL(i,t,e),e.fit===!0&&t.fit(e.padding)},a=function(d){return!(r.stopped||d>=e.numIter||(JL(i,e),i.temperature=i.temperature*e.coolingFactor,i.temperature<e.minTemp))},o=function(){if(e.animate===!0||e.animate===!1)s(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var d=e.eles.nodes(),p=rw(i,e,d);d.layoutPositions(r,e,p)}},l=0,c=!0;if(e.animate===!0){var u=function(){for(var d=0;c&&d<e.refresh;)c=a(l),l++,d++;if(!c)L0(i,e),o();else{var p=un();p-n>=e.animationThreshold&&s(),tu(u)}};u()}else{for(;c;)c=a(l),l++;L0(i,e),o()}return this};fh.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};fh.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var KL=function(t,r,i){for(var n=i.eles.edges(),s=i.eles.nodes(),a=Mr(i.boundingBox?i.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),o={isCompound:t.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:s.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:i.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},l=i.eles.components(),c={},u=0;u<l.length;u++)for(var h=l[u],d=0;d<h.length;d++){var p=h[d];c[p.id()]=u}for(var u=0;u<o.nodeSize;u++){var y=s[u],_=y.layoutDimensions(i),v={};v.isLocked=y.locked(),v.id=y.data("id"),v.parentId=y.data("parent"),v.cmptId=c[y.id()],v.children=[],v.positionX=y.position("x"),v.positionY=y.position("y"),v.offsetX=0,v.offsetY=0,v.height=_.w,v.width=_.h,v.maxX=v.positionX+v.width/2,v.minX=v.positionX-v.width/2,v.maxY=v.positionY+v.height/2,v.minY=v.positionY-v.height/2,v.padLeft=parseFloat(y.style("padding")),v.padRight=parseFloat(y.style("padding")),v.padTop=parseFloat(y.style("padding")),v.padBottom=parseFloat(y.style("padding")),v.nodeRepulsion=It(i.nodeRepulsion)?i.nodeRepulsion(y):i.nodeRepulsion,o.layoutNodes.push(v),o.idToIndex[v.id]=u}for(var g=[],f=0,m=-1,b=[],u=0;u<o.nodeSize;u++){var y=o.layoutNodes[u],C=y.parentId;C!=null?o.layoutNodes[o.idToIndex[C]].children.push(y.id):(g[++m]=y.id,b.push(y.id))}for(o.graphSet.push(b);f<=m;){var S=g[f++],k=o.idToIndex[S],p=o.layoutNodes[k],w=p.children;if(w.length>0){o.graphSet.push(w);for(var u=0;u<w.length;u++)g[++m]=w[u]}}for(var u=0;u<o.graphSet.length;u++)for(var x=o.graphSet[u],d=0;d<x.length;d++){var A=o.idToIndex[x[d]];o.indexToGraph[A]=u}for(var u=0;u<o.edgeSize;u++){var D=n[u],T={};T.id=D.data("id"),T.sourceId=D.data("source"),T.targetId=D.data("target");var E=It(i.idealEdgeLength)?i.idealEdgeLength(D):i.idealEdgeLength,R=It(i.edgeElasticity)?i.edgeElasticity(D):i.edgeElasticity,F=o.idToIndex[T.sourceId],O=o.idToIndex[T.targetId],$=o.indexToGraph[F],H=o.indexToGraph[O];if($!=H){for(var L=YL(T.sourceId,T.targetId,o),I=o.graphSet[L],P=0,v=o.layoutNodes[F];I.indexOf(v.id)===-1;)v=o.layoutNodes[o.idToIndex[v.parentId]],P++;for(v=o.layoutNodes[O];I.indexOf(v.id)===-1;)v=o.layoutNodes[o.idToIndex[v.parentId]],P++;E*=P*i.nestingFactor}T.idealLength=E,T.elasticity=R,o.layoutEdges.push(T)}return o},YL=function(t,r,i){var n=tw(t,r,0,i);return 2>n.count?0:n.graph},tw=function(t,r,i,n){var s=n.graphSet[i];if(-1<s.indexOf(t)&&-1<s.indexOf(r))return{count:2,graph:i};for(var a=0,o=0;o<s.length;o++){var l=s[o],c=n.idToIndex[l],u=n.layoutNodes[c].children;if(u.length!==0){var h=n.indexToGraph[n.idToIndex[u[0]]],d=tw(t,r,h,n);if(d.count!==0)if(d.count===1){if(a++,a===2)break}else return d}}return{count:a,graph:i}},XL,ZL=function(t,r){for(var i=t.clientWidth,n=t.clientHeight,s=0;s<t.nodeSize;s++){var a=t.layoutNodes[s];a.children.length===0&&!a.isLocked&&(a.positionX=Math.random()*i,a.positionY=Math.random()*n)}},rw=function(t,r,i){var n=t.boundingBox,s={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return r.boundingBox&&(i.forEach(function(a){var o=t.layoutNodes[t.idToIndex[a.data("id")]];s.x1=Math.min(s.x1,o.positionX),s.x2=Math.max(s.x2,o.positionX),s.y1=Math.min(s.y1,o.positionY),s.y2=Math.max(s.y2,o.positionY)}),s.w=s.x2-s.x1,s.h=s.y2-s.y1),function(a,o){var l=t.layoutNodes[t.idToIndex[a.data("id")]];if(r.boundingBox){var c=s.w===0?.5:(l.positionX-s.x1)/s.w,u=s.h===0?.5:(l.positionY-s.y1)/s.h;return{x:n.x1+c*n.w,y:n.y1+u*n.h}}else return{x:l.positionX,y:l.positionY}}},QL=function(t,r,i){var n=i.layout,s=i.eles.nodes(),a=rw(t,i,s);s.positions(a),t.ready!==!0&&(t.ready=!0,n.one("layoutready",i.ready),n.emit({type:"layoutready",layout:this}))},JL=function(t,r,i){eR(t,r),iR(t),nR(t,r),sR(t),aR(t)},eR=function(t,r){for(var i=0;i<t.graphSet.length;i++)for(var n=t.graphSet[i],s=n.length,a=0;a<s;a++)for(var o=t.layoutNodes[t.idToIndex[n[a]]],l=a+1;l<s;l++){var c=t.layoutNodes[t.idToIndex[n[l]]];tR(o,c,t,r)}},D0=function(t){return-1+2*t*Math.random()},tR=function(t,r,i,n){var s=t.cmptId,a=r.cmptId;if(!(s!==a&&!i.isCompound)){var o=r.positionX-t.positionX,l=r.positionY-t.positionY,c=1;o===0&&l===0&&(o=D0(c),l=D0(c));var u=rR(t,r,o,l);if(u>0)var h=n.nodeOverlap*u,d=Math.sqrt(o*o+l*l),p=h*o/d,y=h*l/d;else var _=lu(t,o,l),v=lu(r,-1*o,-1*l),g=v.x-_.x,f=v.y-_.y,m=g*g+f*f,d=Math.sqrt(m),h=(t.nodeRepulsion+r.nodeRepulsion)/m,p=h*g/d,y=h*f/d;t.isLocked||(t.offsetX-=p,t.offsetY-=y),r.isLocked||(r.offsetX+=p,r.offsetY+=y)}},rR=function(t,r,i,n){if(i>0)var s=t.maxX-r.minX;else var s=r.maxX-t.minX;if(n>0)var a=t.maxY-r.minY;else var a=r.maxY-t.minY;return s>=0&&a>=0?Math.sqrt(s*s+a*a):0},lu=function(t,r,i){var n=t.positionX,s=t.positionY,a=t.height||1,o=t.width||1,l=i/r,c=a/o,u={};return r===0&&0<i||r===0&&0>i?(u.x=n,u.y=s+a/2,u):0<r&&-1*c<=l&&l<=c?(u.x=n+o/2,u.y=s+o*i/2/r,u):0>r&&-1*c<=l&&l<=c?(u.x=n-o/2,u.y=s-o*i/2/r,u):0<i&&(l<=-1*c||l>=c)?(u.x=n+a*r/2/i,u.y=s+a/2,u):(0>i&&(l<=-1*c||l>=c)&&(u.x=n-a*r/2/i,u.y=s-a/2),u)},iR=function(t,r){for(var i=0;i<t.edgeSize;i++){var n=t.layoutEdges[i],s=t.idToIndex[n.sourceId],a=t.layoutNodes[s],o=t.idToIndex[n.targetId],l=t.layoutNodes[o],c=l.positionX-a.positionX,u=l.positionY-a.positionY;if(!(c===0&&u===0)){var h=lu(a,c,u),d=lu(l,-1*c,-1*u),p=d.x-h.x,y=d.y-h.y,_=Math.sqrt(p*p+y*y),v=Math.pow(n.idealLength-_,2)/n.elasticity;if(_!==0)var g=v*p/_,f=v*y/_;else var g=0,f=0;a.isLocked||(a.offsetX+=g,a.offsetY+=f),l.isLocked||(l.offsetX-=g,l.offsetY-=f)}}},nR=function(t,r){if(r.gravity!==0)for(var i=1,n=0;n<t.graphSet.length;n++){var s=t.graphSet[n],a=s.length;if(n===0)var o=t.clientHeight/2,l=t.clientWidth/2;else var c=t.layoutNodes[t.idToIndex[s[0]]],u=t.layoutNodes[t.idToIndex[c.parentId]],o=u.positionX,l=u.positionY;for(var h=0;h<a;h++){var d=t.layoutNodes[t.idToIndex[s[h]]];if(!d.isLocked){var p=o-d.positionX,y=l-d.positionY,_=Math.sqrt(p*p+y*y);if(_>i){var v=r.gravity*p/_,g=r.gravity*y/_;d.offsetX+=v,d.offsetY+=g}}}}},sR=function(t,r){var i=[],n=0,s=-1;for(i.push.apply(i,t.graphSet[0]),s+=t.graphSet[0].length;n<=s;){var a=i[n++],o=t.idToIndex[a],l=t.layoutNodes[o],c=l.children;if(0<c.length&&!l.isLocked){for(var u=l.offsetX,h=l.offsetY,d=0;d<c.length;d++){var p=t.layoutNodes[t.idToIndex[c[d]]];p.offsetX+=u,p.offsetY+=h,i[++s]=c[d]}l.offsetX=0,l.offsetY=0}}},aR=function(t,r){for(var i=0;i<t.nodeSize;i++){var n=t.layoutNodes[i];0<n.children.length&&(n.maxX=void 0,n.minX=void 0,n.maxY=void 0,n.minY=void 0)}for(var i=0;i<t.nodeSize;i++){var n=t.layoutNodes[i];if(!(0<n.children.length||n.isLocked)){var s=oR(n.offsetX,n.offsetY,t.temperature);n.positionX+=s.x,n.positionY+=s.y,n.offsetX=0,n.offsetY=0,n.minX=n.positionX-n.width,n.maxX=n.positionX+n.width,n.minY=n.positionY-n.height,n.maxY=n.positionY+n.height,iw(n,t)}}for(var i=0;i<t.nodeSize;i++){var n=t.layoutNodes[i];0<n.children.length&&!n.isLocked&&(n.positionX=(n.maxX+n.minX)/2,n.positionY=(n.maxY+n.minY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY)}},oR=function(t,r,i){var n=Math.sqrt(t*t+r*r);if(n>i)var s={x:i*t/n,y:i*r/n};else var s={x:t,y:r};return s},iw=function(t,r){var i=t.parentId;if(i!=null){var n=r.layoutNodes[r.idToIndex[i]],s=!1;if((n.maxX==null||t.maxX+n.padRight>n.maxX)&&(n.maxX=t.maxX+n.padRight,s=!0),(n.minX==null||t.minX-n.padLeft<n.minX)&&(n.minX=t.minX-n.padLeft,s=!0),(n.maxY==null||t.maxY+n.padBottom>n.maxY)&&(n.maxY=t.maxY+n.padBottom,s=!0),(n.minY==null||t.minY-n.padTop<n.minY)&&(n.minY=t.minY-n.padTop,s=!0),s)return iw(n,r)}},L0=function(t,r){for(var i=t.layoutNodes,n=[],s=0;s<i.length;s++){var a=i[s],o=a.cmptId,l=n[o]=n[o]||[];l.push(a)}for(var c=0,s=0;s<n.length;s++){var u=n[s];if(u){u.x1=1/0,u.x2=-1/0,u.y1=1/0,u.y2=-1/0;for(var h=0;h<u.length;h++){var d=u[h];u.x1=Math.min(u.x1,d.positionX-d.width/2),u.x2=Math.max(u.x2,d.positionX+d.width/2),u.y1=Math.min(u.y1,d.positionY-d.height/2),u.y2=Math.max(u.y2,d.positionY+d.height/2)}u.w=u.x2-u.x1,u.h=u.y2-u.y1,c+=u.w*u.h}}n.sort(function(f,m){return m.w*m.h-f.w*f.h});for(var p=0,y=0,_=0,v=0,g=Math.sqrt(c)*t.clientWidth/t.clientHeight,s=0;s<n.length;s++){var u=n[s];if(u){for(var h=0;h<u.length;h++){var d=u[h];d.isLocked||(d.positionX+=p-u.x1,d.positionY+=y-u.y1)}p+=u.w+r.componentSpacing,_+=u.w+r.componentSpacing,v=Math.max(v,u.h),_>g&&(y+=v+r.componentSpacing,p=0,_=0,v=0)}}},lR={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(t){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function nw(e){this.options=je({},lR,e)}nw.prototype.run=function(){var e=this.options,t=e,r=e.cy,i=t.eles,n=i.nodes().not(":parent");t.sort&&(n=n.sort(t.sort));var s=Mr(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()});if(s.h===0||s.w===0)i.nodes().layoutPositions(this,t,function(K){return{x:s.x1,y:s.y1}});else{var a=n.size(),o=Math.sqrt(a*s.h/s.w),l=Math.round(o),c=Math.round(s.w/s.h*o),u=function(te){if(te==null)return Math.min(l,c);var J=Math.min(l,c);J==l?l=te:c=te},h=function(te){if(te==null)return Math.max(l,c);var J=Math.max(l,c);J==l?l=te:c=te},d=t.rows,p=t.cols!=null?t.cols:t.columns;if(d!=null&&p!=null)l=d,c=p;else if(d!=null&&p==null)l=d,c=Math.ceil(a/l);else if(d==null&&p!=null)c=p,l=Math.ceil(a/c);else if(c*l>a){var y=u(),_=h();(y-1)*_>=a?u(y-1):(_-1)*y>=a&&h(_-1)}else for(;c*l<a;){var v=u(),g=h();(g+1)*v>=a?h(g+1):u(v+1)}var f=s.w/c,m=s.h/l;if(t.condense&&(f=0,m=0),t.avoidOverlap)for(var b=0;b<n.length;b++){var C=n[b],S=C._private.position;(S.x==null||S.y==null)&&(S.x=0,S.y=0);var k=C.layoutDimensions(t),w=t.avoidOverlapPadding,x=k.w+w,A=k.h+w;f=Math.max(f,x),m=Math.max(m,A)}for(var D={},T=function(te,J){return!!D["c-"+te+"-"+J]},E=function(te,J){D["c-"+te+"-"+J]=!0},R=0,F=0,O=function(){F++,F>=c&&(F=0,R++)},$={},H=0;H<n.length;H++){var L=n[H],I=t.position(L);if(I&&(I.row!==void 0||I.col!==void 0)){var P={row:I.row,col:I.col};if(P.col===void 0)for(P.col=0;T(P.row,P.col);)P.col++;else if(P.row===void 0)for(P.row=0;T(P.row,P.col);)P.row++;$[L.id()]=P,E(P.row,P.col)}}var z=function(te,J){var ne,V;if(te.locked()||te.isParent())return!1;var N=$[te.id()];if(N)ne=N.col*f+f/2+s.x1,V=N.row*m+m/2+s.y1;else{for(;T(R,F);)O();ne=F*f+f/2+s.x1,V=R*m+m/2+s.y1,E(R,F),O()}return{x:ne,y:V}};n.layoutPositions(this,t,z)}return this};var cR={ready:function(){},stop:function(){}};function Ov(e){this.options=je({},cR,e)}Ov.prototype.run=function(){var e=this.options,t=e.eles,r=this;return e.cy,r.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),r.one("layoutready",e.ready),r.emit("layoutready"),r.one("layoutstop",e.stop),r.emit("layoutstop"),this};Ov.prototype.stop=function(){return this};var uR={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function sw(e){this.options=je({},uR,e)}sw.prototype.run=function(){var e=this.options,t=e.eles,r=t.nodes(),i=It(e.positions);function n(s){if(e.positions==null)return RA(s.position());if(i)return e.positions(s);var a=e.positions[s._private.data.id];return a??null}return r.layoutPositions(this,e,function(s,a){var o=n(s);return s.locked()||o==null?!1:o}),this};var hR={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(t,r){return!0},ready:void 0,stop:void 0,transform:function(t,r){return r}};function aw(e){this.options=je({},hR,e)}aw.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,i=Mr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),n=function(a,o){return{x:i.x1+Math.round(Math.random()*i.w),y:i.y1+Math.round(Math.random()*i.h)}};return r.nodes().layoutPositions(this,e,n),this};var dR=[{name:"breadthfirst",impl:QC},{name:"circle",impl:JC},{name:"concentric",impl:ew},{name:"cose",impl:fh},{name:"grid",impl:nw},{name:"null",impl:Ov},{name:"preset",impl:sw},{name:"random",impl:aw}];function ow(e){this.options=e,this.notifications=0}var R0=function(){},M0=function(){throw new Error("A headless instance can not render images")};ow.prototype={recalculateRenderedStyle:R0,notify:function(){this.notifications++},init:R0,isHeadless:function(){return!0},png:M0,jpg:M0};var Nv={};Nv.arrowShapeWidth=.3;Nv.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,r=function(c,u,h,d,p,y,_){var v=p.x-h/2-_,g=p.x+h/2+_,f=p.y-h/2-_,m=p.y+h/2+_,b=v<=c&&c<=g&&f<=u&&u<=m;return b},i=function(c,u,h,d,p){var y=c*Math.cos(d)-u*Math.sin(d),_=c*Math.sin(d)+u*Math.cos(d),v=y*h,g=_*h,f=v+p.x,m=g+p.y;return{x:f,y:m}},n=function(c,u,h,d){for(var p=[],y=0;y<c.length;y+=2){var _=c[y],v=c[y+1];p.push(i(_,v,u,h,d))}return p},s=function(c){for(var u=[],h=0;h<c.length;h++){var d=c[h];u.push(d.x,d.y)}return u},a=function(c){return c.pstyle("width").pfValue*c.pstyle("arrow-scale").pfValue*2},o=function(c,u){qe(u)&&(u=e[u]),e[c]=je({name:c,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(d,p,y,_,v,g){var f=s(n(this.points,y+2*g,_,v)),m=Nr(d,p,f);return m},roughCollide:r,draw:function(d,p,y,_){var v=n(this.points,p,y,_);t.arrowShapeImpl("polygon")(d,v)},spacing:function(d){return 0},gap:a},u)};o("none",{collide:ru,roughCollide:ru,draw:Sv,spacing:Gm,gap:Gm}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(c,u,h,d,p){var y=n(this.points,u,h,d),_=this.controlPoint,v=i(_[0],_[1],u,h,d);t.arrowShapeImpl(this.name)(c,y,v)},gap:function(c){return a(c)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(c,u,h,d,p,y,_){var v=s(n(this.points,h+2*_,d,p)),g=s(n(this.pointsTee,h+2*_,d,p)),f=Nr(c,u,v)||Nr(c,u,g);return f},draw:function(c,u,h,d,p){var y=n(this.points,u,h,d),_=n(this.pointsTee,u,h,d);t.arrowShapeImpl(this.name)(c,y,_)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(c,u,h,d,p,y,_){var v=p,g=Math.pow(v.x-c,2)+Math.pow(v.y-u,2)<=Math.pow((h+2*_)*this.radius,2),f=s(n(this.points,h+2*_,d,p));return Nr(c,u,f)||g},draw:function(c,u,h,d,p){var y=n(this.pointsTr,u,h,d);t.arrowShapeImpl(this.name)(c,y,d.x,d.y,this.radius*u)},spacing:function(c){return t.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(c,u){var h=this.baseCrossLinePts.slice(),d=u/c,p=3,y=5;return h[p]=h[p]-d,h[y]=h[y]-d,h},collide:function(c,u,h,d,p,y,_){var v=s(n(this.points,h+2*_,d,p)),g=s(n(this.crossLinePts(h,y),h+2*_,d,p)),f=Nr(c,u,v)||Nr(c,u,g);return f},draw:function(c,u,h,d,p){var y=n(this.points,u,h,d),_=n(this.crossLinePts(u,p),u,h,d);t.arrowShapeImpl(this.name)(c,y,_)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(c){return a(c)*.525}}),o("circle",{radius:.15,collide:function(c,u,h,d,p,y,_){var v=p,g=Math.pow(v.x-c,2)+Math.pow(v.y-u,2)<=Math.pow((h+2*_)*this.radius,2);return g},draw:function(c,u,h,d,p){t.arrowShapeImpl(this.name)(c,d.x,d.y,this.radius*u)},spacing:function(c){return t.getArrowWidth(c.pstyle("width").pfValue,c.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(c){return 1},gap:function(c){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(c){return c.pstyle("width").pfValue*c.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(c){return .95*c.pstyle("width").pfValue*c.pstyle("arrow-scale").value}})};var Fs={};Fs.projectIntoViewport=function(e,t){var r=this.cy,i=this.findContainerClientCoords(),n=i[0],s=i[1],a=i[4],o=r.pan(),l=r.zoom(),c=((e-n)/a-o.x)/l,u=((t-s)/a-o.y)/l;return[c,u]};Fs.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),i=function(g){return parseFloat(r.getPropertyValue(g))},n={left:i("padding-left"),right:i("padding-right"),top:i("padding-top"),bottom:i("padding-bottom")},s={left:i("border-left-width"),right:i("border-right-width"),top:i("border-top-width"),bottom:i("border-bottom-width")},a=e.clientWidth,o=e.clientHeight,l=n.left+n.right,c=n.top+n.bottom,u=s.left+s.right,h=t.width/(a+u),d=a-l,p=o-c,y=t.left+n.left+s.left,_=t.top+n.top+s.top;return this.containerBB=[y,_,d,p,h]};Fs.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Fs.findNearestElement=function(e,t,r,i){return this.findNearestElements(e,t,r,i)[0]};Fs.findNearestElements=function(e,t,r,i){var n=this,s=this,a=s.getCachedZSortedEles(),o=[],l=s.cy.zoom(),c=s.cy.hasCompoundNodes(),u=(i?24:8)/l,h=(i?8:2)/l,d=(i?8:2)/l,p=1/0,y,_;r&&(a=a.interactive);function v(k,w){if(k.isNode()){if(_)return;_=k,o.push(k)}if(k.isEdge()&&(w==null||w<p))if(y){if(y.pstyle("z-compound-depth").value===k.pstyle("z-compound-depth").value&&y.pstyle("z-compound-depth").value===k.pstyle("z-compound-depth").value){for(var x=0;x<o.length;x++)if(o[x].isEdge()){o[x]=k,y=k,p=w??p;break}}}else o.push(k),y=k,p=w??p}function g(k){var w=k.outerWidth()+2*h,x=k.outerHeight()+2*h,A=w/2,D=x/2,T=k.position(),E=k.pstyle("corner-radius").value==="auto"?"auto":k.pstyle("corner-radius").pfValue,R=k._private.rscratch;if(T.x-A<=e&&e<=T.x+A&&T.y-D<=t&&t<=T.y+D){var F=s.nodeShapes[n.getNodeShape(k)];if(F.checkPoint(e,t,0,w,x,T.x,T.y,E,R))return v(k,0),!0}}function f(k){var w=k._private,x=w.rscratch,A=k.pstyle("width").pfValue,D=k.pstyle("arrow-scale").value,T=A/2+u,E=T*T,R=T*2,H=w.source,L=w.target,F;if(x.edgeType==="segments"||x.edgeType==="straight"||x.edgeType==="haystack"){for(var O=x.allpts,$=0;$+3<O.length;$+=2)if(jA(e,t,O[$],O[$+1],O[$+2],O[$+3],R)&&E>(F=ZA(e,t,O[$],O[$+1],O[$+2],O[$+3])))return v(k,F),!0}else if(x.edgeType==="bezier"||x.edgeType==="multibezier"||x.edgeType==="self"||x.edgeType==="compound"){for(var O=x.allpts,$=0;$+5<x.allpts.length;$+=4)if(GA(e,t,O[$],O[$+1],O[$+2],O[$+3],O[$+4],O[$+5],R)&&E>(F=XA(e,t,O[$],O[$+1],O[$+2],O[$+3],O[$+4],O[$+5])))return v(k,F),!0}for(var H=H||w.source,L=L||w.target,I=n.getArrowWidth(A,D),P=[{name:"source",x:x.arrowStartX,y:x.arrowStartY,angle:x.srcArrowAngle},{name:"target",x:x.arrowEndX,y:x.arrowEndY,angle:x.tgtArrowAngle},{name:"mid-source",x:x.midX,y:x.midY,angle:x.midsrcArrowAngle},{name:"mid-target",x:x.midX,y:x.midY,angle:x.midtgtArrowAngle}],$=0;$<P.length;$++){var z=P[$],K=s.arrowShapes[k.pstyle(z.name+"-arrow-shape").value],te=k.pstyle("width").pfValue;if(K.roughCollide(e,t,I,z.angle,{x:z.x,y:z.y},te,u)&&K.collide(e,t,I,z.angle,{x:z.x,y:z.y},te,u))return v(k),!0}c&&o.length>0&&(g(H),g(L))}function m(k,w,x){return Or(k,w,x)}function b(k,w){var x=k._private,A=d,D;w?D=w+"-":D="",k.boundingBox();var T=x.labelBounds[w||"main"],E=k.pstyle(D+"label").value,R=k.pstyle("text-events").strValue==="yes";if(!(!R||!E)){var F=m(x.rscratch,"labelX",w),O=m(x.rscratch,"labelY",w),$=m(x.rscratch,"labelAngle",w),H=k.pstyle(D+"text-margin-x").pfValue,L=k.pstyle(D+"text-margin-y").pfValue,I=T.x1-A-H,P=T.x2+A-H,z=T.y1-A-L,K=T.y2+A-L;if($){var te=Math.cos($),J=Math.sin($),ne=function(q,Q){return q=q-F,Q=Q-O,{x:q*te-Q*J+F,y:q*J+Q*te+O}},V=ne(I,z),N=ne(I,K),ee=ne(P,z),U=ne(P,K),X=[V.x+H,V.y+L,ee.x+H,ee.y+L,U.x+H,U.y+L,N.x+H,N.y+L];if(Nr(e,t,X))return v(k),!0}else if(An(T,e,t))return v(k),!0}}for(var C=a.length-1;C>=0;C--){var S=a[C];S.isNode()?g(S)||b(S):f(S)||b(S)||b(S,"source")||b(S,"target")}return o};Fs.getAllInBox=function(e,t,r,i){var n=this.getCachedZSortedEles().interactive,s=this.cy.zoom(),a=2/s,o=[],l=Math.min(e,r),c=Math.max(e,r),u=Math.min(t,i),h=Math.max(t,i);e=l,r=c,t=u,i=h;var d=Mr({x1:e,y1:t,x2:r,y2:i}),p=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}],y=[[p[0],p[1]],[p[1],p[2]],[p[2],p[3]],[p[3],p[0]]];function _(q,Q,se){return Or(q,Q,se)}function v(q,Q){var se=q._private,Z=a,Y="";q.boundingBox();var ae=se.labelBounds.main;if(!ae)return null;var he=_(se.rscratch,"labelX",Q),ce=_(se.rscratch,"labelY",Q),ue=_(se.rscratch,"labelAngle",Q),ye=q.pstyle(Y+"text-margin-x").pfValue,ve=q.pstyle(Y+"text-margin-y").pfValue,_e=ae.x1-Z-ye,Ce=ae.x2+Z-ye,ke=ae.y1-Z-ve,Me=ae.y2+Z-ve;if(ue){var Ae=Math.cos(ue),We=Math.sin(ue),Ee=function(de,W){return de=de-he,W=W-ce,{x:de*Ae-W*We+he,y:de*We+W*Ae+ce}};return[Ee(_e,ke),Ee(Ce,ke),Ee(Ce,Me),Ee(_e,Me)]}else return[{x:_e,y:ke},{x:Ce,y:ke},{x:Ce,y:Me},{x:_e,y:Me}]}function g(q,Q,se,Z){function Y(ae,he,ce){return(ce.y-ae.y)*(he.x-ae.x)>(he.y-ae.y)*(ce.x-ae.x)}return Y(q,se,Z)!==Y(Q,se,Z)&&Y(q,Q,se)!==Y(q,Q,Z)}for(var f=0;f<n.length;f++){var m=n[f];if(m.isNode()){var b=m,C=b.pstyle("text-events").strValue==="yes",S=b.pstyle("box-selection").strValue,k=b.pstyle("box-select-labels").strValue==="yes";if(S==="none")continue;var w=(S==="overlap"||k)&&C,x=b.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:w});if(S==="contain"){var A=!1;if(k&&C){var D=v(b);D&&md(D,p)&&(o.push(b),A=!0)}!A&&pC(d,x)&&o.push(b)}else if(S==="overlap"&&Ev(d,x)){var T=b.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),E=[{x:T.x1,y:T.y1},{x:T.x2,y:T.y1},{x:T.x2,y:T.y2},{x:T.x1,y:T.y2}];if(md(E,p))o.push(b);else{var R=v(b);R&&md(R,p)&&o.push(b)}}}else{var F=m,O=F._private,$=O.rscratch,H=F.pstyle("box-selection").strValue;if(H==="none")continue;if(H==="contain"){if($.startX!=null&&$.startY!=null&&!An(d,$.startX,$.startY)||$.endX!=null&&$.endY!=null&&!An(d,$.endX,$.endY))continue;if($.edgeType==="bezier"||$.edgeType==="multibezier"||$.edgeType==="self"||$.edgeType==="compound"||$.edgeType==="segments"||$.edgeType==="haystack"){for(var L=O.rstyle.bezierPts||O.rstyle.linePts||O.rstyle.haystackPts,I=!0,P=0;P<L.length;P++)if(!Qm(d,L[P])){I=!1;break}I&&o.push(F)}else $.edgeType==="straight"&&o.push(F)}else if(H==="overlap"){var z=!1;if($.startX!=null&&$.startY!=null&&$.endX!=null&&$.endY!=null&&(An(d,$.startX,$.startY)||An(d,$.endX,$.endY)))o.push(F),z=!0;else if(!z&&$.edgeType==="haystack"){for(var K=O.rstyle.haystackPts,te=0;te<K.length;te++)if(Qm(d,K[te])){o.push(F),z=!0;break}}if(!z){var J=O.rstyle.bezierPts||O.rstyle.linePts||O.rstyle.haystackPts;if((!J||J.length<2)&&$.edgeType==="straight"&&$.startX!=null&&$.startY!=null&&$.endX!=null&&$.endY!=null&&(J=[{x:$.startX,y:$.startY},{x:$.endX,y:$.endY}]),!J||J.length<2)continue;for(var ne=0;ne<J.length-1;ne++){for(var V=J[ne],N=J[ne+1],ee=0;ee<y.length;ee++){var U=jt(y[ee],2),X=U[0],M=U[1];if(g(V,N,X,M)){o.push(F),z=!0;break}}if(z)break}}}}}return o};var cu={};cu.calculateArrowAngles=function(e){var t=e._private.rscratch,r=t.edgeType==="haystack",i=t.edgeType==="bezier",n=t.edgeType==="multibezier",s=t.edgeType==="segments",a=t.edgeType==="compound",o=t.edgeType==="self",l,c,u,h,d,p,g,f;if(r?(u=t.haystackPts[0],h=t.haystackPts[1],d=t.haystackPts[2],p=t.haystackPts[3]):(u=t.arrowStartX,h=t.arrowStartY,d=t.arrowEndX,p=t.arrowEndY),g=t.midX,f=t.midY,s)l=u-t.segpts[0],c=h-t.segpts[1];else if(n||a||o||i){var y=t.allpts,_=ir(y[0],y[2],y[4],.1),v=ir(y[1],y[3],y[5],.1);l=u-_,c=h-v}else l=u-g,c=h-f;t.srcArrowAngle=Vl(l,c);var g=t.midX,f=t.midY;if(r&&(g=(u+d)/2,f=(h+p)/2),l=d-u,c=p-h,s){var y=t.allpts;if(y.length/2%2===0){var m=y.length/2,b=m-2;l=y[m]-y[b],c=y[m+1]-y[b+1]}else if(t.isRound)l=t.midVector[1],c=-t.midVector[0];else{var m=y.length/2-1,b=m-2;l=y[m]-y[b],c=y[m+1]-y[b+1]}}else if(n||a||o){var y=t.allpts,C=t.ctrlpts,S,k,w,x;if(C.length/2%2===0){var A=y.length/2-1,D=A+2,T=D+2;S=ir(y[A],y[D],y[T],0),k=ir(y[A+1],y[D+1],y[T+1],0),w=ir(y[A],y[D],y[T],1e-4),x=ir(y[A+1],y[D+1],y[T+1],1e-4)}else{var D=y.length/2-1,A=D-2,T=D+2;S=ir(y[A],y[D],y[T],.4999),k=ir(y[A+1],y[D+1],y[T+1],.4999),w=ir(y[A],y[D],y[T],.5),x=ir(y[A+1],y[D+1],y[T+1],.5)}l=w-S,c=x-k}if(t.midtgtArrowAngle=Vl(l,c),t.midDispX=l,t.midDispY=c,l*=-1,c*=-1,s){var y=t.allpts;if(y.length/2%2!==0){if(!t.isRound){var m=y.length/2-1,E=m+2;l=-(y[E]-y[m]),c=-(y[E+1]-y[m+1])}}}if(t.midsrcArrowAngle=Vl(l,c),s)l=d-t.segpts[t.segpts.length-2],c=p-t.segpts[t.segpts.length-1];else if(n||a||o||i){var y=t.allpts,R=y.length,_=ir(y[R-6],y[R-4],y[R-2],.9),v=ir(y[R-5],y[R-3],y[R-1],.9);l=d-_,c=p-v}else l=d-g,c=p-f;t.tgtArrowAngle=Vl(l,c)};cu.getArrowWidth=cu.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},i=r[e+", "+t];return i||(i=Math.max(Math.pow(e*13.37,.9),29)*t,r[e+", "+t]=i,i)};var Cp,wp,Ei={},ti={},P0,I0,_s,Tc,Gi,cs,fs,xi,Xs,Jl,lw,cw,Sp,kp,F0,O0=function(t,r,i){i.x=r.x-t.x,i.y=r.y-t.y,i.len=Math.sqrt(i.x*i.x+i.y*i.y),i.nx=i.x/i.len,i.ny=i.y/i.len,i.ang=Math.atan2(i.ny,i.nx)},fR=function(t,r){r.x=t.x*-1,r.y=t.y*-1,r.nx=t.nx*-1,r.ny=t.ny*-1,r.ang=t.ang>0?-(Math.PI-t.ang):Math.PI+t.ang},pR=function(t,r,i,n,s){if(t!==F0?O0(r,t,Ei):fR(ti,Ei),O0(r,i,ti),P0=Ei.nx*ti.ny-Ei.ny*ti.nx,I0=Ei.nx*ti.nx-Ei.ny*-ti.ny,Gi=Math.asin(Math.max(-1,Math.min(1,P0))),Math.abs(Gi)<1e-6){Cp=r.x,wp=r.y,fs=Xs=0;return}_s=1,Tc=!1,I0<0?Gi<0?Gi=Math.PI+Gi:(Gi=Math.PI-Gi,_s=-1,Tc=!0):Gi>0&&(_s=-1,Tc=!0),r.radius!==void 0?Xs=r.radius:Xs=n,cs=Gi/2,Jl=Math.min(Ei.len/2,ti.len/2),s?(xi=Math.abs(Math.cos(cs)*Xs/Math.sin(cs)),xi>Jl?(xi=Jl,fs=Math.abs(xi*Math.sin(cs)/Math.cos(cs))):fs=Xs):(xi=Math.min(Jl,Xs),fs=Math.abs(xi*Math.sin(cs)/Math.cos(cs))),Sp=r.x+ti.nx*xi,kp=r.y+ti.ny*xi,Cp=Sp-ti.ny*fs*_s,wp=kp+ti.nx*fs*_s,lw=r.x+Ei.nx*xi,cw=r.y+Ei.ny*xi,F0=r};function uw(e,t){t.radius===0?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function $v(e,t,r,i){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return i===0||t.radius===0?{cx:t.x,cy:t.y,radius:0,startX:t.x,startY:t.y,stopX:t.x,stopY:t.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(pR(e,t,r,i,n),{cx:Cp,cy:wp,radius:fs,startX:lw,startY:cw,stopX:Sp,stopY:kp,startAngle:Ei.ang+Math.PI/2*_s,endAngle:ti.ang-Math.PI/2*_s,counterClockwise:Tc})}var il=.01,vR=Math.sqrt(2*il),kr={};kr.findMidptPtsEtc=function(e,t){var r=t.posPts,i=t.intersectionPts,n=t.vectorNormInverse,s,a=e.pstyle("source-endpoint"),o=e.pstyle("target-endpoint"),l=a.units!=null&&o.units!=null,c=function(C,S,k,w){var x=w-S,A=k-C,D=Math.sqrt(A*A+x*x);return{x:-x/D,y:A/D}},u=e.pstyle("edge-distances").value;switch(u){case"node-position":s=r;break;case"intersection":s=i;break;case"endpoints":{if(l){var h=this.manualEndptToPx(e.source()[0],a),d=jt(h,2),p=d[0],y=d[1],_=this.manualEndptToPx(e.target()[0],o),v=jt(_,2),g=v[0],f=v[1],m={x1:p,y1:y,x2:g,y2:f};n=c(p,y,g,f),s=m}else mt("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),s=i;break}}return{midptPts:s,vectorNormInverse:n}};kr.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],i=r._private,n=i.rscratch;if(!n.haystack){var s=Math.random()*2*Math.PI;n.source={x:Math.cos(s),y:Math.sin(s)},s=Math.random()*2*Math.PI,n.target={x:Math.cos(s),y:Math.sin(s)}}var a=i.source,o=i.target,l=a.position(),c=o.position(),u=a.width(),h=o.width(),d=a.height(),p=o.height(),y=r.pstyle("haystack-radius").value,_=y/2;n.haystackPts=n.allpts=[n.source.x*u*_+l.x,n.source.y*d*_+l.y,n.target.x*h*_+c.x,n.target.y*p*_+c.y],n.midX=(n.allpts[0]+n.allpts[2])/2,n.midY=(n.allpts[1]+n.allpts[3])/2,n.edgeType="haystack",n.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}};kr.findSegmentsPoints=function(e,t){var r=e._private.rscratch,i=e.pstyle("segment-weights"),n=e.pstyle("segment-distances"),s=e.pstyle("segment-radii"),a=e.pstyle("radius-type"),o=Math.min(i.pfValue.length,n.pfValue.length),l=s.pfValue[s.pfValue.length-1],c=a.pfValue[a.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var u=0;u<o;u++){var h=i.pfValue[u],d=n.pfValue[u],p=1-h,y=h,_=this.findMidptPtsEtc(e,t),v=_.midptPts,g=_.vectorNormInverse,f={x:v.x1*p+v.x2*y,y:v.y1*p+v.y2*y};r.segpts.push(f.x+g.x*d,f.y+g.y*d),r.radii.push(s.pfValue[u]!==void 0?s.pfValue[u]:l),r.isArcRadius.push((a.pfValue[u]!==void 0?a.pfValue[u]:c)==="arc-radius")}};kr.findLoopPoints=function(e,t,r,i){var n=e._private.rscratch,s=t.dirCounts,a=t.srcPos,o=e.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,c=e.pstyle("loop-direction").pfValue,u=e.pstyle("loop-sweep").pfValue,h=e.pstyle("control-point-step-size").pfValue;n.edgeType="self";var d=r,p=h;i&&(d=0,p=l);var y=c-Math.PI/2,_=y-u/2,v=y+u/2,g=c+"_"+u;d=s[g]===void 0?s[g]=0:++s[g],n.ctrlpts=[a.x+Math.cos(_)*1.4*p*(d/3+1),a.y+Math.sin(_)*1.4*p*(d/3+1),a.x+Math.cos(v)*1.4*p*(d/3+1),a.y+Math.sin(v)*1.4*p*(d/3+1)]};kr.findCompoundLoopPoints=function(e,t,r,i){var n=e._private.rscratch;n.edgeType="compound";var s=t.srcPos,a=t.tgtPos,o=t.srcW,l=t.srcH,c=t.tgtW,u=t.tgtH,h=e.pstyle("control-point-step-size").pfValue,d=e.pstyle("control-point-distances"),p=d?d.pfValue[0]:void 0,y=r,_=h;i&&(y=0,_=p);var v=50,g={x:s.x-o/2,y:s.y-l/2},f={x:a.x-c/2,y:a.y-u/2},m={x:Math.min(g.x,f.x),y:Math.min(g.y,f.y)},b=.5,C=Math.max(b,Math.log(o*il)),S=Math.max(b,Math.log(c*il));n.ctrlpts=[m.x,m.y-(1+Math.pow(v,1.12)/100)*_*(y/3+1)*C,m.x-(1+Math.pow(v,1.12)/100)*_*(y/3+1)*S,m.y]};kr.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"};kr.findBezierPoints=function(e,t,r,i,n){var s=e._private.rscratch,a=e.pstyle("control-point-step-size").pfValue,o=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),c=o&&l?Math.min(o.value.length,l.value.length):1,u=o?o.pfValue[0]:void 0,h=l.value[0],d=i;s.edgeType=d?"multibezier":"bezier",s.ctrlpts=[];for(var p=0;p<c;p++){var y=(.5-t.eles.length/2+r)*a*(n?-1:1),_=void 0,v=Tv(y);d&&(u=o?o.pfValue[p]:a,h=l.value[p]),i?_=u:_=u!==void 0?v*u:void 0;var g=_!==void 0?_:y,f=1-h,m=h,b=this.findMidptPtsEtc(e,t),C=b.midptPts,S=b.vectorNormInverse,k={x:C.x1*f+C.x2*m,y:C.y1*f+C.y2*m};s.ctrlpts.push(k.x+S.x*g,k.y+S.y*g)}};kr.findTaxiPoints=function(e,t){var r=e._private.rscratch;r.edgeType="segments";var i="vertical",n="horizontal",s="leftward",a="rightward",o="downward",l="upward",c="auto",u=t.posPts,h=t.srcW,d=t.srcH,p=t.tgtW,y=t.tgtH,_=e.pstyle("edge-distances").value,v=_!=="node-position",g=e.pstyle("taxi-direction").value,f=g,m=e.pstyle("taxi-turn"),b=m.units==="%",C=m.pfValue,S=C<0,k=e.pstyle("taxi-turn-min-distance").pfValue,w=v?(h+p)/2:0,x=v?(d+y)/2:0,A=u.x2-u.x1,D=u.y2-u.y1,T=function(W,oe){return W>0?Math.max(W-oe,0):Math.min(W+oe,0)},E=T(A,w),R=T(D,x),F=!1;f===c?g=Math.abs(E)>Math.abs(R)?n:i:f===l||f===o?(g=i,F=!0):(f===s||f===a)&&(g=n,F=!0);var O=g===i,$=O?R:E,H=O?D:A,L=Tv(H),I=!1;!(F&&(b||S))&&(f===o&&H<0||f===l&&H>0||f===s&&H>0||f===a&&H<0)&&(L*=-1,$=L*Math.abs($),I=!0);var P;if(b){var z=C<0?1+C:C;P=z*$}else{var K=C<0?$:0;P=K+C*L}var te=function(W){return Math.abs(W)<k||Math.abs(W)>=Math.abs($)},J=te(P),ne=te(Math.abs($)-Math.abs(P)),V=J||ne;if(V&&!I)if(O){var N=Math.abs(H)<=d/2,ee=Math.abs(A)<=p/2;if(N){var U=(u.x1+u.x2)/2,X=u.y1,M=u.y2;r.segpts=[U,X,U,M]}else if(ee){var q=(u.y1+u.y2)/2,Q=u.x1,se=u.x2;r.segpts=[Q,q,se,q]}else r.segpts=[u.x1,u.y2]}else{var Z=Math.abs(H)<=h/2,Y=Math.abs(D)<=y/2;if(Z){var ae=(u.y1+u.y2)/2,he=u.x1,ce=u.x2;r.segpts=[he,ae,ce,ae]}else if(Y){var ue=(u.x1+u.x2)/2,ye=u.y1,ve=u.y2;r.segpts=[ue,ye,ue,ve]}else r.segpts=[u.x2,u.y1]}else if(O){var _e=u.y1+P+(v?d/2*L:0),Ce=u.x1,ke=u.x2;r.segpts=[Ce,_e,ke,_e]}else{var Me=u.x1+P+(v?h/2*L:0),Ae=u.y1,We=u.y2;r.segpts=[Me,Ae,Me,We]}if(r.isRound){var Ee=e.pstyle("taxi-radius").value,Se=e.pstyle("radius-type").value[0]==="arc-radius";r.radii=new Array(r.segpts.length/2).fill(Ee),r.isArcRadius=new Array(r.segpts.length/2).fill(Se)}};kr.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if(r.edgeType==="bezier"){var i=t.srcPos,n=t.tgtPos,s=t.srcW,a=t.srcH,o=t.tgtW,l=t.tgtH,c=t.srcShape,u=t.tgtShape,h=t.srcCornerRadius,d=t.tgtCornerRadius,p=t.srcRs,y=t.tgtRs,_=!xe(r.startX)||!xe(r.startY),v=!xe(r.arrowStartX)||!xe(r.arrowStartY),g=!xe(r.endX)||!xe(r.endY),f=!xe(r.arrowEndX)||!xe(r.arrowEndY),m=3,b=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth,C=m*b,S=Es({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),k=S<C,w=Es({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),x=w<C,A=!1;if(_||v||k){A=!0;var D={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},T=Math.sqrt(D.x*D.x+D.y*D.y),E={x:D.x/T,y:D.y/T},R=Math.max(s,a),F={x:r.ctrlpts[0]+E.x*2*R,y:r.ctrlpts[1]+E.y*2*R},O=c.intersectLine(i.x,i.y,s,a,F.x,F.y,0,h,p);k?(r.ctrlpts[0]=r.ctrlpts[0]+E.x*(C-S),r.ctrlpts[1]=r.ctrlpts[1]+E.y*(C-S)):(r.ctrlpts[0]=O[0]+E.x*C,r.ctrlpts[1]=O[1]+E.y*C)}if(g||f||x){A=!0;var $={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},H=Math.sqrt($.x*$.x+$.y*$.y),L={x:$.x/H,y:$.y/H},I=Math.max(s,a),P={x:r.ctrlpts[0]+L.x*2*I,y:r.ctrlpts[1]+L.y*2*I},z=u.intersectLine(n.x,n.y,o,l,P.x,P.y,0,d,y);x?(r.ctrlpts[0]=r.ctrlpts[0]+L.x*(C-w),r.ctrlpts[1]=r.ctrlpts[1]+L.y*(C-w)):(r.ctrlpts[0]=z[0]+L.x*C,r.ctrlpts[1]=z[1]+L.y*C)}A&&this.findEndpoints(e)}};kr.storeAllpts=function(e){var t=e._private.rscratch;if(t.edgeType==="multibezier"||t.edgeType==="bezier"||t.edgeType==="self"||t.edgeType==="compound"){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r=0;r+1<t.ctrlpts.length;r+=2)t.allpts.push(t.ctrlpts[r],t.ctrlpts[r+1]),r+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[r]+t.ctrlpts[r+2])/2,(t.ctrlpts[r+1]+t.ctrlpts[r+3])/2);t.allpts.push(t.endX,t.endY);var i,n;t.ctrlpts.length/2%2===0?(i=t.allpts.length/2-1,t.midX=t.allpts[i],t.midY=t.allpts[i+1]):(i=t.allpts.length/2-3,n=.5,t.midX=ir(t.allpts[i],t.allpts[i+2],t.allpts[i+4],n),t.midY=ir(t.allpts[i+1],t.allpts[i+3],t.allpts[i+5],n))}else if(t.edgeType==="straight")t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if(t.edgeType==="segments"){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var s=2;s+3<t.allpts.length;s+=2){var a=t.radii[s/2-1],o=t.isArcRadius[s/2-1];t.roundCorners.push($v({x:t.allpts[s-2],y:t.allpts[s-1]},{x:t.allpts[s],y:t.allpts[s+1],radius:a},{x:t.allpts[s+2],y:t.allpts[s+3]},a,o))}}if(t.segpts.length%4===0){var l=t.segpts.length/2,c=l-2;t.midX=(t.segpts[c]+t.segpts[l])/2,t.midY=(t.segpts[c+1]+t.segpts[l+1])/2}else{var u=t.segpts.length/2-1;if(!t.isRound)t.midX=t.segpts[u],t.midY=t.segpts[u+1];else{var h={x:t.segpts[u],y:t.segpts[u+1]},d=t.roundCorners[u/2];if(d.radius===0){var p={x:t.segpts[u+2],y:t.segpts[u+3]};t.midX=h.x,t.midY=h.y,t.midVector=[h.y-p.y,p.x-h.x]}else{var y=[h.x-d.cx,h.y-d.cy],_=d.radius/Math.sqrt(Math.pow(y[0],2)+Math.pow(y[1],2));y=y.map(function(v){return v*_}),t.midX=d.cx+y[0],t.midY=d.cy+y[1],t.midVector=y}}}}};kr.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||xe(t.startX)&&xe(t.startY)&&xe(t.endX)&&xe(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,mt("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};kr.findEdgeControlPoints=function(e){var t=this;if(!(!e||e.length===0)){for(var r=this,i=r.cy,n=i.hasCompoundNodes(),s=new sn,a=function(x,A){return[].concat(Jc(x),[A?1:0]).join("-")},o=[],l=[],c=0;c<e.length;c++){var u=e[c],h=u._private,d=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(d==="haystack"){l.push(u);continue}var p=d==="unbundled-bezier"||En(d,"segments")||d==="straight"||d==="straight-triangle"||En(d,"taxi"),y=d==="unbundled-bezier"||d==="bezier",_=h.source,v=h.target,g=_.poolIndex(),f=v.poolIndex(),m=[g,f].sort(),b=a(m,p),C=s.get(b);C==null&&(C={eles:[]},o.push({pairId:m,edgeIsUnbundled:p}),s.set(b,C)),C.eles.push(u),p&&(C.hasUnbundled=!0),y&&(C.hasBezier=!0)}}for(var S=function(){var x=o[k],A=x.pairId,D=x.edgeIsUnbundled,T=a(A,D),E=s.get(T),R;if(!E.hasUnbundled){var F=E.eles[0].parallelEdges().filter(function(Se){return Se.isBundledBezier()});kv(E.eles),F.forEach(function(Se){return E.eles.push(Se)}),E.eles.sort(function(Se,de){return Se.poolIndex()-de.poolIndex()})}var O=E.eles[0],$=O.source(),H=O.target();if($.poolIndex()>H.poolIndex()){var L=$;$=H,H=L}var I=E.srcPos=$.position(),P=E.tgtPos=H.position(),z=E.srcW=$.outerWidth(),K=E.srcH=$.outerHeight(),te=E.tgtW=H.outerWidth(),J=E.tgtH=H.outerHeight(),ne=E.srcShape=r.nodeShapes[t.getNodeShape($)],V=E.tgtShape=r.nodeShapes[t.getNodeShape(H)],N=E.srcCornerRadius=$.pstyle("corner-radius").value==="auto"?"auto":$.pstyle("corner-radius").pfValue,ee=E.tgtCornerRadius=H.pstyle("corner-radius").value==="auto"?"auto":H.pstyle("corner-radius").pfValue,U=E.tgtRs=H._private.rscratch,X=E.srcRs=$._private.rscratch;E.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var M=0;M<E.eles.length;M++){var q=E.eles[M],Q=q[0]._private.rscratch,se=q.pstyle("curve-style").value,Z=se==="unbundled-bezier"||En(se,"segments")||En(se,"taxi"),Y=!$.same(q.source());if(!E.calculatedIntersection&&$!==H&&(E.hasBezier||E.hasUnbundled)){E.calculatedIntersection=!0;var ae=ne.intersectLine(I.x,I.y,z,K,P.x,P.y,0,N,X),he=E.srcIntn=ae,ce=V.intersectLine(P.x,P.y,te,J,I.x,I.y,0,ee,U),ue=E.tgtIntn=ce,ye=E.intersectionPts={x1:ae[0],x2:ce[0],y1:ae[1],y2:ce[1]},ve=E.posPts={x1:I.x,x2:P.x,y1:I.y,y2:P.y},_e=ce[1]-ae[1],Ce=ce[0]-ae[0],ke=Math.sqrt(Ce*Ce+_e*_e);xe(ke)&&ke>=vR||(ke=Math.sqrt(Math.max(Ce*Ce,il)+Math.max(_e*_e,il)));var Me=E.vector={x:Ce,y:_e},Ae=E.vectorNorm={x:Me.x/ke,y:Me.y/ke},We={x:-Ae.y,y:Ae.x};E.nodesOverlap=!xe(ke)||V.checkPoint(ae[0],ae[1],0,te,J,P.x,P.y,ee,U)||ne.checkPoint(ce[0],ce[1],0,z,K,I.x,I.y,N,X),E.vectorNormInverse=We,R={nodesOverlap:E.nodesOverlap,dirCounts:E.dirCounts,calculatedIntersection:!0,hasBezier:E.hasBezier,hasUnbundled:E.hasUnbundled,eles:E.eles,srcPos:P,srcRs:U,tgtPos:I,tgtRs:X,srcW:te,srcH:J,tgtW:z,tgtH:K,srcIntn:ue,tgtIntn:he,srcShape:V,tgtShape:ne,posPts:{x1:ve.x2,y1:ve.y2,x2:ve.x1,y2:ve.y1},intersectionPts:{x1:ye.x2,y1:ye.y2,x2:ye.x1,y2:ye.y1},vector:{x:-Me.x,y:-Me.y},vectorNorm:{x:-Ae.x,y:-Ae.y},vectorNormInverse:{x:-We.x,y:-We.y}}}var Ee=Y?R:E;Q.nodesOverlap=Ee.nodesOverlap,Q.srcIntn=Ee.srcIntn,Q.tgtIntn=Ee.tgtIntn,Q.isRound=se.startsWith("round"),n&&($.isParent()||$.isChild()||H.isParent()||H.isChild())&&($.parents().anySame(H)||H.parents().anySame($)||$.same(H)&&$.isParent())?t.findCompoundLoopPoints(q,Ee,M,Z):$===H?t.findLoopPoints(q,Ee,M,Z):se.endsWith("segments")?t.findSegmentsPoints(q,Ee):se.endsWith("taxi")?t.findTaxiPoints(q,Ee):se==="straight"||!Z&&E.eles.length%2===1&&M===Math.floor(E.eles.length/2)?t.findStraightEdgePoints(q):t.findBezierPoints(q,Ee,M,Z,Y),t.findEndpoints(q),t.tryToCorrectInvalidPoints(q,Ee),t.checkForInvalidEdgeWarning(q),t.storeAllpts(q),t.storeEdgeProjections(q),t.calculateArrowAngles(q),t.recalculateEdgeLabelProjections(q),t.calculateLabelAngles(q)}},k=0;k<o.length;k++)S();this.findHaystackPoints(l)}};function hw(e){var t=[];if(e!=null){for(var r=0;r<e.length;r+=2){var i=e[r],n=e[r+1];t.push({x:i,y:n})}return t}}kr.getSegmentPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="segments")return hw(t.segpts)};kr.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if(r==="bezier"||r==="multibezier"||r==="self"||r==="compound")return hw(t.ctrlpts)};kr.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var xl={};xl.manualEndptToPx=function(e,t){var r=this,i=e.position(),n=e.outerWidth(),s=e.outerHeight(),a=e._private.rscratch;if(t.value.length===2){var o=[t.pfValue[0],t.pfValue[1]];return t.units[0]==="%"&&(o[0]=o[0]*n),t.units[1]==="%"&&(o[1]=o[1]*s),o[0]+=i.x,o[1]+=i.y,o}else{var l=t.pfValue[0];l=-Math.PI/2+l;var c=2*Math.max(n,s),u=[i.x+Math.cos(l)*c,i.y+Math.sin(l)*c];return r.nodeShapes[this.getNodeShape(e)].intersectLine(i.x,i.y,n,s,u[0],u[1],0,e.pstyle("corner-radius").value==="auto"?"auto":e.pstyle("corner-radius").pfValue,a)}};xl.findEndpoints=function(e){var t,r,i,n,s=this,a,o=e.source()[0],l=e.target()[0],c=o.position(),u=l.position(),h=e.pstyle("target-arrow-shape").value,d=e.pstyle("source-arrow-shape").value,p=e.pstyle("target-distance-from-node").pfValue,y=e.pstyle("source-distance-from-node").pfValue,_=o._private.rscratch,v=l._private.rscratch,g=e.pstyle("curve-style").value,f=e._private.rscratch,m=f.edgeType,b=En(g,"taxi"),C=m==="self"||m==="compound",S=m==="bezier"||m==="multibezier"||C,k=m!=="bezier",w=m==="straight"||m==="segments",x=m==="segments",A=S||k||w,D=C||b,T=e.pstyle("source-endpoint"),E=D?"outside-to-node":T.value,R=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,F=e.pstyle("target-endpoint"),O=D?"outside-to-node":F.value,$=l.pstyle("corner-radius").value==="auto"?"auto":l.pstyle("corner-radius").pfValue;f.srcManEndpt=T,f.tgtManEndpt=F;var H,L,I,P,z=(t=(F==null||(r=F.pfValue)===null||r===void 0?void 0:r.length)===2?F.pfValue:null)!==null&&t!==void 0?t:[0,0],K=(i=(T==null||(n=T.pfValue)===null||n===void 0?void 0:n.length)===2?T.pfValue:null)!==null&&i!==void 0?i:[0,0];if(S){var te=[f.ctrlpts[0],f.ctrlpts[1]],J=k?[f.ctrlpts[f.ctrlpts.length-2],f.ctrlpts[f.ctrlpts.length-1]]:te;H=J,L=te}else if(w){var ne=x?f.segpts.slice(0,2):[u.x+z[0],u.y+z[1]],V=x?f.segpts.slice(f.segpts.length-2):[c.x+K[0],c.y+K[1]];H=V,L=ne}if(O==="inside-to-node")a=[u.x,u.y];else if(F.units)a=this.manualEndptToPx(l,F);else if(O==="outside-to-line")a=f.tgtIntn;else if(O==="outside-to-node"||O==="outside-to-node-or-label"?I=H:(O==="outside-to-line"||O==="outside-to-line-or-label")&&(I=[c.x,c.y]),a=s.nodeShapes[this.getNodeShape(l)].intersectLine(u.x,u.y,l.outerWidth(),l.outerHeight(),I[0],I[1],0,$,v),O==="outside-to-node-or-label"||O==="outside-to-line-or-label"){var N=l._private.rscratch,ee=N.labelWidth,U=N.labelHeight,X=N.labelX,M=N.labelY,q=ee/2,Q=U/2,se=l.pstyle("text-valign").value;se==="top"?M-=Q:se==="bottom"&&(M+=Q);var Z=l.pstyle("text-halign").value;Z==="left"?X-=q:Z==="right"&&(X+=q);var Y=Qo(I[0],I[1],[X-q,M-Q,X+q,M-Q,X+q,M+Q,X-q,M+Q],u.x,u.y);if(Y.length>0){var ae=c,he=ds(ae,sa(a)),ce=ds(ae,sa(Y)),ue=he;if(ce<he&&(a=Y,ue=ce),Y.length>2){var ye=ds(ae,{x:Y[2],y:Y[3]});ye<ue&&(a=[Y[2],Y[3]])}}}var ve=jl(a,H,s.arrowShapes[h].spacing(e)+p),_e=jl(a,H,s.arrowShapes[h].gap(e)+p);if(f.endX=_e[0],f.endY=_e[1],f.arrowEndX=ve[0],f.arrowEndY=ve[1],E==="inside-to-node")a=[c.x,c.y];else if(T.units)a=this.manualEndptToPx(o,T);else if(E==="outside-to-line")a=f.srcIntn;else if(E==="outside-to-node"||E==="outside-to-node-or-label"?P=L:(E==="outside-to-line"||E==="outside-to-line-or-label")&&(P=[u.x,u.y]),a=s.nodeShapes[this.getNodeShape(o)].intersectLine(c.x,c.y,o.outerWidth(),o.outerHeight(),P[0],P[1],0,R,_),E==="outside-to-node-or-label"||E==="outside-to-line-or-label"){var Ce=o._private.rscratch,ke=Ce.labelWidth,Me=Ce.labelHeight,Ae=Ce.labelX,We=Ce.labelY,Ee=ke/2,Se=Me/2,de=o.pstyle("text-valign").value;de==="top"?We-=Se:de==="bottom"&&(We+=Se);var W=o.pstyle("text-halign").value;W==="left"?Ae-=Ee:W==="right"&&(Ae+=Ee);var oe=Qo(P[0],P[1],[Ae-Ee,We-Se,Ae+Ee,We-Se,Ae+Ee,We+Se,Ae-Ee,We+Se],c.x,c.y);if(oe.length>0){var fe=u,pe=ds(fe,sa(a)),ge=ds(fe,sa(oe)),De=pe;if(ge<pe&&(a=[oe[0],oe[1]],De=ge),oe.length>2){var be=ds(fe,{x:oe[2],y:oe[3]});be<De&&(a=[oe[2],oe[3]])}}}var Ne=jl(a,L,s.arrowShapes[d].spacing(e)+y),Re=jl(a,L,s.arrowShapes[d].gap(e)+y);f.startX=Re[0],f.startY=Re[1],f.arrowStartX=Ne[0],f.arrowStartY=Ne[1],A&&(!xe(f.startX)||!xe(f.startY)||!xe(f.endX)||!xe(f.endY)?f.badLine=!0:f.badLine=!1)};xl.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[0],y:t.haystackPts[1]};default:return{x:t.arrowStartX,y:t.arrowStartY}}};xl.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;switch(this.recalculateRenderedStyle(e),t.edgeType){case"haystack":return{x:t.haystackPts[2],y:t.haystackPts[3]};default:return{x:t.arrowEndX,y:t.arrowEndY}}};var zv={};function gR(e,t,r){for(var i=function(c,u,h,d){return ir(c,u,h,d)},n=t._private,s=n.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var o=e.bezierProjPcts[a];s.push({x:i(r[0],r[2],r[4],o),y:i(r[1],r[3],r[5],o)})}}zv.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,i=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,i==="multibezier"||i==="bezier"||i==="self"||i==="compound"){t.rstyle.bezierPts=[];for(var n=0;n+5<r.allpts.length;n+=4)gR(this,e,r.allpts.slice(n,n+6))}else if(i==="segments")for(var s=t.rstyle.linePts=[],n=0;n+1<r.allpts.length;n+=2)s.push({x:r.allpts[n],y:r.allpts[n+1]});else if(i==="haystack"){var a=r.haystackPts;t.rstyle.haystackPts=[{x:a[0],y:a[1]},{x:a[2],y:a[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth};zv.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var Hi={};Hi.recalculateNodeLabelProjection=function(e){var t=e.pstyle("label").strValue;if(!$n(t)){var r,i,n=e._private,s=e.width(),a=e.height(),o=e.padding(),l=e.position(),c=e.pstyle("text-halign").strValue,u=e.pstyle("text-valign").strValue,h=n.rscratch,d=n.rstyle;switch(c){case"left":r=l.x-s/2-o;break;case"right":r=l.x+s/2+o;break;default:r=l.x}switch(u){case"top":i=l.y-a/2-o;break;case"bottom":i=l.y+a/2+o;break;default:i=l.y}h.labelX=r,h.labelY=i,d.labelX=r,d.labelY=i,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var dw=function(t,r){var i=Math.atan(r/t);return t===0&&i<0&&(i=i*-1),i},fw=function(t,r){var i=r.x-t.x,n=r.y-t.y;return dw(i,n)},mR=function(t,r,i,n){var s=Zo(0,n-.001,1),a=Zo(0,n+.001,1),o=ma(t,r,i,s),l=ma(t,r,i,a);return fw(o,l)};Hi.recalculateEdgeLabelProjections=function(e){var t,r=e._private,i=r.rscratch,n=this,s={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(s.mid||s.source||s.target){t={x:i.midX,y:i.midY};var a=function(h,d,p){Ji(r.rscratch,h,d,p),Ji(r.rstyle,h,d,p)};a("labelX",null,t.x),a("labelY",null,t.y);var o=dw(i.midDispX,i.midDispY);a("labelAutoAngle",null,o);var l=function(){if(l.cache)return l.cache;for(var h=[],d=0;d+5<i.allpts.length;d+=4){var p={x:i.allpts[d],y:i.allpts[d+1]},y={x:i.allpts[d+2],y:i.allpts[d+3]},_={x:i.allpts[d+4],y:i.allpts[d+5]};h.push({p0:p,p1:y,p2:_,startDist:0,length:0,segments:[]})}var v=r.rstyle.bezierPts,g=n.bezierProjPcts.length;function f(k,w,x,A,D){var T=Es(w,x),E=k.segments[k.segments.length-1],R={p0:w,p1:x,t0:A,t1:D,startDist:E?E.startDist+E.length:0,length:T};k.segments.push(R),k.length+=T}for(var m=0;m<h.length;m++){var b=h[m],C=h[m-1];C&&(b.startDist=C.startDist+C.length),f(b,b.p0,v[m*g],0,n.bezierProjPcts[0]);for(var S=0;S<g-1;S++)f(b,v[m*g+S],v[m*g+S+1],n.bezierProjPcts[S],n.bezierProjPcts[S+1]);f(b,v[m*g+g-1],b.p2,n.bezierProjPcts[g-1],1)}return l.cache=h},c=function(h){var d,p=h==="source";if(s[h]){var y=e.pstyle(h+"-text-offset").pfValue;switch(i.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var _=l(),v,g=0,f=0,m=0;m<_.length;m++){for(var b=_[p?m:_.length-1-m],C=0;C<b.segments.length;C++){var S=b.segments[p?C:b.segments.length-1-C],k=m===_.length-1&&C===b.segments.length-1;if(g=f,f+=S.length,f>=y||k){v={cp:b,segment:S};break}}if(v)break}var w=v.cp,x=v.segment,A=(y-g)/x.length,D=x.t1-x.t0,T=p?x.t0+D*A:x.t1-D*A;T=Zo(0,T,1),t=ma(w.p0,w.p1,w.p2,T),d=mR(w.p0,w.p1,w.p2,T);break}case"straight":case"segments":case"haystack":{for(var E=0,R,F,O,$,H=i.allpts.length,L=0;L+3<H&&(p?(O={x:i.allpts[L],y:i.allpts[L+1]},$={x:i.allpts[L+2],y:i.allpts[L+3]}):(O={x:i.allpts[H-2-L],y:i.allpts[H-1-L]},$={x:i.allpts[H-4-L],y:i.allpts[H-3-L]}),R=Es(O,$),F=E,E+=R,!(E>=y));L+=2);var I=y-F,P=I/R;P=Zo(0,P,1),t=$A(O,$,P),d=fw(O,$);break}}a("labelX",h,t.x),a("labelY",h,t.y),a("labelAutoAngle",h,d)}};c("source"),c("target"),this.applyLabelDimensions(e)}};Hi.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))};Hi.applyPrefixedLabelDimensions=function(e,t){var r=e._private,i=this.getLabelText(e,t),n=Ts(i,e._private.labelDimsKey);if(Or(r.rscratch,"prefixedLabelDimsKey",t)!==n){Ji(r.rscratch,"prefixedLabelDimsKey",t,n);var s=this.calculateLabelDimensions(e,i),a=e.pstyle("line-height").pfValue,o=e.pstyle("text-wrap").strValue,l=Or(r.rscratch,"labelWrapCachedLines",t)||[],c=o!=="wrap"?1:Math.max(l.length,1),u=s.height/c,h=u*a,d=s.width,p=s.height+(c-1)*(a-1)*u;Ji(r.rstyle,"labelWidth",t,d),Ji(r.rscratch,"labelWidth",t,d),Ji(r.rstyle,"labelHeight",t,p),Ji(r.rscratch,"labelHeight",t,p),Ji(r.rscratch,"labelLineHeight",t,h)}};Hi.getLabelText=function(e,t){var r=e._private,i=t?t+"-":"",n=e.pstyle(i+"label").strValue,s=e.pstyle("text-transform").value,a=function(K,te){return te?(Ji(r.rscratch,K,t,te),te):Or(r.rscratch,K,t)};if(!n)return"";s=="none"||(s=="uppercase"?n=n.toUpperCase():s=="lowercase"&&(n=n.toLowerCase()));var o=e.pstyle("text-wrap").value;if(o==="wrap"){var l=a("labelKey");if(l!=null&&a("labelWrapKey")===l)return a("labelWrapCachedText");for(var c="",u=n.split(`
`),h=e.pstyle("text-max-width").pfValue,d=e.pstyle("text-overflow-wrap").value,p=d==="anywhere",y=[],_=/[\s\u200b]+|$/g,v=0;v<u.length;v++){var g=u[v],f=this.calculateLabelDimensions(e,g),m=f.width;if(p){var b=g.split("").join(c);g=b}if(m>h){var C=g.matchAll(_),S="",k=0,w=zr(C),x;try{for(w.s();!(x=w.n()).done;){var A=x.value,D=A[0],T=g.substring(k,A.index);k=A.index+D.length;var E=S.length===0?T:S+T+D,R=this.calculateLabelDimensions(e,E),F=R.width;F<=h?S+=T+D:(S&&y.push(S),S=T+D)}}catch(z){w.e(z)}finally{w.f()}S.match(/^[\s\u200b]+$/)||y.push(S)}else y.push(g)}a("labelWrapCachedLines",y),n=a("labelWrapCachedText",y.join(`
`)),a("labelWrapKey",l)}else if(o==="ellipsis"){var O=e.pstyle("text-max-width").pfValue,$="",H="",L=!1;if(this.calculateLabelDimensions(e,n).width<O)return n;for(var I=0;I<n.length;I++){var P=this.calculateLabelDimensions(e,$+n[I]+H).width;if(P>O)break;$+=n[I],I===n.length-1&&(L=!0)}return L||($+=H),$}return n};Hi.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if(t==="auto")if(e.isNode())switch(r){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return t};Hi.calculateLabelDimensions=function(e,t){var r=this,i=r.cy.window(),n=i.document,s=0,a=e.pstyle("font-style").strValue,o=e.pstyle("font-size").pfValue,l=e.pstyle("font-family").strValue,c=e.pstyle("font-weight").strValue,u=this.labelCalcCanvas,h=this.labelCalcCanvasContext;if(!u){u=this.labelCalcCanvas=n.createElement("canvas"),h=this.labelCalcCanvasContext=u.getContext("2d");var d=u.style;d.position="absolute",d.left="-9999px",d.top="-9999px",d.zIndex="-1",d.visibility="hidden",d.pointerEvents="none"}h.font="".concat(a," ").concat(c," ").concat(o,"px ").concat(l);for(var p=0,y=0,_=t.split(`
`),v=0;v<_.length;v++){var g=_[v],f=h.measureText(g),m=Math.ceil(f.width),b=o;p=Math.max(m,p),y+=b}return p+=s,y+=s,{width:p,height:y}};Hi.calculateLabelAngle=function(e,t){var r=e._private,i=r.rscratch,n=e.isEdge(),s=t?t+"-":"",a=e.pstyle(s+"text-rotation"),o=a.strValue;return o==="none"?0:n&&o==="autorotate"?i.labelAutoAngle:o==="autorotate"?0:a.pfValue};Hi.calculateLabelAngles=function(e){var t=this,r=e.isEdge(),i=e._private,n=i.rscratch;n.labelAngle=t.calculateLabelAngle(e),r&&(n.sourceLabelAngle=t.calculateLabelAngle(e,"source"),n.targetLabelAngle=t.calculateLabelAngle(e,"target"))};var pw={},N0=28,$0=!1;pw.getNodeShape=function(e){var t=this,r=e.pstyle("shape").value;if(r==="cutrectangle"&&(e.width()<N0||e.height()<N0))return $0||(mt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),$0=!0),"rectangle";if(e.isParent())return r==="rectangle"||r==="roundrectangle"||r==="round-rectangle"||r==="cutrectangle"||r==="cut-rectangle"||r==="barrel"?r:"rectangle";if(r==="polygon"){var i=e.pstyle("shape-polygon-points").value;return t.nodeShapes.makePolygon(i).name}return r};var ph={};ph.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),r=this,i=function(a){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(t.merge(a),o)for(var l=0;l<a.length;l++){var c=a[l],u=c._private,h=u.rstyle;h.clean=!1,h.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(a){var o=a.target;i(o)}).on("style.* background.*",function(a){var o=a.target;i(o,!1)});var n=function(a){if(a){var o=r.onUpdateEleCalcsFns;t.cleanStyle();for(var l=0;l<t.length;l++){var c=t[l],u=c._private.rstyle;c.isNode()&&!u.cleanConnected&&(i(c.connectedEdges()),u.cleanConnected=!0)}if(o)for(var h=0;h<o.length;h++){var d=o[h];d(a,t)}r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){n(!0)},r.beforeRender(n,r.beforeRenderPriorities.eleCalcs)};ph.onUpdateEleCalcs=function(e){var t=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];t.push(e)};ph.recalculateRenderedStyle=function(e,t){var r=function(b){return b._private.rstyle.cleanConnected};if(e.length!==0){var i=[],n=[];if(!this.destroyed){t===void 0&&(t=!0);for(var s=0;s<e.length;s++){var a=e[s],o=a._private,l=o.rstyle;a.isEdge()&&(!r(a.source())||!r(a.target()))&&(l.clean=!1),a.isEdge()&&a.isBundledBezier()&&a.parallelEdges().some(function(m){return!m._private.rstyle.clean&&m.isBundledBezier()})&&(l.clean=!1),!(t&&l.clean||a.removed())&&a.pstyle("display").value!=="none"&&(o.group==="nodes"?n.push(a):i.push(a),l.clean=!0)}for(var c=0;c<n.length;c++){var u=n[c],h=u._private,d=h.rstyle,p=u.position();this.recalculateNodeLabelProjection(u),d.nodeX=p.x,d.nodeY=p.y,d.nodeW=u.pstyle("width").pfValue,d.nodeH=u.pstyle("height").pfValue}this.recalculateEdgeProjections(i);for(var y=0;y<i.length;y++){var _=i[y],v=_._private,g=v.rstyle,f=v.rscratch;g.srcX=f.arrowStartX,g.srcY=f.arrowStartY,g.tgtX=f.arrowEndX,g.tgtY=f.arrowEndY,g.midX=f.midX,g.midY=f.midY,g.labelAngle=f.labelAngle,g.sourceLabelAngle=f.sourceLabelAngle,g.targetLabelAngle=f.targetLabelAngle}}}};var vh={};vh.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var i=e[r],n=i._private.rscratch;i.grabbed()&&!i.isParent()?t.push(i):n.inDragLayer?e.drag.push(i):e.nondrag.push(i)}for(var r=0;r<t.length;r++){var i=t[r];e.drag.push(i)}}};vh.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};vh.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(YC),t.interactive=t.filter(function(r){return r.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var vw={};[Fs,cu,kr,xl,zv,Hi,pw,ph,vh].forEach(function(e){je(vw,e)});var gw={};gw.getCachedImage=function(e,t,r){var i=this,n=i.imageCache=i.imageCache||{},s=n[e];if(s)return s.image.complete||s.image.addEventListener("load",r),s.image;s=n[e]=n[e]||{};var a=s.image=new Image;a.addEventListener("load",r),a.addEventListener("error",function(){a.error=!0});var o="data:",l=e.substring(0,o.length).toLowerCase()===o;return l||(t=t==="null"?null:t,a.crossOrigin=t),a.src=e,a};var qa={};qa.registerBinding=function(e,t,r,i){var n=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var s=[],a=0;a<e.length;a++){var o=e[a];if(o!==void 0){var l=this.binder(o);s.push(l.on.apply(l,n))}}return s}var l=this.binder(e);return l.on.apply(l,n)};qa.binder=function(e){var t=this,r=t.cy.window(),i=e===r||e===r.document||e===r.document.body||B2(e);if(t.supportsPassiveEvents==null){var n=!1;try{var s=Object.defineProperty({},"passive",{get:function(){return n=!0,!0}});r.addEventListener("test",null,s)}catch{}t.supportsPassiveEvents=n}var a=function(l,c,u){var h=Array.prototype.slice.call(arguments);return i&&t.supportsPassiveEvents&&(h[2]={capture:u??!1,passive:!1,once:!1}),t.bindings.push({target:e,args:h}),(e.addEventListener||e.on).apply(e,h),this};return{on:a,addEventListener:a,addListener:a,bind:a}};qa.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()};qa.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()};qa.load=function(){var e=this,t=e.cy.window(),r=function(W){return W.selected()},i=function(W){var oe=W.getRootNode();if(oe&&oe.nodeType===11&&oe.host!==void 0)return oe},n=function(W,oe,fe,pe){W==null&&(W=e.cy);for(var ge=0;ge<oe.length;ge++){var De=oe[ge];W.emit({originalEvent:fe,type:De,position:pe})}},s=function(W){return W.shiftKey||W.metaKey||W.ctrlKey},a=function(W,oe){var fe=!0;if(e.cy.hasCompoundNodes()&&W&&W.pannable())for(var pe=0;oe&&pe<oe.length;pe++){var W=oe[pe];if(W.isNode()&&W.isParent()&&!W.pannable()){fe=!1;break}}else fe=!0;return fe},o=function(W){W[0]._private.grabbed=!0},l=function(W){W[0]._private.grabbed=!1},c=function(W){W[0]._private.rscratch.inDragLayer=!0},u=function(W){W[0]._private.rscratch.inDragLayer=!1},h=function(W){W[0]._private.rscratch.isGrabTarget=!0},d=function(W){W[0]._private.rscratch.isGrabTarget=!1},p=function(W,oe){var fe=oe.addToList,pe=fe.has(W);!pe&&W.grabbable()&&!W.locked()&&(fe.merge(W),o(W))},y=function(W,oe){if(W.cy().hasCompoundNodes()&&!(oe.inDragLayer==null&&oe.addToList==null)){var fe=W.descendants();oe.inDragLayer&&(fe.forEach(c),fe.connectedEdges().forEach(c)),oe.addToList&&p(fe,oe)}},_=function(W,oe){oe=oe||{};var fe=W.cy().hasCompoundNodes();oe.inDragLayer&&(W.forEach(c),W.neighborhood().stdFilter(function(pe){return!fe||pe.isEdge()}).forEach(c)),oe.addToList&&W.forEach(function(pe){p(pe,oe)}),y(W,oe),f(W,{inDragLayer:oe.inDragLayer}),e.updateCachedGrabbedEles()},v=_,g=function(W){W&&(e.getCachedZSortedEles().forEach(function(oe){l(oe),u(oe),d(oe)}),e.updateCachedGrabbedEles())},f=function(W,oe){if(!(oe.inDragLayer==null&&oe.addToList==null)&&W.cy().hasCompoundNodes()){var fe=W.ancestors().orphans();if(!fe.same(W)){var pe=fe.descendants().spawnSelf().merge(fe).unmerge(W).unmerge(W.descendants()),ge=pe.connectedEdges();oe.inDragLayer&&(ge.forEach(c),pe.forEach(c)),oe.addToList&&pe.forEach(function(De){p(De,oe)})}}},m=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},b=typeof MutationObserver<"u",C=typeof ResizeObserver<"u";b?(e.removeObserver=new MutationObserver(function(de){for(var W=0;W<de.length;W++){var oe=de[W],fe=oe.removedNodes;if(fe)for(var pe=0;pe<fe.length;pe++){var ge=fe[pe];if(ge===e.container){e.destroy();break}}}}),e.container.parentNode&&e.removeObserver.observe(e.container.parentNode,{childList:!0})):e.registerBinding(e.container,"DOMNodeRemoved",function(de){e.destroy()});var S=Cl(function(){e.cy.resize()},100);b&&(e.styleObserver=new MutationObserver(S),e.styleObserver.observe(e.container,{attributes:!0})),e.registerBinding(t,"resize",S),C&&(e.resizeObserver=new ResizeObserver(S),e.resizeObserver.observe(e.container));var k=function(W,oe){for(;W!=null;)oe(W),W=W.parentNode},w=function(){e.invalidateContainerClientCoordsCache()};k(e.container,function(de){e.registerBinding(de,"transitionend",w),e.registerBinding(de,"animationend",w),e.registerBinding(de,"scroll",w)}),e.registerBinding(e.container,"contextmenu",function(de){de.preventDefault()});var x=function(){return e.selection[4]!==0},A=function(W){for(var oe=e.findContainerClientCoords(),fe=oe[0],pe=oe[1],ge=oe[2],De=oe[3],be=W.touches?W.touches:[W],Ne=!1,Re=0;Re<be.length;Re++){var Be=be[Re];if(fe<=Be.clientX&&Be.clientX<=fe+ge&&pe<=Be.clientY&&Be.clientY<=pe+De){Ne=!0;break}}if(!Ne)return!1;for(var Ze=e.container,Je=W.target,Ie=Je.parentNode,et=!1;Ie;){if(Ie===Ze){et=!0;break}Ie=Ie.parentNode}return!!et};e.registerBinding(e.container,"mousedown",function(W){if(A(W)&&!(e.hoverData.which===1&&W.which!==1)){W.preventDefault(),m(),e.hoverData.capture=!0,e.hoverData.which=W.which;var oe=e.cy,fe=[W.clientX,W.clientY],pe=e.projectIntoViewport(fe[0],fe[1]),ge=e.selection,De=e.findNearestElements(pe[0],pe[1],!0,!1),be=De[0],Ne=e.dragData.possibleDragElements;e.hoverData.mdownPos=pe,e.hoverData.mdownGPos=fe;var Re=function(tt){return{originalEvent:W,type:tt,position:{x:pe[0],y:pe[1]}}},Be=function(){e.hoverData.tapholdCancelled=!1,clearTimeout(e.hoverData.tapholdTimeout),e.hoverData.tapholdTimeout=setTimeout(function(){if(!e.hoverData.tapholdCancelled){var tt=e.hoverData.down;tt?tt.emit(Re("taphold")):oe.emit(Re("taphold"))}},e.tapholdDuration)};if(W.which==3){e.hoverData.cxtStarted=!0;var Ze={originalEvent:W,type:"cxttapstart",position:{x:pe[0],y:pe[1]}};be?(be.activate(),be.emit(Ze),e.hoverData.down=be):oe.emit(Ze),e.hoverData.downTime=new Date().getTime(),e.hoverData.cxtDragged=!1}else if(W.which==1){be&&be.activate();{if(be!=null&&e.nodeIsGrabbable(be)){var Je=function(tt){tt.emit(Re("grab"))};if(h(be),!be.selected())Ne=e.dragData.possibleDragElements=oe.collection(),v(be,{addToList:Ne}),be.emit(Re("grabon")).emit(Re("grab"));else{Ne=e.dragData.possibleDragElements=oe.collection();var Ie=oe.$(function(et){return et.isNode()&&et.selected()&&e.nodeIsGrabbable(et)});_(Ie,{addToList:Ne}),be.emit(Re("grabon")),Ie.forEach(Je)}e.redrawHint("eles",!0),e.redrawHint("drag",!0)}e.hoverData.down=be,e.hoverData.downs=De,e.hoverData.downTime=new Date().getTime()}n(be,["mousedown","tapstart","vmousedown"],W,{x:pe[0],y:pe[1]}),be==null?(ge[4]=1,e.data.bgActivePosistion={x:pe[0],y:pe[1]},e.redrawHint("select",!0),e.redraw()):be.pannable()&&(ge[4]=1),Be()}ge[0]=ge[2]=pe[0],ge[1]=ge[3]=pe[1]}},!1);var D=i(e.container);e.registerBinding([t,D],"mousemove",function(W){var oe=e.hoverData.capture;if(!(!oe&&!A(W))){var fe=!1,pe=e.cy,ge=pe.zoom(),De=[W.clientX,W.clientY],be=e.projectIntoViewport(De[0],De[1]),Ne=e.hoverData.mdownPos,Re=e.hoverData.mdownGPos,Be=e.selection,Ze=null;!e.hoverData.draggingEles&&!e.hoverData.dragging&&!e.hoverData.selecting&&(Ze=e.findNearestElement(be[0],be[1],!0,!1));var Je=e.hoverData.last,Ie=e.hoverData.down,et=[be[0]-Be[2],be[1]-Be[3]],tt=e.dragData.possibleDragElements,Ot;if(Re){var Dt=De[0]-Re[0],tr=Dt*Dt,Mt=De[1]-Re[1],Ut=Mt*Mt,pt=tr+Ut;e.hoverData.isOverThresholdDrag=Ot=pt>=e.desktopTapThreshold2}var Nt=s(W);Ot&&(e.hoverData.tapholdCancelled=!0);var ui=function(){var ie=e.hoverData.dragDelta=e.hoverData.dragDelta||[];ie.length===0?(ie.push(et[0]),ie.push(et[1])):(ie[0]+=et[0],ie[1]+=et[1])};fe=!0,n(Ze,["mousemove","vmousemove","tapdrag"],W,{x:be[0],y:be[1]});var Pt=function(ie){return{originalEvent:W,type:ie,position:{x:be[0],y:be[1]}}},Xr=function(){e.data.bgActivePosistion=void 0,e.hoverData.selecting||pe.emit(Pt("boxstart")),Be[4]=1,e.hoverData.selecting=!0,e.redrawHint("select",!0),e.redraw()};if(e.hoverData.which===3){if(Ot){var Zr=Pt("cxtdrag");Ie?Ie.emit(Zr):pe.emit(Zr),e.hoverData.cxtDragged=!0,(!e.hoverData.cxtOver||Ze!==e.hoverData.cxtOver)&&(e.hoverData.cxtOver&&e.hoverData.cxtOver.emit(Pt("cxtdragout")),e.hoverData.cxtOver=Ze,Ze&&Ze.emit(Pt("cxtdragover")))}}else if(e.hoverData.dragging){if(fe=!0,pe.panningEnabled()&&pe.userPanningEnabled()){var fr;if(e.hoverData.justStartedPan){var rs=e.hoverData.mdownPos;fr={x:(be[0]-rs[0])*ge,y:(be[1]-rs[1])*ge},e.hoverData.justStartedPan=!1}else fr={x:et[0]*ge,y:et[1]*ge};pe.panBy(fr),pe.emit(Pt("dragpan")),e.hoverData.dragged=!0}be=e.projectIntoViewport(W.clientX,W.clientY)}else if(Be[4]==1&&(Ie==null||Ie.pannable())){if(Ot){if(!e.hoverData.dragging&&pe.boxSelectionEnabled()&&(Nt||!pe.panningEnabled()||!pe.userPanningEnabled()))Xr();else if(!e.hoverData.selecting&&pe.panningEnabled()&&pe.userPanningEnabled()){var Si=a(Ie,e.hoverData.downs);Si&&(e.hoverData.dragging=!0,e.hoverData.justStartedPan=!0,Be[4]=0,e.data.bgActivePosistion=sa(Ne),e.redrawHint("select",!0),e.redraw())}Ie&&Ie.pannable()&&Ie.active()&&Ie.unactivate()}}else{if(Ie&&Ie.pannable()&&Ie.active()&&Ie.unactivate(),(!Ie||!Ie.grabbed())&&Ze!=Je&&(Je&&n(Je,["mouseout","tapdragout"],W,{x:be[0],y:be[1]}),Ze&&n(Ze,["mouseover","tapdragover"],W,{x:be[0],y:be[1]}),e.hoverData.last=Ze),Ie)if(Ot){if(pe.boxSelectionEnabled()&&Nt)Ie&&Ie.grabbed()&&(g(tt),Ie.emit(Pt("freeon")),tt.emit(Pt("free")),e.dragData.didDrag&&(Ie.emit(Pt("dragfreeon")),tt.emit(Pt("dragfree")))),Xr();else if(Ie&&Ie.grabbed()&&e.nodeIsDraggable(Ie)){var ar=!e.dragData.didDrag;ar&&e.redrawHint("eles",!0),e.dragData.didDrag=!0,e.hoverData.draggingEles||_(tt,{inDragLayer:!0});var Yt={x:0,y:0};if(xe(et[0])&&xe(et[1])&&(Yt.x+=et[0],Yt.y+=et[1],ar)){var pr=e.hoverData.dragDelta;pr&&xe(pr[0])&&xe(pr[1])&&(Yt.x+=pr[0],Yt.y+=pr[1])}e.hoverData.draggingEles=!0,tt.silentShift(Yt).emit(Pt("position")).emit(Pt("drag")),e.redrawHint("drag",!0),e.redraw()}}else ui();fe=!0}if(Be[2]=be[0],Be[3]=be[1],fe)return W.stopPropagation&&W.stopPropagation(),W.preventDefault&&W.preventDefault(),!1}},!1);var T,E,R;e.registerBinding(t,"mouseup",function(W){if(!(e.hoverData.which===1&&W.which!==1&&e.hoverData.capture)){var oe=e.hoverData.capture;if(oe){e.hoverData.capture=!1;var fe=e.cy,pe=e.projectIntoViewport(W.clientX,W.clientY),ge=e.selection,De=e.findNearestElement(pe[0],pe[1],!0,!1),be=e.dragData.possibleDragElements,Ne=e.hoverData.down,Re=s(W);e.data.bgActivePosistion&&(e.redrawHint("select",!0),e.redraw()),e.hoverData.tapholdCancelled=!0,e.data.bgActivePosistion=void 0,Ne&&Ne.unactivate();var Be=function(Dt){return{originalEvent:W,type:Dt,position:{x:pe[0],y:pe[1]}}};if(e.hoverData.which===3){var Ze=Be("cxttapend");if(Ne?Ne.emit(Ze):fe.emit(Ze),!e.hoverData.cxtDragged){var Je=Be("cxttap");Ne?Ne.emit(Je):fe.emit(Je)}e.hoverData.cxtDragged=!1,e.hoverData.which=null}else if(e.hoverData.which===1){if(n(De,["mouseup","tapend","vmouseup"],W,{x:pe[0],y:pe[1]}),!e.dragData.didDrag&&!e.hoverData.dragged&&!e.hoverData.selecting&&!e.hoverData.isOverThresholdDrag&&(n(Ne,["click","tap","vclick"],W,{x:pe[0],y:pe[1]}),E=!1,W.timeStamp-R<=fe.multiClickDebounceTime()?(T&&clearTimeout(T),E=!0,R=null,n(Ne,["dblclick","dbltap","vdblclick"],W,{x:pe[0],y:pe[1]})):(T=setTimeout(function(){E||n(Ne,["oneclick","onetap","voneclick"],W,{x:pe[0],y:pe[1]})},fe.multiClickDebounceTime()),R=W.timeStamp)),Ne==null&&!e.dragData.didDrag&&!e.hoverData.selecting&&!e.hoverData.dragged&&!s(W)&&(fe.$(r).unselect(["tapunselect"]),be.length>0&&e.redrawHint("eles",!0),e.dragData.possibleDragElements=be=fe.collection()),De==Ne&&!e.dragData.didDrag&&!e.hoverData.selecting&&De!=null&&De._private.selectable&&(e.hoverData.dragging||(fe.selectionType()==="additive"||Re?De.selected()?De.unselect(["tapunselect"]):De.select(["tapselect"]):Re||(fe.$(r).unmerge(De).unselect(["tapunselect"]),De.select(["tapselect"]))),e.redrawHint("eles",!0)),e.hoverData.selecting){var Ie=fe.collection(e.getAllInBox(ge[0],ge[1],ge[2],ge[3]));e.redrawHint("select",!0),Ie.length>0&&e.redrawHint("eles",!0),fe.emit(Be("boxend"));var et=function(Dt){return Dt.selectable()&&!Dt.selected()};fe.selectionType()==="additive"||Re||fe.$(r).unmerge(Ie).unselect(),Ie.emit(Be("box")).stdFilter(et).select().emit(Be("boxselect")),e.redraw()}if(e.hoverData.dragging&&(e.hoverData.dragging=!1,e.redrawHint("select",!0),e.redrawHint("eles",!0),e.redraw()),!ge[4]){e.redrawHint("drag",!0),e.redrawHint("eles",!0);var tt=Ne&&Ne.grabbed();g(be),tt&&(Ne.emit(Be("freeon")),be.emit(Be("free")),e.dragData.didDrag&&(Ne.emit(Be("dragfreeon")),be.emit(Be("dragfree"))))}}ge[4]=0,e.hoverData.down=null,e.hoverData.cxtStarted=!1,e.hoverData.draggingEles=!1,e.hoverData.selecting=!1,e.hoverData.isOverThresholdDrag=!1,e.dragData.didDrag=!1,e.hoverData.dragged=!1,e.hoverData.dragDelta=[],e.hoverData.mdownPos=null,e.hoverData.mdownGPos=null,e.hoverData.which=null}}},!1);var F=[],O=4,$,H=1e5,L=function(W,oe){for(var fe=0;fe<W.length;fe++)if(W[fe]%oe!==0)return!1;return!0},I=function(W){for(var oe=Math.abs(W[0]),fe=1;fe<W.length;fe++)if(Math.abs(W[fe])!==oe)return!1;return!0},P=function(W){var oe=!1,fe=W.deltaY;if(fe==null&&(W.wheelDeltaY!=null?fe=W.wheelDeltaY/4:W.wheelDelta!=null&&(fe=W.wheelDelta/4)),fe!==0){if($==null)if(F.length>=O){var pe=F;if($=L(pe,5),!$){var ge=Math.abs(pe[0]);$=I(pe)&&ge>5}if($)for(var De=0;De<pe.length;De++)H=Math.min(Math.abs(pe[De]),H)}else F.push(fe),oe=!0;else $&&(H=Math.min(Math.abs(fe),H));if(!e.scrollingPage){var be=e.cy,Ne=be.zoom(),Re=be.pan(),Be=e.projectIntoViewport(W.clientX,W.clientY),Ze=[Be[0]*Ne+Re.x,Be[1]*Ne+Re.y];if(e.hoverData.draggingEles||e.hoverData.dragging||e.hoverData.cxtStarted||x()){W.preventDefault();return}if(be.panningEnabled()&&be.userPanningEnabled()&&be.zoomingEnabled()&&be.userZoomingEnabled()){W.preventDefault(),e.data.wheelZooming=!0,clearTimeout(e.data.wheelTimeout),e.data.wheelTimeout=setTimeout(function(){e.data.wheelZooming=!1,e.redrawHint("eles",!0),e.redraw()},150);var Je;oe&&Math.abs(fe)>5&&(fe=Tv(fe)*5),Je=fe/-250,$&&(Je/=H,Je*=3),Je=Je*e.wheelSensitivity;var Ie=W.deltaMode===1;Ie&&(Je*=33);var et=be.zoom()*Math.pow(10,Je);W.type==="gesturechange"&&(et=e.gestureStartZoom*W.scale),be.zoom({level:et,renderedPosition:{x:Ze[0],y:Ze[1]}}),be.emit({type:W.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:W,position:{x:Be[0],y:Be[1]}})}}}};e.registerBinding(e.container,"wheel",P,!0),e.registerBinding(t,"scroll",function(W){e.scrollingPage=!0,clearTimeout(e.scrollingPageTimeout),e.scrollingPageTimeout=setTimeout(function(){e.scrollingPage=!1},250)},!0),e.registerBinding(e.container,"gesturestart",function(W){e.gestureStartZoom=e.cy.zoom(),e.hasTouchStarted||W.preventDefault()},!0),e.registerBinding(e.container,"gesturechange",function(de){e.hasTouchStarted||P(de)},!0),e.registerBinding(e.container,"mouseout",function(W){var oe=e.projectIntoViewport(W.clientX,W.clientY);e.cy.emit({originalEvent:W,type:"mouseout",position:{x:oe[0],y:oe[1]}})},!1),e.registerBinding(e.container,"mouseover",function(W){var oe=e.projectIntoViewport(W.clientX,W.clientY);e.cy.emit({originalEvent:W,type:"mouseover",position:{x:oe[0],y:oe[1]}})},!1);var z,K,te,J,ne,V,N,ee,U,X,M,q,Q,se=function(W,oe,fe,pe){return Math.sqrt((fe-W)*(fe-W)+(pe-oe)*(pe-oe))},Z=function(W,oe,fe,pe){return(fe-W)*(fe-W)+(pe-oe)*(pe-oe)},Y;e.registerBinding(e.container,"touchstart",Y=function(W){if(e.hasTouchStarted=!0,!!A(W)){m(),e.touchData.capture=!0,e.data.bgActivePosistion=void 0;var oe=e.cy,fe=e.touchData.now,pe=e.touchData.earlier;if(W.touches[0]){var ge=e.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);fe[0]=ge[0],fe[1]=ge[1]}if(W.touches[1]){var ge=e.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);fe[2]=ge[0],fe[3]=ge[1]}if(W.touches[2]){var ge=e.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);fe[4]=ge[0],fe[5]=ge[1]}var De=function(Nt){return{originalEvent:W,type:Nt,position:{x:fe[0],y:fe[1]}}};if(W.touches[1]){e.touchData.singleTouchMoved=!0,g(e.dragData.touchDragEles);var be=e.findContainerClientCoords();U=be[0],X=be[1],M=be[2],q=be[3],z=W.touches[0].clientX-U,K=W.touches[0].clientY-X,te=W.touches[1].clientX-U,J=W.touches[1].clientY-X,Q=0<=z&&z<=M&&0<=te&&te<=M&&0<=K&&K<=q&&0<=J&&J<=q;var Ne=oe.pan(),Re=oe.zoom();ne=se(z,K,te,J),V=Z(z,K,te,J),N=[(z+te)/2,(K+J)/2],ee=[(N[0]-Ne.x)/Re,(N[1]-Ne.y)/Re];var Be=200,Ze=Be*Be;if(V<Ze&&!W.touches[2]){var Je=e.findNearestElement(fe[0],fe[1],!0,!0),Ie=e.findNearestElement(fe[2],fe[3],!0,!0);Je&&Je.isNode()?(Je.activate().emit(De("cxttapstart")),e.touchData.start=Je):Ie&&Ie.isNode()?(Ie.activate().emit(De("cxttapstart")),e.touchData.start=Ie):oe.emit(De("cxttapstart")),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!0,e.touchData.cxtDragged=!1,e.data.bgActivePosistion=void 0,e.redraw();return}}if(W.touches[2])oe.boxSelectionEnabled()&&W.preventDefault();else if(!W.touches[1]){if(W.touches[0]){var et=e.findNearestElements(fe[0],fe[1],!0,!0),tt=et[0];if(tt!=null&&(tt.activate(),e.touchData.start=tt,e.touchData.starts=et,e.nodeIsGrabbable(tt))){var Ot=e.dragData.touchDragEles=oe.collection(),Dt=null;e.redrawHint("eles",!0),e.redrawHint("drag",!0),tt.selected()?(Dt=oe.$(function(pt){return pt.selected()&&e.nodeIsGrabbable(pt)}),_(Dt,{addToList:Ot})):v(tt,{addToList:Ot}),h(tt),tt.emit(De("grabon")),Dt?Dt.forEach(function(pt){pt.emit(De("grab"))}):tt.emit(De("grab"))}n(tt,["touchstart","tapstart","vmousedown"],W,{x:fe[0],y:fe[1]}),tt==null&&(e.data.bgActivePosistion={x:ge[0],y:ge[1]},e.redrawHint("select",!0),e.redraw()),e.touchData.singleTouchMoved=!1,e.touchData.singleTouchStartTime=+new Date,clearTimeout(e.touchData.tapholdTimeout),e.touchData.tapholdTimeout=setTimeout(function(){e.touchData.singleTouchMoved===!1&&!e.pinching&&!e.touchData.selecting&&n(e.touchData.start,["taphold"],W,{x:fe[0],y:fe[1]})},e.tapholdDuration)}}if(W.touches.length>=1){for(var tr=e.touchData.startPosition=[null,null,null,null,null,null],Mt=0;Mt<fe.length;Mt++)tr[Mt]=pe[Mt]=fe[Mt];var Ut=W.touches[0];e.touchData.startGPosition=[Ut.clientX,Ut.clientY]}}},!1);var ae;e.registerBinding(t,"touchmove",ae=function(W){var oe=e.touchData.capture;if(!(!oe&&!A(W))){var fe=e.selection,pe=e.cy,ge=e.touchData.now,De=e.touchData.earlier,be=pe.zoom();if(W.touches[0]){var Ne=e.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);ge[0]=Ne[0],ge[1]=Ne[1]}if(W.touches[1]){var Ne=e.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);ge[2]=Ne[0],ge[3]=Ne[1]}if(W.touches[2]){var Ne=e.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);ge[4]=Ne[0],ge[5]=Ne[1]}var Re=function(Lx){return{originalEvent:W,type:Lx,position:{x:ge[0],y:ge[1]}}},Be=e.touchData.startGPosition,Ze;if(oe&&W.touches[0]&&Be){for(var Je=[],Ie=0;Ie<ge.length;Ie++)Je[Ie]=ge[Ie]-De[Ie];var et=W.touches[0].clientX-Be[0],tt=et*et,Ot=W.touches[0].clientY-Be[1],Dt=Ot*Ot,tr=tt+Dt;Ze=tr>=e.touchTapThreshold2}if(oe&&e.touchData.cxt){W.preventDefault();var Mt=W.touches[0].clientX-U,Ut=W.touches[0].clientY-X,pt=W.touches[1].clientX-U,Nt=W.touches[1].clientY-X,ui=Z(Mt,Ut,pt,Nt),Pt=ui/V,Xr=150,Zr=Xr*Xr,fr=1.5,rs=fr*fr;if(Pt>=rs||ui>=Zr){e.touchData.cxt=!1,e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Si=Re("cxttapend");e.touchData.start?(e.touchData.start.unactivate().emit(Si),e.touchData.start=null):pe.emit(Si)}}if(oe&&e.touchData.cxt){var Si=Re("cxtdrag");e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.touchData.start?e.touchData.start.emit(Si):pe.emit(Si),e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxtDragged=!0;var ar=e.findNearestElement(ge[0],ge[1],!0,!0);(!e.touchData.cxtOver||ar!==e.touchData.cxtOver)&&(e.touchData.cxtOver&&e.touchData.cxtOver.emit(Re("cxtdragout")),e.touchData.cxtOver=ar,ar&&ar.emit(Re("cxtdragover")))}else if(oe&&W.touches[2]&&pe.boxSelectionEnabled())W.preventDefault(),e.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,e.touchData.selecting||pe.emit(Re("boxstart")),e.touchData.selecting=!0,e.touchData.didSelect=!0,fe[4]=1,!fe||fe.length===0||fe[0]===void 0?(fe[0]=(ge[0]+ge[2]+ge[4])/3,fe[1]=(ge[1]+ge[3]+ge[5])/3,fe[2]=(ge[0]+ge[2]+ge[4])/3+1,fe[3]=(ge[1]+ge[3]+ge[5])/3+1):(fe[2]=(ge[0]+ge[2]+ge[4])/3,fe[3]=(ge[1]+ge[3]+ge[5])/3),e.redrawHint("select",!0),e.redraw();else if(oe&&W.touches[1]&&!e.touchData.didSelect&&pe.zoomingEnabled()&&pe.panningEnabled()&&pe.userZoomingEnabled()&&pe.userPanningEnabled()){W.preventDefault(),e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var Yt=e.dragData.touchDragEles;if(Yt){e.redrawHint("drag",!0);for(var pr=0;pr<Yt.length;pr++){var Fe=Yt[pr]._private;Fe.grabbed=!1,Fe.rscratch.inDragLayer=!1}}var ie=e.touchData.start,Mt=W.touches[0].clientX-U,Ut=W.touches[0].clientY-X,pt=W.touches[1].clientX-U,Nt=W.touches[1].clientY-X,we=se(Mt,Ut,pt,Nt),Oe=we/ne;if(Q){var yt=Mt-z,rr=Ut-K,Xt=pt-te,vr=Nt-J,Qr=(yt+Xt)/2,is=(rr+vr)/2,qt=pe.zoom(),Us=qt*Oe,ns=pe.pan(),zg=ee[0]*qt+ns.x,Hg=ee[1]*qt+ns.y,Bx={x:-Us/qt*(zg-ns.x-Qr)+zg,y:-Us/qt*(Hg-ns.y-is)+Hg};if(ie&&ie.active()){var Yt=e.dragData.touchDragEles;g(Yt),e.redrawHint("drag",!0),e.redrawHint("eles",!0),ie.unactivate().emit(Re("freeon")),Yt.emit(Re("free")),e.dragData.didDrag&&(ie.emit(Re("dragfreeon")),Yt.emit(Re("dragfree")))}pe.viewport({zoom:Us,pan:Bx,cancelOnFailedZoom:!0}),pe.emit(Re("pinchzoom")),ne=we,z=Mt,K=Ut,te=pt,J=Nt,e.pinching=!0}if(W.touches[0]){var Ne=e.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);ge[0]=Ne[0],ge[1]=Ne[1]}if(W.touches[1]){var Ne=e.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);ge[2]=Ne[0],ge[3]=Ne[1]}if(W.touches[2]){var Ne=e.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);ge[4]=Ne[0],ge[5]=Ne[1]}}else if(W.touches[0]&&!e.touchData.didSelect){var hi=e.touchData.start,zh=e.touchData.last,ar;if(!e.hoverData.draggingEles&&!e.swipePanning&&(ar=e.findNearestElement(ge[0],ge[1],!0,!0)),oe&&hi!=null&&W.preventDefault(),oe&&hi!=null&&e.nodeIsDraggable(hi))if(Ze){var Yt=e.dragData.touchDragEles,qg=!e.dragData.didDrag;qg&&_(Yt,{inDragLayer:!0}),e.dragData.didDrag=!0;var Ga={x:0,y:0};if(xe(Je[0])&&xe(Je[1])&&(Ga.x+=Je[0],Ga.y+=Je[1],qg)){e.redrawHint("eles",!0);var di=e.touchData.dragDelta;di&&xe(di[0])&&xe(di[1])&&(Ga.x+=di[0],Ga.y+=di[1])}e.hoverData.draggingEles=!0,Yt.silentShift(Ga).emit(Re("position")).emit(Re("drag")),e.redrawHint("drag",!0),e.touchData.startPosition[0]==De[0]&&e.touchData.startPosition[1]==De[1]&&e.redrawHint("eles",!0),e.redraw()}else{var di=e.touchData.dragDelta=e.touchData.dragDelta||[];di.length===0?(di.push(Je[0]),di.push(Je[1])):(di[0]+=Je[0],di[1]+=Je[1])}if(n(hi||ar,["touchmove","tapdrag","vmousemove"],W,{x:ge[0],y:ge[1]}),(!hi||!hi.grabbed())&&ar!=zh&&(zh&&zh.emit(Re("tapdragout")),ar&&ar.emit(Re("tapdragover"))),e.touchData.last=ar,oe)for(var pr=0;pr<ge.length;pr++)ge[pr]&&e.touchData.startPosition[pr]&&Ze&&(e.touchData.singleTouchMoved=!0);if(oe&&(hi==null||hi.pannable())&&pe.panningEnabled()&&pe.userPanningEnabled()){var Dx=a(hi,e.touchData.starts);Dx&&(W.preventDefault(),e.data.bgActivePosistion||(e.data.bgActivePosistion=sa(e.touchData.startPosition)),e.swipePanning?(pe.panBy({x:Je[0]*be,y:Je[1]*be}),pe.emit(Re("dragpan"))):Ze&&(e.swipePanning=!0,pe.panBy({x:et*be,y:Ot*be}),pe.emit(Re("dragpan")),hi&&(hi.unactivate(),e.redrawHint("select",!0),e.touchData.start=null)));var Ne=e.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);ge[0]=Ne[0],ge[1]=Ne[1]}}for(var Ie=0;Ie<ge.length;Ie++)De[Ie]=ge[Ie];oe&&W.touches.length>0&&!e.hoverData.draggingEles&&!e.swipePanning&&e.data.bgActivePosistion!=null&&(e.data.bgActivePosistion=void 0,e.redrawHint("select",!0),e.redraw())}},!1);var he;e.registerBinding(t,"touchcancel",he=function(W){var oe=e.touchData.start;e.touchData.capture=!1,oe&&oe.unactivate()});var ce,ue,ye,ve;if(e.registerBinding(t,"touchend",ce=function(W){var oe=e.touchData.start,fe=e.touchData.capture;if(fe)W.touches.length===0&&(e.touchData.capture=!1),W.preventDefault();else return;var pe=e.selection;e.swipePanning=!1,e.hoverData.draggingEles=!1;var ge=e.cy,De=ge.zoom(),be=e.touchData.now,Ne=e.touchData.earlier;if(W.touches[0]){var Re=e.projectIntoViewport(W.touches[0].clientX,W.touches[0].clientY);be[0]=Re[0],be[1]=Re[1]}if(W.touches[1]){var Re=e.projectIntoViewport(W.touches[1].clientX,W.touches[1].clientY);be[2]=Re[0],be[3]=Re[1]}if(W.touches[2]){var Re=e.projectIntoViewport(W.touches[2].clientX,W.touches[2].clientY);be[4]=Re[0],be[5]=Re[1]}var Be=function(Zr){return{originalEvent:W,type:Zr,position:{x:be[0],y:be[1]}}};oe&&oe.unactivate();var Ze;if(e.touchData.cxt){if(Ze=Be("cxttapend"),oe?oe.emit(Ze):ge.emit(Ze),!e.touchData.cxtDragged){var Je=Be("cxttap");oe?oe.emit(Je):ge.emit(Je)}e.touchData.start&&(e.touchData.start._private.grabbed=!1),e.touchData.cxt=!1,e.touchData.start=null,e.redraw();return}if(!W.touches[2]&&ge.boxSelectionEnabled()&&e.touchData.selecting){e.touchData.selecting=!1;var Ie=ge.collection(e.getAllInBox(pe[0],pe[1],pe[2],pe[3]));pe[0]=void 0,pe[1]=void 0,pe[2]=void 0,pe[3]=void 0,pe[4]=0,e.redrawHint("select",!0),ge.emit(Be("boxend"));var et=function(Zr){return Zr.selectable()&&!Zr.selected()};Ie.emit(Be("box")).stdFilter(et).select().emit(Be("boxselect")),Ie.nonempty()&&e.redrawHint("eles",!0),e.redraw()}if(oe!=null&&oe.unactivate(),W.touches[2])e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);else if(!W.touches[1]){if(!W.touches[0]){if(!W.touches[0]){e.data.bgActivePosistion=void 0,e.redrawHint("select",!0);var tt=e.dragData.touchDragEles;if(oe!=null){var Ot=oe._private.grabbed;g(tt),e.redrawHint("drag",!0),e.redrawHint("eles",!0),Ot&&(oe.emit(Be("freeon")),tt.emit(Be("free")),e.dragData.didDrag&&(oe.emit(Be("dragfreeon")),tt.emit(Be("dragfree")))),n(oe,["touchend","tapend","vmouseup","tapdragout"],W,{x:be[0],y:be[1]}),oe.unactivate(),e.touchData.start=null}else{var Dt=e.findNearestElement(be[0],be[1],!0,!0);n(Dt,["touchend","tapend","vmouseup","tapdragout"],W,{x:be[0],y:be[1]})}var tr=e.touchData.startPosition[0]-be[0],Mt=tr*tr,Ut=e.touchData.startPosition[1]-be[1],pt=Ut*Ut,Nt=Mt+pt,ui=Nt*De*De;e.touchData.singleTouchMoved||(oe||ge.$(":selected").unselect(["tapunselect"]),n(oe,["tap","vclick"],W,{x:be[0],y:be[1]}),ue=!1,W.timeStamp-ve<=ge.multiClickDebounceTime()?(ye&&clearTimeout(ye),ue=!0,ve=null,n(oe,["dbltap","vdblclick"],W,{x:be[0],y:be[1]})):(ye=setTimeout(function(){ue||n(oe,["onetap","voneclick"],W,{x:be[0],y:be[1]})},ge.multiClickDebounceTime()),ve=W.timeStamp)),oe!=null&&!e.dragData.didDrag&&oe._private.selectable&&ui<e.touchTapThreshold2&&!e.pinching&&(ge.selectionType()==="single"?(ge.$(r).unmerge(oe).unselect(["tapunselect"]),oe.select(["tapselect"])):oe.selected()?oe.unselect(["tapunselect"]):oe.select(["tapselect"]),e.redrawHint("eles",!0)),e.touchData.singleTouchMoved=!0}}}for(var Pt=0;Pt<be.length;Pt++)Ne[Pt]=be[Pt];e.dragData.didDrag=!1,W.touches.length===0&&(e.touchData.dragDelta=[],e.touchData.startPosition=[null,null,null,null,null,null],e.touchData.startGPosition=null,e.touchData.didSelect=!1),W.touches.length<2&&(W.touches.length===1&&(e.touchData.startGPosition=[W.touches[0].clientX,W.touches[0].clientY]),e.pinching=!1,e.redrawHint("eles",!0),e.redraw())},!1),typeof TouchEvent>"u"){var _e=[],Ce=function(W){return{clientX:W.clientX,clientY:W.clientY,force:1,identifier:W.pointerId,pageX:W.pageX,pageY:W.pageY,radiusX:W.width/2,radiusY:W.height/2,screenX:W.screenX,screenY:W.screenY,target:W.target}},ke=function(W){return{event:W,touch:Ce(W)}},Me=function(W){_e.push(ke(W))},Ae=function(W){for(var oe=0;oe<_e.length;oe++){var fe=_e[oe];if(fe.event.pointerId===W.pointerId){_e.splice(oe,1);return}}},We=function(W){var oe=_e.filter(function(fe){return fe.event.pointerId===W.pointerId})[0];oe.event=W,oe.touch=Ce(W)},Ee=function(W){W.touches=_e.map(function(oe){return oe.touch})},Se=function(W){return W.pointerType==="mouse"||W.pointerType===4};e.registerBinding(e.container,"pointerdown",function(de){Se(de)||(de.preventDefault(),Me(de),Ee(de),Y(de))}),e.registerBinding(e.container,"pointerup",function(de){Se(de)||(Ae(de),Ee(de),ce(de))}),e.registerBinding(e.container,"pointercancel",function(de){Se(de)||(Ae(de),Ee(de),he(de))}),e.registerBinding(e.container,"pointermove",function(de){Se(de)||(de.preventDefault(),We(de),Ee(de),ae(de))})}};var pn={};pn.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(i,n,s,a,o,l){this.renderer.nodeShapeImpl("polygon",i,n,s,a,o,this.points)},intersectLine:function(i,n,s,a,o,l,c,u){return Qo(o,l,this.points,i,n,s/2,a/2,c)},checkPoint:function(i,n,s,a,o,l,c,u){return hn(i,n,this.points,l,c,a,o,[0,-1],s)},hasMiterBounds:e!=="rectangle",miterBounds:function(i,n,s,a,o,l){return VA(this.points,i,n,s,a,o)}}};pn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(t,r,i,n,s,a){this.renderer.nodeShapeImpl(this.name,t,r,i,n,s)},intersectLine:function(t,r,i,n,s,a,o,l){return JA(s,a,t,r,i/2+o,n/2+o)},checkPoint:function(t,r,i,n,s,a,o,l){return bs(t,r,n,s,a,o,i)}}};pn.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(i,n,s,a,o,l,c){if(l[c]!==void 0&&l[c+"-cx"]===i&&l[c+"-cy"]===n)return l[c];l[c]=new Array(t.length/2),l[c+"-cx"]=i,l[c+"-cy"]=n;var u=s/2,h=a/2;o=o==="auto"?mC(s,a):o;for(var d=new Array(t.length/2),p=0;p<t.length/2;p++)d[p]={x:i+u*t[p*2],y:n+h*t[p*2+1]};var y,_,v,g,f=d.length;for(_=d[f-1],y=0;y<f;y++)v=d[y%f],g=d[(y+1)%f],l[c][y]=$v(_,v,g,o),_=v,v=g;return l[c]},draw:function(i,n,s,a,o,l,c){this.renderer.nodeShapeImpl("round-polygon",i,n,s,a,o,this.points,this.getOrCreateCorners(n,s,a,o,l,c,"drawCorners"))},intersectLine:function(i,n,s,a,o,l,c,u,h){return tB(o,l,this.points,i,n,s,a,c,this.getOrCreateCorners(i,n,s,a,u,h,"corners"))},checkPoint:function(i,n,s,a,o,l,c,u,h){return QA(i,n,this.points,l,c,a,o,this.getOrCreateCorners(l,c,a,o,u,h,"corners"))}}};pn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Ar(4,0),draw:function(t,r,i,n,s,a){this.renderer.nodeShapeImpl(this.name,t,r,i,n,s,this.points,a)},intersectLine:function(t,r,i,n,s,a,o,l){return vC(s,a,t,r,i,n,o,l)},checkPoint:function(t,r,i,n,s,a,o,l){var c=n/2,u=s/2;l=l==="auto"?Hn(n,s):l,l=Math.min(c,u,l);var h=l*2;return!!(hn(t,r,this.points,a,o,n,s-h,[0,-1],i)||hn(t,r,this.points,a,o,n-h,s,[0,-1],i)||bs(t,r,h,h,a-c+l,o-u+l,i)||bs(t,r,h,h,a+c-l,o-u+l,i)||bs(t,r,h,h,a+c-l,o+u-l,i)||bs(t,r,h,h,a-c+l,o+u-l,i))}}};pn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Av(),points:Ar(4,0),draw:function(t,r,i,n,s,a){this.renderer.nodeShapeImpl(this.name,t,r,i,n,s,null,a)},generateCutTrianglePts:function(t,r,i,n,s){var a=s==="auto"?this.cornerLength:s,o=r/2,l=t/2,c=i-l,u=i+l,h=n-o,d=n+o;return{topLeft:[c,h+a,c+a,h,c+a,h+a],topRight:[u-a,h,u,h+a,u-a,h+a],bottomRight:[u,d-a,u-a,d,u-a,d-a],bottomLeft:[c+a,d,c,d-a,c+a,d-a]}},intersectLine:function(t,r,i,n,s,a,o,l){var c=this.generateCutTrianglePts(i+2*o,n+2*o,t,r,l),u=[].concat.apply([],[c.topLeft.splice(0,4),c.topRight.splice(0,4),c.bottomRight.splice(0,4),c.bottomLeft.splice(0,4)]);return Qo(s,a,u,t,r)},checkPoint:function(t,r,i,n,s,a,o,l){var c=l==="auto"?this.cornerLength:l;if(hn(t,r,this.points,a,o,n,s-2*c,[0,-1],i)||hn(t,r,this.points,a,o,n-2*c,s,[0,-1],i))return!0;var u=this.generateCutTrianglePts(n,s,a,o);return Nr(t,r,u.topLeft)||Nr(t,r,u.topRight)||Nr(t,r,u.bottomRight)||Nr(t,r,u.bottomLeft)}}};pn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Ar(4,0),draw:function(t,r,i,n,s,a){this.renderer.nodeShapeImpl(this.name,t,r,i,n,s)},intersectLine:function(t,r,i,n,s,a,o,l){var c=.15,u=.5,h=.85,d=this.generateBarrelBezierPts(i+2*o,n+2*o,t,r),p=function(v){var g=ma({x:v[0],y:v[1]},{x:v[2],y:v[3]},{x:v[4],y:v[5]},c),f=ma({x:v[0],y:v[1]},{x:v[2],y:v[3]},{x:v[4],y:v[5]},u),m=ma({x:v[0],y:v[1]},{x:v[2],y:v[3]},{x:v[4],y:v[5]},h);return[v[0],v[1],g.x,g.y,f.x,f.y,m.x,m.y,v[4],v[5]]},y=[].concat(p(d.topLeft),p(d.topRight),p(d.bottomRight),p(d.bottomLeft));return Qo(s,a,y,t,r)},generateBarrelBezierPts:function(t,r,i,n){var s=r/2,a=t/2,o=i-a,l=i+a,c=n-s,u=n+s,h=dp(t,r),d=h.heightOffset,p=h.widthOffset,y=h.ctrlPtOffsetPct*t,_={topLeft:[o,c+d,o+y,c,o+p,c],topRight:[l-p,c,l-y,c,l,c+d],bottomRight:[l,u-d,l-y,u,l-p,u],bottomLeft:[o+p,u,o+y,u,o,u-d]};return _.topLeft.isTop=!0,_.topRight.isTop=!0,_.bottomLeft.isBottom=!0,_.bottomRight.isBottom=!0,_},checkPoint:function(t,r,i,n,s,a,o,l){var c=dp(n,s),u=c.heightOffset,h=c.widthOffset;if(hn(t,r,this.points,a,o,n,s-2*u,[0,-1],i)||hn(t,r,this.points,a,o,n-2*h,s,[0,-1],i))return!0;for(var d=this.generateBarrelBezierPts(n,s,a,o),p=function(w,x,A){var D=A[4],T=A[2],E=A[0],R=A[5],F=A[1],O=Math.min(D,E),$=Math.max(D,E),H=Math.min(R,F),L=Math.max(R,F);if(O<=w&&w<=$&&H<=x&&x<=L){var I=rB(D,T,E),P=KA(I[0],I[1],I[2],w),z=P.filter(function(K){return 0<=K&&K<=1});if(z.length>0)return z[0]}return null},y=Object.keys(d),_=0;_<y.length;_++){var v=y[_],g=d[v],f=p(t,r,g);if(f!=null){var m=g[5],b=g[3],C=g[1],S=ir(m,b,C,f);if(g.isTop&&S<=r||g.isBottom&&r<=S)return!0}}return!1}}};pn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Ar(4,0),draw:function(t,r,i,n,s,a){this.renderer.nodeShapeImpl(this.name,t,r,i,n,s,this.points,a)},intersectLine:function(t,r,i,n,s,a,o,l){var c=t-(i/2+o),u=r-(n/2+o),h=u,d=t+(i/2+o),p=Bn(s,a,t,r,c,u,d,h,!1);return p.length>0?p:vC(s,a,t,r,i,n,o,l)},checkPoint:function(t,r,i,n,s,a,o,l){l=l==="auto"?Hn(n,s):l;var c=2*l;if(hn(t,r,this.points,a,o,n,s-c,[0,-1],i)||hn(t,r,this.points,a,o,n-c,s,[0,-1],i))return!0;var u=n/2+2*i,h=s/2+2*i,d=[a-u,o-h,a-u,o,a+u,o,a+u,o-h];return!!(Nr(t,r,d)||bs(t,r,c,c,a+n/2-l,o+s/2-l,i)||bs(t,r,c,c,a-n/2+l,o+s/2-l,i))}}};pn.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",Ar(3,0)),this.generateRoundPolygon("round-triangle",Ar(3,0)),this.generatePolygon("rectangle",Ar(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r)}this.generatePolygon("pentagon",Ar(5,0)),this.generateRoundPolygon("round-pentagon",Ar(5,0)),this.generatePolygon("hexagon",Ar(6,0)),this.generateRoundPolygon("round-hexagon",Ar(6,0)),this.generatePolygon("heptagon",Ar(7,0)),this.generateRoundPolygon("round-heptagon",Ar(7,0)),this.generatePolygon("octagon",Ar(8,0)),this.generateRoundPolygon("round-octagon",Ar(8,0));var i=new Array(20);{var n=hp(5,0),s=hp(5,Math.PI/5),a=.5*(3-Math.sqrt(5));a*=1.57;for(var o=0;o<s.length/2;o++)s[o*2]*=a,s[o*2+1]*=a;for(var o=0;o<20/4;o++)i[o*4]=n[o*2],i[o*4+1]=n[o*2+1],i[o*4+2]=s[o*2],i[o*4+3]=s[o*2+1]}i=gC(i),this.generatePolygon("star",i),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}e.makePolygon=function(c){var u=c.join("$"),h="polygon-"+u,d;return(d=this[h])?d:t.generatePolygon(h,c)}};var Tl={};Tl.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Tl.redraw=function(e){e=e||hC();var t=this;t.averageRedrawTime===void 0&&(t.averageRedrawTime=0),t.lastRedrawTime===void 0&&(t.lastRedrawTime=0),t.lastDrawTime===void 0&&(t.lastDrawTime=0),t.requestedFrame=!0,t.renderOptions=e};Tl.beforeRender=function(e,t){if(!this.destroyed){t==null&&Rt("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(i,n){return n.priority-i.priority})}};var z0=function(t,r,i){for(var n=t.beforeRenderCallbacks,s=0;s<n.length;s++)n[s].fn(r,i)};Tl.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(n){if(!e.destroyed){if(!t.batching())if(e.requestedFrame&&!e.skipFrame){z0(e,!0,n);var s=un();e.render(e.renderOptions);var a=e.lastDrawTime=un();e.averageRedrawTime===void 0&&(e.averageRedrawTime=a-s),e.redrawCount===void 0&&(e.redrawCount=0),e.redrawCount++,e.redrawTotalTime===void 0&&(e.redrawTotalTime=0);var o=a-s;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else z0(e,!1,n);e.skipFrame=!1,tu(r)}};tu(r)}};var yR=function(t){this.init(t)},mw=yR,Wa=mw.prototype;Wa.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Wa.init=function(e){var t=this;t.options=e,t.cy=e.cy;var r=t.container=e.cy.container(),i=t.cy.window();if(i){var n=i.document,s=n.head,a="__________cytoscape_stylesheet",o="__________cytoscape_container",l=n.getElementById(a)!=null;if(r.className.indexOf(o)<0&&(r.className=(r.className||"")+" "+o),!l){var c=n.createElement("style");c.id=a,c.textContent="."+o+" { position: relative; }",s.insertBefore(c,s.children[0])}var u=i.getComputedStyle(r),h=u.getPropertyValue("position");h==="static"&&mt("A Cytoscape container has style position:static and so can not use UI extensions properly")}t.selection=[void 0,void 0,void 0,void 0,0],t.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],t.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},t.dragData={possibleDragElements:[]},t.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},t.redraws=0,t.showFps=e.showFps,t.debug=e.debug,t.webgl=e.webgl,t.hideEdgesOnViewport=e.hideEdgesOnViewport,t.textureOnViewport=e.textureOnViewport,t.wheelSensitivity=e.wheelSensitivity,t.motionBlurEnabled=e.motionBlur,t.forcedPixelRatio=xe(e.pixelRatio)?e.pixelRatio:null,t.motionBlur=e.motionBlur,t.motionBlurOpacity=e.motionBlurOpacity,t.motionBlurTransparency=1-t.motionBlurOpacity,t.motionBlurPxRatio=1,t.mbPxRBlurry=1,t.minMbLowQualFrames=4,t.fullQualityMb=!1,t.clearedForMotionBlur=[],t.desktopTapThreshold=e.desktopTapThreshold,t.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,t.touchTapThreshold=e.touchTapThreshold,t.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,t.tapholdDuration=500,t.bindings=[],t.beforeRenderCallbacks=[],t.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},t.registerNodeShapes(),t.registerArrowShapes(),t.registerCalculationListeners()};Wa.notify=function(e,t){var r=this,i=r.cy;if(!this.destroyed){if(e==="init"){r.load();return}if(e==="destroy"){r.destroy();return}(e==="add"||e==="remove"||e==="move"&&i.hasCompoundNodes()||e==="load"||e==="zorder"||e==="mount")&&r.invalidateCachedZSortedEles(),e==="viewport"&&r.redrawHint("select",!0),e==="gc"&&r.redrawHint("gc",!0),(e==="load"||e==="resize"||e==="mount")&&(r.invalidateContainerClientCoordsCache(),r.matchCanvasSize(r.container)),r.redrawHint("eles",!0),r.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Wa.destroy=function(){var e=this;e.destroyed=!0,e.cy.stopAnimationLoop();for(var t=0;t<e.bindings.length;t++){var r=e.bindings[t],i=r,n=i.target;(n.off||n.removeEventListener).apply(n,i.args)}if(e.bindings=[],e.beforeRenderCallbacks=[],e.onUpdateEleCalcsFns=[],e.removeObserver&&e.removeObserver.disconnect(),e.styleObserver&&e.styleObserver.disconnect(),e.resizeObserver&&e.resizeObserver.disconnect(),e.labelCalcDiv)try{document.body.removeChild(e.labelCalcDiv)}catch{}};Wa.isHeadless=function(){return!1};[Nv,vw,gw,qa,pn,Tl].forEach(function(e){je(Wa,e)});var Cf=1e3/60,yw={setupDequeueing:function(t){return function(){var i=this,n=this.renderer;if(!i.dequeueingSetup){i.dequeueingSetup=!0;var s=Cl(function(){n.redrawHint("eles",!0),n.redrawHint("drag",!0),n.redraw()},t.deqRedrawThreshold),a=function(c,u){var h=un(),d=n.averageRedrawTime,p=n.lastRedrawTime,y=[],_=n.cy.extent(),v=n.getPixelRatio();for(c||n.flushRenderedStyleQueue();;){var g=un(),f=g-h,m=g-u;if(p<Cf){var b=Cf-(c?d:0);if(m>=t.deqFastCost*b)break}else if(c){if(f>=t.deqCost*p||f>=t.deqAvgCost*d)break}else if(m>=t.deqNoDrawCost*Cf)break;var C=t.deq(i,v,_);if(C.length>0)for(var S=0;S<C.length;S++)y.push(C[S]);else break}y.length>0&&(t.onDeqd(i,y),!c&&t.shouldRedraw(i,y,v,_)&&s())},o=t.priority||Sv;n.beforeRender(a,o(i))}}}},_R=(function(){function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ru;Yn(this,e),this.idsByKey=new sn,this.keyForId=new sn,this.cachesByLvl=new sn,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r}return Xn(e,[{key:"getIdsFor",value:function(r){r==null&&Rt("Can not get id list for null key");var i=this.idsByKey,n=this.idsByKey.get(r);return n||(n=new Na,i.set(r,n)),n}},{key:"addIdForKey",value:function(r,i){r!=null&&this.getIdsFor(r).add(i)}},{key:"deleteIdForKey",value:function(r,i){r!=null&&this.getIdsFor(r).delete(i)}},{key:"getNumberOfIdsForKey",value:function(r){return r==null?0:this.getIdsFor(r).size}},{key:"updateKeyMappingFor",value:function(r){var i=r.id(),n=this.keyForId.get(i),s=this.getKey(r);this.deleteIdForKey(n,i),this.addIdForKey(s,i),this.keyForId.set(i,s)}},{key:"deleteKeyMappingFor",value:function(r){var i=r.id(),n=this.keyForId.get(i);this.deleteIdForKey(n,i),this.keyForId.delete(i)}},{key:"keyHasChangedFor",value:function(r){var i=r.id(),n=this.keyForId.get(i),s=this.getKey(r);return n!==s}},{key:"isInvalid",value:function(r){return this.keyHasChangedFor(r)||this.doesEleInvalidateKey(r)}},{key:"getCachesAt",value:function(r){var i=this.cachesByLvl,n=this.lvls,s=i.get(r);return s||(s=new sn,i.set(r,s),n.push(r)),s}},{key:"getCache",value:function(r,i){return this.getCachesAt(i).get(r)}},{key:"get",value:function(r,i){var n=this.getKey(r),s=this.getCache(n,i);return s!=null&&this.updateKeyMappingFor(r),s}},{key:"getForCachedKey",value:function(r,i){var n=this.keyForId.get(r.id()),s=this.getCache(n,i);return s}},{key:"hasCache",value:function(r,i){return this.getCachesAt(i).has(r)}},{key:"has",value:function(r,i){var n=this.getKey(r);return this.hasCache(n,i)}},{key:"setCache",value:function(r,i,n){n.key=r,this.getCachesAt(i).set(r,n)}},{key:"set",value:function(r,i,n){var s=this.getKey(r);this.setCache(s,i,n),this.updateKeyMappingFor(r)}},{key:"deleteCache",value:function(r,i){this.getCachesAt(i).delete(r)}},{key:"delete",value:function(r,i){var n=this.getKey(r);this.deleteCache(n,i)}},{key:"invalidateKey",value:function(r){var i=this;this.lvls.forEach(function(n){return i.deleteCache(r,n)})}},{key:"invalidate",value:function(r){var i=r.id(),n=this.keyForId.get(i);this.deleteKeyMappingFor(r);var s=this.doesEleInvalidateKey(r);return s&&this.invalidateKey(n),s||this.getNumberOfIdsForKey(n)===0}}])})(),H0=25,ec=50,Ec=-4,xp=3,_w=7.99,bR=8,CR=1024,wR=1024,SR=1024,kR=.2,xR=.8,TR=10,ER=.15,AR=.1,BR=.9,DR=.9,LR=100,RR=1,oa={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},MR=hr({getKey:null,doesEleInvalidateKey:ru,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:lC,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),vo=function(t,r){var i=this;i.renderer=t,i.onDequeues=[];var n=MR(r);je(i,n),i.lookup=new _R(n.getKey,n.doesEleInvalidateKey),i.setupDequeueing()},er=vo.prototype;er.reasons=oa;er.getTextureQueue=function(e){var t=this;return t.eleImgCaches=t.eleImgCaches||{},t.eleImgCaches[e]=t.eleImgCaches[e]||[]};er.getRetiredTextureQueue=function(e){var t=this,r=t.eleImgCaches.retired=t.eleImgCaches.retired||{},i=r[e]=r[e]||[];return i};er.getElementQueue=function(){var e=this,t=e.eleCacheQueue=e.eleCacheQueue||new wl(function(r,i){return i.reqs-r.reqs});return t};er.getElementKeyToQueue=function(){var e=this,t=e.eleKeyToCacheQueue=e.eleKeyToCacheQueue||{};return t};er.getElement=function(e,t,r,i,n){var s=this,a=this.renderer,o=a.cy.zoom(),l=this.lookup;if(!t||t.w===0||t.h===0||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!s.allowEdgeTxrCaching&&e.isEdge()||!s.allowParentTxrCaching&&e.isParent())return null;if(i==null&&(i=Math.ceil(xv(o*r))),i<Ec)i=Ec;else if(o>=_w||i>xp)return null;var c=Math.pow(2,i),u=t.h*c,h=t.w*c,d=a.eleTextBiggerThanMin(e,c);if(!this.isVisible(e,d))return null;var p=l.get(e,i);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var y;if(u<=H0?y=H0:u<=ec?y=ec:y=Math.ceil(u/ec)*ec,u>SR||h>wR)return null;var _=s.getTextureQueue(y),v=_[_.length-2],g=function(){return s.recycleTexture(y,h)||s.addTexture(y,h)};v||(v=_[_.length-1]),v||(v=g()),v.width-v.usedWidth<h&&(v=g());for(var f=function(O){return O&&O.scaledLabelShown===d},m=n&&n===oa.dequeue,b=n&&n===oa.highQuality,C=n&&n===oa.downscale,S,k=i+1;k<=xp;k++){var w=l.get(e,k);if(w){S=w;break}}var x=S&&S.level===i+1?S:null,A=function(){v.context.drawImage(x.texture.canvas,x.x,0,x.width,x.height,v.usedWidth,0,h,u)};if(v.context.setTransform(1,0,0,1,0,0),v.context.clearRect(v.usedWidth,0,h,y),f(x))A();else if(f(S))if(b){for(var D=S.level;D>i;D--)x=s.getElement(e,t,r,D,oa.downscale);A()}else return s.queueElement(e,S.level-1),S;else{var T;if(!m&&!b&&!C)for(var E=i-1;E>=Ec;E--){var R=l.get(e,E);if(R){T=R;break}}if(f(T))return s.queueElement(e,i),T;v.context.translate(v.usedWidth,0),v.context.scale(c,c),this.drawElement(v.context,e,t,d,!1),v.context.scale(1/c,1/c),v.context.translate(-v.usedWidth,0)}return p={x:v.usedWidth,texture:v,level:i,scale:c,width:h,height:u,scaledLabelShown:d},v.usedWidth+=Math.ceil(h+bR),v.eleCaches.push(p),l.set(e,i,p),s.checkTextureFullness(v),p};er.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])};er.invalidateElement=function(e){var t=this,r=t.lookup,i=[],n=r.isInvalid(e);if(n){for(var s=Ec;s<=xp;s++){var a=r.getForCachedKey(e,s);a&&i.push(a)}var o=r.invalidate(e);if(o)for(var l=0;l<i.length;l++){var c=i[l],u=c.texture;u.invalidatedWidth+=c.width,c.invalidated=!0,t.checkTextureUtility(u)}t.removeFromQueue(e)}};er.checkTextureUtility=function(e){e.invalidatedWidth>=kR*e.width&&this.retireTexture(e)};er.checkTextureFullness=function(e){var t=this,r=t.getTextureQueue(e.height);e.usedWidth/e.width>xR&&e.fullnessChecks>=TR?zn(r,e):e.fullnessChecks++};er.retireTexture=function(e){var t=this,r=e.height,i=t.getTextureQueue(r),n=this.lookup;zn(i,e),e.retired=!0;for(var s=e.eleCaches,a=0;a<s.length;a++){var o=s[a];n.deleteCache(o.key,o.level)}kv(s);var l=t.getRetiredTextureQueue(r);l.push(e)};er.addTexture=function(e,t){var r=this,i=r.getTextureQueue(e),n={};return i.push(n),n.eleCaches=[],n.height=e,n.width=Math.max(CR,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=r.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n};er.recycleTexture=function(e,t){for(var r=this,i=r.getTextureQueue(e),n=r.getRetiredTextureQueue(e),s=0;s<n.length;s++){var a=n[s];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,kv(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),zn(n,a),i.push(a),a}};er.queueElement=function(e,t){var r=this,i=r.getElementQueue(),n=r.getElementKeyToQueue(),s=this.getKey(e),a=n[s];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,i.updateItem(a);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:s};i.push(o),n[s]=o}};er.dequeue=function(e){for(var t=this,r=t.getElementQueue(),i=t.getElementKeyToQueue(),n=[],s=t.lookup,a=0;a<RR&&r.size()>0;a++){var o=r.pop(),l=o.key,c=o.eles[0],u=s.hasCache(c,o.level);if(i[l]=null,u)continue;n.push(o);var h=t.getBoundingBox(c);t.getElement(c,h,e,o.level,oa.dequeue)}return n};er.removeFromQueue=function(e){var t=this,r=t.getElementQueue(),i=t.getElementKeyToQueue(),n=this.getKey(e),s=i[n];s!=null&&(s.eles.length===1?(s.reqs=wv,r.updateItem(s),r.pop(),i[n]=null):s.eles.unmerge(e))};er.onDequeue=function(e){this.onDequeues.push(e)};er.offDequeue=function(e){zn(this.onDequeues,e)};er.setupDequeueing=yw.setupDequeueing({deqRedrawThreshold:LR,deqCost:ER,deqAvgCost:AR,deqNoDrawCost:BR,deqFastCost:DR,deq:function(t,r,i){return t.dequeue(r,i)},onDeqd:function(t,r){for(var i=0;i<t.onDequeues.length;i++){var n=t.onDequeues[i];n(r)}},shouldRedraw:function(t,r,i,n){for(var s=0;s<r.length;s++)for(var a=r[s].eles,o=0;o<a.length;o++){var l=a[o].boundingBox();if(Ev(l,n))return!0}return!1},priority:function(t){return t.renderer.beforeRenderPriorities.eleTxrDeq}});var PR=1,Ao=-4,uu=2,IR=3.99,FR=50,OR=50,NR=.15,$R=.1,zR=.9,HR=.9,qR=1,q0=250,WR=4e3*4e3,W0=32767,UR=!0,bw=function(t){var r=this,i=r.renderer=t,n=i.cy;r.layersByLevel={},r.firstGet=!0,r.lastInvalidationTime=un()-2*q0,r.skipping=!1,r.eleTxrDeqs=n.collection(),r.scheduleElementRefinement=Cl(function(){r.refineElementTextures(r.eleTxrDeqs),r.eleTxrDeqs.unmerge(r.eleTxrDeqs)},OR),i.beforeRender(function(a,o){o-r.lastInvalidationTime<=q0?r.skipping=!0:r.skipping=!1},i.beforeRenderPriorities.lyrTxrSkip);var s=function(o,l){return l.reqs-o.reqs};r.layersQueue=new wl(s),r.setupDequeueing()},dr=bw.prototype,U0=0,VR=Math.pow(2,53)-1;dr.makeLayer=function(e,t){var r=Math.pow(2,t),i=Math.ceil(e.w*r),n=Math.ceil(e.h*r),s=this.renderer.makeOffscreenCanvas(i,n),a={id:U0=++U0%VR,bb:e,level:t,width:i,height:n,canvas:s,context:s.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=a.context,l=-a.bb.x1,c=-a.bb.y1;return o.scale(r,r),o.translate(l,c),a};dr.getLayers=function(e,t,r){var i=this,n=i.renderer,s=n.cy,a=s.zoom(),o=i.firstGet;if(i.firstGet=!1,r==null){if(r=Math.ceil(xv(a*t)),r<Ao)r=Ao;else if(a>=IR||r>uu)return null}i.validateLayersElesOrdering(r,e);var l=i.layersByLevel,c=Math.pow(2,r),u=l[r]=l[r]||[],h,d=i.levelIsComplete(r,e),p,y=function(){var A=function(F){if(i.validateLayersElesOrdering(F,e),i.levelIsComplete(F,e))return p=l[F],!0},D=function(F){if(!p)for(var O=r+F;Ao<=O&&O<=uu&&!A(O);O+=F);};D(1),D(-1);for(var T=u.length-1;T>=0;T--){var E=u[T];E.invalid&&zn(u,E)}};if(!d)y();else return u;var _=function(){if(!h){h=Mr();for(var A=0;A<e.length;A++)qA(h,e[A].boundingBox())}return h},v=function(A){A=A||{};var D=A.after;_();var T=Math.ceil(h.w*c),E=Math.ceil(h.h*c);if(T>W0||E>W0)return null;var R=T*E;if(R>WR)return null;var F=i.makeLayer(h,r);if(D!=null){var O=u.indexOf(D)+1;u.splice(O,0,F)}else(A.insert===void 0||A.insert)&&u.unshift(F);return F};if(i.skipping&&!o)return null;for(var g=null,f=e.length/PR,m=!o,b=0;b<e.length;b++){var C=e[b],S=C._private.rscratch,k=S.imgLayerCaches=S.imgLayerCaches||{},w=k[r];if(w){g=w;continue}if((!g||g.eles.length>=f||!pC(g.bb,C.boundingBox()))&&(g=v({insert:!0,after:g}),!g))return null;p||m?i.queueLayer(g,C):i.drawEleInLayer(g,C,r,t),g.eles.push(C),k[r]=g}return p||(m?null:u)};dr.getEleLevelForLayerLevel=function(e,t){return e};dr.drawEleInLayer=function(e,t,r,i){var n=this,s=this.renderer,a=e.context,o=t.boundingBox();o.w===0||o.h===0||!t.visible()||(r=n.getEleLevelForLayerLevel(r,i),s.setImgSmoothing(a,!1),s.drawCachedElement(a,t,null,null,r,UR),s.setImgSmoothing(a,!0))};dr.levelIsComplete=function(e,t){var r=this,i=r.layersByLevel[e];if(!i||i.length===0)return!1;for(var n=0,s=0;s<i.length;s++){var a=i[s];if(a.reqs>0||a.invalid)return!1;n+=a.eles.length}return n===t.length};dr.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var i=0;i<r.length;i++){for(var n=r[i],s=-1,a=0;a<t.length;a++)if(n.eles[0]===t[a]){s=a;break}if(s<0){this.invalidateLayer(n);continue}for(var o=s,a=0;a<n.eles.length;a++)if(n.eles[a]!==t[o+a]){this.invalidateLayer(n);break}}};dr.updateElementsInLayers=function(e,t){for(var r=this,i=ml(e[0]),n=0;n<e.length;n++)for(var s=i?null:e[n],a=i?e[n]:e[n].ele,o=a._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},c=Ao;c<=uu;c++){var u=l[c];u&&(s&&r.getEleLevelForLayerLevel(u.level)!==s.level||t(u,a,s))}};dr.haveLayers=function(){for(var e=this,t=!1,r=Ao;r<=uu;r++){var i=e.layersByLevel[r];if(i&&i.length>0){t=!0;break}}return t};dr.invalidateElements=function(e){var t=this;e.length!==0&&(t.lastInvalidationTime=un(),!(e.length===0||!t.haveLayers())&&t.updateElementsInLayers(e,function(i,n,s){t.invalidateLayer(i)}))};dr.invalidateLayer=function(e){if(this.lastInvalidationTime=un(),!e.invalid){var t=e.level,r=e.eles,i=this.layersByLevel[t];zn(i,e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var n=0;n<r.length;n++){var s=r[n]._private.rscratch.imgLayerCaches;s&&(s[t]=null)}}};dr.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(i,n,s){var a=i.replacement;if(a||(a=i.replacement=t.makeLayer(i.bb,i.level),a.replaces=i,a.eles=i.eles),!a.reqs)for(var o=0;o<a.eles.length;o++)t.queueLayer(a,a.eles[o])})};dr.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()};dr.queueLayer=function(e,t){var r=this,i=r.layersQueue,n=e.elesQueue,s=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(s[t.id()])return;n.push(t),s[t.id()]=!0}e.reqs?(e.reqs++,i.updateItem(e)):(e.reqs=1,i.push(e))}};dr.dequeue=function(e){for(var t=this,r=t.layersQueue,i=[],n=0;n<qR&&r.size()!==0;){var s=r.peek();if(s.replacement){r.pop();continue}if(s.replaces&&s!==s.replaces.replacement){r.pop();continue}if(s.invalid){r.pop();continue}var a=s.elesQueue.shift();a&&(t.drawEleInLayer(s,a,s.level,e),n++),i.length===0&&i.push(!0),s.elesQueue.length===0&&(r.pop(),s.reqs=0,s.replaces&&t.applyLayerReplacement(s),t.requestRedraw())}return i};dr.applyLayerReplacement=function(e){var t=this,r=t.layersByLevel[e.level],i=e.replaces,n=r.indexOf(i);if(!(n<0||i.invalid)){r[n]=e;for(var s=0;s<e.eles.length;s++){var a=e.eles[s]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[e.level]=e)}t.requestRedraw()}};dr.requestRedraw=Cl(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100);dr.setupDequeueing=yw.setupDequeueing({deqRedrawThreshold:FR,deqCost:NR,deqAvgCost:$R,deqNoDrawCost:zR,deqFastCost:HR,deq:function(t,r){return t.dequeue(r)},onDeqd:Sv,shouldRedraw:lC,priority:function(t){return t.renderer.beforeRenderPriorities.lyrTxrDeq}});var Cw={},V0;function jR(e,t){for(var r=0;r<t.length;r++){var i=t[r];e.lineTo(i.x,i.y)}}function GR(e,t,r){for(var i,n=0;n<t.length;n++){var s=t[n];n===0&&(i=s),e.lineTo(s.x,s.y)}e.quadraticCurveTo(r.x,r.y,i.x,i.y)}function j0(e,t,r){e.beginPath&&e.beginPath();for(var i=t,n=0;n<i.length;n++){var s=i[n];e.lineTo(s.x,s.y)}var a=r,o=r[0];e.moveTo(o.x,o.y);for(var n=1;n<a.length;n++){var s=a[n];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function KR(e,t,r,i,n){e.beginPath&&e.beginPath(),e.arc(r,i,n,0,Math.PI*2,!1);var s=t,a=s[0];e.moveTo(a.x,a.y);for(var o=0;o<s.length;o++){var l=s[o];e.lineTo(l.x,l.y)}e.closePath&&e.closePath()}function YR(e,t,r,i){e.arc(t,r,i,0,Math.PI*2,!1)}Cw.arrowShapeImpl=function(e){return(V0||(V0={polygon:jR,"triangle-backcurve":GR,"triangle-tee":j0,"circle-triangle":KR,"triangle-cross":j0,circle:YR}))[e]};var qi={};qi.drawElement=function(e,t,r,i,n,s){var a=this;t.isNode()?a.drawNode(e,t,r,i,n,s):a.drawEdge(e,t,r,i,n,s)};qi.drawElementOverlay=function(e,t){var r=this;t.isNode()?r.drawNodeOverlay(e,t):r.drawEdgeOverlay(e,t)};qi.drawElementUnderlay=function(e,t){var r=this;t.isNode()?r.drawNodeUnderlay(e,t):r.drawEdgeUnderlay(e,t)};qi.drawCachedElementPortion=function(e,t,r,i,n,s,a,o){var l=this,c=r.getBoundingBox(t);if(!(c.w===0||c.h===0)){var u=r.getElement(t,c,i,n,s);if(u!=null){var h=o(l,t);if(h===0)return;var d=a(l,t),p=c.x1,y=c.y1,_=c.w,v=c.h,g,f,m,b,C;if(d!==0){var S=r.getRotationPoint(t);m=S.x,b=S.y,e.translate(m,b),e.rotate(d),C=l.getImgSmoothing(e),C||l.setImgSmoothing(e,!0);var k=r.getRotationOffset(t);g=k.x,f=k.y}else g=p,f=y;var w;h!==1&&(w=e.globalAlpha,e.globalAlpha=w*h),e.drawImage(u.texture.canvas,u.x,0,u.width,u.height,g,f,_,v),h!==1&&(e.globalAlpha=w),d!==0&&(e.rotate(-d),e.translate(-m,-b),C||l.setImgSmoothing(e,!1))}else r.drawElement(e,t)}};var XR=function(){return 0},ZR=function(t,r){return t.getTextAngle(r,null)},QR=function(t,r){return t.getTextAngle(r,"source")},JR=function(t,r){return t.getTextAngle(r,"target")},eM=function(t,r){return r.effectiveOpacity()},wf=function(t,r){return r.pstyle("text-opacity").pfValue*r.effectiveOpacity()};qi.drawCachedElement=function(e,t,r,i,n,s){var a=this,o=a.data,l=o.eleTxrCache,c=o.lblTxrCache,u=o.slbTxrCache,h=o.tlbTxrCache,d=t.boundingBox(),p=s===!0?l.reasons.highQuality:null;if(!(d.w===0||d.h===0||!t.visible())&&(!i||Ev(d,i))){var y=t.isEdge(),_=t.element()._private.rscratch.badLine;a.drawElementUnderlay(e,t),a.drawCachedElementPortion(e,t,l,r,n,p,XR,eM),(!y||!_)&&a.drawCachedElementPortion(e,t,c,r,n,p,ZR,wf),y&&!_&&(a.drawCachedElementPortion(e,t,u,r,n,p,QR,wf),a.drawCachedElementPortion(e,t,h,r,n,p,JR,wf)),a.drawElementOverlay(e,t)}};qi.drawElements=function(e,t){for(var r=this,i=0;i<t.length;i++){var n=t[i];r.drawElement(e,n)}};qi.drawCachedElements=function(e,t,r,i){for(var n=this,s=0;s<t.length;s++){var a=t[s];n.drawCachedElement(e,a,r,i)}};qi.drawCachedNodes=function(e,t,r,i){for(var n=this,s=0;s<t.length;s++){var a=t[s];a.isNode()&&n.drawCachedElement(e,a,r,i)}};qi.drawLayeredElements=function(e,t,r,i){var n=this,s=n.data.lyrTxrCache.getLayers(t,r);if(s)for(var a=0;a<s.length;a++){var o=s[a],l=o.bb;l.w===0||l.h===0||e.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else n.drawCachedElements(e,t,r,i)};var vn={};vn.drawEdge=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,o=t._private.rscratch;if(!(s&&!t.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var l;r&&(l=r,e.translate(-l.x1,-l.y1));var c=s?t.pstyle("opacity").value:1,u=s?t.pstyle("line-opacity").value:1,h=t.pstyle("curve-style").value,d=t.pstyle("line-style").value,p=t.pstyle("width").pfValue,y=t.pstyle("line-cap").value,_=t.pstyle("line-outline-width").value,v=t.pstyle("line-outline-color").value,g=c*u,f=c*u,m=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;h==="straight-triangle"?(a.eleStrokeStyle(e,t,F),a.drawEdgeTrianglePath(t,e,o.allpts)):(e.lineWidth=p,e.lineCap=y,a.eleStrokeStyle(e,t,F),a.drawEdgePath(t,e,o.allpts,d),e.lineCap="butt")},b=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:g;if(e.lineWidth=p+_,e.lineCap=y,_>0)a.colorStrokeStyle(e,v[0],v[1],v[2],F);else{e.lineCap="butt";return}h==="straight-triangle"?a.drawEdgeTrianglePath(t,e,o.allpts):(a.drawEdgePath(t,e,o.allpts,d),e.lineCap="butt")},C=function(){n&&a.drawEdgeOverlay(e,t)},S=function(){n&&a.drawEdgeUnderlay(e,t)},k=function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f;a.drawArrowheads(e,t,F)},w=function(){a.drawElementText(e,t,null,i)};e.lineJoin="round";var x=t.pstyle("ghost").value==="yes";if(x){var A=t.pstyle("ghost-offset-x").pfValue,D=t.pstyle("ghost-offset-y").pfValue,T=t.pstyle("ghost-opacity").value,E=g*T;e.translate(A,D),m(E),k(E),e.translate(-A,-D)}else b();S(),m(),k(),C(),w(),r&&e.translate(l.x1,l.y1)}};var ww=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,i){if(i.visible()){var n=i.pstyle("".concat(t,"-opacity")).value;if(n!==0){var s=this,a=s.usePaths(),o=i._private.rscratch,l=i.pstyle("".concat(t,"-padding")).pfValue,c=2*l,u=i.pstyle("".concat(t,"-color")).value;r.lineWidth=c,o.edgeType==="self"&&!a?r.lineCap="butt":r.lineCap="round",s.colorStrokeStyle(r,u[0],u[1],u[2],n),s.drawEdgePath(i,r,o.allpts,"solid")}}}};vn.drawEdgeOverlay=ww("overlay");vn.drawEdgeUnderlay=ww("underlay");vn.drawEdgePath=function(e,t,r,i){var n=e._private.rscratch,s=t,a,o=!1,l=this.usePaths(),c=e.pstyle("line-dash-pattern").pfValue,u=e.pstyle("line-dash-offset").pfValue;if(l){var h=r.join("$"),d=n.pathCacheKey&&n.pathCacheKey===h;d?(a=t=n.pathCache,o=!0):(a=t=new Path2D,n.pathCacheKey=h,n.pathCache=a)}if(s.setLineDash)switch(i){case"dotted":s.setLineDash([1,1]);break;case"dashed":s.setLineDash(c),s.lineDashOffset=u;break;case"solid":s.setLineDash([]);break}if(!o&&!n.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),n.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<r.length;p+=4)t.quadraticCurveTo(r[p],r[p+1],r[p+2],r[p+3]);break;case"straight":case"haystack":for(var y=2;y+1<r.length;y+=2)t.lineTo(r[y],r[y+1]);break;case"segments":if(n.isRound){var _=zr(n.roundCorners),v;try{for(_.s();!(v=_.n()).done;){var g=v.value;uw(t,g)}}catch(m){_.e(m)}finally{_.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var f=2;f+1<r.length;f+=2)t.lineTo(r[f],r[f+1]);break}t=s,l?t.stroke(a):t.stroke(),t.setLineDash&&t.setLineDash([])};vn.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var i=e.pstyle("width").pfValue,n=0;n+1<r.length;n+=2){var s=[r[n+2]-r[n],r[n+3]-r[n+1]],a=Math.sqrt(s[0]*s[0]+s[1]*s[1]),o=[s[1]/a,-s[0]/a],l=[o[0]*i/2,o[1]*i/2];t.beginPath(),t.moveTo(r[n]-l[0],r[n+1]-l[1]),t.lineTo(r[n]+l[0],r[n+1]+l[1]),t.lineTo(r[n+2],r[n+3]),t.closePath(),t.fill()}};vn.drawArrowheads=function(e,t,r){var i=t._private.rscratch,n=i.edgeType==="haystack";n||this.drawArrowhead(e,t,"source",i.arrowStartX,i.arrowStartY,i.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",i.midX,i.midY,i.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",i.midX,i.midY,i.midsrcArrowAngle,r),n||this.drawArrowhead(e,t,"target",i.arrowEndX,i.arrowEndY,i.tgtArrowAngle,r)};vn.drawArrowhead=function(e,t,r,i,n,s,a){if(!(isNaN(i)||i==null||isNaN(n)||n==null||isNaN(s)||s==null)){var o=this,l=t.pstyle(r+"-arrow-shape").value;if(l!=="none"){var c=t.pstyle(r+"-arrow-fill").value==="hollow"?"both":"filled",u=t.pstyle(r+"-arrow-fill").value,h=t.pstyle("width").pfValue,d=t.pstyle(r+"-arrow-width"),p=d.value==="match-line"?h:d.pfValue;d.units==="%"&&(p*=h);var y=t.pstyle("opacity").value;a===void 0&&(a=y);var _=e.globalCompositeOperation;(a!==1||u==="hollow")&&(e.globalCompositeOperation="destination-out",o.colorFillStyle(e,255,255,255,1),o.colorStrokeStyle(e,255,255,255,1),o.drawArrowShape(t,e,c,h,l,p,i,n,s),e.globalCompositeOperation=_);var v=t.pstyle(r+"-arrow-color").value;o.colorFillStyle(e,v[0],v[1],v[2],a),o.colorStrokeStyle(e,v[0],v[1],v[2],a),o.drawArrowShape(t,e,u,h,l,p,i,n,s)}}};vn.drawArrowShape=function(e,t,r,i,n,s,a,o,l){var c=this,u=this.usePaths()&&n!=="triangle-cross",h=!1,d,p=t,y={x:a,y:o},_=e.pstyle("arrow-scale").value,v=this.getArrowWidth(i,_),g=c.arrowShapes[n];if(u){var f=c.arrowPathCache=c.arrowPathCache||[],m=Ts(n),b=f[m];b!=null?(d=t=b,h=!0):(d=t=new Path2D,f[m]=d)}h||(t.beginPath&&t.beginPath(),u?g.draw(t,1,0,{x:0,y:0},1):g.draw(t,v,l,y,i),t.closePath&&t.closePath()),t=p,u&&(t.translate(a,o),t.rotate(l),t.scale(v,v)),(r==="filled"||r==="both")&&(u?t.fill(d):t.fill()),(r==="hollow"||r==="both")&&(t.lineWidth=s/(u?v:1),t.lineJoin="miter",u?t.stroke(d):t.stroke()),u&&(t.scale(1/v,1/v),t.rotate(-l),t.translate(-a,-o))};var Hv={};Hv.safeDrawImage=function(e,t,r,i,n,s,a,o,l,c){if(!(n<=0||s<=0||l<=0||c<=0))try{e.drawImage(t,r,i,n,s,a,o,l,c)}catch(u){mt(u)}};Hv.drawInscribedImage=function(e,t,r,i,n){var s=this,a=r.position(),o=a.x,l=a.y,c=r.cy().style(),u=c.getIndexedStyle.bind(c),h=u(r,"background-fit","value",i),d=u(r,"background-repeat","value",i),p=r.width(),y=r.height(),_=r.padding()*2,v=p+(u(r,"background-width-relative-to","value",i)==="inner"?0:_),g=y+(u(r,"background-height-relative-to","value",i)==="inner"?0:_),f=r._private.rscratch,m=u(r,"background-clip","value",i),b=m==="node",C=u(r,"background-image-opacity","value",i)*n,S=u(r,"background-image-smoothing","value",i),k=r.pstyle("corner-radius").value;k!=="auto"&&(k=r.pstyle("corner-radius").pfValue);var w=t.width||t.cachedW,x=t.height||t.cachedH;(w==null||x==null)&&(document.body.appendChild(t),w=t.cachedW=t.width||t.offsetWidth,x=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var A=w,D=x;if(u(r,"background-width","value",i)!=="auto"&&(u(r,"background-width","units",i)==="%"?A=u(r,"background-width","pfValue",i)*v:A=u(r,"background-width","pfValue",i)),u(r,"background-height","value",i)!=="auto"&&(u(r,"background-height","units",i)==="%"?D=u(r,"background-height","pfValue",i)*g:D=u(r,"background-height","pfValue",i)),!(A===0||D===0)){if(h==="contain"){var T=Math.min(v/A,g/D);A*=T,D*=T}else if(h==="cover"){var T=Math.max(v/A,g/D);A*=T,D*=T}var E=o-v/2,R=u(r,"background-position-x","units",i),F=u(r,"background-position-x","pfValue",i);R==="%"?E+=(v-A)*F:E+=F;var O=u(r,"background-offset-x","units",i),$=u(r,"background-offset-x","pfValue",i);O==="%"?E+=(v-A)*$:E+=$;var H=l-g/2,L=u(r,"background-position-y","units",i),I=u(r,"background-position-y","pfValue",i);L==="%"?H+=(g-D)*I:H+=I;var P=u(r,"background-offset-y","units",i),z=u(r,"background-offset-y","pfValue",i);P==="%"?H+=(g-D)*z:H+=z,f.pathCache&&(E-=o,H-=l,o=0,l=0);var K=e.globalAlpha;e.globalAlpha=C;var te=s.getImgSmoothing(e),J=!1;if(S==="no"&&te?(s.setImgSmoothing(e,!1),J=!0):S==="yes"&&!te&&(s.setImgSmoothing(e,!0),J=!0),d==="no-repeat")b&&(e.save(),f.pathCache?e.clip(f.pathCache):(s.nodeShapes[s.getNodeShape(r)].draw(e,o,l,v,g,k,f),e.clip())),s.safeDrawImage(e,t,0,0,w,x,E,H,A,D),b&&e.restore();else{var ne=e.createPattern(t,d);e.fillStyle=ne,s.nodeShapes[s.getNodeShape(r)].draw(e,o,l,v,g,k,f),e.translate(E,H),e.fill(),e.translate(-E,-H)}e.globalAlpha=K,J&&s.setImgSmoothing(e,te)}};var Os={};Os.eleTextBiggerThanMin=function(e,t){if(!t){var r=e.cy().zoom(),i=this.getPixelRatio(),n=Math.ceil(xv(r*i));t=Math.pow(2,n)}var s=e.pstyle("font-size").pfValue*t,a=e.pstyle("min-zoomed-font-size").pfValue;return!(s<a)};Os.drawElementText=function(e,t,r,i,n){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this;if(i==null){if(s&&!a.eleTextBiggerThanMin(t))return}else if(i===!1)return;if(t.isNode()){var o=t.pstyle("label");if(!o||!o.value)return;var l=a.getLabelJustification(t);e.textAlign=l,e.textBaseline="bottom"}else{var c=t.element()._private.rscratch.badLine,u=t.pstyle("label"),h=t.pstyle("source-label"),d=t.pstyle("target-label");if(c||(!u||!u.value)&&(!h||!h.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var p=!r,y;r&&(y=r,e.translate(-y.x1,-y.y1)),n==null?(a.drawText(e,t,null,p,s),t.isEdge()&&(a.drawText(e,t,"source",p,s),a.drawText(e,t,"target",p,s))):a.drawText(e,t,n,p,s),r&&e.translate(y.x1,y.y1)};Os.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if(t=this.fontCaches[r],t.context===e)return t;return t={context:e},this.fontCaches.push(t),t};Os.setupTextStyle=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=t.pstyle("font-style").strValue,n=t.pstyle("font-size").pfValue+"px",s=t.pstyle("font-family").strValue,a=t.pstyle("font-weight").strValue,o=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*o,c=t.pstyle("color").value,u=t.pstyle("text-outline-color").value;e.font=i+" "+a+" "+n+" "+s,e.lineJoin="round",this.colorFillStyle(e,c[0],c[1],c[2],o),this.colorStrokeStyle(e,u[0],u[1],u[2],l)};function tM(e,t,r,i,n){var s=Math.min(i,n),a=s/2,o=t+i/2,l=r+n/2;e.beginPath(),e.arc(o,l,a,0,Math.PI*2),e.closePath()}function G0(e,t,r,i,n){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,a=Math.min(s,i/2,n/2);e.beginPath(),e.moveTo(t+a,r),e.lineTo(t+i-a,r),e.quadraticCurveTo(t+i,r,t+i,r+a),e.lineTo(t+i,r+n-a),e.quadraticCurveTo(t+i,r+n,t+i-a,r+n),e.lineTo(t+a,r+n),e.quadraticCurveTo(t,r+n,t,r+n-a),e.lineTo(t,r+a),e.quadraticCurveTo(t,r,t+a,r),e.closePath()}Os.getTextAngle=function(e,t){var r,i=e._private,n=i.rscratch,s=t?t+"-":"",a=e.pstyle(s+"text-rotation");if(a.strValue==="autorotate"){var o=Or(n,"labelAngle",t);r=e.isEdge()?o:0}else a.strValue==="none"?r=0:r=a.pfValue;return r};Os.drawText=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=t._private,a=s.rscratch,o=n?t.effectiveOpacity():1;if(!(n&&(o===0||t.pstyle("text-opacity").value===0))){r==="main"&&(r=null);var l=Or(a,"labelX",r),c=Or(a,"labelY",r),u,h,d=this.getLabelText(t,r);if(d!=null&&d!==""&&!isNaN(l)&&!isNaN(c)){this.setupTextStyle(e,t,n);var p=r?r+"-":"",y=Or(a,"labelWidth",r),_=Or(a,"labelHeight",r),v=t.pstyle(p+"text-margin-x").pfValue,g=t.pstyle(p+"text-margin-y").pfValue,f=t.isEdge(),m=t.pstyle("text-halign").value,b=t.pstyle("text-valign").value;f&&(m="center",b="center"),l+=v,c+=g;var C;switch(i?C=this.getTextAngle(t,r):C=0,C!==0&&(u=l,h=c,e.translate(u,h),e.rotate(C),l=0,c=0),b){case"top":break;case"center":c+=_/2;break;case"bottom":c+=_;break}var S=t.pstyle("text-background-opacity").value,k=t.pstyle("text-border-opacity").value,w=t.pstyle("text-border-width").pfValue,x=t.pstyle("text-background-padding").pfValue,A=t.pstyle("text-background-shape").strValue,D=A==="round-rectangle"||A==="roundrectangle",T=A==="circle",E=2;if(S>0||w>0&&k>0){var R=e.fillStyle,F=e.strokeStyle,O=e.lineWidth,$=t.pstyle("text-background-color").value,H=t.pstyle("text-border-color").value,L=t.pstyle("text-border-style").value,I=S>0,P=w>0&&k>0,z=l-x;switch(m){case"left":z-=y;break;case"center":z-=y/2;break}var K=c-_-x,te=y+2*x,J=_+2*x;if(I&&(e.fillStyle="rgba(".concat($[0],",").concat($[1],",").concat($[2],",").concat(S*o,")")),P&&(e.strokeStyle="rgba(".concat(H[0],",").concat(H[1],",").concat(H[2],",").concat(k*o,")"),e.lineWidth=w,e.setLineDash))switch(L){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=w/4,e.setLineDash([]);break;case"solid":default:e.setLineDash([]);break}if(D?(e.beginPath(),G0(e,z,K,te,J,E)):T?(e.beginPath(),tM(e,z,K,te,J)):(e.beginPath(),e.rect(z,K,te,J)),I&&e.fill(),P&&e.stroke(),P&&L==="double"){var ne=w/2;e.beginPath(),D?G0(e,z+ne,K+ne,te-2*ne,J-2*ne,E):e.rect(z+ne,K+ne,te-2*ne,J-2*ne),e.stroke()}e.fillStyle=R,e.strokeStyle=F,e.lineWidth=O,e.setLineDash&&e.setLineDash([])}var V=2*t.pstyle("text-outline-width").pfValue;if(V>0&&(e.lineWidth=V),t.pstyle("text-wrap").value==="wrap"){var N=Or(a,"labelWrapCachedLines",r),ee=Or(a,"labelLineHeight",r),U=y/2,X=this.getLabelJustification(t);switch(X==="auto"||(m==="left"?X==="left"?l+=-y:X==="center"&&(l+=-U):m==="center"?X==="left"?l+=-U:X==="right"&&(l+=U):m==="right"&&(X==="center"?l+=U:X==="right"&&(l+=y))),b){case"top":c-=(N.length-1)*ee;break;case"center":case"bottom":c-=(N.length-1)*ee;break}for(var M=0;M<N.length;M++)V>0&&e.strokeText(N[M],l,c),e.fillText(N[M],l,c),c+=ee}else V>0&&e.strokeText(d,l,c),e.fillText(d,l,c);C!==0&&(e.rotate(-C),e.translate(-u,-h))}}};var Qn={};Qn.drawNode=function(e,t,r){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,a=this,o,l,c=t._private,u=c.rscratch,h=t.position();if(!(!xe(h.x)||!xe(h.y))&&!(s&&!t.visible())){var d=s?t.effectiveOpacity():1,p=a.usePaths(),y,_=!1,v=t.padding();o=t.width()+2*v,l=t.height()+2*v;var g;r&&(g=r,e.translate(-g.x1,-g.y1));for(var f=t.pstyle("background-image"),m=f.value,b=new Array(m.length),C=new Array(m.length),S=0,k=0;k<m.length;k++){var w=m[k],x=b[k]=w!=null&&w!=="none";if(x){var A=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",k);S++,C[k]=a.getCachedImage(w,A,function(){c.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var D=t.pstyle("background-blacken").value,T=t.pstyle("border-width").pfValue,E=t.pstyle("background-opacity").value*d,R=t.pstyle("border-color").value,F=t.pstyle("border-style").value,O=t.pstyle("border-join").value,$=t.pstyle("border-cap").value,H=t.pstyle("border-position").value,L=t.pstyle("border-dash-pattern").pfValue,I=t.pstyle("border-dash-offset").pfValue,P=t.pstyle("border-opacity").value*d,z=t.pstyle("outline-width").pfValue,K=t.pstyle("outline-color").value,te=t.pstyle("outline-style").value,J=t.pstyle("outline-opacity").value*d,ne=t.pstyle("outline-offset").value,V=t.pstyle("corner-radius").value;V!=="auto"&&(V=t.pstyle("corner-radius").pfValue);var N=function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:E;a.eleFillStyle(e,t,Se)},ee=function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:P;a.colorStrokeStyle(e,R[0],R[1],R[2],Se)},U=function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J;a.colorStrokeStyle(e,K[0],K[1],K[2],Se)},X=function(Se,de,W,oe){var fe=a.nodePathCache=a.nodePathCache||[],pe=oC(W==="polygon"?W+","+oe.join(","):W,""+de,""+Se,""+V),ge=fe[pe],De,be=!1;return ge!=null?(De=ge,be=!0,u.pathCache=De):(De=new Path2D,fe[pe]=u.pathCache=De),{path:De,cacheHit:be}},M=t.pstyle("shape").strValue,q=t.pstyle("shape-polygon-points").pfValue;if(p){e.translate(h.x,h.y);var Q=X(o,l,M,q);y=Q.path,_=Q.cacheHit}var se=function(){if(!_){var Se=h;p&&(Se={x:0,y:0}),a.nodeShapes[a.getNodeShape(t)].draw(y||e,Se.x,Se.y,o,l,V,u)}p?e.fill(y):e.fill()},Z=function(){for(var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,W=c.backgrounding,oe=0,fe=0;fe<C.length;fe++){var pe=t.cy().style().getIndexedStyle(t,"background-image-containment","value",fe);if(de&&pe==="over"||!de&&pe==="inside"){oe++;continue}b[fe]&&C[fe].complete&&!C[fe].error&&(oe++,a.drawInscribedImage(e,C[fe],t,fe,Se))}c.backgrounding=oe!==S,W!==c.backgrounding&&t.updateStyle(!1)},Y=function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;a.hasPie(t)&&(a.drawPie(e,t,de),Se&&(p||a.nodeShapes[a.getNodeShape(t)].draw(e,h.x,h.y,o,l,V,u)))},ae=function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d;a.hasStripe(t)&&(e.save(),p?e.clip(u.pathCache):(a.nodeShapes[a.getNodeShape(t)].draw(e,h.x,h.y,o,l,V,u),e.clip()),a.drawStripe(e,t,de),e.restore(),Se&&(p||a.nodeShapes[a.getNodeShape(t)].draw(e,h.x,h.y,o,l,V,u)))},he=function(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d,de=(D>0?D:-D)*Se,W=D>0?0:255;D!==0&&(a.colorFillStyle(e,W,W,W,de),p?e.fill(y):e.fill())},ce=function(){if(T>0){if(e.lineWidth=T,e.lineCap=$,e.lineJoin=O,e.setLineDash)switch(F){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(L),e.lineDashOffset=I;break;case"solid":case"double":e.setLineDash([]);break}if(H!=="center"){if(e.save(),e.lineWidth*=2,H==="inside")p?e.clip(y):e.clip();else{var Se=new Path2D;Se.rect(-o/2-T,-l/2-T,o+2*T,l+2*T),Se.addPath(y),e.clip(Se,"evenodd")}p?e.stroke(y):e.stroke(),e.restore()}else p?e.stroke(y):e.stroke();if(F==="double"){e.lineWidth=T/3;var de=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(y):e.stroke(),e.globalCompositeOperation=de}e.setLineDash&&e.setLineDash([])}},ue=function(){if(z>0){if(e.lineWidth=z,e.lineCap="butt",e.setLineDash)switch(te){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([]);break}var Se=h;p&&(Se={x:0,y:0});var de=a.getNodeShape(t),W=T;H==="inside"&&(W=0),H==="outside"&&(W*=2);var oe=(o+W+(z+ne))/o,fe=(l+W+(z+ne))/l,pe=o*oe,ge=l*fe,De=a.nodeShapes[de].points,be;if(p){var Ne=X(pe,ge,de,De);be=Ne.path}if(de==="ellipse")a.drawEllipsePath(be||e,Se.x,Se.y,pe,ge);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(de)){var Re=0,Be=0,Ze=0;de==="round-diamond"?Re=(W+ne+z)*1.4:de==="round-heptagon"?(Re=(W+ne+z)*1.075,Ze=-(W/2+ne+z)/35):de==="round-hexagon"?Re=(W+ne+z)*1.12:de==="round-pentagon"?(Re=(W+ne+z)*1.13,Ze=-(W/2+ne+z)/15):de==="round-tag"?(Re=(W+ne+z)*1.12,Be=(W/2+z+ne)*.07):de==="round-triangle"&&(Re=(W+ne+z)*(Math.PI/2),Ze=-(W+ne/2+z)/Math.PI),Re!==0&&(oe=(o+Re)/o,pe=o*oe,["round-hexagon","round-tag"].includes(de)||(fe=(l+Re)/l,ge=l*fe)),V=V==="auto"?mC(pe,ge):V;for(var Je=pe/2,Ie=ge/2,et=V+(W+z+ne)/2,tt=new Array(De.length/2),Ot=new Array(De.length/2),Dt=0;Dt<De.length/2;Dt++)tt[Dt]={x:Se.x+Be+Je*De[Dt*2],y:Se.y+Ze+Ie*De[Dt*2+1]};var tr,Mt,Ut,pt,Nt=tt.length;for(Mt=tt[Nt-1],tr=0;tr<Nt;tr++)Ut=tt[tr%Nt],pt=tt[(tr+1)%Nt],Ot[tr]=$v(Mt,Ut,pt,et),Mt=Ut,Ut=pt;a.drawRoundPolygonPath(be||e,Se.x+Be,Se.y+Ze,o*oe,l*fe,De,Ot)}else if(["roundrectangle","round-rectangle"].includes(de))V=V==="auto"?Hn(pe,ge):V,a.drawRoundRectanglePath(be||e,Se.x,Se.y,pe,ge,V+(W+z+ne)/2);else if(["cutrectangle","cut-rectangle"].includes(de))V=V==="auto"?Av():V,a.drawCutRectanglePath(be||e,Se.x,Se.y,pe,ge,null,V+(W+z+ne)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(de))V=V==="auto"?Hn(pe,ge):V,a.drawBottomRoundRectanglePath(be||e,Se.x,Se.y,pe,ge,V+(W+z+ne)/2);else if(de==="barrel")a.drawBarrelPath(be||e,Se.x,Se.y,pe,ge);else if(de.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(de)){var ui=(W+z+ne)/o;De=iu(nu(De,ui)),a.drawPolygonPath(be||e,Se.x,Se.y,o,l,De)}else{var Pt=(W+z+ne)/o;De=iu(nu(De,-Pt)),a.drawPolygonPath(be||e,Se.x,Se.y,o,l,De)}if(p?e.stroke(be):e.stroke(),te==="double"){e.lineWidth=W/3;var Xr=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",p?e.stroke(be):e.stroke(),e.globalCompositeOperation=Xr}e.setLineDash&&e.setLineDash([])}},ye=function(){n&&a.drawNodeOverlay(e,t,h,o,l)},ve=function(){n&&a.drawNodeUnderlay(e,t,h,o,l)},_e=function(){a.drawElementText(e,t,null,i)},Ce=t.pstyle("ghost").value==="yes";if(Ce){var ke=t.pstyle("ghost-offset-x").pfValue,Me=t.pstyle("ghost-offset-y").pfValue,Ae=t.pstyle("ghost-opacity").value,We=Ae*d;e.translate(ke,Me),U(),ue(),N(Ae*E),se(),Z(We,!0),ee(Ae*P),ce(),Y(D!==0||T!==0),ae(D!==0||T!==0),Z(We,!1),he(We),e.translate(-ke,-Me)}p&&e.translate(-h.x,-h.y),ve(),p&&e.translate(h.x,h.y),U(),ue(),N(),se(),Z(d,!0),ee(),ce(),Y(D!==0||T!==0),ae(D!==0||T!==0),Z(d,!1),he(),p&&e.translate(-h.x,-h.y),_e(),ye(),r&&e.translate(g.x1,g.y1)}};var Sw=function(t){if(!["overlay","underlay"].includes(t))throw new Error("Invalid state");return function(r,i,n,s,a){var o=this;if(i.visible()){var l=i.pstyle("".concat(t,"-padding")).pfValue,c=i.pstyle("".concat(t,"-opacity")).value,u=i.pstyle("".concat(t,"-color")).value,h=i.pstyle("".concat(t,"-shape")).value,d=i.pstyle("".concat(t,"-corner-radius")).value;if(c>0){if(n=n||i.position(),s==null||a==null){var p=i.padding();s=i.width()+2*p,a=i.height()+2*p}o.colorFillStyle(r,u[0],u[1],u[2],c),o.nodeShapes[h].draw(r,n.x,n.y,s+l*2,a+l*2,d),r.fill()}}}};Qn.drawNodeOverlay=Sw("overlay");Qn.drawNodeUnderlay=Sw("underlay");Qn.hasPie=function(e){return e=e[0],e._private.hasPie};Qn.hasStripe=function(e){return e=e[0],e._private.hasStripe};Qn.drawPie=function(e,t,r,i){t=t[0],i=i||t.position();var n=t.cy().style(),s=t.pstyle("pie-size"),a=t.pstyle("pie-hole"),o=t.pstyle("pie-start-angle").pfValue,l=i.x,c=i.y,u=t.width(),h=t.height(),d=Math.min(u,h)/2,p,y=0,_=this.usePaths();if(_&&(l=0,c=0),s.units==="%"?d=d*s.pfValue:s.pfValue!==void 0&&(d=s.pfValue/2),a.units==="%"?p=d*a.pfValue:a.pfValue!==void 0&&(p=a.pfValue/2),!(p>=d))for(var v=1;v<=n.pieBackgroundN;v++){var g=t.pstyle("pie-"+v+"-background-size").value,f=t.pstyle("pie-"+v+"-background-color").value,m=t.pstyle("pie-"+v+"-background-opacity").value*r,b=g/100;b+y>1&&(b=1-y);var C=1.5*Math.PI+2*Math.PI*y;C+=o;var S=2*Math.PI*b,k=C+S;g===0||y>=1||y+b>1||(p===0?(e.beginPath(),e.moveTo(l,c),e.arc(l,c,d,C,k),e.closePath()):(e.beginPath(),e.arc(l,c,d,C,k),e.arc(l,c,p,k,C,!0),e.closePath()),this.colorFillStyle(e,f[0],f[1],f[2],m),e.fill(),y+=b)}};Qn.drawStripe=function(e,t,r,i){t=t[0],i=i||t.position();var n=t.cy().style(),s=i.x,a=i.y,o=t.width(),l=t.height(),c=0,u=this.usePaths();e.save();var h=t.pstyle("stripe-direction").value,d=t.pstyle("stripe-size");switch(h){case"vertical":break;case"righward":e.rotate(-Math.PI/2);break}var p=o,y=l;d.units==="%"?(p=p*d.pfValue,y=y*d.pfValue):d.pfValue!==void 0&&(p=d.pfValue,y=d.pfValue),u&&(s=0,a=0),a-=p/2,s-=y/2;for(var _=1;_<=n.stripeBackgroundN;_++){var v=t.pstyle("stripe-"+_+"-background-size").value,g=t.pstyle("stripe-"+_+"-background-color").value,f=t.pstyle("stripe-"+_+"-background-opacity").value*r,m=v/100;m+c>1&&(m=1-c),!(v===0||c>=1||c+m>1)&&(e.beginPath(),e.rect(s,a+y*c,p,y*m),e.closePath(),this.colorFillStyle(e,g[0],g[1],g[2],f),e.fill(),c+=m)}e.restore()};var Ir={},rM=100;Ir.getPixelRatio=function(){var e=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r};Ir.paintCache=function(e){for(var t=this.paintCaches=this.paintCaches||[],r=!0,i,n=0;n<t.length;n++)if(i=t[n],i.context===e){r=!1;break}return r&&(i={context:e},t.push(i)),i};Ir.createGradientStyleFor=function(e,t,r,i,n){var s,a=this.usePaths(),o=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if(i==="radial-gradient")if(r.isEdge()){var c=r.sourceEndpoint(),u=r.targetEndpoint(),h=r.midpoint(),d=Es(c,h),p=Es(u,h);s=e.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(d,p))}else{var y=a?{x:0,y:0}:r.position(),_=r.paddedWidth(),v=r.paddedHeight();s=e.createRadialGradient(y.x,y.y,0,y.x,y.y,Math.max(_,v))}else if(r.isEdge()){var g=r.sourceEndpoint(),f=r.targetEndpoint();s=e.createLinearGradient(g.x,g.y,f.x,f.y)}else{var m=a?{x:0,y:0}:r.position(),b=r.paddedWidth(),C=r.paddedHeight(),S=b/2,k=C/2,w=r.pstyle("background-gradient-direction").value;switch(w){case"to-bottom":s=e.createLinearGradient(m.x,m.y-k,m.x,m.y+k);break;case"to-top":s=e.createLinearGradient(m.x,m.y+k,m.x,m.y-k);break;case"to-left":s=e.createLinearGradient(m.x+S,m.y,m.x-S,m.y);break;case"to-right":s=e.createLinearGradient(m.x-S,m.y,m.x+S,m.y);break;case"to-bottom-right":case"to-right-bottom":s=e.createLinearGradient(m.x-S,m.y-k,m.x+S,m.y+k);break;case"to-top-right":case"to-right-top":s=e.createLinearGradient(m.x-S,m.y+k,m.x+S,m.y-k);break;case"to-bottom-left":case"to-left-bottom":s=e.createLinearGradient(m.x+S,m.y-k,m.x-S,m.y+k);break;case"to-top-left":case"to-left-top":s=e.createLinearGradient(m.x+S,m.y+k,m.x-S,m.y-k);break}}if(!s)return null;for(var x=l.length===o.length,A=o.length,D=0;D<A;D++)s.addColorStop(x?l[D]:D/(A-1),"rgba("+o[D][0]+","+o[D][1]+","+o[D][2]+","+n+")");return s};Ir.gradientFillStyle=function(e,t,r,i){var n=this.createGradientStyleFor(e,"background",t,r,i);if(!n)return null;e.fillStyle=n};Ir.colorFillStyle=function(e,t,r,i,n){e.fillStyle="rgba("+t+","+r+","+i+","+n+")"};Ir.eleFillStyle=function(e,t,r){var i=t.pstyle("background-fill").value;if(i==="linear-gradient"||i==="radial-gradient")this.gradientFillStyle(e,t,i,r);else{var n=t.pstyle("background-color").value;this.colorFillStyle(e,n[0],n[1],n[2],r)}};Ir.gradientStrokeStyle=function(e,t,r,i){var n=this.createGradientStyleFor(e,"line",t,r,i);if(!n)return null;e.strokeStyle=n};Ir.colorStrokeStyle=function(e,t,r,i,n){e.strokeStyle="rgba("+t+","+r+","+i+","+n+")"};Ir.eleStrokeStyle=function(e,t,r){var i=t.pstyle("line-fill").value;if(i==="linear-gradient"||i==="radial-gradient")this.gradientStrokeStyle(e,t,i,r);else{var n=t.pstyle("line-color").value;this.colorStrokeStyle(e,n[0],n[1],n[2],r)}};Ir.matchCanvasSize=function(e){var t=this,r=t.data,i=t.findContainerClientCoords(),n=i[2],s=i[3],a=t.getPixelRatio(),o=t.motionBlurPxRatio;(e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE]||e===t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG])&&(a=o);var l=n*a,c=s*a,u;if(!(l===t.canvasWidth&&c===t.canvasHeight)){t.fontCaches=null;var h=r.canvasContainer;h.style.width=n+"px",h.style.height=s+"px";for(var d=0;d<t.CANVAS_LAYERS;d++)u=r.canvases[d],u.width=l,u.height=c,u.style.width=n+"px",u.style.height=s+"px";for(var d=0;d<t.BUFFER_COUNT;d++)u=r.bufferCanvases[d],u.width=l,u.height=c,u.style.width=n+"px",u.style.height=s+"px";t.textureMult=1,a<=1&&(u=r.bufferCanvases[t.TEXTURE_BUFFER],t.textureMult=2,u.width=l*t.textureMult,u.height=c*t.textureMult),t.canvasWidth=l,t.canvasHeight=c,t.pixelRatio=a}};Ir.renderTo=function(e,t,r,i){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:i})};Ir.clearCanvas=function(){var e=this,t=e.data;function r(i){i.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])};Ir.render=function(e){var t=this;e=e||hC();var r=t.cy,i=e.forcedContext,n=e.drawAllLayers,s=e.drawOnlyNodeLayer,a=e.forcedZoom,o=e.forcedPan,l=e.forcedPxRatio===void 0?this.getPixelRatio():e.forcedPxRatio,c=t.data,u=c.canvasNeedsRedraw,h=t.textureOnViewport&&!i&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),d=e.motionBlur!==void 0?e.motionBlur:t.motionBlur,p=t.motionBlurPxRatio,y=r.hasCompoundNodes(),_=t.hoverData.draggingEles,v=!!(t.hoverData.selecting||t.touchData.selecting);d=d&&!i&&t.motionBlurEnabled&&!v;var g=d;i||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!i&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),d&&(t.mbFrames==null&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(g=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!h&&(u[t.NODE]=!0,u[t.SELECT_BOX]=!0);var f=r.style(),m=r.zoom(),b=a!==void 0?a:m,C=r.pan(),S={x:C.x,y:C.y},k={zoom:m,pan:{x:C.x,y:C.y}},w=t.prevViewport,x=w===void 0||k.zoom!==w.zoom||k.pan.x!==w.pan.x||k.pan.y!==w.pan.y;!x&&!(_&&!y)&&(t.motionBlurPxRatio=1),o&&(S=o),b*=l,S.x*=l,S.y*=l;var A=t.getCachedZSortedEles();function D(ee,U,X,M,q){var Q=ee.globalCompositeOperation;ee.globalCompositeOperation="destination-out",t.colorFillStyle(ee,255,255,255,t.motionBlurTransparency),ee.fillRect(U,X,M,q),ee.globalCompositeOperation=Q}function T(ee,U){var X,M,q,Q;!t.clearingMotionBlur&&(ee===c.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]||ee===c.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG])?(X={x:C.x*p,y:C.y*p},M=m*p,q=t.canvasWidth*p,Q=t.canvasHeight*p):(X=S,M=b,q=t.canvasWidth,Q=t.canvasHeight),ee.setTransform(1,0,0,1,0,0),U==="motionBlur"?D(ee,0,0,q,Q):!i&&(U===void 0||U)&&ee.clearRect(0,0,q,Q),n||(ee.translate(X.x,X.y),ee.scale(M,M)),o&&ee.translate(o.x,o.y),a&&ee.scale(a,a)}if(h||(t.textureDrawLastFrame=!1),h){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var E=t.data.bufferContexts[t.TEXTURE_BUFFER];E.setTransform(1,0,0,1,0,0),E.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:E,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult});var k=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight};k.mpan={x:(0-k.pan.x)/k.zoom,y:(0-k.pan.y)/k.zoom}}u[t.DRAG]=!1,u[t.NODE]=!1;var R=c.contexts[t.NODE],F=t.textureCache.texture,k=t.textureCache.viewport;R.setTransform(1,0,0,1,0,0),d?D(R,0,0,k.width,k.height):R.clearRect(0,0,k.width,k.height);var O=f.core("outside-texture-bg-color").value,$=f.core("outside-texture-bg-opacity").value;t.colorFillStyle(R,O[0],O[1],O[2],$),R.fillRect(0,0,k.width,k.height);var m=r.zoom();T(R,!1),R.clearRect(k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l),R.drawImage(F,k.mpan.x,k.mpan.y,k.width/k.zoom/l,k.height/k.zoom/l)}else t.textureOnViewport&&!i&&(t.textureCache=null);var H=r.extent(),L=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),I=t.hideEdgesOnViewport&&L,P=[];if(P[t.NODE]=!u[t.NODE]&&d&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,P[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),P[t.DRAG]=!u[t.DRAG]&&d&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,P[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),u[t.NODE]||n||s||P[t.NODE]){var z=d&&!P[t.NODE]&&p!==1,R=i||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:c.contexts[t.NODE]),K=d&&!z?"motionBlur":void 0;T(R,K),I?t.drawCachedNodes(R,A.nondrag,l,H):t.drawLayeredElements(R,A.nondrag,l,H),t.debug&&t.drawDebugPoints(R,A.nondrag),!n&&!d&&(u[t.NODE]=!1)}if(!s&&(u[t.DRAG]||n||P[t.DRAG])){var z=d&&!P[t.DRAG]&&p!==1,R=i||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:c.contexts[t.DRAG]);T(R,d&&!z?"motionBlur":void 0),I?t.drawCachedNodes(R,A.drag,l,H):t.drawCachedElements(R,A.drag,l,H),t.debug&&t.drawDebugPoints(R,A.drag),!n&&!d&&(u[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,T),d&&p!==1){var te=c.contexts[t.NODE],J=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],ne=c.contexts[t.DRAG],V=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],N=function(U,X,M){U.setTransform(1,0,0,1,0,0),M||!g?U.clearRect(0,0,t.canvasWidth,t.canvasHeight):D(U,0,0,t.canvasWidth,t.canvasHeight);var q=p;U.drawImage(X,0,0,t.canvasWidth*q,t.canvasHeight*q,0,0,t.canvasWidth,t.canvasHeight)};(u[t.NODE]||P[t.NODE])&&(N(te,J,P[t.NODE]),u[t.NODE]=!1),(u[t.DRAG]||P[t.DRAG])&&(N(ne,V,P[t.DRAG]),u[t.DRAG]=!1)}t.prevViewport=k,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),d&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!h,t.mbFrames=0,u[t.NODE]=!0,u[t.DRAG]=!0,t.redraw()},rM)),i||r.emit("render")};var eo;Ir.drawSelectionRectangle=function(e,t){var r=this,i=r.cy,n=r.data,s=i.style(),a=e.drawOnlyNodeLayer,o=e.drawAllLayers,l=n.canvasNeedsRedraw,c=e.forcedContext;if(r.showFps||!a&&l[r.SELECT_BOX]&&!o){var u=c||n.contexts[r.SELECT_BOX];if(t(u),r.selection[4]==1&&(r.hoverData.selecting||r.touchData.selecting)){var h=r.cy.zoom(),d=s.core("selection-box-border-width").value/h;u.lineWidth=d,u.fillStyle="rgba("+s.core("selection-box-color").value[0]+","+s.core("selection-box-color").value[1]+","+s.core("selection-box-color").value[2]+","+s.core("selection-box-opacity").value+")",u.fillRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]),d>0&&(u.strokeStyle="rgba("+s.core("selection-box-border-color").value[0]+","+s.core("selection-box-border-color").value[1]+","+s.core("selection-box-border-color").value[2]+","+s.core("selection-box-opacity").value+")",u.strokeRect(r.selection[0],r.selection[1],r.selection[2]-r.selection[0],r.selection[3]-r.selection[1]))}if(n.bgActivePosistion&&!r.hoverData.selecting){var h=r.cy.zoom(),p=n.bgActivePosistion;u.fillStyle="rgba("+s.core("active-bg-color").value[0]+","+s.core("active-bg-color").value[1]+","+s.core("active-bg-color").value[2]+","+s.core("active-bg-opacity").value+")",u.beginPath(),u.arc(p.x,p.y,s.core("active-bg-size").pfValue/h,0,2*Math.PI),u.fill()}var y=r.lastRedrawTime;if(r.showFps&&y){y=Math.round(y);var _=Math.round(1e3/y),v="1 frame = "+y+" ms = "+_+" fps";if(u.setTransform(1,0,0,1,0,0),u.fillStyle="rgba(255, 0, 0, 0.75)",u.strokeStyle="rgba(255, 0, 0, 0.75)",u.font="30px Arial",!eo){var g=u.measureText(v);eo=g.actualBoundingBoxAscent}u.fillText(v,0,eo);var f=60;u.strokeRect(0,eo+10,250,20),u.fillRect(0,eo+10,250*Math.min(_/f,1),20)}o||(l[r.SELECT_BOX]=!1)}};function K0(e,t,r){var i=e.createShader(t);if(e.shaderSource(i,r),e.compileShader(i),!e.getShaderParameter(i,e.COMPILE_STATUS))throw new Error(e.getShaderInfoLog(i));return i}function iM(e,t,r){var i=K0(e,e.VERTEX_SHADER,t),n=K0(e,e.FRAGMENT_SHADER,r),s=e.createProgram();if(e.attachShader(s,i),e.attachShader(s,n),e.linkProgram(s),!e.getProgramParameter(s,e.LINK_STATUS))throw new Error("Could not initialize shaders");return s}function nM(e,t,r){r===void 0&&(r=t);var i=e.makeOffscreenCanvas(t,r),n=i.context=i.getContext("2d");return i.clear=function(){return n.clearRect(0,0,i.width,i.height)},i.clear(),i}function qv(e){var t=e.pixelRatio,r=e.cy.zoom(),i=e.cy.pan();return{zoom:r*t,pan:{x:i.x*t,y:i.y*t}}}function sM(e){var t=e.pixelRatio,r=e.cy.zoom();return r*t}function aM(e,t,r,i,n){var s=i*r+t.x,a=n*r+t.y;return a=Math.round(e.canvasHeight-a),[s,a]}function oM(e){return e.pstyle("background-fill").value!=="solid"||e.pstyle("background-image").strValue!=="none"?!1:e.pstyle("border-width").value===0||e.pstyle("border-opacity").value===0?!0:e.pstyle("border-style").value==="solid"}function lM(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function us(e,t,r){var i=e[0]/255,n=e[1]/255,s=e[2]/255,a=t,o=r||new Array(4);return o[0]=i*a,o[1]=n*a,o[2]=s*a,o[3]=a,o}function Zs(e,t){var r=t||new Array(4);return r[0]=(e>>0&255)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function cM(e){return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}function uM(e,t){var r=e.createTexture();return r.buffer=function(i){e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},r.deleteTexture=function(){e.deleteTexture(r)},r}function kw(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function xw(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function hM(e,t,r,i,n,s){switch(t){case e.FLOAT:return new Float32Array(r.buffer,s*i,n);case e.INT:return new Int32Array(r.buffer,s*i,n)}}function dM(e,t,r,i){var n=kw(e,t),s=jt(n,2),a=s[0],o=s[1],l=xw(e,o,i),c=e.createBuffer();return e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,l,e.STATIC_DRAW),o===e.FLOAT?e.vertexAttribPointer(r,a,o,!1,0,0):o===e.INT&&e.vertexAttribIPointer(r,a,o,0,0),e.enableVertexAttribArray(r),e.bindBuffer(e.ARRAY_BUFFER,null),c}function Ti(e,t,r,i){var n=kw(e,r),s=jt(n,3),a=s[0],o=s[1],l=s[2],c=xw(e,o,t*a),u=a*l,h=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,h),e.bufferData(e.ARRAY_BUFFER,t*u,e.DYNAMIC_DRAW),e.enableVertexAttribArray(i),o===e.FLOAT?e.vertexAttribPointer(i,a,o,!1,u,0):o===e.INT&&e.vertexAttribIPointer(i,a,o,u,0),e.vertexAttribDivisor(i,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var d=new Array(t),p=0;p<t;p++)d[p]=hM(e,o,c,u,a,p);return h.dataArray=c,h.stride=u,h.size=a,h.getView=function(y){return d[y]},h.setPoint=function(y,_,v){var g=d[y];g[0]=_,g[1]=v},h.bufferSubData=function(y){e.bindBuffer(e.ARRAY_BUFFER,h),y?e.bufferSubData(e.ARRAY_BUFFER,0,c,0,y*a):e.bufferSubData(e.ARRAY_BUFFER,0,c)},h}function fM(e,t,r){for(var i=9,n=new Float32Array(t*i),s=new Array(t),a=0;a<t;a++){var o=a*i*4;s[a]=new Float32Array(n.buffer,o,i)}var l=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferData(e.ARRAY_BUFFER,n.byteLength,e.DYNAMIC_DRAW);for(var c=0;c<3;c++){var u=r+c;e.enableVertexAttribArray(u),e.vertexAttribPointer(u,3,e.FLOAT,!1,36,c*12),e.vertexAttribDivisor(u,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),l.getMatrixView=function(h){return s[h]},l.setData=function(h,d){s[d].set(h,0)},l.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,l),e.bufferSubData(e.ARRAY_BUFFER,0,n)},l}function pM(e){var t=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,t);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0),e.bindFramebuffer(e.FRAMEBUFFER,null),t.setFramebufferAttachmentSizes=function(i,n){e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,i,n,0,e.RGBA,e.UNSIGNED_BYTE,null)},t}var Y0=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Sf(){var e=new Y0(9);return Y0!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function X0(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function vM(e,t,r){var i=t[0],n=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=r[0],p=r[1],y=r[2],_=r[3],v=r[4],g=r[5],f=r[6],m=r[7],b=r[8];return e[0]=d*i+p*a+y*c,e[1]=d*n+p*o+y*u,e[2]=d*s+p*l+y*h,e[3]=_*i+v*a+g*c,e[4]=_*n+v*o+g*u,e[5]=_*s+v*l+g*h,e[6]=f*i+m*a+b*c,e[7]=f*n+m*o+b*u,e[8]=f*s+m*l+b*h,e}function Ac(e,t,r){var i=t[0],n=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=r[0],p=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=a,e[4]=o,e[5]=l,e[6]=d*i+p*a+c,e[7]=d*n+p*o+u,e[8]=d*s+p*l+h,e}function Z0(e,t,r){var i=t[0],n=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=Math.sin(r),p=Math.cos(r);return e[0]=p*i+d*a,e[1]=p*n+d*o,e[2]=p*s+d*l,e[3]=p*a-d*i,e[4]=p*o-d*n,e[5]=p*l-d*s,e[6]=c,e[7]=u,e[8]=h,e}function Tp(e,t,r){var i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function gM(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}var mM=(function(){function e(t,r,i,n){Yn(this,e),this.debugID=Math.floor(Math.random()*1e4),this.r=t,this.texSize=r,this.texRows=i,this.texHeight=Math.floor(r/i),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=n(t,r,r),this.scratch=n(t,r,this.texHeight,"scratch")}return Xn(e,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(r){var i=r.w,n=r.h,s=this.texHeight,a=this.texSize,o=s/n,l=i*o,c=n*o;return l>a&&(o=a/i,l=i*o,c=n*o),{scale:o,texW:l,texH:c}}},{key:"draw",value:function(r,i,n){var s=this;if(this.locked)throw new Error("can't draw, atlas is locked");var a=this.texSize,o=this.texRows,l=this.texHeight,c=this.getScale(i),u=c.scale,h=c.texW,d=c.texH,p=function(m,b){if(n&&b){var C=b.context,S=m.x,k=m.row,w=S,x=l*k;C.save(),C.translate(w,x),C.scale(u,u),n(C,i),C.restore()}},y=[null,null],_=function(){p(s.freePointer,s.canvas),y[0]={x:s.freePointer.x,y:s.freePointer.row*l,w:h,h:d},y[1]={x:s.freePointer.x+h,y:s.freePointer.row*l,w:0,h:d},s.freePointer.x+=h,s.freePointer.x==a&&(s.freePointer.x=0,s.freePointer.row++)},v=function(){var m=s.scratch,b=s.canvas;m.clear(),p({x:0,row:0},m);var C=a-s.freePointer.x,S=h-C,k=l;{var w=s.freePointer.x,x=s.freePointer.row*l,A=C;b.context.drawImage(m,0,0,A,k,w,x,A,k),y[0]={x:w,y:x,w:A,h:d}}{var D=C,T=(s.freePointer.row+1)*l,E=S;b&&b.context.drawImage(m,D,0,E,k,0,T,E,k),y[1]={x:0,y:T,w:E,h:d}}s.freePointer.x=S,s.freePointer.row++},g=function(){s.freePointer.x=0,s.freePointer.row++};if(this.freePointer.x+h<=a)_();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===a?(g(),_()):this.enableWrapping?v():(g(),_())}return this.keyToLocation.set(r,y),this.needsBuffer=!0,y}},{key:"getOffsets",value:function(r){return this.keyToLocation.get(r)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(r){if(this.locked)return!1;var i=this.texSize,n=this.texRows,s=this.getScale(r),a=s.texW;return this.freePointer.x+a>i?this.freePointer.row<n-1:!0}},{key:"bufferIfNeeded",value:function(r){this.texture||(this.texture=uM(r,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),yM=(function(){function e(t,r,i,n){Yn(this,e),this.r=t,this.texSize=r,this.texRows=i,this.createTextureCanvas=n,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Xn(e,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var r=this.r,i=this.texSize,n=this.texRows,s=this.createTextureCanvas;return new mM(r,i,n,s)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var r=this.r,i=this.texSize,n=this.texRows,s=this.createTextureCanvas,a=Math.floor(i/n);this.scratch=s(r,i,a,"scratch")}return this.scratch}},{key:"draw",value:function(r,i,n){var s=this.styleKeyToAtlas.get(r);return s||(s=this.atlases[this.atlases.length-1],(!s||!s.canFit(i))&&(s&&s.lock(),s=this._createAtlas(),this.atlases.push(s)),s.draw(r,i,n),this.styleKeyToAtlas.set(r,s)),s}},{key:"getAtlas",value:function(r){return this.styleKeyToAtlas.get(r)}},{key:"hasAtlas",value:function(r){return this.styleKeyToAtlas.has(r)}},{key:"markKeyForGC",value:function(r){this.markedKeys.add(r)}},{key:"gc",value:function(){var r=this,i=this.markedKeys;if(i.size===0){console.log("nothing to garbage collect");return}var n=[],s=new Map,a=null,o=zr(this.atlases),l;try{var c=function(){var h=l.value,d=h.getKeys(),p=_M(i,d);if(p.size===0)return n.push(h),d.forEach(function(C){return s.set(C,h)}),1;a||(a=r._createAtlas(),n.push(a));var y=zr(d),_;try{for(y.s();!(_=y.n()).done;){var v=_.value;if(!p.has(v)){var g=h.getOffsets(v),f=jt(g,2),m=f[0],b=f[1];a.canFit({w:m.w+b.w,h:m.h})||(a.lock(),a=r._createAtlas(),n.push(a)),h.canvas&&(r._copyTextureToNewAtlas(v,h,a),s.set(v,a))}}}catch(C){y.e(C)}finally{y.f()}h.dispose()};for(o.s();!(l=o.n()).done;)c()}catch(u){o.e(u)}finally{o.f()}this.atlases=n,this.styleKeyToAtlas=s,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(r,i,n){var s=i.getOffsets(r),a=jt(s,2),o=a[0],l=a[1];if(l.w===0)n.draw(r,o,function(d){d.drawImage(i.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var c=this._getScratchCanvas();c.clear(),c.context.drawImage(i.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),c.context.drawImage(i.canvas,l.x,l.y,l.w,l.h,o.w,0,l.w,l.h);var u=o.w+l.w,h=o.h;n.draw(r,{w:u,h},function(d){d.drawImage(c,0,0,u,h,0,0,u,h)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function _M(e,t){return e.intersection?e.intersection(t):new Set(Jc(e).filter(function(r){return t.has(r)}))}var bM=(function(){function e(t,r){Yn(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Xn(e,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(r,i){var n=this.globalOptions,s=n.webglTexSize,a=n.createTextureCanvas,o=i.texRows,l=this._cacheScratchCanvas(a),c=new yM(this.r,s,o,l);this.collections.set(r,c)}},{key:"addRenderType",value:function(r,i){var n=i.collection;if(!this.collections.has(n))throw new Error("invalid atlas collection name '".concat(n,"'"));var s=this.collections.get(n),a=je({type:r,atlasCollection:s},i);this.renderTypes.set(r,a)}},{key:"getRenderTypeOpts",value:function(r){return this.renderTypes.get(r)}},{key:"getAtlasCollection",value:function(r){return this.collections.get(r)}},{key:"_cacheScratchCanvas",value:function(r){var i=-1,n=-1,s=null;return function(a,o,l,c){return c?((!s||o!=i||l!=n)&&(i=o,n=l,s=r(a,o,l)),s):r(a,o,l)}}},{key:"_key",value:function(r,i){return"".concat(r,"-").concat(i)}},{key:"invalidate",value:function(r){var i=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.forceRedraw,a=s===void 0?!1:s,o=n.filterEle,l=o===void 0?function(){return!0}:o,c=n.filterType,u=c===void 0?function(){return!0}:c,h=!1,d=!1,p=zr(r),y;try{for(p.s();!(y=p.n()).done;){var _=y.value;if(l(_)){var v=zr(this.renderTypes.values()),g;try{var f=function(){var b=g.value,C=b.type;if(u(C)){var S=i.collections.get(b.collection),k=b.getKey(_),w=Array.isArray(k)?k:[k];if(a)w.forEach(function(T){return S.markKeyForGC(T)}),d=!0;else{var x=b.getID?b.getID(_):_.id(),A=i._key(C,x),D=i.typeAndIdToKey.get(A);D!==void 0&&!lM(w,D)&&(h=!0,i.typeAndIdToKey.delete(A),D.forEach(function(T){return S.markKeyForGC(T)}))}}};for(v.s();!(g=v.n()).done;)f()}catch(m){v.e(m)}finally{v.f()}}}}catch(m){p.e(m)}finally{p.f()}return d&&(this.gc(),h=!1),h}},{key:"gc",value:function(){var r=zr(this.collections.values()),i;try{for(r.s();!(i=r.n()).done;){var n=i.value;n.gc()}}catch(s){r.e(s)}finally{r.f()}}},{key:"getOrCreateAtlas",value:function(r,i,n,s){var a=this.renderTypes.get(i),o=this.collections.get(a.collection),l=!1,c=o.draw(s,n,function(d){a.drawClipped?(d.save(),d.beginPath(),d.rect(0,0,n.w,n.h),d.clip(),a.drawElement(d,r,n,!0,!0),d.restore()):a.drawElement(d,r,n,!0,!0),l=!0});if(l){var u=a.getID?a.getID(r):r.id(),h=this._key(i,u);this.typeAndIdToKey.has(h)?this.typeAndIdToKey.get(h).push(s):this.typeAndIdToKey.set(h,[s])}return c}},{key:"getAtlasInfo",value:function(r,i){var n=this,s=this.renderTypes.get(i),a=s.getKey(r),o=Array.isArray(a)?a:[a];return o.map(function(l){var c=s.getBoundingBox(r,l),u=n.getOrCreateAtlas(r,i,c,l),h=u.getOffsets(l),d=jt(h,2),p=d[0],y=d[1];return{atlas:u,tex:p,tex1:p,tex2:y,bb:c}})}},{key:"getDebugInfo",value:function(){var r=[],i=zr(this.collections),n;try{for(i.s();!(n=i.n()).done;){var s=jt(n.value,2),a=s[0],o=s[1],l=o.getCounts(),c=l.keyCount,u=l.atlasCount;r.push({type:a,keyCount:c,atlasCount:u})}}catch(h){i.e(h)}finally{i.f()}return r}}])})(),CM=(function(){function e(t){Yn(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]}return Xn(e,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(r,i){return i})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(r){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(r):!0}},{key:"getAtlasIndexForBatch",value:function(r){var i=this.batchAtlases.indexOf(r);if(i<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(r),i=this.batchAtlases.length-1}return i}}])})(),wM=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,SM=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,kM=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,xM=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,Bo={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},hu={IGNORE:1,USE_BB:2},kf=0,Q0=1,J0=2,xf=3,Qs=4,tc=5,to=6,ro=7,TM=(function(){function e(t,r,i){Yn(this,e),this.r=t,this.gl=r,this.maxInstances=i.webglBatchSize,this.atlasSize=i.webglTexSize,this.bgColor=i.bgColor,this.debug=i.webglDebug,this.batchDebugInfo=[],i.enableWrapping=!0,i.createTextureCanvas=nM,this.atlasManager=new bM(t,i),this.batchManager=new CM(i),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(Bo.SCREEN),this.pickingProgram=this._createShaderProgram(Bo.PICKING),this.vao=this._createVAO()}return Xn(e,[{key:"addAtlasCollection",value:function(r,i){this.atlasManager.addAtlasCollection(r,i)}},{key:"addTextureAtlasRenderType",value:function(r,i){this.atlasManager.addRenderType(r,i)}},{key:"addSimpleShapeRenderType",value:function(r,i){this.simpleShapeOptions.set(r,i)}},{key:"invalidate",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=i.type,s=this.atlasManager;return n?s.invalidate(r,{filterType:function(o){return o===n},forceRedraw:!0}):s.invalidate(r)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(r){var i=this.gl,n=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(kf,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Qs," || aVertType == ").concat(ro,` 
             || aVertType == `).concat(tc," || aVertType == ").concat(to,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Q0,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(J0,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(xf,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),s=this.batchManager.getIndexArray(),a=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(s.map(function(c){return"uniform sampler2D uTexture".concat(c,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(wM,`
      `).concat(SM,`
      `).concat(kM,`
      `).concat(xM,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(kf,`) {
          // look up the texel from the texture unit
          `).concat(s.map(function(c){return"if(vAtlasId == ".concat(c,") outColor = texture(uTexture").concat(c,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(xf,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Qs,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Qs," || vVertType == ").concat(ro,` 
          || vVertType == `).concat(tc," || vVertType == ").concat(to,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Qs,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(ro,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(ro,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(r.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=iM(i,n,a);o.aPosition=i.getAttribLocation(o,"aPosition"),o.aIndex=i.getAttribLocation(o,"aIndex"),o.aVertType=i.getAttribLocation(o,"aVertType"),o.aTransform=i.getAttribLocation(o,"aTransform"),o.aAtlasId=i.getAttribLocation(o,"aAtlasId"),o.aTex=i.getAttribLocation(o,"aTex"),o.aPointAPointB=i.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=i.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=i.getAttribLocation(o,"aLineWidth"),o.aColor=i.getAttribLocation(o,"aColor"),o.aCornerRadius=i.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=i.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=i.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=i.getUniformLocation(o,"uAtlasSize"),o.uBGColor=i.getUniformLocation(o,"uBGColor"),o.uZoom=i.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)o.uTextures.push(i.getUniformLocation(o,"uTexture".concat(l)));return o}},{key:"_createVAO",value:function(){var r=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=r.length/2;var i=this.maxInstances,n=this.gl,s=this.program,a=n.createVertexArray();return n.bindVertexArray(a),dM(n,"vec2",s.aPosition,r),this.transformBuffer=fM(n,i,s.aTransform),this.indexBuffer=Ti(n,i,"vec4",s.aIndex),this.vertTypeBuffer=Ti(n,i,"int",s.aVertType),this.atlasIdBuffer=Ti(n,i,"int",s.aAtlasId),this.texBuffer=Ti(n,i,"vec4",s.aTex),this.pointAPointBBuffer=Ti(n,i,"vec4",s.aPointAPointB),this.pointCPointDBuffer=Ti(n,i,"vec4",s.aPointCPointD),this.lineWidthBuffer=Ti(n,i,"vec2",s.aLineWidth),this.colorBuffer=Ti(n,i,"vec4",s.aColor),this.cornerRadiusBuffer=Ti(n,i,"vec4",s.aCornerRadius),this.borderColorBuffer=Ti(n,i,"vec4",s.aBorderColor),n.bindVertexArray(null),a}},{key:"buffers",get:function(){var r=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(i){return En(i,"Buffer")}).map(function(i){return r[i]})),this._buffers}},{key:"startFrame",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Bo.SCREEN;this.panZoomMatrix=r,this.renderTarget=i,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(r,i){return r.visible()?i&&i.isVisible?i.isVisible(r):!0:!1}},{key:"drawTexture",value:function(r,i,n){var s=this.atlasManager,a=this.batchManager,o=s.getRenderTypeOpts(n);if(this._isVisible(r,o)&&!(r.isEdge()&&!this._isValidEdge(r))){if(this.renderTarget.picking&&o.getTexPickingMode){var l=o.getTexPickingMode(r);if(l===hu.IGNORE)return;if(l==hu.USE_BB){this.drawPickingRectangle(r,i,n);return}}var c=s.getAtlasInfo(r,n),u=zr(c),h;try{for(u.s();!(h=u.n()).done;){var d=h.value,p=d.atlas,y=d.tex1,_=d.tex2;a.canAddToCurrentBatch(p)||this.endBatch();for(var v=a.getAtlasIndexForBatch(p),g=0,f=[[y,!0],[_,!1]];g<f.length;g++){var m=jt(f[g],2),b=m[0],C=m[1];if(b.w!=0){var S=this.instanceCount;this.vertTypeBuffer.getView(S)[0]=kf;var k=this.indexBuffer.getView(S);Zs(i,k);var w=this.atlasIdBuffer.getView(S);w[0]=v;var x=this.texBuffer.getView(S);x[0]=b.x,x[1]=b.y,x[2]=b.w,x[3]=b.h;var A=this.transformBuffer.getMatrixView(S);this.setTransformMatrix(r,A,o,d,C),this.instanceCount++,C||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(D){u.e(D)}finally{u.f()}}}},{key:"setTransformMatrix",value:function(r,i,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(n.shapeProps&&n.shapeProps.padding&&(o=r.pstyle(n.shapeProps.padding).pfValue),s){var l=s.bb,c=s.tex1,u=s.tex2,h=c.w/(c.w+u.w);a||(h=1-h);var d=this._getAdjustedBB(l,o,a,h);this._applyTransformMatrix(i,d,n,r)}else{var p=n.getBoundingBox(r),y=this._getAdjustedBB(p,o,!0,1);this._applyTransformMatrix(i,y,n,r)}}},{key:"_applyTransformMatrix",value:function(r,i,n,s){var a,o;X0(r);var l=n.getRotation?n.getRotation(s):0;if(l!==0){var c=n.getRotationPoint(s),u=c.x,h=c.y;Ac(r,r,[u,h]),Z0(r,r,l);var d=n.getRotationOffset(s);a=d.x+(i.xOffset||0),o=d.y+(i.yOffset||0)}else a=i.x1,o=i.y1;Ac(r,r,[a,o]),Tp(r,r,[i.w,i.h])}},{key:"_getAdjustedBB",value:function(r,i,n,s){var a=r.x1,o=r.y1,l=r.w,c=r.h,u=r.yOffset;i&&(a-=i,o-=i,l+=2*i,c+=2*i);var h=0,d=l*s;return n&&s<1?l=d:!n&&s<1&&(h=l-d,a+=h,l=d),{x1:a,y1:o,w:l,h:c,xOffset:h,yOffset:u}}},{key:"drawPickingRectangle",value:function(r,i,n){var s=this.atlasManager.getRenderTypeOpts(n),a=this.instanceCount;this.vertTypeBuffer.getView(a)[0]=Qs;var o=this.indexBuffer.getView(a);Zs(i,o);var l=this.colorBuffer.getView(a);us([0,0,0],1,l);var c=this.transformBuffer.getMatrixView(a);this.setTransformMatrix(r,c,s),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(r,i,n){var s=this.simpleShapeOptions.get(n);if(this._isVisible(r,s)){var a=s.shapeProps,o=this._getVertTypeForShape(r,a.shape);if(o===void 0||s.isSimple&&!s.isSimple(r)){this.drawTexture(r,i,n);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=o,o===tc||o===to){var c=s.getBoundingBox(r),u=this._getCornerRadius(r,a.radius,c),h=this.cornerRadiusBuffer.getView(l);h[0]=u,h[1]=u,h[2]=u,h[3]=u,o===to&&(h[0]=0,h[2]=0)}var d=this.indexBuffer.getView(l);Zs(i,d);var p=r.pstyle(a.color).value,y=r.pstyle(a.opacity).value,_=this.colorBuffer.getView(l);us(p,y,_);var v=this.lineWidthBuffer.getView(l);if(v[0]=0,v[1]=0,a.border){var g=r.pstyle("border-width").value;if(g>0){var f=r.pstyle("border-color").value,m=r.pstyle("border-opacity").value,b=this.borderColorBuffer.getView(l);us(f,m,b);var C=r.pstyle("border-position").value;if(C==="inside")v[0]=0,v[1]=-g;else if(C==="outside")v[0]=g,v[1]=0;else{var S=g/2;v[0]=S,v[1]=-S}}}var k=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(r,k,s),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(r,i){var n=r.pstyle(i).value;switch(n){case"rectangle":return Qs;case"ellipse":return ro;case"roundrectangle":case"round-rectangle":return tc;case"bottom-round-rectangle":return to;default:return}}},{key:"_getCornerRadius",value:function(r,i,n){var s=n.w,a=n.h;if(r.pstyle(i).value==="auto")return Hn(s,a);var o=r.pstyle(i).pfValue,l=s/2,c=a/2;return Math.min(o,c,l)}},{key:"drawEdgeArrow",value:function(r,i,n){if(r.visible()){var s=r._private.rscratch,a,o,l;if(n==="source"?(a=s.arrowStartX,o=s.arrowStartY,l=s.srcArrowAngle):(a=s.arrowEndX,o=s.arrowEndY,l=s.tgtArrowAngle),!(isNaN(a)||a==null||isNaN(o)||o==null||isNaN(l)||l==null)){var c=r.pstyle(n+"-arrow-shape").value;if(c!=="none"){var u=r.pstyle(n+"-arrow-color").value,h=r.pstyle("opacity").value,d=r.pstyle("line-opacity").value,p=h*d,y=r.pstyle("width").pfValue,_=r.pstyle("arrow-scale").value,v=this.r.getArrowWidth(y,_),g=this.instanceCount,f=this.transformBuffer.getMatrixView(g);X0(f),Ac(f,f,[a,o]),Tp(f,f,[v,v]),Z0(f,f,l),this.vertTypeBuffer.getView(g)[0]=xf;var m=this.indexBuffer.getView(g);Zs(i,m);var b=this.colorBuffer.getView(g);us(u,p,b),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(r,i){if(r.visible()){var n=this._getEdgePoints(r);if(n){var s=r.pstyle("opacity").value,a=r.pstyle("line-opacity").value,o=r.pstyle("width").pfValue,l=r.pstyle("line-color").value,c=s*a;if(n.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),n.length==4){var u=this.instanceCount;this.vertTypeBuffer.getView(u)[0]=Q0;var h=this.indexBuffer.getView(u);Zs(i,h);var d=this.colorBuffer.getView(u);us(l,c,d);var p=this.lineWidthBuffer.getView(u);p[0]=o;var y=this.pointAPointBBuffer.getView(u);y[0]=n[0],y[1]=n[1],y[2]=n[2],y[3]=n[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var _=0;_<n.length-2;_+=2){var v=this.instanceCount;this.vertTypeBuffer.getView(v)[0]=J0;var g=this.indexBuffer.getView(v);Zs(i,g);var f=this.colorBuffer.getView(v);us(l,c,f);var m=this.lineWidthBuffer.getView(v);m[0]=o;var b=n[_-2],C=n[_-1],S=n[_],k=n[_+1],w=n[_+2],x=n[_+3],A=n[_+4],D=n[_+5];_==0&&(b=2*S-w+.001,C=2*k-x+.001),_==n.length-4&&(A=2*w-S+.001,D=2*x-k+.001);var T=this.pointAPointBBuffer.getView(v);T[0]=b,T[1]=C,T[2]=S,T[3]=k;var E=this.pointCPointDBuffer.getView(v);E[0]=w,E[1]=x,E[2]=A,E[3]=D,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(r){var i=r._private.rscratch;return!(i.badLine||i.allpts==null||isNaN(i.allpts[0]))}},{key:"_getEdgePoints",value:function(r){var i=r._private.rscratch;if(this._isValidEdge(r)){var n=i.allpts;if(n.length==4)return n;var s=this._getNumSegments(r);return this._getCurveSegmentPoints(n,s)}}},{key:"_getNumSegments",value:function(r){var i=15;return Math.min(Math.max(i,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(r,i){if(r.length==4)return r;for(var n=Array((i+1)*2),s=0;s<=i;s++)if(s==0)n[0]=r[0],n[1]=r[1];else if(s==i)n[s*2]=r[r.length-2],n[s*2+1]=r[r.length-1];else{var a=s/i;this._setCurvePoint(r,a,n,s*2)}return n}},{key:"_setCurvePoint",value:function(r,i,n,s){if(r.length<=2)n[s]=r[0],n[s+1]=r[1];else{for(var a=Array(r.length-2),o=0;o<a.length;o+=2){var l=(1-i)*r[o]+i*r[o+2],c=(1-i)*r[o+1]+i*r[o+3];a[o]=l,a[o+1]=c}return this._setCurvePoint(a,i,n,s)}}},{key:"endBatch",value:function(){var r=this.gl,i=this.vao,n=this.vertexCount,s=this.instanceCount;if(s!==0){var a=this.renderTarget.picking?this.pickingProgram:this.program;r.useProgram(a),r.bindVertexArray(i);var o=zr(this.buffers),l;try{for(o.s();!(l=o.n()).done;){var c=l.value;c.bufferSubData(s)}}catch(y){o.e(y)}finally{o.f()}for(var u=this.batchManager.getAtlases(),h=0;h<u.length;h++)u[h].bufferIfNeeded(r);for(var d=0;d<u.length;d++)r.activeTexture(r.TEXTURE0+d),r.bindTexture(r.TEXTURE_2D,u[d].texture),r.uniform1i(a.uTextures[d],d);r.uniform1f(a.uZoom,sM(this.r)),r.uniformMatrix3fv(a.uPanZoomMatrix,!1,this.panZoomMatrix),r.uniform1i(a.uAtlasSize,this.batchManager.getAtlasSize());var p=us(this.bgColor,1);r.uniform4fv(a.uBGColor,p),r.drawArraysInstanced(r.TRIANGLES,0,n,s),r.bindVertexArray(null),r.bindTexture(r.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:s,atlasCount:u.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var r=this.atlasManager.getDebugInfo(),i=r.reduce(function(a,o){return a+o.atlasCount},0),n=this.batchDebugInfo,s=n.reduce(function(a,o){return a+o.count},0);return{atlasInfo:r,totalAtlases:i,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:n.length,batchInfo:n,totalInstances:s}}}])})(),Tw={};Tw.initWebgl=function(e,t){var r=this,i=r.data.contexts[r.WEBGL];e.bgColor=EM(r),e.webglTexSize=Math.min(e.webglTexSize,i.getParameter(i.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS)),r.webglDebug=e.webglDebug,r.webglDebugShowAtlases=e.webglDebugShowAtlases,r.pickingFrameBuffer=pM(i),r.pickingFrameBuffer.needsDraw=!0,r.drawing=new TM(r,i,e);var n=function(h){return function(d){return r.getTextAngle(d,h)}},s=function(h){return function(d){var p=d.pstyle(h);return p&&p.value}},a=function(h){return function(d){return d.pstyle("".concat(h,"-opacity")).value>0}},o=function(h){var d=h.pstyle("text-events").strValue==="yes";return d?hu.USE_BB:hu.IGNORE},l=function(h){var d=h.position(),p=d.x,y=d.y,_=h.outerWidth(),v=h.outerHeight();return{w:_,h:v,x1:p-_/2,y1:y-v/2}};r.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),r.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),r.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),r.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:oM,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),r.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:a("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),r.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:a("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),r.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:Tf(t.getLabelKey,null),getBoundingBox:Ef(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:n(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:s("label")}),r.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:Tf(t.getSourceLabelKey,"source"),getBoundingBox:Ef(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:n("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:s("source-label")}),r.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:Tf(t.getTargetLabelKey,"target"),getBoundingBox:Ef(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:n("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:s("target-label")});var c=Cl(function(){console.log("garbage collect flag set"),r.data.gc=!0},1e4);r.onUpdateEleCalcs(function(u,h){var d=!1;h&&h.length>0&&(d|=r.drawing.invalidate(h)),d&&c()}),AM(r)};function EM(e){var t=e.cy.container(),r=t&&t.style&&t.style.backgroundColor||"white";return eC(r)}function Ew(e,t){var r=e._private.rscratch;return Or(r,"labelWrapCachedLines",t)||[]}var Tf=function(t,r){return function(i){var n=t(i),s=Ew(i,r);return s.length>1?s.map(function(a,o){return"".concat(n,"_").concat(o)}):n}},Ef=function(t,r){return function(i,n){var s=t(i);if(typeof n=="string"){var a=n.indexOf("_");if(a>0){var o=Number(n.substring(a+1)),l=Ew(i,r),c=s.h/l.length,u=c*o,h=s.y1+u;return{x1:s.x1,w:s.w,y1:h,h:c,yOffset:u}}}return s}};function AM(e){{var t=e.render;e.render=function(s){s=s||{};var a=e.cy;e.webgl&&(a.zoom()>_w?(BM(e),t.call(e,s)):(DM(e),Bw(e,s,Bo.SCREEN)))}}{var r=e.matchCanvasSize;e.matchCanvasSize=function(s){r.call(e,s),e.pickingFrameBuffer.setFramebufferAttachmentSizes(e.canvasWidth,e.canvasHeight),e.pickingFrameBuffer.needsDraw=!0}}e.findNearestElements=function(s,a,o,l){return FM(e,s,a)};{var i=e.invalidateCachedZSortedEles;e.invalidateCachedZSortedEles=function(){i.call(e),e.pickingFrameBuffer.needsDraw=!0}}{var n=e.notify;e.notify=function(s,a){n.call(e,s,a),s==="viewport"||s==="bounds"?e.pickingFrameBuffer.needsDraw=!0:s==="background"&&e.drawing.invalidate(a,{type:"node-body"})}}}function BM(e){var t=e.data.contexts[e.WEBGL];t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}function DM(e){var t=function(i){i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.canvasWidth,e.canvasHeight),i.restore()};t(e.data.contexts[e.NODE]),t(e.data.contexts[e.DRAG])}function LM(e){var t=e.canvasWidth,r=e.canvasHeight,i=qv(e),n=i.pan,s=i.zoom,a=Sf();Ac(a,a,[n.x,n.y]),Tp(a,a,[s,s]);var o=Sf();gM(o,t,r);var l=Sf();return vM(l,o,a),l}function Aw(e,t){var r=e.canvasWidth,i=e.canvasHeight,n=qv(e),s=n.pan,a=n.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,i),t.translate(s.x,s.y),t.scale(a,a)}function RM(e,t){e.drawSelectionRectangle(t,function(r){return Aw(e,r)})}function MM(e){var t=e.data.contexts[e.NODE];t.save(),Aw(e,t),t.strokeStyle="rgba(0, 0, 0, 0.3)",t.beginPath(),t.moveTo(-1e3,0),t.lineTo(1e3,0),t.stroke(),t.beginPath(),t.moveTo(0,-1e3),t.lineTo(0,1e3),t.stroke(),t.restore()}function PM(e){var t=function(n,s,a){for(var o=n.atlasManager.getAtlasCollection(s),l=e.data.contexts[e.NODE],c=o.atlases,u=0;u<c.length;u++){var h=c[u],d=h.canvas;if(d){var p=d.width,y=d.height,_=p*u,v=d.height*a,g=.4;l.save(),l.scale(g,g),l.drawImage(d,_,v),l.strokeStyle="black",l.rect(_,v,p,y),l.stroke(),l.restore()}}},r=0;t(e.drawing,"node",r++),t(e.drawing,"label",r++)}function IM(e,t,r,i,n){var s,a,o,l,c=qv(e),u=c.pan,h=c.zoom;{var d=aM(e,u,h,t,r),p=jt(d,2),y=p[0],_=p[1],v=6;s=y-v/2,a=_-v/2,o=v,l=v}if(o===0||l===0)return[];var g=e.data.contexts[e.WEBGL];g.bindFramebuffer(g.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(g.viewport(0,0,g.canvas.width,g.canvas.height),Bw(e,null,Bo.PICKING),e.pickingFrameBuffer.needsDraw=!1);var f=o*l,m=new Uint8Array(f*4);g.readPixels(s,a,o,l,g.RGBA,g.UNSIGNED_BYTE,m),g.bindFramebuffer(g.FRAMEBUFFER,null);for(var b=new Set,C=0;C<f;C++){var S=m.slice(C*4,C*4+4),k=cM(S)-1;k>=0&&b.add(k)}return b}function FM(e,t,r){var i=IM(e,t,r),n=e.getCachedZSortedEles(),s,a,o=zr(i),l;try{for(o.s();!(l=o.n()).done;){var c=l.value,u=n[c];if(!s&&u.isNode()&&(s=u),!a&&u.isEdge()&&(a=u),s&&a)break}}catch(h){o.e(h)}finally{o.f()}return[s,a].filter(Boolean)}function Af(e,t,r){var i=e.drawing;t+=1,r.isNode()?(i.drawNode(r,t,"node-underlay"),i.drawNode(r,t,"node-body"),i.drawTexture(r,t,"label"),i.drawNode(r,t,"node-overlay")):(i.drawEdgeLine(r,t),i.drawEdgeArrow(r,t,"source"),i.drawEdgeArrow(r,t,"target"),i.drawTexture(r,t,"label"),i.drawTexture(r,t,"edge-source-label"),i.drawTexture(r,t,"edge-target-label"))}function Bw(e,t,r){var i;e.webglDebug&&(i=performance.now());var n=e.drawing,s=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&RM(e,t),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var a=e.data.contexts[e.WEBGL];r.screen?(a.clearColor(0,0,0,0),a.enable(a.BLEND),a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA)):a.disable(a.BLEND),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,a.canvas.width,a.canvas.height);var o=LM(e),l=e.getCachedZSortedEles();if(s=l.length,n.startFrame(o,r),r.screen){for(var c=0;c<l.nondrag.length;c++)Af(e,c,l.nondrag[c]);for(var u=0;u<l.drag.length;u++)Af(e,u,l.drag[u])}else if(r.picking)for(var h=0;h<l.length;h++)Af(e,h,l[h]);n.endFrame(),r.screen&&e.webglDebugShowAtlases&&(MM(e),PM(e)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var d=performance.now(),p=!1,y=Math.ceil(d-i),_=n.getDebugInfo(),v=["".concat(s," elements"),"".concat(_.totalInstances," instances"),"".concat(_.batchCount," batches"),"".concat(_.totalAtlases," atlases"),"".concat(_.wrappedCount," wrapped textures"),"".concat(_.simpleCount," simple shapes")].join(", ");if(p)console.log("WebGL (".concat(r.name,") - time ").concat(y,"ms, ").concat(v));else{console.log("WebGL (".concat(r.name,") - frame time ").concat(y,"ms")),console.log("Totals:"),console.log("  ".concat(v)),console.log("Texture Atlases Used:");var g=_.atlasInfo,f=zr(g),m;try{for(f.s();!(m=f.n()).done;){var b=m.value;console.log("  ".concat(b.type,": ").concat(b.keyCount," keys, ").concat(b.atlasCount," atlases"))}}catch(C){f.e(C)}finally{f.f()}console.log("")}}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,n.gc())}var Jn={};Jn.drawPolygonPath=function(e,t,r,i,n,s){var a=i/2,o=n/2;e.beginPath&&e.beginPath(),e.moveTo(t+a*s[0],r+o*s[1]);for(var l=1;l<s.length/2;l++)e.lineTo(t+a*s[l*2],r+o*s[l*2+1]);e.closePath()};Jn.drawRoundPolygonPath=function(e,t,r,i,n,s,a){a.forEach(function(o){return uw(e,o)}),e.closePath()};Jn.drawRoundRectanglePath=function(e,t,r,i,n,s){var a=i/2,o=n/2,l=s==="auto"?Hn(i,n):Math.min(s,o,a);e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.arcTo(t+a,r-o,t+a,r,l),e.arcTo(t+a,r+o,t,r+o,l),e.arcTo(t-a,r+o,t-a,r,l),e.arcTo(t-a,r-o,t,r-o,l),e.lineTo(t,r-o),e.closePath()};Jn.drawBottomRoundRectanglePath=function(e,t,r,i,n,s){var a=i/2,o=n/2,l=s==="auto"?Hn(i,n):s;e.beginPath&&e.beginPath(),e.moveTo(t,r-o),e.lineTo(t+a,r-o),e.lineTo(t+a,r),e.arcTo(t+a,r+o,t,r+o,l),e.arcTo(t-a,r+o,t-a,r,l),e.lineTo(t-a,r-o),e.lineTo(t,r-o),e.closePath()};Jn.drawCutRectanglePath=function(e,t,r,i,n,s,a){var o=i/2,l=n/2,c=a==="auto"?Av():a;e.beginPath&&e.beginPath(),e.moveTo(t-o+c,r-l),e.lineTo(t+o-c,r-l),e.lineTo(t+o,r-l+c),e.lineTo(t+o,r+l-c),e.lineTo(t+o-c,r+l),e.lineTo(t-o+c,r+l),e.lineTo(t-o,r+l-c),e.lineTo(t-o,r-l+c),e.closePath()};Jn.drawBarrelPath=function(e,t,r,i,n){var s=i/2,a=n/2,o=t-s,l=t+s,c=r-a,u=r+a,h=dp(i,n),d=h.widthOffset,p=h.heightOffset,y=h.ctrlPtOffsetPct*d;e.beginPath&&e.beginPath(),e.moveTo(o,c+p),e.lineTo(o,u-p),e.quadraticCurveTo(o+y,u,o+d,u),e.lineTo(l-d,u),e.quadraticCurveTo(l-y,u,l,u-p),e.lineTo(l,c+p),e.quadraticCurveTo(l-y,c,l-d,c),e.lineTo(o+d,c),e.quadraticCurveTo(o+y,c,o,c+p),e.closePath()};var e_=Math.sin(0),t_=Math.cos(0),Ep={},Ap={},Dw=Math.PI/40;for(var Js=0*Math.PI;Js<2*Math.PI;Js+=Dw)Ep[Js]=Math.sin(Js),Ap[Js]=Math.cos(Js);Jn.drawEllipsePath=function(e,t,r,i,n){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,i/2,n/2,0,0,2*Math.PI);else for(var s,a,o=i/2,l=n/2,c=0*Math.PI;c<2*Math.PI;c+=Dw)s=t-o*Ep[c]*e_+o*Ap[c]*t_,a=r+l*Ap[c]*e_+l*Ep[c]*t_,c===0?e.moveTo(s,a):e.lineTo(s,a);e.closePath()};var El={};El.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]};El.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements(),i=r.boundingBox(),n=this.findContainerClientCoords(),s=e.full?Math.ceil(i.w):n[2],a=e.full?Math.ceil(i.h):n[3],o=xe(e.maxWidth)||xe(e.maxHeight),l=this.getPixelRatio(),c=1;if(e.scale!==void 0)s*=e.scale,a*=e.scale,c=e.scale;else if(o){var u=1/0,h=1/0;xe(e.maxWidth)&&(u=c*e.maxWidth/s),xe(e.maxHeight)&&(h=c*e.maxHeight/a),c=Math.min(u,h),s*=c,a*=c}o||(s*=l,a*=l,c*=l);var d=document.createElement("canvas");d.width=s,d.height=a,d.style.width=s+"px",d.style.height=a+"px";var p=d.getContext("2d");if(s>0&&a>0){p.clearRect(0,0,s,a),p.globalCompositeOperation="source-over";var y=this.getCachedZSortedEles();if(e.full)p.translate(-i.x1*c,-i.y1*c),p.scale(c,c),this.drawElements(p,y),p.scale(1/c,1/c),p.translate(i.x1*c,i.y1*c);else{var _=t.pan(),v={x:_.x*c,y:_.y*c};c*=t.zoom(),p.translate(v.x,v.y),p.scale(c,c),this.drawElements(p,y),p.scale(1/c,1/c),p.translate(-v.x,-v.y)}e.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=e.bg,p.rect(0,0,s,a),p.fill())}return d};function OM(e,t){for(var r=atob(e),i=new ArrayBuffer(r.length),n=new Uint8Array(i),s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return new Blob([i],{type:t})}function r_(e){var t=e.indexOf(",");return e.substr(t+1)}function Lw(e,t,r){var i=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new $a(function(n,s){try{t.toBlob(function(a){a!=null?n(a):s(new Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(a){s(a)}});case"blob":return OM(r_(i()),r);case"base64":return r_(i());case"base64uri":default:return i()}}El.png=function(e){return Lw(e,this.bufferCanvasImage(e),"image/png")};El.jpg=function(e){return Lw(e,this.bufferCanvasImage(e),"image/jpeg")};var Rw={};Rw.nodeShapeImpl=function(e,t,r,i,n,s,a,o){switch(e){case"ellipse":return this.drawEllipsePath(t,r,i,n,s);case"polygon":return this.drawPolygonPath(t,r,i,n,s,a);case"round-polygon":return this.drawRoundPolygonPath(t,r,i,n,s,a,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,i,n,s,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,i,n,s,a,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,i,n,s,o);case"barrel":return this.drawBarrelPath(t,r,i,n,s)}};var NM=Mw,it=Mw.prototype;it.CANVAS_LAYERS=3;it.SELECT_BOX=0;it.DRAG=1;it.NODE=2;it.WEBGL=3;it.CANVAS_TYPES=["2d","2d","2d","webgl2"];it.BUFFER_COUNT=3;it.TEXTURE_BUFFER=0;it.MOTIONBLUR_BUFFER_NODE=1;it.MOTIONBLUR_BUFFER_DRAG=2;function Mw(e){var t=this,r=t.cy.window(),i=r.document;e.webgl&&(it.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:new Array(it.CANVAS_LAYERS),contexts:new Array(it.CANVAS_LAYERS),canvasNeedsRedraw:new Array(it.CANVAS_LAYERS),bufferCanvases:new Array(it.BUFFER_COUNT),bufferContexts:new Array(it.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",s="rgba(0,0,0,0)";t.data.canvasContainer=i.createElement("div");var a=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=s,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[n]=s;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};R2()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var c=0;c<it.CANVAS_LAYERS;c++){var u=t.data.canvases[c]=i.createElement("canvas"),h=it.CANVAS_TYPES[c];t.data.contexts[c]=u.getContext(h),t.data.contexts[c]||Rt("Could not create canvas of type "+h),Object.keys(l).forEach(function(ee){u.style[ee]=l[ee]}),u.style.position="absolute",u.setAttribute("data-id","layer"+c),u.style.zIndex=String(it.CANVAS_LAYERS-c),t.data.canvasContainer.appendChild(u),t.data.canvasNeedsRedraw[c]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[it.NODE].setAttribute("data-id","layer"+it.NODE+"-node"),t.data.canvases[it.SELECT_BOX].setAttribute("data-id","layer"+it.SELECT_BOX+"-selectbox"),t.data.canvases[it.DRAG].setAttribute("data-id","layer"+it.DRAG+"-drag"),t.data.canvases[it.WEBGL]&&t.data.canvases[it.WEBGL].setAttribute("data-id","layer"+it.WEBGL+"-webgl");for(var c=0;c<it.BUFFER_COUNT;c++)t.data.bufferCanvases[c]=i.createElement("canvas"),t.data.bufferContexts[c]=t.data.bufferCanvases[c].getContext("2d"),t.data.bufferCanvases[c].style.position="absolute",t.data.bufferCanvases[c].setAttribute("data-id","buffer"+c),t.data.bufferCanvases[c].style.zIndex=String(-c-1),t.data.bufferCanvases[c].style.visibility="hidden";t.pathsEnabled=!0;var d=Mr(),p=function(U){return{x:(U.x1+U.x2)/2,y:(U.y1+U.y2)/2}},y=function(U){return{x:-U.w/2,y:-U.h/2}},_=function(U){var X=U[0]._private,M=X.oldBackgroundTimestamp===X.backgroundTimestamp;return!M},v=function(U){return U[0]._private.nodeKey},g=function(U){return U[0]._private.labelStyleKey},f=function(U){return U[0]._private.sourceLabelStyleKey},m=function(U){return U[0]._private.targetLabelStyleKey},b=function(U,X,M,q,Q){return t.drawElement(U,X,M,!1,!1,Q)},C=function(U,X,M,q,Q){return t.drawElementText(U,X,M,q,"main",Q)},S=function(U,X,M,q,Q){return t.drawElementText(U,X,M,q,"source",Q)},k=function(U,X,M,q,Q){return t.drawElementText(U,X,M,q,"target",Q)},w=function(U){return U.boundingBox(),U[0]._private.bodyBounds},x=function(U){return U.boundingBox(),U[0]._private.labelBounds.main||d},A=function(U){return U.boundingBox(),U[0]._private.labelBounds.source||d},D=function(U){return U.boundingBox(),U[0]._private.labelBounds.target||d},T=function(U,X){return X},E=function(U){return p(w(U))},R=function(U,X,M){var q=U?U+"-":"";return{x:X.x+M.pstyle(q+"text-margin-x").pfValue,y:X.y+M.pstyle(q+"text-margin-y").pfValue}},F=function(U,X,M){var q=U[0]._private.rscratch;return{x:q[X],y:q[M]}},O=function(U){return R("",F(U,"labelX","labelY"),U)},$=function(U){return R("source",F(U,"sourceLabelX","sourceLabelY"),U)},H=function(U){return R("target",F(U,"targetLabelX","targetLabelY"),U)},L=function(U){return y(w(U))},I=function(U){return y(A(U))},P=function(U){return y(D(U))},z=function(U){var X=x(U),M=y(x(U));if(U.isNode()){switch(U.pstyle("text-halign").value){case"left":M.x=-X.w-(X.leftPad||0);break;case"right":M.x=-(X.rightPad||0);break}switch(U.pstyle("text-valign").value){case"top":M.y=-X.h-(X.topPad||0);break;case"bottom":M.y=-(X.botPad||0);break}}return M},K=t.data.eleTxrCache=new vo(t,{getKey:v,doesEleInvalidateKey:_,drawElement:b,getBoundingBox:w,getRotationPoint:E,getRotationOffset:L,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),te=t.data.lblTxrCache=new vo(t,{getKey:g,drawElement:C,getBoundingBox:x,getRotationPoint:O,getRotationOffset:z,isVisible:T}),J=t.data.slbTxrCache=new vo(t,{getKey:f,drawElement:S,getBoundingBox:A,getRotationPoint:$,getRotationOffset:I,isVisible:T}),ne=t.data.tlbTxrCache=new vo(t,{getKey:m,drawElement:k,getBoundingBox:D,getRotationPoint:H,getRotationOffset:P,isVisible:T}),V=t.data.lyrTxrCache=new bw(t);t.onUpdateEleCalcs(function(U,X){K.invalidateElements(X),te.invalidateElements(X),J.invalidateElements(X),ne.invalidateElements(X),V.invalidateElements(X);for(var M=0;M<X.length;M++){var q=X[M]._private;q.oldBackgroundTimestamp=q.backgroundTimestamp}});var N=function(U){for(var X=0;X<U.length;X++)V.enqueueElementRefinement(U[X].ele)};K.onDequeue(N),te.onDequeue(N),J.onDequeue(N),ne.onDequeue(N),e.webgl&&t.initWebgl(e,{getStyleKey:v,getLabelKey:g,getSourceLabelKey:f,getTargetLabelKey:m,drawElement:b,drawLabel:C,drawSourceLabel:S,drawTargetLabel:k,getElementBox:w,getLabelBox:x,getSourceLabelBox:A,getTargetLabelBox:D,getElementRotationPoint:E,getElementRotationOffset:L,getLabelRotationPoint:O,getSourceLabelRotationPoint:$,getTargetLabelRotationPoint:H,getLabelRotationOffset:z,getSourceLabelRotationOffset:I,getTargetLabelRotationOffset:P})}it.redrawHint=function(e,t){var r=this;switch(e){case"eles":r.data.canvasNeedsRedraw[it.NODE]=t;break;case"drag":r.data.canvasNeedsRedraw[it.DRAG]=t;break;case"select":r.data.canvasNeedsRedraw[it.SELECT_BOX]=t;break;case"gc":r.data.gc=!0;break}};var $M=typeof Path2D<"u";it.path2dEnabled=function(e){if(e===void 0)return this.pathsEnabled;this.pathsEnabled=!!e};it.usePaths=function(){return $M&&this.pathsEnabled};it.setImgSmoothing=function(e,t){e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)};it.getImgSmoothing=function(e){return e.imageSmoothingEnabled!=null?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled};it.makeOffscreenCanvas=function(e,t){var r;if((typeof OffscreenCanvas>"u"?"undefined":Jt(OffscreenCanvas))!=="undefined")r=new OffscreenCanvas(e,t);else{var i=this.cy.window(),n=i.document;r=n.createElement("canvas"),r.width=e,r.height=t}return r};[Cw,qi,vn,Hv,Os,Qn,Ir,Tw,Jn,El,Rw].forEach(function(e){je(it,e)});var zM=[{name:"null",impl:ow},{name:"base",impl:mw},{name:"canvas",impl:NM}],HM=[{type:"layout",extensions:dR},{type:"renderer",extensions:zM}],Pw={},Iw={};function Fw(e,t,r){var i=r,n=function(w){mt("Can not register `"+t+"` for `"+e+"` since `"+w+"` already exists in the prototype and can not be overridden")};if(e==="core"){if(rl.prototype[t])return n(t);rl.prototype[t]=r}else if(e==="collection"){if(cr.prototype[t])return n(t);cr.prototype[t]=r}else if(e==="layout"){for(var s=function(w){this.options=w,r.call(this,w),lt(this._private)||(this._private={}),this._private.cy=w.cy,this._private.listeners=[],this.createEmitter()},a=s.prototype=Object.create(r.prototype),o=[],l=0;l<o.length;l++){var c=o[l];a[c]=a[c]||function(){return this}}a.start&&!a.run?a.run=function(){return this.start(),this}:!a.start&&a.run&&(a.start=function(){return this.run(),this});var u=r.prototype.stop;a.stop=function(){var k=this.options;if(k&&k.animate){var w=this.animations;if(w)for(var x=0;x<w.length;x++)w[x].stop()}return u?u.call(this):this.emit("layoutstop"),this},a.destroy||(a.destroy=function(){return this}),a.cy=function(){return this._private.cy};var h=function(w){return w._private.cy},d={addEventFields:function(w,x){x.layout=w,x.cy=h(w),x.target=w},bubble:function(){return!0},parent:function(w){return h(w)}};je(a,{createEmitter:function(){return this._private.emitter=new lh(d,this),this},emitter:function(){return this._private.emitter},on:function(w,x){return this.emitter().on(w,x),this},one:function(w,x){return this.emitter().one(w,x),this},once:function(w,x){return this.emitter().one(w,x),this},removeListener:function(w,x){return this.emitter().removeListener(w,x),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(w,x){return this.emitter().emit(w,x),this}}),gt.eventAliasesOn(a),i=s}else if(e==="renderer"&&t!=="null"&&t!=="base"){var p=Ow("renderer","base"),y=p.prototype,_=r,v=r.prototype,g=function(){p.apply(this,arguments),_.apply(this,arguments)},f=g.prototype;for(var m in y){var b=y[m],C=v[m]!=null;if(C)return n(m);f[m]=b}for(var S in v)f[S]=v[S];y.clientFunctions.forEach(function(k){f[k]=f[k]||function(){Rt("Renderer does not implement `renderer."+k+"()` on its prototype")}}),i=g}else if(e==="__proto__"||e==="constructor"||e==="prototype")return Rt(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return tC({map:Pw,keys:[e,t],value:i})}function Ow(e,t){return rC({map:Pw,keys:[e,t]})}function qM(e,t,r,i,n){return tC({map:Iw,keys:[e,t,r,i],value:n})}function WM(e,t,r,i){return rC({map:Iw,keys:[e,t,r,i]})}var Bp=function(){if(arguments.length===2)return Ow.apply(null,arguments);if(arguments.length===3)return Fw.apply(null,arguments);if(arguments.length===4)return WM.apply(null,arguments);if(arguments.length===5)return qM.apply(null,arguments);Rt("Invalid extension access syntax")};rl.prototype.extension=Bp;HM.forEach(function(e){e.extensions.forEach(function(t){Fw(e.type,t.name,t.impl)})});var du=function(){if(!(this instanceof du))return new du;this.length=0},Ds=du.prototype;Ds.instanceString=function(){return"stylesheet"};Ds.selector=function(e){var t=this.length++;return this[t]={selector:e,properties:[]},this};Ds.css=function(e,t){var r=this.length-1;if(qe(e))this[r].properties.push({name:e,value:t});else if(lt(e))for(var i=e,n=Object.keys(i),s=0;s<n.length;s++){var a=n[s],o=i[a];if(o!=null){var l=nr.properties[a]||nr.properties[Qu(a)];if(l!=null){var c=l.name,u=o;this[r].properties.push({name:c,value:u})}}}return this};Ds.style=Ds.css;Ds.generateStyle=function(e){var t=new nr(e);return this.appendToStyle(t)};Ds.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],i=r.selector,n=r.properties;e.selector(i);for(var s=0;s<n.length;s++){var a=n[s];e.css(a.name,a.value)}}return e};var UM="3.33.1",Vn=function(t){if(t===void 0&&(t={}),lt(t))return new rl(t);if(qe(t))return Bp.apply(Bp,arguments)};Vn.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(Vn),e.apply(null,t),this};Vn.warnings=function(e){return cC(e)};Vn.version=UM;Vn.stylesheet=Vn.Stylesheet=du;var Dn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Nw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bc={exports:{}},Bf,i_;function VM(){if(i_)return Bf;i_=1;var e="Expected a function",t="__lodash_hash_undefined__",r="[object Function]",i="[object GeneratorFunction]",n=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,a=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,o=typeof self=="object"&&self&&self.Object===Object&&self,l=a||o||Function("return this")();function c(Z,Y){return Z==null?void 0:Z[Y]}function u(Z){var Y=!1;if(Z!=null&&typeof Z.toString!="function")try{Y=!!(Z+"")}catch{}return Y}var h=Array.prototype,d=Function.prototype,p=Object.prototype,y=l["__core-js_shared__"],_=(function(){var Z=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""})(),v=d.toString,g=p.hasOwnProperty,f=p.toString,m=RegExp("^"+v.call(g).replace(n,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),b=h.splice,C=N(l,"Map"),S=N(Object,"create");function k(Z){var Y=-1,ae=Z?Z.length:0;for(this.clear();++Y<ae;){var he=Z[Y];this.set(he[0],he[1])}}function w(){this.__data__=S?S(null):{}}function x(Z){return this.has(Z)&&delete this.__data__[Z]}function A(Z){var Y=this.__data__;if(S){var ae=Y[Z];return ae===t?void 0:ae}return g.call(Y,Z)?Y[Z]:void 0}function D(Z){var Y=this.__data__;return S?Y[Z]!==void 0:g.call(Y,Z)}function T(Z,Y){var ae=this.__data__;return ae[Z]=S&&Y===void 0?t:Y,this}k.prototype.clear=w,k.prototype.delete=x,k.prototype.get=A,k.prototype.has=D,k.prototype.set=T;function E(Z){var Y=-1,ae=Z?Z.length:0;for(this.clear();++Y<ae;){var he=Z[Y];this.set(he[0],he[1])}}function R(){this.__data__=[]}function F(Z){var Y=this.__data__,ae=J(Y,Z);if(ae<0)return!1;var he=Y.length-1;return ae==he?Y.pop():b.call(Y,ae,1),!0}function O(Z){var Y=this.__data__,ae=J(Y,Z);return ae<0?void 0:Y[ae][1]}function $(Z){return J(this.__data__,Z)>-1}function H(Z,Y){var ae=this.__data__,he=J(ae,Z);return he<0?ae.push([Z,Y]):ae[he][1]=Y,this}E.prototype.clear=R,E.prototype.delete=F,E.prototype.get=O,E.prototype.has=$,E.prototype.set=H;function L(Z){var Y=-1,ae=Z?Z.length:0;for(this.clear();++Y<ae;){var he=Z[Y];this.set(he[0],he[1])}}function I(){this.__data__={hash:new k,map:new(C||E),string:new k}}function P(Z){return V(this,Z).delete(Z)}function z(Z){return V(this,Z).get(Z)}function K(Z){return V(this,Z).has(Z)}function te(Z,Y){return V(this,Z).set(Z,Y),this}L.prototype.clear=I,L.prototype.delete=P,L.prototype.get=z,L.prototype.has=K,L.prototype.set=te;function J(Z,Y){for(var ae=Z.length;ae--;)if(q(Z[ae][0],Y))return ae;return-1}function ne(Z){if(!se(Z)||U(Z))return!1;var Y=Q(Z)||u(Z)?m:s;return Y.test(X(Z))}function V(Z,Y){var ae=Z.__data__;return ee(Y)?ae[typeof Y=="string"?"string":"hash"]:ae.map}function N(Z,Y){var ae=c(Z,Y);return ne(ae)?ae:void 0}function ee(Z){var Y=typeof Z;return Y=="string"||Y=="number"||Y=="symbol"||Y=="boolean"?Z!=="__proto__":Z===null}function U(Z){return!!_&&_ in Z}function X(Z){if(Z!=null){try{return v.call(Z)}catch{}try{return Z+""}catch{}}return""}function M(Z,Y){if(typeof Z!="function"||Y&&typeof Y!="function")throw new TypeError(e);var ae=function(){var he=arguments,ce=Y?Y.apply(this,he):he[0],ue=ae.cache;if(ue.has(ce))return ue.get(ce);var ye=Z.apply(this,he);return ae.cache=ue.set(ce,ye),ye};return ae.cache=new(M.Cache||L),ae}M.Cache=L;function q(Z,Y){return Z===Y||Z!==Z&&Y!==Y}function Q(Z){var Y=se(Z)?f.call(Z):"";return Y==r||Y==i}function se(Z){var Y=typeof Z;return!!Z&&(Y=="object"||Y=="function")}return Bf=M,Bf}var Df,n_;function jM(){if(n_)return Df;n_=1;var e="Expected a function",t=NaN,r="[object Symbol]",i=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,o=parseInt,l=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,c=typeof self=="object"&&self&&self.Object===Object&&self,u=l||c||Function("return this")(),h=Object.prototype,d=h.toString,p=Math.max,y=Math.min,_=function(){return u.Date.now()};function v(S,k,w){var x,A,D,T,E,R,F=0,O=!1,$=!1,H=!0;if(typeof S!="function")throw new TypeError(e);k=C(k)||0,f(w)&&(O=!!w.leading,$="maxWait"in w,D=$?p(C(w.maxWait)||0,k):D,H="trailing"in w?!!w.trailing:H);function L(N){var ee=x,U=A;return x=A=void 0,F=N,T=S.apply(U,ee),T}function I(N){return F=N,E=setTimeout(K,k),O?L(N):T}function P(N){var ee=N-R,U=N-F,X=k-ee;return $?y(X,D-U):X}function z(N){var ee=N-R,U=N-F;return R===void 0||ee>=k||ee<0||$&&U>=D}function K(){var N=_();if(z(N))return te(N);E=setTimeout(K,P(N))}function te(N){return E=void 0,H&&x?L(N):(x=A=void 0,T)}function J(){E!==void 0&&clearTimeout(E),F=0,x=R=A=E=void 0}function ne(){return E===void 0?T:te(_())}function V(){var N=_(),ee=z(N);if(x=arguments,A=this,R=N,ee){if(E===void 0)return I(R);if($)return E=setTimeout(K,k),L(R)}return E===void 0&&(E=setTimeout(K,k)),T}return V.cancel=J,V.flush=ne,V}function g(S,k,w){var x=!0,A=!0;if(typeof S!="function")throw new TypeError(e);return f(w)&&(x="leading"in w?!!w.leading:x,A="trailing"in w?!!w.trailing:A),v(S,k,{leading:x,maxWait:k,trailing:A})}function f(S){var k=typeof S;return!!S&&(k=="object"||k=="function")}function m(S){return!!S&&typeof S=="object"}function b(S){return typeof S=="symbol"||m(S)&&d.call(S)==r}function C(S){if(typeof S=="number")return S;if(b(S))return t;if(f(S)){var k=typeof S.valueOf=="function"?S.valueOf():S;S=f(k)?k+"":k}if(typeof S!="string")return S===0?S:+S;S=S.replace(i,"");var w=s.test(S);return w||a.test(S)?o(S.slice(2),w?2:8):n.test(S)?t:+S}return Df=g,Df}var GM=Bc.exports,s_;function KM(){return s_||(s_=1,(function(e,t){(function(i,n){e.exports=n(VM(),jM())})(GM,function(r,i){return(function(n){var s={};function a(o){if(s[o])return s[o].exports;var l=s[o]={i:o,l:!1,exports:{}};return n[o].call(l.exports,l,l.exports,a),l.l=!0,l.exports}return a.m=n,a.c=s,a.i=function(o){return o},a.d=function(o,l,c){a.o(o,l)||Object.defineProperty(o,l,{configurable:!1,enumerable:!0,get:c})},a.n=function(o){var l=o&&o.__esModule?function(){return o.default}:function(){return o};return a.d(l,"a",l),l},a.o=function(o,l){return Object.prototype.hasOwnProperty.call(o,l)},a.p="",a(a.s=12)})([(function(n,s,a){n.exports=Object.assign!=null?Object.assign.bind(Object):function(o){for(var l=arguments.length,c=Array(l>1?l-1:0),u=1;u<l;u++)c[u-1]=arguments[u];return c.filter(function(h){return h!=null}).forEach(function(h){Object.keys(h).forEach(function(d){return o[d]=h[d]})}),o}}),(function(n,s,a){var o=a(10),l=a(0);n.exports=function(c){var u=this;return new o(l({cy:u},c))}}),(function(n,s,a){function o(){if(this.saveGestureState(),this.cy.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1),this.options.disableBrowserGestures){var u=this.windowListenerOptions;window.addEventListener("touchstart",this.preventDefault,u),window.addEventListener("touchmove",this.preventDefault,u),window.addEventListener("wheel",this.preventDefault,u)}return this}function l(){if(this.cy.zoomingEnabled(this.lastZoomingEnabled).panningEnabled(this.lastPanningEnabled).boxSelectionEnabled(this.lastBoxSelectionEnabled),this.options.disableBrowserGestures){var u=this.windowListenerOptions;window.removeEventListener("touchstart",this.preventDefault,u),window.removeEventListener("touchmove",this.preventDefault,u),window.removeEventListener("wheel",this.preventDefault,u)}return this}function c(){var u=this.cy;return this.lastPanningEnabled=u.panningEnabled(),this.lastZoomingEnabled=u.zoomingEnabled(),this.lastBoxSelectionEnabled=u.boxSelectionEnabled(),this}n.exports={disableGestures:o,resetGestures:l,saveGestureState:c}}),(function(n,s,a){function o(){var l=this,c=this.cy,u=this.options;return this.addListener(c,"drag",function(){return l.grabbingNode=!0}),this.addListener(c,"free",function(){return l.grabbingNode=!1}),this.addListener(c,"tapstart","node",function(h){var d=h.target;l.drawMode&&l.start(d)}),this.addListener(c,"tapdrag",function(h){l.update(h.position)}),this.addListener(c,"tapdragover","node",function(h){u.snap||l.preview(h.target)}),this.addListener(c,"tapdragout","node",function(h){u.snap||l.unpreview(h.target)}),this.addListener(c,"tapend",function(){l.stop()}),this}n.exports={addCytoscapeListeners:o}}),(function(n,s,a){var o={canConnect:function(c,u){return!c.same(u)},edgeParams:function(c,u){return{}},hoverDelay:150,snap:!0,snapThreshold:50,snapFrequency:15,noEdgeEventsInDraw:!0,disableBrowserGestures:!0};n.exports=o}),(function(n,s,a){function o(u){var h=this.cy;return this.drawMode=u??!this.drawMode,this.drawMode?(this.prevUngrabifyState=h.autoungrabify(),h.autoungrabify(!0),this.emit("drawon")):(h.autoungrabify(this.prevUngrabifyState),this.emit("drawoff")),this}function l(){return this.toggleDrawMode(!0)}function c(){return this.toggleDrawMode(!1)}n.exports={toggleDrawMode:o,enableDrawMode:l,disableDrawMode:c}}),(function(n,s,a){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},l=a(0),c=function(f){return(typeof f>"u"?"undefined":o(f))===o("")},u=function(f){return(typeof f>"u"?"undefined":o(f))===o([])&&f.length!=null};function h(g,f,m){var b={};return l(b,f,g),l(b.data,f.data,g.data),c(f.classes)?b.classes=f.classes+" "+m:u(f.classes)?b.classes=f.classes.join(" ")+" "+m:b.classes=m,b}function d(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,f=this.cy;this.options;var m=this.presumptiveTargets,b=this.previewEles,C=this.active,S=this.sourceNode,k=this.targetNode,w=g?"eh-preview":"",x=f.collection(),A=this.canConnect(k);if(C&&A){if(!k||k.size()===0){b.remove(),this.emit("cancel",this.mp(),S,m);return}if(!g){b.removeClass("eh-preview").style("events",""),this.emit("complete",this.mp(),S,k,b);return}var D=f.add(h({group:"edges",data:{source:S.id(),target:k.id()}},this.edgeParams(k),w));return x=x.merge(D),g?(this.previewEles=x,x.style("events","no")):(x.style("events",""),this.emit("complete",this.mp(),S,k,x)),this}}function p(){return this.makeEdges(!0),this}function y(){return this.previewEles.nonempty()&&this.previewEles.inside()}function _(){return this.previewShown()&&this.previewEles.remove(),this}function v(){var g=this,f=this.sourceNode,m=this.ghostNode,b=this.cy,C=this.mx,S=this.my,k=C,w=S,x=void 0,A=void 0;if(f)return(!m||m.length===0||m.removed())&&(A=this.ghostEles=b.collection(),b.batch(function(){m=g.ghostNode=b.add({group:"nodes",classes:"eh-ghost eh-ghost-node",position:{x:0,y:0}}),m.style({"background-color":"blue",width:1e-4,height:1e-4,opacity:0,events:"no"});var D={};x=b.add(l({},D,{group:"edges",data:l({},D.data,{source:f.id(),target:m.id()}),classes:"eh-ghost eh-ghost-edge"})),x.style({events:"no"})}),A.merge(m).merge(x)),m.position({x:k,y:w}),this}n.exports={makeEdges:d,makePreview:p,removePreview:_,previewShown:y,updateEdge:v}}),(function(n,s,a){function o(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events","no"),this}function l(){return this.options.noEdgeEventsInDraw&&this.cy.edges().style("events",""),this}n.exports={disableEdgeEvents:o,enableEdgeEvents:l}}),(function(n,s,a){function o(){return this.enabled=!0,this.emit("enable"),this}function l(){return this.enabled=!1,this.emit("disable"),this}n.exports={enable:o,disable:l}}),(function(n,s,a){var o=a(13),l=Math.sqrt(2);function c(f){var m=this.previewEles,b=this.ghostEles,C=function(T){return m.anySame(T)},S=function(T){return b.anySame(T)},k=function(T){return C(T)||S(T)},w=this.enabled,x=this.active,A=this.grabbingNode;return w&&!x&&!A&&f!=null&&f.nonempty()&&!k(f)}function u(f){return this.canStartOn(f)&&this.drawMode}function h(f){return this.canStartOn(f)&&!this.drawMode}function d(f){var m=this;if(this.canStartOn(f)){this.active=!0,this.sourceNode=f,this.sourceNode.addClass("eh-source"),this.disableGestures(),this.disableEdgeEvents();var b=function(S){return S.id()};this.canConnect=o(function(C){return m.options.canConnect(m.sourceNode,C)},b),this.edgeParams=o(function(C){return m.options.edgeParams(m.sourceNode,C)},b),this.emit("start",this.hp(),f)}}function p(f){if(this.active){var m=f;return this.mx=m.x,this.my=m.y,this.updateEdge(),this.throttledSnap(),this}}function y(){if(!this.active||!this.options.snap)return!1;var f=this.cy,m=this.targetNode,b=this.options.snapThreshold,C=this.mp(),S=this.previewEles,k=this.ghostNode,w=function(J){return l*Math.max(J.outerWidth(),J.outerHeight())/2},x=function(J,ne,V,N){var ee=V-J,U=N-ne;return ee*ee+U*U},A=function(J,ne){return x(J.x,J.y,ne.x,ne.y)},D=function(J){return A(J.position(),C)},T=function(J){var ne=w(J),V=ne+b;return V*V},E=function(J){return D(J)<=T(J)},R=function(J){var ne=J.position(),V=J.outerWidth()/2,N=J.outerHeight()/2,ee=ne.x,U=ne.y,X=C.x,M=C.y,q=ee-V,Q=ee+V,se=U-N,Z=U+N,Y=q<=X&&X<=Q,ae=se<=M&&M<=Z;if(Y&&ae)return 0;if(Y){var he=M-se,ce=M-Z;return Math.min(he*he,ce*ce)}else if(ae){var ue=X-q,ye=X-Q;return Math.min(ue*ue,ye*ye)}else return X<q&&M<se?x(X,M,q,se):X>Q&&M<se?x(X,M,Q,se):X<q&&M>Z?x(X,M,q,Z):x(X,M,Q,Z)},F=function(J,ne){return R(J)-R(ne)},O=F,$=!1,H=function(J){var ne=C,V=J.outerWidth(),N=V/2,ee=J.outerHeight(),U=ee/2,X=J.position(),M=X.x-N,q=X.x+N,Q=X.y-U,se=X.y+U;return M<=ne.x&&ne.x<=q&&Q<=ne.y&&ne.y<=se},L=function(J){return J.same(S)||J.same(k)},I=f.nodes(function(te){return!L(te)&&E(te)}).sort(O),P=!1;m.nonempty()&&!E(m)&&this.unpreview(m);for(var z=0;z<I.length;z++){var K=I[z];if(!(K.isParent()&&H(K))&&!(K.isChild()&&!H(K.parent()))&&(K.same(m)||this.preview(K,$))){P=!0;break}}return P}function _(f){var m=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,C=this.options,S=this.sourceNode,k=this.ghostNode,w=this.ghostEles,x=this.presumptiveTargets,A=this.previewEles,D=this.active,T=S,E=f.same(k),R=!this.canConnect(f),F=f.same(this.targetNode);if(!D||E||R||F)return!1;this.targetNode.nonempty()&&this.unpreview(this.targetNode),clearTimeout(this.previewTimeout);var O=function(){m.targetNode=f,x.merge(f),f.addClass("eh-presumptive-target"),f.addClass("eh-target"),m.emit("hoverover",m.mp(),T,f),f.addClass("eh-preview"),w.addClass("eh-preview-active"),S.addClass("eh-preview-active"),f.addClass("eh-preview-active"),m.makePreview(),m.emit("previewon",m.mp(),T,f,A)};return b&&C.hoverDelay>0?this.previewTimeout=setTimeout(O,C.hoverDelay):O(),!0}function v(f){if(this.active){var m=this.previewTimeout,b=this.sourceNode,C=this.previewEles,S=this.ghostEles,k=this.cy;clearTimeout(m),this.previewTimeout=null;var w=b;return f.removeClass("eh-preview eh-target eh-presumptive-target eh-preview-active"),S.removeClass("eh-preview-active"),b.removeClass("eh-preview-active"),this.targetNode=k.collection(),this.removePreview(w,f),this.emit("hoverout",this.mp(),w,f),this.emit("previewoff",this.mp(),w,f,C),this}}function g(){if(this.active){var f=this.sourceNode,m=this.targetNode,b=this.ghostEles,C=this.presumptiveTargets;return clearTimeout(this.previewTimeout),f.removeClass("eh-source eh-preview-active"),m.removeClass("eh-target eh-preview eh-hover eh-preview-active"),C.removeClass("eh-presumptive-target"),this.makeEdges(),b.remove(),this.clearCollections(),this.resetGestures(),this.enableEdgeEvents(),this.active=!1,this.emit("stop",this.mp(),f),this}}n.exports={start:d,update:p,preview:_,unpreview:v,stop:g,snap:y,canStartOn:c,canStartDrawModeOn:u,canStartNonDrawModeOn:h}}),(function(n,s,a){var o=a(4),l=a(0),c=a(14),u=a(2),h=a(3),d=a(5),p=a(6),y=a(8),_=a(9),v=a(11),g=a(7);function f(C){var S=C.cy;this.cy=S,this.listeners=[],this.enabled=!0,this.drawMode=!1,this.active=!1,this.grabbingNode=!1,this.clearCollections(),this.mx=0,this.my=0,this.options=l({},o,C),this.saveGestureState(),this.addListeners(),this.throttledSnap=c(this.snap.bind(this),1e3/C.snapFrequency),this.preventDefault=function(x){return x.preventDefault()},this.canConnect=function(){return!1};var k=!1;try{var w=Object.defineProperty({},"passive",{get:function(){k=!0}});window.addEventListener("test",null,w)}catch{}k?this.windowListenerOptions={capture:!0,passive:!1}:this.windowListenerOptions=!0}var m=f.prototype={},b=function(S){return l(m,S)};m.destroy=function(){this.removeListeners()},m.setOptions=function(C){l(this.options,C)},m.mp=function(){return{x:this.mx,y:this.my}},m.hp=function(){return{x:this.hx,y:this.hy}},m.clearCollections=function(){var C=this.cy;this.previewEles=C.collection(),this.ghostEles=C.collection(),this.ghostNode=C.collection(),this.sourceNode=C.collection(),this.targetNode=C.collection(),this.presumptiveTargets=C.collection()},[u,h,d,p,y,_,v,g].forEach(b),n.exports=f}),(function(n,s,a){var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(_){return typeof _}:function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _};function l(){var _=this;return this.addCytoscapeListeners(),this.addListener(this.cy,"destroy",function(){return _.destroy()}),this}function c(){for(var _=this.listeners.length-1;_>=0;_--){var v=this.listeners[_];this.removeListener(v.target,v.event,v.selector,v.callback,v.options)}return this}function u(_,v,g,f,m){return(typeof g>"u"?"undefined":o(g))!==o("")&&(f=g,m=f,g=null),m==null&&(m=!1),{target:_,event:v,selector:g,callback:f,options:m}}function h(_){return _ instanceof Element}function d(_,v,g,f,m){var b=u(_,v,g,f,m);return this.listeners.push(b),h(b.target)?b.target.addEventListener(b.event,b.callback,b.options):b.selector?b.target.addListener(b.event,b.selector,b.callback,b.options):b.target.addListener(b.event,b.callback,b.options),this}function p(_,v,g,f,m){for(var b=u(_,v,g,f,m),C=this.listeners.length-1;C>=0;C--){var S=this.listeners[C];if(b.target===S.target&&b.event===S.event&&(b.selector==null||b.selector===S.selector)&&(b.callback==null||b.callback===S.callback)){this.listeners.splice(C,1),h(b.target)?b.target.removeEventListener(b.event,b.callback,b.options):b.selector?b.target.removeListener(b.event,b.selector,b.callback,b.options):b.target.removeListener(b.event,b.callback,b.options);break}}return this}function y(_,v){for(var g=this.cy,f=arguments.length,m=Array(f>2?f-2:0),b=2;b<f;b++)m[b-2]=arguments[b];return g.emit({type:"eh"+_,position:v},m),this}n.exports={addListener:d,addListeners:l,removeListener:p,removeListeners:c,emit:y}}),(function(n,s,a){var o=a(1),l=function(u){u&&u("core","edgehandles",o)};typeof cytoscape<"u"&&l(cytoscape),n.exports=l}),(function(n,s){n.exports=r}),(function(n,s){n.exports=i})])})})(Bc)),Bc.exports}var YM=KM();const XM=Nw(YM),ZM=[{id:"canvas",icon:"",label:"Canvas"},{id:"bugs",icon:"",label:"Bugs"},{id:"features",icon:"",label:"Features"},{id:"modules",icon:"",label:"Modules"},{id:"roadmap",icon:"",label:"Roadmap"},{id:"specs",icon:"",label:"Specs"},{id:"diagrams",icon:"",label:"Diagrams"},{id:"api",icon:"",label:"API"},{id:"terminal",icon:"",label:"Terminal"},{id:"storybook",icon:"",label:"Storybook"},{id:"stack",icon:"",label:"Tech Stack"},{id:"docs",icon:"",label:"Docs"}],QM=[{value:"reported",label:"Reported"},{value:"inProgress",label:"In Progress"},{value:"finished",label:"Finished"}];function JM(){return{currentTheme:"mole",themeLoading:!1,themeError:"",themeMode:"system",themeMediaCleanup:null,activeTab:"canvas",mainTabs:[...ZM],claudeCommand:"",claudeLastResponse:"",cy:null,edgeHandles:null,moduleEdges:[],moduleSummary:{moduleCount:0,dependencyCount:0,externalDependencyCount:0,totalLines:0},roadmapState:{milestones:[],summary:{source:"manual",ticketCount:0,moduleCount:0,featureCount:0,generatedAt:null},history:[]},roadmapVersions:[],roadmapLoading:!1,roadmapUpdating:!1,roadmapUpdateError:"",roadmapUpdateMessage:"",roadmapUpdateTimestamp:null,roadmapUpdateMessageHandle:null,roadmapVersionsLoading:!1,roadmapError:"",roadmapViewMode:"minimal",roadmapSelectedVersion:"",roadmapRefreshHandle:null,stats:null,agents:[],taskQueue:[],tickets:[],features:[],modules:[],exportsList:[],latestAudit:null,loading:{tickets:!1,features:!1,modules:!1,agents:!1,exports:!1,stats:!1},branchStatusLoading:!1,branchStatusError:"",branchStatus:{name:"",ahead:0,behind:0,dirty:!1,detached:!1,notGitRepo:!1,lastUpdated:null},contextStatusLoading:!1,contextStatusError:"",contextStatus:{contextUsed:0,contextLimit:0,percentage:0,remaining:0,displayText:"",warning:"",currentTask:"System Ready",filesEdited:0,daicState:"Discussion"},terminalHistory:[],terminalCommand:"",terminalWorkingDirectory:".",terminalLoading:!1,terminalRunning:!1,terminalError:"",bugFilter:{priority:"",status:""},featureFilter:{module:"",status:""},selectedModules:[],ticketStatusOptions:[...QM],showTicketCompletionModal:!1,ticketBeingUpdated:null,ticketStatusElement:null,ticketCompletionSummary:"",ticketCompletionError:"",showBugModal:!1,showFeatureModal:!1,showAddModuleModal:!1,newBug:{title:"",description:"",priority:"medium",modules:[],tagsText:""},newFeature:{title:"",description:"",moduleId:"",priority:"medium",criteriaText:""},newModule:{name:"",id:"",path:"",depsString:"",type:"custom"},interviewBlueprint:null,baseSectionOrder:[],typeSectionMap:{},frameworkSectionMap:{},languageFrameworks:{},currentSectionOrder:[],activeSectionIndex:0,completedSections:[],currentQuestions:[],currentPhase:"initial",questionAnswers:{},generatedSpec:"",latestSpecMeta:null,latestSpecPayload:null,specExportFormat:"json",apiFormat:"openapi",apiSpecContent:"",apiSpecPayload:null,apiSpecWarnings:[],docType:"overview",docTitle:"Project Overview",generatedDocs:'<p class="loading">Select documentation type and click generate...</p>',docGenerating:!1,docGenerationError:"",latestDocMeta:null,latestDocContent:"",latestDocHtml:"",runbookModalOpen:!1,runbookInterviewLoading:!1,runbookInterviewSubmitting:!1,runbookInterviewError:"",runbookSessionId:null,runbookCurrentQuestion:null,runbookDraftAnswer:"",runbookResponses:[],runbookHistory:[],runbookMessages:[],latestRunbook:null,latestRunbookContent:"",latestRunbookHtml:"",runbookGenerating:!1,runbookGenerationError:"",mermaidCode:"",mermaidError:"",cliSessions:[],cliSessionsLoading:!1,cliSessionsError:"",selectedCliSession:null,cliSessionDetails:null,cliSessionDetailsError:"",cliGateLog:[],cliSessionsRefreshHandle:null,branchStatusRefreshHandle:null,contextStatusRefreshHandle:null,storybookStatus:"",storybookFrameVersion:0,techStackSummary:null,techStackLoading:!1,techStackError:"",techStackExporting:!1,techStackExportError:"",techStackExportResult:null}}const Cn=fl(JM()),eP=Lt(()=>{var l,c,u,h,d;const e=((l=Cn.stats)==null?void 0:l.reported)||0,t=((c=Cn.stats)==null?void 0:c.inProgress)||0,r=((u=Cn.stats)==null?void 0:u.finished)||0,i=((h=Cn.stats)==null?void 0:h.open)!==void 0?Cn.stats.open:e+t,n=((d=Cn.stats)==null?void 0:d.closed)!==void 0?Cn.stats.closed:r,s=i+n,a=s?Math.round(i/s*100):0,o=s?100-a:0;return{reported:e,inProgress:t,finished:r,open:i,closed:n,total:s,openPct:a,closedPct:o}});function es(){return Cn}function tP(){return{ticketProgress:eP}}function $e(e,t){return(...r)=>e.apply(t,r)}function rP(e){return{active:e.activeTab==="canvas",onLayout:t=>$e(e.layoutCanvas,e)(t),onDetect:()=>$e(e.detectModules,e)(),onAnalyze:()=>$e(e.analyzeCanvas,e)(),onExport:()=>$e(e.exportCanvas,e)()}}function iP(e){return{active:e.activeTab==="bugs",tickets:e.tickets,ticketStatusOptions:e.ticketStatusOptions,filter:e.bugFilter,onCreate:()=>$e(e.openBugModal,e)(),onAnalyze:()=>$e(e.analyzeWithPythonAgent,e)(),onExport:()=>$e(e.exportBugs,e)(),onStatusChange:(t,r)=>$e(e.onTicketStatusChange,e)(t,r),onUpdateFilter:t=>$e(e.updateBugFilter,e)(t)}}function nP(e){return{active:e.activeTab==="features",features:e.filteredFeatures,modules:e.modules,selectedModules:e.selectedModules,filter:e.featureFilter,getModuleFeatureCount:t=>$e(e.getModuleFeatureCount,e)(t),getModuleName:t=>$e(e.getModuleName,e)(t),onCreate:()=>$e(e.openFeatureModal,e)(),onReport:()=>$e(e.generateFeatureReport,e)(),onToggleModule:t=>$e(e.toggleModule,e)(t),onUpdateFilter:t=>$e(e.updateFeatureFilter,e)(t)}}function sP(e){return{active:e.activeTab==="modules",modules:e.modules,summary:e.moduleSummary,getModuleBugCount:t=>$e(e.getModuleBugCount,e)(t),getModuleFeatureCount:t=>$e(e.getModuleFeatureCount,e)(t),onCreate:()=>$e(e.openAddModuleModal,e)(),onDetect:()=>$e(e.detectModules,e)(),onAnalyzeDependencies:t=>$e(e.analyzeModuleDependencies,e)(t),onAnalyze:t=>$e(e.analyzeModule,e)(t)}}function aP(e){return{active:e.activeTab==="roadmap",state:e.roadmapState,versions:e.roadmapVersions,loading:e.roadmapLoading,updating:e.roadmapUpdating,versionsLoading:e.roadmapVersionsLoading,error:e.roadmapError,updateMessage:e.roadmapUpdateMessage,updateTimestamp:e.roadmapUpdateTimestamp,viewMode:e.roadmapViewMode,selectedVersion:e.roadmapSelectedVersion,onRefresh:t=>$e(e.refreshRoadmapState,e)(t),onGenerate:()=>$e(e.generateRoadmapFromData,e)(),onExport:()=>$e(e.exportRoadmapSnapshot,e)(),onDownload:()=>$e(e.downloadRoadmapSnapshot,e)(),onRollback:t=>$e(e.rollbackRoadmap,e)(t),onSelectVersion:t=>$e(e.selectRoadmapVersion,e)(t),onViewMode:t=>$e(e.setRoadmapViewMode,e)(t),onFetchVersions:t=>$e(e.fetchRoadmapVersions,e)(t),onUpdateMilestone:t=>$e(e.updateRoadmapMilestone,e)(t)}}function oP(e){return{active:e.activeTab==="specs",currentPhase:e.currentPhase,questions:e.currentQuestions,exportFormat:e.specExportFormat,generatedSpec:e.generatedSpec,latestSpecMeta:e.latestSpecMeta,cliSessions:e.cliSessions,cliSessionsLoading:e.cliSessionsLoading,cliSessionsError:e.cliSessionsError,selectedSessionId:e.selectedCliSession,sessionDetails:e.cliSessionDetails,sessionDetailsError:e.cliSessionDetailsError,cliGateLog:e.cliGateLog,findCliQuestionPrompt:t=>$e(e.findCliQuestionPrompt,e)(t),formatCliTimestamp:t=>$e(e.formatCliTimestamp,e)(t),formatCliSessionStatus:t=>$e(e.formatCliSessionStatus,e)(t),formatGateTimestamp:t=>$e(e.formatGateTimestamp,e)(t),formatGateContext:t=>$e(e.formatGateContext,e)(t),onUpdateExportFormat:t=>$e(e.updateSpecExportFormat,e)(t),onGenerate:()=>$e(e.generateSpec,e)(),onRefreshSessions:()=>$e(e.fetchCliSessions,e)(),onViewSession:t=>$e(e.viewCliSession,e)(t),onCloseSession:()=>$e(e.clearCliSessionDetails,e)(),onAnswer:t=>$e(e.processAnswer,e)(t),onReloadQuestions:()=>$e(e.reloadInterviewQuestions,e)()}}function lP(e){return{active:e.activeTab==="diagrams",mermaidCode:e.mermaidCode,generateDiagram:t=>$e(e.generateDiagram,e)(t),generateFromModules:()=>$e(e.generateFromModules,e)(),renderMermaid:()=>$e(e.renderMermaid,e)(),updateMermaidCode:t=>$e(e.updateMermaidCode,e)(t),mermaidError:e.mermaidError}}function cP(e){return{active:e.activeTab==="api",apiFormat:e.apiFormat,apiSpecContent:e.apiSpecContent,apiSpecWarnings:e.apiSpecWarnings,onGenerateApiSpec:t=>$e(e.generateAPISpec,e)(t),onExportApiSpec:t=>$e(e.exportAPISpec,e)(t),onTestApi:t=>$e(e.testAPI,e)(t),onUpdateApiFormat:t=>$e(e.updateApiFormat,e)(t)}}function uP(e){return{active:e.activeTab==="storybook",theme:e.currentTheme,status:e.storybookStatus,frameVersion:e.storybookFrameVersion,onStart:()=>$e(e.startStorybookInstance,e)(),onRefresh:t=>$e(e.refreshStorybookFrame,e)(t)}}function hP(e){return{active:e.activeTab==="docs",docType:e.docType,docTitle:e.docTitle,generatedDocs:e.generatedDocs,docGenerationError:e.docGenerationError,latestDocMeta:e.latestDocMeta,latestDocContent:e.latestDocContent,latestDocHtml:e.latestDocHtml,docGenerating:e.docGenerating,runbookGenerationError:e.runbookGenerationError,latestRunbook:e.latestRunbook,latestRunbookContent:e.latestRunbookContent,latestRunbookHtml:e.latestRunbookHtml,runbookMessages:e.runbookMessages,runbookGenerating:e.runbookGenerating,runbookInterviewLoading:e.runbookInterviewLoading,onGenerateDocs:t=>$e(e.generateDocs,e)(t),onExportDocs:()=>$e(e.exportDocs,e)(),onUpdateDocType:t=>$e(e.updateDocType,e)(t),onStartRunbookInterview:()=>$e(e.startRunbookInterview,e)(),onQuickGenerateRunbook:()=>$e(e.quickGenerateRunbook,e)()}}function dP(e){return{active:e.activeTab==="stack",summary:e.techStackSummary,loading:e.techStackLoading,error:e.techStackError,exporting:e.techStackExporting,exportError:e.techStackExportError,exportResult:e.techStackExportResult,onRefresh:()=>$e(e.refreshTechStackSummary,e)(),onExport:()=>$e(e.exportTechStackSummary,e)()}}function fP(e=""){if(!e)return"";const t=document.createElement("div");return t.innerHTML=e,(t.textContent||t.innerText||"").replace(/\n{2,}/g,`

`).trim()}function $w(e,t){const r=e&&e.trim()?e:"opnix-export.md",i=new Blob([t],{type:"text/markdown"}),n=document.createElement("a");n.href=URL.createObjectURL(i),n.download=r,n.click(),URL.revokeObjectURL(n.href)}function Wv(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Ns=Wv();function zw(e){Ns=e}const Hw=/[&<>"']/,pP=new RegExp(Hw.source,"g"),qw=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,vP=new RegExp(qw.source,"g"),gP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a_=e=>gP[e];function Ur(e,t){if(t){if(Hw.test(e))return e.replace(pP,a_)}else if(qw.test(e))return e.replace(vP,a_);return e}const mP=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function yP(e){return e.replace(mP,(t,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}const _P=/(^|[^\[])\^/g;function Ct(e,t){let r=typeof e=="string"?e:e.source;t=t||"";const i={replace:(n,s)=>{let a=typeof s=="string"?s:s.source;return a=a.replace(_P,"$1"),r=r.replace(n,a),i},getRegex:()=>new RegExp(r,t)};return i}function o_(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const Do={exec:()=>null};function l_(e,t){const r=e.replace(/\|/g,(s,a,o)=>{let l=!1,c=a;for(;--c>=0&&o[c]==="\\";)l=!l;return l?"|":" |"}),i=r.split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),t)if(i.length>t)i.splice(t);else for(;i.length<t;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function rc(e,t,r){const i=e.length;if(i===0)return"";let n=0;for(;n<i&&e.charAt(i-n-1)===t;)n++;return e.slice(0,i-n)}function bP(e,t){if(e.indexOf(t[1])===-1)return-1;let r=0;for(let i=0;i<e.length;i++)if(e[i]==="\\")i++;else if(e[i]===t[0])r++;else if(e[i]===t[1]&&(r--,r<0))return i;return-1}function c_(e,t,r,i){const n=t.href,s=t.title?Ur(t.title):null,a=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){i.state.inLink=!0;const o={type:"link",raw:r,href:n,title:s,text:a,tokens:i.inlineTokens(a)};return i.state.inLink=!1,o}return{type:"image",raw:r,href:n,title:s,text:Ur(a)}}function CP(e,t){const r=e.match(/^(\s+)(?:```)/);if(r===null)return t;const i=r[1];return t.split(`
`).map(n=>{const s=n.match(/^\s+/);if(s===null)return n;const[a]=s;return a.length>=i.length?n.slice(i.length):n}).join(`
`)}class fu{constructor(t){Et(this,"options");Et(this,"rules");Et(this,"lexer");this.options=t||Ns}space(t){const r=this.rules.block.newline.exec(t);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(t){const r=this.rules.block.code.exec(t);if(r){const i=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:rc(i,`
`)}}}fences(t){const r=this.rules.block.fences.exec(t);if(r){const i=r[0],n=CP(i,r[3]||"");return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):r[2],text:n}}}heading(t){const r=this.rules.block.heading.exec(t);if(r){let i=r[2].trim();if(/#$/.test(i)){const n=rc(i,"#");(this.options.pedantic||!n||/ $/.test(n))&&(i=n.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(t){const r=this.rules.block.hr.exec(t);if(r)return{type:"hr",raw:r[0]}}blockquote(t){const r=this.rules.block.blockquote.exec(t);if(r){let i=r[0].replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`);i=rc(i.replace(/^ *>[ \t]?/gm,""),`
`);const n=this.lexer.state.top;this.lexer.state.top=!0;const s=this.lexer.blockTokens(i);return this.lexer.state.top=n,{type:"blockquote",raw:r[0],tokens:s,text:i}}}list(t){let r=this.rules.block.list.exec(t);if(r){let i=r[1].trim();const n=i.length>1,s={type:"list",raw:"",ordered:n,start:n?+i.slice(0,-1):"",loose:!1,items:[]};i=n?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=n?i:"[*+-]");const a=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o="",l="",c=!1;for(;t;){let u=!1;if(!(r=a.exec(t))||this.rules.block.hr.test(t))break;o=r[0],t=t.substring(o.length);let h=r[2].split(`
`,1)[0].replace(/^\t+/,g=>" ".repeat(3*g.length)),d=t.split(`
`,1)[0],p=0;this.options.pedantic?(p=2,l=h.trimStart()):(p=r[2].search(/[^ ]/),p=p>4?1:p,l=h.slice(p),p+=r[1].length);let y=!1;if(!h&&/^ *$/.test(d)&&(o+=d+`
`,t=t.substring(d.length+1),u=!0),!u){const g=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),f=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),m=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),b=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;t;){const C=t.split(`
`,1)[0];if(d=C,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),m.test(d)||b.test(d)||g.test(d)||f.test(t))break;if(d.search(/[^ ]/)>=p||!d.trim())l+=`
`+d.slice(p);else{if(y||h.search(/[^ ]/)>=4||m.test(h)||b.test(h)||f.test(h))break;l+=`
`+d}!y&&!d.trim()&&(y=!0),o+=C+`
`,t=t.substring(C.length+1),h=d.slice(p)}}s.loose||(c?s.loose=!0:/\n *\n *$/.test(o)&&(c=!0));let _=null,v;this.options.gfm&&(_=/^\[[ xX]\] /.exec(l),_&&(v=_[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:o,task:!!_,checked:v,loose:!1,text:l,tokens:[]}),s.raw+=o}s.items[s.items.length-1].raw=o.trimEnd(),s.items[s.items.length-1].text=l.trimEnd(),s.raw=s.raw.trimEnd();for(let u=0;u<s.items.length;u++)if(this.lexer.state.top=!1,s.items[u].tokens=this.lexer.blockTokens(s.items[u].text,[]),!s.loose){const h=s.items[u].tokens.filter(p=>p.type==="space"),d=h.length>0&&h.some(p=>/\n.*\n/.test(p.raw));s.loose=d}if(s.loose)for(let u=0;u<s.items.length;u++)s.items[u].loose=!0;return s}}html(t){const r=this.rules.block.html.exec(t);if(r)return{type:"html",block:!0,raw:r[0],pre:r[1]==="pre"||r[1]==="script"||r[1]==="style",text:r[0]}}def(t){const r=this.rules.block.def.exec(t);if(r){const i=r[1].toLowerCase().replace(/\s+/g," "),n=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:n,title:s}}}table(t){const r=this.rules.block.table.exec(t);if(!r||!/[:|]/.test(r[2]))return;const i=l_(r[1]),n=r[2].replace(/^\||\| *$/g,"").split("|"),s=r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[],a={type:"table",raw:r[0],header:[],align:[],rows:[]};if(i.length===n.length){for(const o of n)/^ *-+: *$/.test(o)?a.align.push("right"):/^ *:-+: *$/.test(o)?a.align.push("center"):/^ *:-+ *$/.test(o)?a.align.push("left"):a.align.push(null);for(const o of i)a.header.push({text:o,tokens:this.lexer.inline(o)});for(const o of s)a.rows.push(l_(o,a.header.length).map(l=>({text:l,tokens:this.lexer.inline(l)})));return a}}lheading(t){const r=this.rules.block.lheading.exec(t);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(t){const r=this.rules.block.paragraph.exec(t);if(r){const i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(t){const r=this.rules.block.text.exec(t);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(t){const r=this.rules.inline.escape.exec(t);if(r)return{type:"escape",raw:r[0],text:Ur(r[1])}}tag(t){const r=this.rules.inline.tag.exec(t);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:r[0]}}link(t){const r=this.rules.inline.link.exec(t);if(r){const i=r[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const a=rc(i.slice(0,-1),"\\");if((i.length-a.length)%2===0)return}else{const a=bP(r[2],"()");if(a>-1){const l=(r[0].indexOf("!")===0?5:4)+r[1].length+a;r[2]=r[2].substring(0,a),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let n=r[2],s="";if(this.options.pedantic){const a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);a&&(n=a[1],s=a[3])}else s=r[3]?r[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(i)?n=n.slice(1):n=n.slice(1,-1)),c_(r,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},r[0],this.lexer)}}reflink(t,r){let i;if((i=this.rules.inline.reflink.exec(t))||(i=this.rules.inline.nolink.exec(t))){const n=(i[2]||i[1]).replace(/\s+/g," "),s=r[n.toLowerCase()];if(!s){const a=i[0].charAt(0);return{type:"text",raw:a,text:a}}return c_(i,s,i[0],this.lexer)}}emStrong(t,r,i=""){let n=this.rules.inline.emStrongLDelim.exec(t);if(!n||n[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(n[1]||n[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const a=[...n[0]].length-1;let o,l,c=a,u=0;const h=n[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,r=r.slice(-1*t.length+a);(n=h.exec(r))!=null;){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(l=[...o].length,n[3]||n[4]){c+=l;continue}else if((n[5]||n[6])&&a%3&&!((a+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const d=[...n[0]][0].length,p=t.slice(0,a+n.index+d+l);if(Math.min(a,l)%2){const _=p.slice(1,-1);return{type:"em",raw:p,text:_,tokens:this.lexer.inlineTokens(_)}}const y=p.slice(2,-2);return{type:"strong",raw:p,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(t){const r=this.rules.inline.code.exec(t);if(r){let i=r[2].replace(/\n/g," ");const n=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return n&&s&&(i=i.substring(1,i.length-1)),i=Ur(i,!0),{type:"codespan",raw:r[0],text:i}}}br(t){const r=this.rules.inline.br.exec(t);if(r)return{type:"br",raw:r[0]}}del(t){const r=this.rules.inline.del.exec(t);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(t){const r=this.rules.inline.autolink.exec(t);if(r){let i,n;return r[2]==="@"?(i=Ur(r[1]),n="mailto:"+i):(i=Ur(r[1]),n=i),{type:"link",raw:r[0],text:i,href:n,tokens:[{type:"text",raw:i,text:i}]}}}url(t){var i;let r;if(r=this.rules.inline.url.exec(t)){let n,s;if(r[2]==="@")n=Ur(r[0]),s="mailto:"+n;else{let a;do a=r[0],r[0]=((i=this.rules.inline._backpedal.exec(r[0]))==null?void 0:i[0])??"";while(a!==r[0]);n=Ur(r[0]),r[1]==="www."?s="http://"+r[0]:s=r[0]}return{type:"link",raw:r[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t){const r=this.rules.inline.text.exec(t);if(r){let i;return this.lexer.state.inRawBlock?i=r[0]:i=Ur(r[0]),{type:"text",raw:r[0],text:i}}}}const wP=/^(?: *(?:\n|$))+/,SP=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,kP=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Al=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,xP=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Ww=/(?:[*+-]|\d{1,9}[.)])/,Uw=Ct(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Ww).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Uv=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,TP=/^[^\n]+/,Vv=/(?!\s*\])(?:\\.|[^\[\]\\])+/,EP=Ct(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Vv).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),AP=Ct(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Ww).getRegex(),gh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jv=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,BP=Ct("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",jv).replace("tag",gh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Vw=Ct(Uv).replace("hr",Al).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gh).getRegex(),DP=Ct(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Vw).getRegex(),Gv={blockquote:DP,code:SP,def:EP,fences:kP,heading:xP,hr:Al,html:BP,lheading:Uw,list:AP,newline:wP,paragraph:Vw,table:Do,text:TP},u_=Ct("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Al).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gh).getRegex(),LP={...Gv,table:u_,paragraph:Ct(Uv).replace("hr",Al).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",u_).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",gh).getRegex()},RP={...Gv,html:Ct(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jv).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Do,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Ct(Uv).replace("hr",Al).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Uw).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},jw=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,MP=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Gw=/^( {2,}|\\)\n(?!\s*$)/,PP=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Bl="\\p{P}\\p{S}",IP=Ct(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Bl).getRegex(),FP=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,OP=Ct(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Bl).getRegex(),NP=Ct("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Bl).getRegex(),$P=Ct("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Bl).getRegex(),zP=Ct(/\\([punct])/,"gu").replace(/punct/g,Bl).getRegex(),HP=Ct(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),qP=Ct(jv).replace("(?:-->|$)","-->").getRegex(),WP=Ct("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",qP).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),pu=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,UP=Ct(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",pu).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Kw=Ct(/^!?\[(label)\]\[(ref)\]/).replace("label",pu).replace("ref",Vv).getRegex(),Yw=Ct(/^!?\[(ref)\](?:\[\])?/).replace("ref",Vv).getRegex(),VP=Ct("reflink|nolink(?!\\()","g").replace("reflink",Kw).replace("nolink",Yw).getRegex(),Kv={_backpedal:Do,anyPunctuation:zP,autolink:HP,blockSkip:FP,br:Gw,code:MP,del:Do,emStrongLDelim:OP,emStrongRDelimAst:NP,emStrongRDelimUnd:$P,escape:jw,link:UP,nolink:Yw,punctuation:IP,reflink:Kw,reflinkSearch:VP,tag:WP,text:PP,url:Do},jP={...Kv,link:Ct(/^!?\[(label)\]\((.*?)\)/).replace("label",pu).getRegex(),reflink:Ct(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",pu).getRegex()},Dp={...Kv,escape:Ct(jw).replace("])","~|])").getRegex(),url:Ct(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},GP={...Dp,br:Ct(Gw).replace("{2,}","*").getRegex(),text:Ct(Dp.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ic={normal:Gv,gfm:LP,pedantic:RP},io={normal:Kv,gfm:Dp,breaks:GP,pedantic:jP};class Ri{constructor(t){Et(this,"tokens");Et(this,"options");Et(this,"state");Et(this,"tokenizer");Et(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=t||Ns,this.options.tokenizer=this.options.tokenizer||new fu,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:ic.normal,inline:io.normal};this.options.pedantic?(r.block=ic.pedantic,r.inline=io.pedantic):this.options.gfm&&(r.block=ic.gfm,this.options.breaks?r.inline=io.breaks:r.inline=io.gfm),this.tokenizer.rules=r}static get rules(){return{block:ic,inline:io}}static lex(t,r){return new Ri(r).lex(t)}static lexInline(t,r){return new Ri(r).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let r=0;r<this.inlineQueue.length;r++){const i=this.inlineQueue[r];this.inlineTokens(i.src,i.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,r=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(o,l,c)=>l+"    ".repeat(c.length));let i,n,s,a;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(i=o.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.space(t)){t=t.substring(i.raw.length),i.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(i);continue}if(i=this.tokenizer.code(t)){t=t.substring(i.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i);continue}if(i=this.tokenizer.fences(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.heading(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.hr(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.blockquote(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.list(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.html(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.def(t)){t=t.substring(i.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.lheading(t)){t=t.substring(i.raw.length),r.push(i);continue}if(s=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=t.slice(1);let c;this.options.extensions.startBlock.forEach(u=>{c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(s=t.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(s))){n=r[r.length-1],a&&n.type==="paragraph"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i),a=s.length!==t.length,t=t.substring(i.raw.length);continue}if(i=this.tokenizer.text(t)){t=t.substring(i.raw.length),n=r[r.length-1],n&&n.type==="text"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i);continue}if(t){const o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,r}inline(t,r=[]){return this.inlineQueue.push({src:t,tokens:r}),r}inlineTokens(t,r=[]){let i,n,s,a=t,o,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(a))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(a))!=null;)a=a.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(a))!=null;)a=a.slice(0,o.index)+"++"+a.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},t,r))?(t=t.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(t)){t=t.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(t,a,c)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(t)){t=t.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(t)){t=t.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(t))){t=t.substring(i.raw.length),r.push(i);continue}if(s=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let d;this.options.extensions.startInline.forEach(p=>{d=p.call({lexer:this},h),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(s=t.substring(0,u+1))}if(i=this.tokenizer.inlineText(s)){t=t.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,n=r[r.length-1],n&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}}class vu{constructor(t){Et(this,"options");this.options=t||Ns}code(t,r,i){var s;const n=(s=(r||"").match(/^\S*/))==null?void 0:s[0];return t=t.replace(/\n$/,"")+`
`,n?'<pre><code class="language-'+Ur(n)+'">'+(i?t:Ur(t,!0))+`</code></pre>
`:"<pre><code>"+(i?t:Ur(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,r){return t}heading(t,r,i){return`<h${r}>${t}</h${r}>
`}hr(){return`<hr>
`}list(t,r,i){const n=r?"ol":"ul",s=r&&i!==1?' start="'+i+'"':"";return"<"+n+s+`>
`+t+"</"+n+`>
`}listitem(t,r,i){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph(t){return`<p>${t}</p>
`}table(t,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,r){const i=r.header?"th":"td";return(r.align?`<${i} align="${r.align}">`:`<${i}>`)+t+`</${i}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return"<br>"}del(t){return`<del>${t}</del>`}link(t,r,i){const n=o_(t);if(n===null)return i;t=n;let s='<a href="'+t+'"';return r&&(s+=' title="'+r+'"'),s+=">"+i+"</a>",s}image(t,r,i){const n=o_(t);if(n===null)return i;t=n;let s=`<img src="${t}" alt="${i}"`;return r&&(s+=` title="${r}"`),s+=">",s}text(t){return t}}class Yv{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,r,i){return""+i}image(t,r,i){return""+i}br(){return""}}class Mi{constructor(t){Et(this,"options");Et(this,"renderer");Et(this,"textRenderer");this.options=t||Ns,this.options.renderer=this.options.renderer||new vu,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Yv}static parse(t,r){return new Mi(r).parse(t)}static parseInline(t,r){return new Mi(r).parseInline(t)}parse(t,r=!0){let i="";for(let n=0;n<t.length;n++){const s=t[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=s,o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){i+=o||"";continue}}switch(s.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{const a=s;i+=this.renderer.heading(this.parseInline(a.tokens),a.depth,yP(this.parseInline(a.tokens,this.textRenderer)));continue}case"code":{const a=s;i+=this.renderer.code(a.text,a.lang,!!a.escaped);continue}case"table":{const a=s;let o="",l="";for(let u=0;u<a.header.length;u++)l+=this.renderer.tablecell(this.parseInline(a.header[u].tokens),{header:!0,align:a.align[u]});o+=this.renderer.tablerow(l);let c="";for(let u=0;u<a.rows.length;u++){const h=a.rows[u];l="";for(let d=0;d<h.length;d++)l+=this.renderer.tablecell(this.parseInline(h[d].tokens),{header:!1,align:a.align[d]});c+=this.renderer.tablerow(l)}i+=this.renderer.table(o,c);continue}case"blockquote":{const a=s,o=this.parse(a.tokens);i+=this.renderer.blockquote(o);continue}case"list":{const a=s,o=a.ordered,l=a.start,c=a.loose;let u="";for(let h=0;h<a.items.length;h++){const d=a.items[h],p=d.checked,y=d.task;let _="";if(d.task){const v=this.renderer.checkbox(!!p);c?d.tokens.length>0&&d.tokens[0].type==="paragraph"?(d.tokens[0].text=v+" "+d.tokens[0].text,d.tokens[0].tokens&&d.tokens[0].tokens.length>0&&d.tokens[0].tokens[0].type==="text"&&(d.tokens[0].tokens[0].text=v+" "+d.tokens[0].tokens[0].text)):d.tokens.unshift({type:"text",text:v+" "}):_+=v+" "}_+=this.parse(d.tokens,c),u+=this.renderer.listitem(_,y,!!p)}i+=this.renderer.list(u,o,l);continue}case"html":{const a=s;i+=this.renderer.html(a.text,a.block);continue}case"paragraph":{const a=s;i+=this.renderer.paragraph(this.parseInline(a.tokens));continue}case"text":{let a=s,o=a.tokens?this.parseInline(a.tokens):a.text;for(;n+1<t.length&&t[n+1].type==="text";)a=t[++n],o+=`
`+(a.tokens?this.parseInline(a.tokens):a.text);i+=r?this.renderer.paragraph(o):o;continue}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}parseInline(t,r){r=r||this.renderer;let i="";for(let n=0;n<t.length;n++){const s=t[n];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[s.type]){const a=this.options.extensions.renderers[s.type].call({parser:this},s);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(s.type)){i+=a||"";continue}}switch(s.type){case"escape":{const a=s;i+=r.text(a.text);break}case"html":{const a=s;i+=r.html(a.text);break}case"link":{const a=s;i+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{const a=s;i+=r.image(a.href,a.title,a.text);break}case"strong":{const a=s;i+=r.strong(this.parseInline(a.tokens,r));break}case"em":{const a=s;i+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{const a=s;i+=r.codespan(a.text);break}case"br":{i+=r.br();break}case"del":{const a=s;i+=r.del(this.parseInline(a.tokens,r));break}case"text":{const a=s;i+=r.text(a.text);break}default:{const a='Token with "'+s.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return i}}class Lo{constructor(t){Et(this,"options");this.options=t||Ns}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}}Et(Lo,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));var Is,Lp,Xw;class KP{constructor(...t){Ug(this,Is);Et(this,"defaults",Wv());Et(this,"options",this.setOptions);Et(this,"parse",Nl(this,Is,Lp).call(this,Ri.lex,Mi.parse));Et(this,"parseInline",Nl(this,Is,Lp).call(this,Ri.lexInline,Mi.parseInline));Et(this,"Parser",Mi);Et(this,"Renderer",vu);Et(this,"TextRenderer",Yv);Et(this,"Lexer",Ri);Et(this,"Tokenizer",fu);Et(this,"Hooks",Lo);this.use(...t)}walkTokens(t,r){var n,s;let i=[];for(const a of t)switch(i=i.concat(r.call(this,a)),a.type){case"table":{const o=a;for(const l of o.header)i=i.concat(this.walkTokens(l.tokens,r));for(const l of o.rows)for(const c of l)i=i.concat(this.walkTokens(c.tokens,r));break}case"list":{const o=a;i=i.concat(this.walkTokens(o.items,r));break}default:{const o=a;(s=(n=this.defaults.extensions)==null?void 0:n.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{const c=o[l].flat(1/0);i=i.concat(this.walkTokens(c,r))}):o.tokens&&(i=i.concat(this.walkTokens(o.tokens,r)))}}return i}use(...t){const r=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(i=>{const n={...i};if(n.async=this.defaults.async||n.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const a=r.renderers[s.name];a?r.renderers[s.name]=function(...o){let l=s.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:r.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=r[s.level];a?a.unshift(s.tokenizer):r[s.level]=[s.tokenizer],s.start&&(s.level==="block"?r.startBlock?r.startBlock.push(s.start):r.startBlock=[s.start]:s.level==="inline"&&(r.startInline?r.startInline.push(s.start):r.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(r.childTokens[s.name]=s.childTokens)}),n.extensions=r),i.renderer){const s=this.defaults.renderer||new vu(this.defaults);for(const a in i.renderer){if(!(a in s))throw new Error(`renderer '${a}' does not exist`);if(a==="options")continue;const o=a,l=i.renderer[o],c=s[o];s[o]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h||""}}n.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new fu(this.defaults);for(const a in i.tokenizer){if(!(a in s))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const o=a,l=i.tokenizer[o],c=s[o];s[o]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h}}n.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new Lo;for(const a in i.hooks){if(!(a in s))throw new Error(`hook '${a}' does not exist`);if(a==="options")continue;const o=a,l=i.hooks[o],c=s[o];Lo.passThroughHooks.has(a)?s[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(s,u)).then(d=>c.call(s,d));const h=l.call(s,u);return c.call(s,h)}:s[o]=(...u)=>{let h=l.apply(s,u);return h===!1&&(h=c.apply(s,u)),h}}n.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,a=i.walkTokens;n.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),s&&(l=l.concat(s.call(this,o))),l}}this.defaults={...this.defaults,...n}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,r){return Ri.lex(t,r??this.defaults)}parser(t,r){return Mi.parse(t,r??this.defaults)}}Is=new WeakSet,Lp=function(t,r){return(i,n)=>{const s={...n},a={...this.defaults,...s};this.defaults.async===!0&&s.async===!1&&(a.silent||console.warn("marked(): The async option was set to true by an extension. The async: false option sent to parse will be ignored."),a.async=!0);const o=Nl(this,Is,Xw).call(this,!!a.silent,!!a.async);if(typeof i>"u"||i===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof i!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(i)+", string expected"));if(a.hooks&&(a.hooks.options=a),a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(i):i).then(l=>t(l,a)).then(l=>a.hooks?a.hooks.processAllTokens(l):l).then(l=>a.walkTokens?Promise.all(this.walkTokens(l,a.walkTokens)).then(()=>l):l).then(l=>r(l,a)).then(l=>a.hooks?a.hooks.postprocess(l):l).catch(o);try{a.hooks&&(i=a.hooks.preprocess(i));let l=t(i,a);a.hooks&&(l=a.hooks.processAllTokens(l)),a.walkTokens&&this.walkTokens(l,a.walkTokens);let c=r(l,a);return a.hooks&&(c=a.hooks.postprocess(c)),c}catch(l){return o(l)}}},Xw=function(t,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const n="<p>An error occurred:</p><pre>"+Ur(i.message+"",!0)+"</pre>";return r?Promise.resolve(n):n}if(r)return Promise.reject(i);throw i}};const Ls=new KP;function ut(e,t){return Ls.parse(e,t)}ut.options=ut.setOptions=function(e){return Ls.setOptions(e),ut.defaults=Ls.defaults,zw(ut.defaults),ut};ut.getDefaults=Wv;ut.defaults=Ns;ut.use=function(...e){return Ls.use(...e),ut.defaults=Ls.defaults,zw(ut.defaults),ut};ut.walkTokens=function(e,t){return Ls.walkTokens(e,t)};ut.parseInline=Ls.parseInline;ut.Parser=Mi;ut.parser=Mi.parse;ut.Renderer=vu;ut.TextRenderer=Yv;ut.Lexer=Ri;ut.lexer=Ri.lex;ut.Tokenizer=fu;ut.Hooks=Lo;ut.parse=ut;ut.options;ut.setOptions;ut.use;ut.walkTokens;ut.parseInline;Mi.parse;Ri.lex;const Xv={"Content-Type":"application/json"};async function Zv(e){const i=(e.headers.get("content-type")||"").includes("application/json")?await e.json():await e.text();if(!e.ok){const n=i&&i.error?i.error:e.statusText;throw new Error(n||"Request failed")}return i}async function xr(e){const t=await fetch(e,{method:"GET",headers:Xv});return Zv(t)}async function mh(e,t,r={}){const i=await fetch(e,{method:t,headers:Xv,body:JSON.stringify(r)});return Zv(i)}async function Wt(e,t={}){return mh(e,"POST",t)}async function YP(e,t={}){return mh(e,"PUT",t)}async function XP(){return xr("/api/agents")}async function Zw(e){return Wt("/api/agents/activate",{agentId:e})}async function ZP(){return xr("/api/tickets")}async function QP(e){return Wt("/api/tickets",e)}async function JP(e,t){return YP(`/api/tickets/${encodeURIComponent(e)}`,t)}async function e5(){return xr("/api/features")}async function t5(e){return Wt("/api/features",e)}async function r5(){return xr("/api/modules/graph")}async function i5(e={}){return Wt("/api/modules/detect",e)}async function n5(e){return Wt("/api/modules/links",e)}async function s5(e){return Wt("/api/canvas/export",e)}async function a5(e={}){return Wt("/api/roadmap/generate-from-tickets",e)}async function o5(){return xr("/api/roadmap/state")}async function l5(){return xr("/api/roadmap/versions")}async function c5(e={}){return Wt("/api/roadmap/rollback",e)}async function u5(e={}){return Wt("/api/roadmap/export",e)}async function h5(e,t={}){const r=encodeURIComponent(e);return mh(`/api/roadmap/milestones/${r}`,"PATCH",t)}async function d5(){return xr("/api/terminal/history")}async function f5(e){return Wt("/api/terminal/execute",e)}async function p5(){return mh("/api/terminal/history","DELETE")}async function v5(){return xr("/api/terminal/status")}async function g5(){return xr("/api/context/status")}async function m5(){return xr("/api/exports")}async function y5(){return xr("/api/stats")}async function _5(){const e=await fetch("/data/interview-sections.json",{method:"GET",headers:Xv,cache:"no-cache"});return Zv(e)}async function b5(){return xr("/api/export/markdown")}async function C5(){return xr("/api/cli/sessions")}async function w5(e){return xr(`/api/cli/sessions/${encodeURIComponent(e)}`)}async function S5(){return Wt("/api/runbooks/interview/start")}async function k5(e){return Wt("/api/runbooks/interview/answer",e)}async function x5(e={}){return Wt("/api/runbooks/generate",e)}async function T5(e){return Wt("/api/specs/generate",e)}async function E5(e){return Wt("/api/claude/execute",e)}async function A5(e){return Wt("/api/docs/generate",e)}async function B5(e,{refresh:t}={}){const r=t?`/api/diagrams/${encodeURIComponent(e)}?refresh=1`:`/api/diagrams/${encodeURIComponent(e)}`;return xr(r)}async function D5(e){return Wt("/api/api-spec/generate",e)}async function L5(e){return Wt("/api/api-spec/export",e)}async function R5(e={}){return Wt("/api/api-spec/test",e)}async function M5(){return Wt("/api/storybook/start")}async function P5(){return xr("/api/tech-stack")}async function I5(){return Wt("/api/tech-stack/export")}function gn(e,t){return e||t||es()}const h_={source:"manual",reason:"",ticketCount:0,moduleCount:0,featureCount:0,statusBreakdown:{},featureStatusBreakdown:{},generatedAt:null};function F5(e){if(!e||typeof e!="object")return{...h_};const t={...h_,...e};return t.statusBreakdown=t.statusBreakdown&&typeof t.statusBreakdown=="object"?t.statusBreakdown:{},t.featureStatusBreakdown=t.featureStatusBreakdown&&typeof t.featureStatusBreakdown=="object"?t.featureStatusBreakdown:{},t}function O5(e){return Array.isArray(e)?e.map(t=>({id:t.id,name:t.name||"Roadmap Milestone",start:t.start,end:t.end,progress:typeof t.progress=="number"?Math.max(0,Math.min(100,Math.round(t.progress))):0,linkedModule:t.linkedModule||null,linkedTickets:Array.isArray(t.linkedTickets)?t.linkedTickets:[],notes:t.notes||""})):[]}function N5(e){return Array.isArray(e)?e.filter(t=>t&&typeof t=="object").map(t=>({timestamp:t.timestamp||t.generatedAt||new Date().toISOString(),reason:t.reason||"sync",ticketCount:t.ticketCount??0,moduleCount:t.moduleCount??0,featureCount:t.featureCount??0})):[]}function yh(e){const t=e&&typeof e=="object"?e:{},r=F5(t.summary),i=O5(t.milestones),n=N5(t.history);return{milestones:i,summary:r,history:n,lastUpdated:t.lastUpdated||r.generatedAt||null}}function _h(e,t=500){e.roadmapRefreshHandle&&clearTimeout(e.roadmapRefreshHandle),e.roadmapRefreshHandle=setTimeout(async()=>{e.roadmapRefreshHandle=null,await Qv.call(e,{background:!0}),await gu.call(e,{background:!0})},t)}async function Qv(e={},t){const r=gn(t,this),{background:i=!1}=e;i||(r.roadmapLoading=!0,r.roadmapError="");try{const n=await o5();if(!n||n.success!==!0)throw new Error((n==null?void 0:n.error)||"Failed to load roadmap state");r.roadmapState=yh(n.state)}catch(n){console.error("Roadmap state fetch failed",n),r.roadmapError=n.message||"Failed to load roadmap state"}finally{i||(r.roadmapLoading=!1)}}async function gu(e={},t){const r=gn(t,this),{background:i=!1}=e;i||(r.roadmapVersionsLoading=!0,r.roadmapError="");try{const n=await l5();if(!n||n.success!==!0)throw new Error((n==null?void 0:n.error)||"Failed to load roadmap versions");r.roadmapVersions=Array.isArray(n.versions)?n.versions:[]}catch(n){console.error("Roadmap versions fetch failed",n),r.roadmapError=n.message||"Failed to load roadmap versions"}finally{i||(r.roadmapVersionsLoading=!1)}}function $5(e="minimal",t){const r=gn(t,this),i=new Set(["minimal","detailed"]);r.roadmapViewMode=i.has(e)?e:"minimal"}function z5(e,t){try{const r=e||`opnix-roadmap-${Date.now()}.json`,i=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(i),n.download=r,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(n.href)}catch(r){console.error("Roadmap download failed",r)}}async function H5(e){var r;const t=gn(e,this);t.roadmapLoading=!0,t.roadmapError="";try{const i=await a5({tickets:t.tickets,modules:t.modules,features:t.features});if(!i||i.success!==!0)throw new Error((i==null?void 0:i.error)||"Failed to generate roadmap");t.roadmapState=yh(i.state??i),(r=t.addTask)==null||r.call(t,"Roadmap",`Generated ${t.roadmapState.milestones.length} milestones`,"complete"),_h(t,750)}catch(i){console.error("Generate roadmap failed",i),t.roadmapError=i.message||"Failed to generate roadmap"}finally{t.roadmapLoading=!1}}async function q5(e){var r;const t=gn(e,this);try{const i=await u5(t.roadmapState);if(!i||i.success!==!0)throw new Error((i==null?void 0:i.error)||"Export failed");(r=t.addTask)==null||r.call(t,"Roadmap",`Exported ${i.filename}`,"complete")}catch(i){console.error("Roadmap export failed",i),t.roadmapError=i.message||"Failed to export roadmap"}}async function W5(e,t){var i;const r=gn(t,this);if(!e){r.roadmapError="Select a version to rollback.";return}r.roadmapLoading=!0,r.roadmapError="";try{const n=await c5({version:e});if(!n||n.success!==!0)throw new Error((n==null?void 0:n.error)||"Rollback failed");r.roadmapState=yh(n.state??n),(i=r.addTask)==null||i.call(r,"Roadmap",`Rolled back to ${e}`,"complete"),_h(r,500)}catch(n){console.error("Roadmap rollback failed",n),r.roadmapError=n.message||"Failed to rollback roadmap"}finally{r.roadmapLoading=!1}}async function U5(e={},t){const r=gn(t,this),{id:i,field:n,value:s,updates:a,reason:o,actor:l}=e||{};if(i==null||i===""){r.roadmapError="Milestone id is required.";return}const c={};if(a&&typeof a=="object"&&Object.keys(a).length&&(c.updates=a),n!==void 0&&(c.field=n,c.value=s),!Object.keys(c).length){r.roadmapError="Provide at least one field to update.";return}o&&(c.reason=o),l&&(c.actor=l),r.roadmapUpdating=!0,r.roadmapUpdateError="",r.roadmapError="";try{const u=await h5(i,c);if(!u||u.success!==!0)throw new Error((u==null?void 0:u.error)||"Failed to update roadmap milestone");const h=u.state??u;r.roadmapState=yh(h);const d=Array.isArray(u.changedFields)?u.changedFields:[],p=u.message||(d.length?`Milestone updated (${d.join(", ")})`:"Milestone updated"),y=u.timestamp||new Date().toISOString();r.roadmapUpdateMessageHandle&&(clearTimeout(r.roadmapUpdateMessageHandle),r.roadmapUpdateMessageHandle=null),r.roadmapUpdateMessage=p,r.roadmapUpdateTimestamp=y,r.roadmapError="",r.roadmapUpdateError="",r.roadmapUpdateMessageHandle=setTimeout(()=>{r.roadmapUpdateMessage="",r.roadmapUpdateMessageHandle=null},3500),_h(r,500)}catch(u){console.error("Roadmap milestone update failed",u),r.roadmapUpdateMessageHandle&&(clearTimeout(r.roadmapUpdateMessageHandle),r.roadmapUpdateMessageHandle=null),r.roadmapUpdateMessage="";const h=(u==null?void 0:u.message)||"Failed to update roadmap milestone";r.roadmapUpdateError=h,r.roadmapError=h}finally{r.roadmapUpdating=!1}}function $s(e={},t){const r=gn(t,this),{delay:i=1e3}=e;_h(r,i)}function V5(e){const t=gn(e,this);if(!t.roadmapState)return;const r=`opnix-roadmap-snapshot-${Date.now()}.json`;z5(r,t.roadmapState)}async function j5(e={},t){await Qv.call(this,e,t),await gu.call(this,e,t)}ut.setOptions({mangle:!1,headerIds:!1});function G5(){const e=(this.modules||[]).map(r=>{const i=r.dependencies&&r.dependencies.length?r.dependencies.join(", "):"None",n=r.externalDependencies&&r.externalDependencies.length?r.externalDependencies.join(", "):"None";return`
      <h4>${r.name}</h4>
      <p>Health: ${r.health||"n/a"}%</p>
      <p>Coverage: ${r.coverage||0}%</p>
      <p>Dependencies: ${i}</p>
      <p>External: ${n}</p>
    `}).join(""),t={overview:`<h3>Opnix Statistics</h3>
      <ul>
        <li>Total Tickets: ${(this.tickets||[]).length}</li>
        <li>Total Features: ${(this.features||[]).length}</li>
        <li>Modules Discovered: ${(this.modules||[]).length}</li>
        <li>Dependencies: ${(this.moduleEdges||[]).length}</li>
      </ul>`,modules:`<h3>Module Documentation</h3>${e}`,api:`<h3>API Documentation</h3>
      <pre>${this.apiSpecContent||"Generate API spec first"}</pre>`,features:`<h3>Feature Specifications</h3>
      ${(this.features||[]).map(r=>`
        <h4>${r.title}</h4>
        <p>${r.description}</p>
        <p><strong>Status:</strong> ${r.status||"proposed"}</p>
        <p><strong>Module:</strong> ${this.getModuleName(r.moduleId)}</p>
      `).join("")}`};this.generatedDocs=t[this.docType]||"",this.docTitle=`${this.docType.charAt(0).toUpperCase()}${this.docType.slice(1)} Documentation`}function K5(){const e=fP(this.generatedDocs||"");$w("opnix-docs.md",e)}async function Y5(e={}){this.docGenerating=!0,this.docGenerationError="";try{G5.call(this);const t=await A5({docType:this.docType,...e});if(!t||t.success===!1)throw new Error(t&&t.error?t.error:"Failed to generate documentation");const r=t.doc||null;if(this.latestDocMeta=r,this.latestDocContent=r&&typeof r.content=="string"?r.content:"",this.latestDocHtml=this.latestDocContent?ut.parse(this.latestDocContent):"",typeof this.addTask=="function"){const i=r&&(r.relativePath||r.path),n=i?`Documentation saved to ${i}`:"Documentation generated";this.addTask("Documentation Expert",n,"complete")}typeof this.fetchExports=="function"&&await this.fetchExports(),$s.call(this,{delay:600})}catch(t){console.error("Docs generation error",t),this.docGenerationError=t&&t.message?t.message:"Failed to generate documentation"}finally{this.docGenerating=!1}}ut.setOptions({mangle:!1,headerIds:!1});function bh(){this.runbookSessionId=null,this.runbookCurrentQuestion=null,this.runbookDraftAnswer="",this.runbookResponses=[],this.runbookHistory=[],this.runbookMessages=[],this.runbookInterviewError="",this.runbookInterviewLoading=!1,this.runbookInterviewSubmitting=!1}async function X5(){if(!this.runbookGenerating){this.runbookModalOpen=!0,this.runbookGenerationError="",bh.call(this),this.runbookInterviewLoading=!0;try{const e=await S5();if(!e||!e.sessionId)throw new Error(e&&e.error||"Failed to start runbook interview");this.runbookSessionId=e.sessionId,this.runbookCurrentQuestion=e.question||null,this.runbookResponses=Array.isArray(e.responses)?e.responses:[],this.runbookHistory=[]}catch(e){console.error("Runbook interview start failed",e),this.runbookInterviewError=e.message||"Failed to start runbook interview"}finally{this.runbookInterviewLoading=!1}}}async function Z5(){if(this.runbookInterviewSubmitting||!this.runbookSessionId||!this.runbookCurrentQuestion)return;const e=this.runbookCurrentQuestion,t=(this.runbookDraftAnswer||"").trim();if(!t){this.runbookInterviewError="Please provide an answer before continuing.";return}this.runbookInterviewSubmitting=!0,this.runbookInterviewError="";try{const r=await k5({sessionId:this.runbookSessionId,questionId:this.runbookCurrentQuestion.id,answer:t});if(r.error)throw new Error(r.error||"Failed to submit answer");e&&(this.runbookHistory=[...this.runbookHistory||[],{questionId:e.id,prompt:e.prompt,answer:t}]),this.runbookResponses=Array.isArray(r.responses)?r.responses:this.runbookResponses,this.runbookMessages=Array.isArray(r.messages)?r.messages:[],this.runbookDraftAnswer="",r.completed?(this.runbookCurrentQuestion=null,await Ch.call(this,{sessionId:r.sessionId||this.runbookSessionId,responses:r.responses})):this.runbookCurrentQuestion=r.nextQuestion||null}catch(r){console.error("Runbook answer submit failed",r),this.runbookInterviewError=r.message||"Failed to submit answer"}finally{this.runbookInterviewSubmitting=!1}}async function Q5(){await Ch.call(this,{sessionId:this.runbookSessionId,responses:this.runbookResponses})}function J5(){this.runbookModalOpen=!1,bh.call(this)}async function Ch(e={}){if(!this.runbookGenerating){this.runbookGenerating=!0,this.runbookGenerationError="";try{const t={},r=e.sessionId||this.runbookSessionId;r&&(t.sessionId=r),e.responses&&Array.isArray(e.responses)&&(t.responses=e.responses);const i=await x5(t);if(!i.success)throw new Error(i.error||"Failed to generate runbook");this.latestRunbook=i.runbook,this.latestRunbookContent=i.runbook.content,this.latestRunbookHtml=i.runbook.content?ut.parse(i.runbook.content):"",this.runbookMessages=Array.isArray(this.runbookMessages)?this.runbookMessages:[],this.addTask("Runbook Generator",`Runbook saved as ${i.runbook.filename}`,"complete"),await this.fetchExports(),this.runbookModalOpen=!1,bh.call(this),this.runbookSessionId=i.runbook.sessionId||null}catch(t){console.error("Runbook generation failed",t);const r=t.message||"Failed to generate runbook";this.runbookModalOpen?this.runbookInterviewError=r:this.runbookGenerationError=r}finally{this.runbookGenerating=!1}}}async function eI(){this.runbookMessages=[],this.runbookHistory=[],this.runbookInterviewError="",await Ch.call(this,{})}function tI(){return{updateDocType(e){this.docType=e},async generateDocs(){await Y5.call(this)},exportDocs(){K5.call(this)},resetRunbookInterviewState(){bh.call(this)},async startRunbookInterview(){await X5.call(this)},async submitRunbookAnswer(){await Z5.call(this)},async skipRunbookInterview(){await Q5.call(this)},closeRunbookModal(){J5.call(this)},async generateRunbook(e={}){await Ch.call(this,e)},async quickGenerateRunbook(){await eI.call(this)}}}function rI(e){return e.split(`
`).map(t=>t.trim().replace(/^[-*]\s*/,"")).filter(Boolean)}async function iI(){if(this.newFeature.title.trim())try{const e=rI(this.newFeature.criteriaText||""),t=await t5({title:this.newFeature.title,description:this.newFeature.description,moduleId:this.newFeature.moduleId,priority:this.newFeature.priority,acceptanceCriteria:e});this.features.push(t),this.showFeatureModal=!1,this.newFeature={title:"",description:"",moduleId:"",priority:"medium",criteriaText:""},this.addTask("Feature Manager",`Feature ${t.title} created`,"complete"),$s.call(this,{delay:500})}catch(e){console.error("Create feature failed",e)}}function nI(){if(!Array.isArray(this.features)||this.features.length===0){this.addTask("Feature Manager","No features available for reporting","complete");return}const t=["# Opnix Feature Report",`Generated: ${new Date().toISOString()}`,""],r=this.features.reduce((a,o)=>{const l=o.status||"unknown";return a[l]=(a[l]||0)+1,a},{});t.push("## Status Totals"),Object.entries(r).sort((a,o)=>a[0].localeCompare(o[0])).forEach(([a,o])=>{t.push(`- ${a}: ${o}`)}),t.push("","## Modules");const i=this.features.reduce((a,o)=>{const l=o.moduleId||"unassigned";return a[l]||(a[l]=[]),a[l].push(o),a},{});Object.entries(i).sort((a,o)=>a[0].localeCompare(o[0])).forEach(([a,o])=>{const l=this.getModuleName(a);t.push(`
### ${l} (${a})`),o.forEach(c=>{const u=Array.isArray(c.acceptanceCriteria)&&c.acceptanceCriteria.length?c.acceptanceCriteria.map(h=>`    - ${h}`).join(`
`):"    - Pending acceptance criteria";t.push(`
- ${c.title} [${c.status||"unknown"}]
  - Priority: ${c.priority||"unknown"}
  - Votes: ${c.votes||0}
  - Summary: ${c.description||"No description provided"}
${u}`)})});const n=new Blob([t.join(`
`)],{type:"text/markdown"}),s=document.createElement("a");s.href=URL.createObjectURL(n),s.download=`opnix-feature-report-${Date.now()}.md`,s.click(),URL.revokeObjectURL(s.href),this.addTask("Feature Manager","Feature report exported","complete")}function sI(e){const t=this.selectedModules.indexOf(e);t>-1?this.selectedModules.splice(t,1):this.selectedModules.push(e)}function Ci(e,t){return e||t||es()}function aI(e){const t=Ci(e,this);t.showBugModal=!0}function oI(e){const t=Ci(e,this);t.showBugModal=!1}function lI(e,t){const r=Ci(t,this);r.newBug=e}function cI(e){const t=Ci(e,this);t.showFeatureModal=!0}function uI(e){const t=Ci(e,this);t.showFeatureModal=!1}function hI(e,t){const r=Ci(t,this);r.newFeature=e}function dI(e){const t=Ci(e,this);t.showAddModuleModal=!0}function fI(e){const t=Ci(e,this);t.showAddModuleModal=!1}function pI(e,t){const r=Ci(t,this);r.newModule=e}function vI(e,t){const r=Ci(t,this);r.ticketCompletionSummary=e}function gI(e,t){const r=Ci(t,this);r.runbookDraftAnswer=e}function mI(){return{async addFeature(){await iI.call(this)},generateFeatureReport(){nI.call(this)},toggleModule(e){sI.call(this,e)},updateFeatureFilter(e){this.featureFilter={...e}},openFeatureModal(){cI.call(this)},closeFeatureModal(){uI.call(this)},updateFeatureDraft(e){hI.call(this,e)}}}function yI(e){return e?e.split(/[\n,]/).map(t=>t.trim()).filter(Boolean).map(t=>t.replace(/\s+/g,"_").toUpperCase()):[]}async function _I(){const e=(this.tickets||[]).filter(s=>s&&s.priority==="high"&&s.status!=="finished"),t=(this.modules||[]).filter(s=>{const a=`${(s==null?void 0:s.name)||""} ${(s==null?void 0:s.id)||""}`,o=/python/i.test(a),l=((s==null?void 0:s.externalDependencies)||[]).some(c=>/python|py\b/i.test(c));return o||l}),r=new Set(t.map(s=>s.id)),i=(this.tickets||[]).filter(s=>Array.isArray(s==null?void 0:s.modules)&&s.modules.some(a=>r.has(a)));this.addTask("Python Agent","Activating Python diagnostic agent","processing");try{const s=await Zw("python-pro");if(!(s!=null&&s.success))throw new Error((s==null?void 0:s.error)||"Agent activation failed");this.addTask("Python Agent",s.message||"Python agent activated","complete"),await this.fetchAgents()}catch(s){console.error("Python agent analysis failed",s),this.addTask("Python Agent",s.message||"Python agent activation failed","complete");return}const n=[];if(e.length?n.push(`${e.length} high-priority bug${e.length===1?"":"s"} still open`):n.push("No high-priority bugs open"),t.length&&n.push(`${t.length} module${t.length===1?"":"s"} with Python signals`),i.length){const s=i.slice(0,3).map(a=>`#${a.id} ${a.title}`).join(", ");n.push(`Python-linked bugs: ${i.length}${s?` (${s}${i.length>3?", ...":""})`:""}`)}this.addTask("Python Agent",n.join(" | "),"complete")}async function bI(){if(this.newBug.title.trim())try{const e=yI(this.newBug.tagsText),t=await QP({title:this.newBug.title,description:this.newBug.description,priority:this.newBug.priority,status:"reported",modules:this.newBug.modules,tags:e});this.tickets.push(t),this.showBugModal=!1,this.newBug={title:"",description:"",priority:"medium",modules:[],tagsText:""},this.addTask("Bug Tracker",`Ticket #${t.id} recorded`,"complete"),$s.call(this,{delay:500})}catch(e){console.error("Create bug failed",e)}}async function CI(e,t){const r=t.target.value;if(!r||r===e.status){t.target.value=e.status;return}if(r==="finished"){this.ticketBeingUpdated=e,this.ticketStatusElement=t.target,this.ticketCompletionSummary=e.completionSummary||"",this.ticketCompletionError="",this.showTicketCompletionModal=!0;return}try{await Jv.call(this,e,{status:r},t.target)}catch{}}async function Jv(e,t,r){try{const i=await JP(e.id,t),n=this.tickets.findIndex(s=>s.id===i.id);return n!==-1&&this.tickets.splice(n,1,i),await this.fetchStats(),this.addTask("Bug Tracker",`Ticket #${i.id} updated`,"complete"),$s.call(this,{delay:400}),i}catch(i){throw console.error("Persist ticket update failed",i),r&&(r.value=e.status),i}}function wI(){this.ticketStatusElement&&this.ticketBeingUpdated&&(this.ticketStatusElement.value=this.ticketBeingUpdated.status),this.showTicketCompletionModal=!1,this.ticketBeingUpdated=null,this.ticketStatusElement=null,this.ticketCompletionSummary="",this.ticketCompletionError=""}async function SI(){if(!this.ticketBeingUpdated){this.showTicketCompletionModal=!1;return}if(!this.ticketCompletionSummary||!this.ticketCompletionSummary.trim()){this.ticketCompletionError="Completion summary is required.";return}try{await Jv.call(this,this.ticketBeingUpdated,{status:"finished",completionSummary:this.ticketCompletionSummary.trim()},this.ticketStatusElement),this.showTicketCompletionModal=!1,this.ticketCompletionSummary="",this.ticketCompletionError="",this.ticketBeingUpdated=null,this.ticketStatusElement=null}catch(e){console.error("Ticket update failed",e),this.ticketCompletionError="Unable to update ticket. Check console for details."}}async function kI(){try{const e=await b5();$w("opnix-tickets.md",e)}catch(e){console.error("Export bugs failed",e)}}const d_={reported:"Reported",inProgress:"In Progress",finished:"Finished"};function xI(e,{fallback:t}={}){if(e==null)return t??null;const r=String(e).trim();if(!r)return t??null;const i=r.replace(/[\s_-]/g,"").toLowerCase();return i==="reported"||i==="open"?"reported":i==="inprogress"?"inProgress":i==="finished"||i==="resolved"||i==="complete"?"finished":t??r}function TI(e){const t=xI(e,{fallback:"reported"});return d_[t]||d_.reported}function EI(e){try{const t=e instanceof Date?e:new Date(e);return Number.isNaN(t.getTime())?"Unknown date":t.toLocaleDateString()}catch(t){return console.error("Ticket date format error",t),"Unknown date"}}function AI(){return{updateBugFilter(e){this.bugFilter={...e}},async analyzeWithPythonAgent(){await _I.call(this)},async addBug(){await bI.call(this)},async exportBugs(){await kI.call(this)},async onTicketStatusChange(e,t){await CI.call(this,e,t)},async persistTicketUpdate(e,t,r){return Jv.call(this,e,t,r)},cancelTicketCompletion(){wI.call(this)},async confirmTicketCompletion(){await SI.call(this)},updateTicketCompletionSummary(e){vI.call(this,e)},openBugModal(){aI.call(this)},closeBugModal(){oI.call(this)},updateBugDraft(e){lI.call(this,e)}}}function Qw(){if(!this.cy)return;const e=[];this.modules.forEach(t=>{e.push({data:{id:t.id,label:t.name,coverage:t.coverage,health:t.health||60,dependencies:t.dependencies||[]}})}),this.moduleEdges.forEach(t=>{const r=t.id||`${t.source}->${t.target}`;e.push({data:{id:r,source:t.source,target:t.target}})}),this.cy.elements().remove(),this.cy.add(e),this.cy.layout({name:"cose",animate:!0,animationDuration:700,nodeRepulsion:4500,idealEdgeLength:140}).run()}function BI(e){const t=this.features.filter(i=>i.moduleId===e.id),r=this.tickets.filter(i=>(i.modules||[]).includes(e.id));console.table({module:e.name,features:t.length,tickets:r.length,coverage:e.coverage}),this.addTask("AI Engineer",`Analyzed ${e.name}`,"complete")}function DI(){const e=this.moduleEdges.reduce((t,r)=>(t[r.source]=t[r.source]||[],t[r.source].push(r.target),t),{});console.table(e),this.addTask("Backend Architect","Dependency map calculated","complete")}function LI(e){return this.tickets.filter(t=>(t.modules||[]).includes(e)).length}function RI(e){return this.features.filter(t=>t.moduleId===e).length}function MI(e){const t=this.moduleLookup[e];return t?t.name:"Unknown"}function PI(e){return e>=80?"#10B981":e>=60?"#F59E0B":"#EF4444"}function II(){const e=document.getElementById("canvas-container");e&&(this.cy||(this.cy=Vn({container:e,elements:[],boxSelectionEnabled:!0,style:[{selector:"node",style:{"background-color":t=>PI(t.data("health")||60),label:"data(label)",color:"#FAEBD7","text-valign":"center","text-halign":"center","text-wrap":"wrap","font-family":"JetBrains Mono","font-size":"12px",width:"140px",height:"90px","border-width":2,"border-color":"#06B6D4",padding:"10px"}},{selector:"edge",style:{"curve-style":"bezier","target-arrow-shape":"triangle","line-color":"#E94560","target-arrow-color":"#E94560",width:2}},{selector:"node:selected",style:{"background-color":"#FF8C3B","border-color":"#E94560","border-width":4}}],layout:{name:"cose",animate:!0,animationDuration:800,nodeRepulsion:4e3,idealEdgeLength:120},wheelSensitivity:.2}),this.cy.edgehandles&&(this.edgeHandles=this.cy.edgehandles({hoverDelay:150,handleSize:10,handleColor:"#FF8C3B",edgeType:()=>"flat",loopAllowed:()=>!1,edgeParams:()=>({data:{type:"dependency"}})}),this.cy.on("ehcomplete",async(t,r,i,n)=>{if(r.id()===i.id()){n.remove();return}await this.persistModuleLink(r.id(),i.id(),n)})),this.cy.on("tap","node",t=>{const r=t.target,i=this.modules.find(n=>n.id===r.id());i&&this.analyzeModule(i)})),Qw.call(this))}function FI(e){if(!this.cy)return;const r={breadthfirst:{name:"breadthfirst",directed:!0,padding:10,spacingFactor:1.3},circle:{name:"circle",radius:280},cose:{name:"cose",nodeRepulsion:4e3,idealEdgeLength:140}}[e];r&&this.cy.layout(r).run()}async function Jw(){this.addTask("Backend Architect","Scanning project structure","processing");try{const e=await i5({});this.modules=e.modules||[],this.moduleEdges=(e.edges||[]).filter(t=>this.modules.some(r=>r.id===t.source)&&this.modules.some(r=>r.id===t.target)),this.moduleSummary=e.summary||this.moduleSummary,this.refreshCanvas(),$s.call(this,{delay:600})}catch(e){console.error("Detect modules failed",e)}}async function OI(e,t,r){try{const i=await n5({source:e,target:t});i&&i.duplicate?this.addTask("Canvas",`Link ${e}  ${t} already exists`,"complete"):i&&i.source&&i.target?(this.addTask("Canvas",`Linked ${e}  ${t}`,"complete"),await Jw.call(this),$s.call(this,{delay:600})):console.error("Failed to persist link",i)}catch(i){console.error("Persist link error",i)}finally{r&&!r.destroyed()&&r.remove()}}function NI(){const e={modules:this.modules.length,dependencies:this.moduleEdges.length,externalDependencies:this.modules.reduce((t,r)=>t+(r.externalDependencies?r.externalDependencies.length:0),0)};console.table(e),this.addTask("Backend Architect","Canvas metrics computed","complete")}async function $I(){if(this.cy)try{const e=this.cy.png({full:!0}),t=await s5({format:"png",data:e});t.success&&(this.addTask("Canvas Export",`Saved ${t.filename}`,"complete"),typeof this.fetchExports=="function"&&await this.fetchExports())}catch(e){console.error("Canvas export failed",e)}}function zI(){return{async fetchModulesGraph(){try{this.loading.modules=!0;const e=await r5();this.modules=e.modules||[],this.moduleEdges=(e.edges||[]).filter(t=>this.modules.some(r=>r.id===t.source)&&this.modules.some(r=>r.id===t.target)),this.moduleSummary=e.summary||this.moduleSummary,typeof this.ensureCanvas=="function"&&this.ensureCanvas(),typeof this.queueRoadmapRefresh=="function"&&this.queueRoadmapRefresh({delay:600})}catch(e){console.error("Module graph error",e)}finally{this.loading.modules=!1}},ensureCanvas(){II.call(this)},refreshCanvas(){Qw.call(this)},layoutCanvas(e){FI.call(this,e)},async detectModules(){await Jw.call(this)},async persistModuleLink(e,t,r){await OI.call(this,e,t,r)},analyzeCanvas(){NI.call(this)},async exportCanvas(){await $I.call(this)},analyzeModule(e){BI.call(this,e)},analyzeModuleDependencies(){DI.call(this)},getModuleBugCount(e){return LI.call(this,e)},getModuleFeatureCount(e){return RI.call(this,e)},getModuleName(e){return MI.call(this,e)}}}function HI(e=[],t=5){return e.slice(0,t).map(r=>({id:r.id,title:r.title,description:r.description,status:r.status,priority:r.priority,modules:r.modules||[],tags:r.tags||[]}))}function f_(e=[],t=5){return e.slice(0,t).map(r=>({id:r.id,name:r.name,type:r.type,pathHints:r.pathHints||[],dependencies:r.dependencies||[],externalDependencies:r.externalDependencies||[]}))}function qI(e=[],t=5){return e.slice(0,t).map(r=>({id:r.id,title:r.title,description:r.description,moduleId:r.moduleId,status:r.status,priority:r.priority}))}function eg(){var h,d;const e=Array.isArray(this.modules)?this.modules:[],t=Array.isArray(this.features)?this.features:[],r=Array.isArray(this.tickets)?this.tickets:[],i=((h=this.latestSpecMeta)==null?void 0:h.projectName)||((d=this.packageJson)==null?void 0:d.name)||"Opnix Project",n=[{url:"http://localhost:7337",description:"Local development"}],s={type:"object",required:["id","name"],properties:{id:{type:["string","number"]},name:{type:"string"},type:{type:"string"},pathHints:{type:"array",items:{type:"string"}},dependencies:{type:"array",items:{type:"string"}},externalDependencies:{type:"array",items:{type:"string"}},health:{type:"number"},coverage:{type:"number"}}},a={type:"object",required:["id","title","status","priority"],properties:{id:{type:["string","number"]},title:{type:"string"},description:{type:"string"},status:{type:"string",enum:["reported","inProgress","finished"]},priority:{type:"string",enum:["low","medium","high"]},modules:{type:"array",items:{type:"string"}},tags:{type:"array",items:{type:"string"}}}},o={type:"object",required:["id","title","status"],properties:{id:{type:["string","number"]},title:{type:"string"},description:{type:"string"},status:{type:"string",enum:["proposed","approved","inDevelopment","testing","deployed"]},moduleId:{type:["string","number","null"]},priority:{type:"string",enum:["low","medium","high"]}}},l=[{method:"GET",path:"/api/tickets",summary:"List tickets",description:"Returns the set of tickets recorded in data/tickets.json."},{method:"POST",path:"/api/tickets",summary:"Create a ticket",description:"Adds a new ticket and persists it to data/tickets.json."},{method:"GET",path:"/api/features",summary:"List features",description:"Fetches features tracked in data/features.json."},{method:"POST",path:"/api/features",summary:"Create a feature",description:"Creates a new feature proposal with optional acceptance criteria."},{method:"GET",path:"/api/modules/graph",summary:"Return module graph",description:"Returns the module graph combining detector output and manual links."},{method:"POST",path:"/api/modules/detect",summary:"Trigger module detection",description:"Runs the detector across the repository and returns module metadata."}],c={"/api/tickets":{get:{tags:["Tickets"],summary:"List tickets",responses:{200:{description:"Tickets found",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Ticket"}},examples:{default:{value:HI(r)}}}}}}},post:{tags:["Tickets"],summary:"Create ticket",requestBody:{required:!0,content:{"application/json":{schema:{$ref:"#/components/schemas/Ticket"}}}},responses:{201:{description:"Ticket created"}}}},"/api/features":{get:{tags:["Features"],summary:"List features",responses:{200:{description:"Features found",content:{"application/json":{schema:{type:"array",items:{$ref:"#/components/schemas/Feature"}},examples:{default:{value:qI(t)}}}}}}},post:{tags:["Features"],summary:"Create feature",requestBody:{required:!0,content:{"application/json":{schema:{$ref:"#/components/schemas/Feature"}}}},responses:{201:{description:"Feature created"}}}},"/api/modules/graph":{get:{tags:["Modules"],summary:"Retrieve module graph",responses:{200:{description:"Module graph generated",content:{"application/json":{schema:{type:"object",properties:{modules:{type:"array",items:{$ref:"#/components/schemas/Module"}},edges:{type:"array",items:{type:"object"}}}},examples:{default:{value:{modules:f_(e),edges:this.moduleEdges||[]}}}}}}}}},"/api/modules/detect":{post:{tags:["Modules"],summary:"Trigger module detection run",responses:{200:{description:"Detection complete",content:{"application/json":{schema:{type:"object",properties:{modules:{type:"array",items:{$ref:"#/components/schemas/Module"}},edges:{type:"array",items:{type:"object"}}}},examples:{default:{value:{modules:f_(e),edges:this.moduleEdges||[]}}}}}}}}}},u={moduleCount:e.length,featureCount:t.length,ticketCount:r.length};return{openapi:"3.1.0",info:{title:`${i} API`,version:"1.0.0",description:"Draft OpenAPI specification generated from live Opnix data."},servers:n,tags:[{name:"Tickets",description:"Ticket management endpoints"},{name:"Features",description:"Feature lifecycle endpoints"},{name:"Modules",description:"Module detection and graph endpoints"}],paths:c,components:{schemas:{Module:s,Ticket:a,Feature:o}},"x-draft-endpoints":l,"x-draft-summary":u}}async function WI(){this.apiSpecWarnings=[];const e=eg.call(this);this.apiSpecPayload=e,this.apiSpecContent=JSON.stringify(e,null,2),this.addTask("API Generator","Compiling API surface","processing");try{const t=await D5({spec:e,format:this.apiFormat});t!=null&&t.spec&&(this.apiSpecPayload=t.spec,this.apiSpecContent=t.preview||JSON.stringify(t.spec,null,2)),this.apiSpecWarnings=Array.isArray(t==null?void 0:t.warnings)?t.warnings:[],this.addTask("API Generator","API spec generated","complete")}catch(t){console.error("Generate API spec failed",t),this.apiSpecWarnings=[t.message||"API spec generation failed"],this.addTask("API Generator","API spec generation failed","complete")}}async function UI({format:e}={}){const t=this.apiSpecPayload||eg.call(this);try{const r=await L5({spec:t,format:e||this.apiFormat});r!=null&&r.success&&(this.addTask("API Export",`Spec saved as ${r.filename}`,"complete"),typeof this.fetchExports=="function"&&await this.fetchExports()),Array.isArray(r==null?void 0:r.warnings)&&(this.apiSpecWarnings=r.warnings)}catch(r){console.error("Export API spec failed",r),this.apiSpecWarnings=[r.message||"API spec export failed"],this.addTask("API Export","API spec export failed","complete")}}async function VI({format:e}={}){try{const t=await R5({spec:this.apiSpecPayload,format:e||this.apiFormat}),r=Array.isArray(t==null?void 0:t.results)?t.results:[];if(r.length){const i=r.reduce((n,s)=>(n[s.check]=`${s.status}: ${s.detail}`,n),{});console.table(i)}this.apiSpecWarnings=Array.isArray(t==null?void 0:t.warnings)?t.warnings:[],this.addTask("API Tester",t!=null&&t.success?"API checks passed":"API checks reported warnings","complete")}catch(t){console.error("API spec tests failed",t),this.apiSpecWarnings=[t.message||"API tests failed"],this.addTask("API Tester","API tests failed","complete")}}function jI(){return{buildApiSpecDraft(){return eg.call(this)},updateApiFormat(e){this.apiFormat=e,this.apiSpecWarnings=[]},async generateAPISpec(e){await WI.call(this,e)},async exportAPISpec(e={}){await UI.call(this,e)},async testAPI(e={}){await VI.call(this,e)}}}function GI(){return{async startStorybookInstance(){try{this.storybookStatus="Starting Storybook...";const e=await M5(),t=(e==null?void 0:e.message)||"Storybook start requested";this.storybookStatus=t,this.addTask("Storybook",t,"complete"),this.refreshStorybookFrame({reason:"start-storybook"})}catch(e){console.error("Storybook start failed",e);const t=(e==null?void 0:e.message)||"Failed to start Storybook";this.storybookStatus=t,this.addTask("Storybook",t,"complete")}},refreshStorybookFrame({reason:e}={}){this.storybookFrameVersion+=1,e==="theme-change"?this.storybookStatus=`Theme synced at ${new Date().toLocaleTimeString()}`:e==="manual-refresh"?this.storybookStatus=`Frame refreshed at ${new Date().toLocaleTimeString()}`:e==="tab-activate"&&!this.storybookStatus&&(this.storybookStatus="Storybook panel ready")}}}function KI(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=Array.from(typeof e=="string"?[e]:e);i[i.length-1]=i[i.length-1].replace(/\r?\n([\t ]*)$/,"");var n=i.reduce(function(o,l){var c=l.match(/\n([\t ]+|(?!\s).)/g);return c?o.concat(c.map(function(u){var h,d;return(d=(h=u.match(/[\t ]/g))===null||h===void 0?void 0:h.length)!==null&&d!==void 0?d:0})):o},[]);if(n.length){var s=new RegExp(`
[	 ]{`+Math.min.apply(Math,n)+"}","g");i=i.map(function(o){return o.replace(s,`
`)})}i[0]=i[0].replace(/^\r?\n/,"");var a=i[0];return t.forEach(function(o,l){var c=a.match(/(?:^|\n)( *)$/),u=c?c[1]:"",h=o;typeof o=="string"&&o.includes(`
`)&&(h=String(o).split(`
`).map(function(d,p){return p===0?d:""+u+d}).join(`
`)),a+=h+i[l+1]}),a}const YI="modulepreload",XI=function(e){return"/"+e},p_={},Ft=function(t,r,i){let n=Promise.resolve();if(r&&r.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=a(r.map(c=>{if(c=XI(c),c in p_)return;p_[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":YI,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((p,y)=>{d.addEventListener("load",p),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return n.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return t().catch(s)})};var Dc={exports:{}},ZI=Dc.exports,v_;function QI(){return v_||(v_=1,(function(e,t){(function(r,i){e.exports=i()})(ZI,(function(){var r=1e3,i=6e4,n=36e5,s="millisecond",a="second",o="minute",l="hour",c="day",u="week",h="month",d="quarter",p="year",y="date",_="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(R){var F=["th","st","nd","rd"],O=R%100;return"["+R+(F[(O-20)%10]||F[O]||F[0])+"]"}},m=function(R,F,O){var $=String(R);return!$||$.length>=F?R:""+Array(F+1-$.length).join(O)+R},b={s:m,z:function(R){var F=-R.utcOffset(),O=Math.abs(F),$=Math.floor(O/60),H=O%60;return(F<=0?"+":"-")+m($,2,"0")+":"+m(H,2,"0")},m:function R(F,O){if(F.date()<O.date())return-R(O,F);var $=12*(O.year()-F.year())+(O.month()-F.month()),H=F.clone().add($,h),L=O-H<0,I=F.clone().add($+(L?-1:1),h);return+(-($+(O-H)/(L?H-I:I-H))||0)},a:function(R){return R<0?Math.ceil(R)||0:Math.floor(R)},p:function(R){return{M:h,y:p,w:u,d:c,D:y,h:l,m:o,s:a,ms:s,Q:d}[R]||String(R||"").toLowerCase().replace(/s$/,"")},u:function(R){return R===void 0}},C="en",S={};S[C]=f;var k="$isDayjsObject",w=function(R){return R instanceof T||!(!R||!R[k])},x=function R(F,O,$){var H;if(!F)return C;if(typeof F=="string"){var L=F.toLowerCase();S[L]&&(H=L),O&&(S[L]=O,H=L);var I=F.split("-");if(!H&&I.length>1)return R(I[0])}else{var P=F.name;S[P]=F,H=P}return!$&&H&&(C=H),H||!$&&C},A=function(R,F){if(w(R))return R.clone();var O=typeof F=="object"?F:{};return O.date=R,O.args=arguments,new T(O)},D=b;D.l=x,D.i=w,D.w=function(R,F){return A(R,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var T=(function(){function R(O){this.$L=x(O.locale,null,!0),this.parse(O),this.$x=this.$x||O.x||{},this[k]=!0}var F=R.prototype;return F.parse=function(O){this.$d=(function($){var H=$.date,L=$.utc;if(H===null)return new Date(NaN);if(D.u(H))return new Date;if(H instanceof Date)return new Date(H);if(typeof H=="string"&&!/Z$/i.test(H)){var I=H.match(v);if(I){var P=I[2]-1||0,z=(I[7]||"0").substring(0,3);return L?new Date(Date.UTC(I[1],P,I[3]||1,I[4]||0,I[5]||0,I[6]||0,z)):new Date(I[1],P,I[3]||1,I[4]||0,I[5]||0,I[6]||0,z)}}return new Date(H)})(O),this.init()},F.init=function(){var O=this.$d;this.$y=O.getFullYear(),this.$M=O.getMonth(),this.$D=O.getDate(),this.$W=O.getDay(),this.$H=O.getHours(),this.$m=O.getMinutes(),this.$s=O.getSeconds(),this.$ms=O.getMilliseconds()},F.$utils=function(){return D},F.isValid=function(){return this.$d.toString()!==_},F.isSame=function(O,$){var H=A(O);return this.startOf($)<=H&&H<=this.endOf($)},F.isAfter=function(O,$){return A(O)<this.startOf($)},F.isBefore=function(O,$){return this.endOf($)<A(O)},F.$g=function(O,$,H){return D.u(O)?this[$]:this.set(H,O)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(O,$){var H=this,L=!!D.u($)||$,I=D.p(O),P=function(ee,U){var X=D.w(H.$u?Date.UTC(H.$y,U,ee):new Date(H.$y,U,ee),H);return L?X:X.endOf(c)},z=function(ee,U){return D.w(H.toDate()[ee].apply(H.toDate("s"),(L?[0,0,0,0]:[23,59,59,999]).slice(U)),H)},K=this.$W,te=this.$M,J=this.$D,ne="set"+(this.$u?"UTC":"");switch(I){case p:return L?P(1,0):P(31,11);case h:return L?P(1,te):P(0,te+1);case u:var V=this.$locale().weekStart||0,N=(K<V?K+7:K)-V;return P(L?J-N:J+(6-N),te);case c:case y:return z(ne+"Hours",0);case l:return z(ne+"Minutes",1);case o:return z(ne+"Seconds",2);case a:return z(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(O){return this.startOf(O,!1)},F.$set=function(O,$){var H,L=D.p(O),I="set"+(this.$u?"UTC":""),P=(H={},H[c]=I+"Date",H[y]=I+"Date",H[h]=I+"Month",H[p]=I+"FullYear",H[l]=I+"Hours",H[o]=I+"Minutes",H[a]=I+"Seconds",H[s]=I+"Milliseconds",H)[L],z=L===c?this.$D+($-this.$W):$;if(L===h||L===p){var K=this.clone().set(y,1);K.$d[P](z),K.init(),this.$d=K.set(y,Math.min(this.$D,K.daysInMonth())).$d}else P&&this.$d[P](z);return this.init(),this},F.set=function(O,$){return this.clone().$set(O,$)},F.get=function(O){return this[D.p(O)]()},F.add=function(O,$){var H,L=this;O=Number(O);var I=D.p($),P=function(te){var J=A(L);return D.w(J.date(J.date()+Math.round(te*O)),L)};if(I===h)return this.set(h,this.$M+O);if(I===p)return this.set(p,this.$y+O);if(I===c)return P(1);if(I===u)return P(7);var z=(H={},H[o]=i,H[l]=n,H[a]=r,H)[I]||1,K=this.$d.getTime()+O*z;return D.w(K,this)},F.subtract=function(O,$){return this.add(-1*O,$)},F.format=function(O){var $=this,H=this.$locale();if(!this.isValid())return H.invalidDate||_;var L=O||"YYYY-MM-DDTHH:mm:ssZ",I=D.z(this),P=this.$H,z=this.$m,K=this.$M,te=H.weekdays,J=H.months,ne=H.meridiem,V=function(U,X,M,q){return U&&(U[X]||U($,L))||M[X].slice(0,q)},N=function(U){return D.s(P%12||12,U,"0")},ee=ne||function(U,X,M){var q=U<12?"AM":"PM";return M?q.toLowerCase():q};return L.replace(g,(function(U,X){return X||(function(M){switch(M){case"YY":return String($.$y).slice(-2);case"YYYY":return D.s($.$y,4,"0");case"M":return K+1;case"MM":return D.s(K+1,2,"0");case"MMM":return V(H.monthsShort,K,J,3);case"MMMM":return V(J,K);case"D":return $.$D;case"DD":return D.s($.$D,2,"0");case"d":return String($.$W);case"dd":return V(H.weekdaysMin,$.$W,te,2);case"ddd":return V(H.weekdaysShort,$.$W,te,3);case"dddd":return te[$.$W];case"H":return String(P);case"HH":return D.s(P,2,"0");case"h":return N(1);case"hh":return N(2);case"a":return ee(P,z,!0);case"A":return ee(P,z,!1);case"m":return String(z);case"mm":return D.s(z,2,"0");case"s":return String($.$s);case"ss":return D.s($.$s,2,"0");case"SSS":return D.s($.$ms,3,"0");case"Z":return I}return null})(U)||I.replace(":","")}))},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(O,$,H){var L,I=this,P=D.p($),z=A(O),K=(z.utcOffset()-this.utcOffset())*i,te=this-z,J=function(){return D.m(I,z)};switch(P){case p:L=J()/12;break;case h:L=J();break;case d:L=J()/3;break;case u:L=(te-K)/6048e5;break;case c:L=(te-K)/864e5;break;case l:L=te/n;break;case o:L=te/i;break;case a:L=te/r;break;default:L=te}return H?L:D.a(L)},F.daysInMonth=function(){return this.endOf(h).$D},F.$locale=function(){return S[this.$L]},F.locale=function(O,$){if(!O)return this.$L;var H=this.clone(),L=x(O,$,!0);return L&&(H.$L=L),H},F.clone=function(){return D.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},R})(),E=T.prototype;return A.prototype=E,[["$ms",s],["$s",a],["$m",o],["$H",l],["$W",c],["$M",h],["$y",p],["$D",y]].forEach((function(R){E[R[1]]=function(F){return this.$g(F,R[0],R[1])}})),A.extend=function(R,F){return R.$i||(R(F,T,A),R.$i=!0),A},A.locale=x,A.isDayjs=w,A.unix=function(R){return A(1e3*R)},A.en=S[C],A.Ls=S,A.p={},A}))})(Dc)),Dc.exports}var JI=QI();const eF=Nw(JI);var Lf={},g_;function tF(){return g_||(g_=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.sanitizeUrl=e.BLANK_URL=void 0;var t=/^([^\w]*)(javascript|data|vbscript)/im,r=/&#(\w+)(^\w|;)?/g,i=/&(newline|tab);/gi,n=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,s=/^.+(:|&colon;)/gim,a=[".","/"];e.BLANK_URL="about:blank";function o(u){return a.indexOf(u[0])>-1}function l(u){var h=u.replace(n,"");return h.replace(r,function(d,p){return String.fromCharCode(p)})}function c(u){if(!u)return e.BLANK_URL;var h=l(u).replace(i,"").replace(n,"").trim();if(!h)return e.BLANK_URL;if(o(h))return h;var d=h.match(s);if(!d)return h;var p=d[0];return t.test(p)?e.BLANK_URL:h}e.sanitizeUrl=c})(Lf)),Lf}var rF=tF(),iF={value:()=>{}};function eS(){for(var e=0,t=arguments.length,r={},i;e<t;++e){if(!(i=arguments[e]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Lc(r)}function Lc(e){this._=e}function nF(e,t){return e.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Lc.prototype=eS.prototype={constructor:Lc,on:function(e,t){var r=this._,i=nF(e+"",r),n,s=-1,a=i.length;if(arguments.length<2){for(;++s<a;)if((n=(e=i[s]).type)&&(n=sF(r[n],e.name)))return n;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<a;)if(n=(e=i[s]).type)r[n]=m_(r[n],e.name,t);else if(t==null)for(n in r)r[n]=m_(r[n],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new Lc(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,s;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],i=0,n=s.length;i<n;++i)s[i].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],n=0,s=i.length;n<s;++n)i[n].value.apply(t,r)}};function sF(e,t){for(var r=0,i=e.length,n;r<i;++r)if((n=e[r]).name===t)return n.value}function m_(e,t,r){for(var i=0,n=e.length;i<n;++i)if(e[i].name===t){e[i]=iF,e=e.slice(0,i).concat(e.slice(i+1));break}return r!=null&&e.push({name:t,value:r}),e}var Rp="http://www.w3.org/1999/xhtml";const y_={svg:"http://www.w3.org/2000/svg",xhtml:Rp,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wh(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),y_.hasOwnProperty(t)?{space:y_[t],local:e}:e}function aF(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Rp&&t.documentElement.namespaceURI===Rp?t.createElement(e):t.createElementNS(r,e)}}function oF(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function tS(e){var t=wh(e);return(t.local?oF:aF)(t)}function lF(){}function tg(e){return e==null?lF:function(){return this.querySelector(e)}}function cF(e){typeof e!="function"&&(e=tg(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var s=t[n],a=s.length,o=i[n]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=e.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new Kr(i,this._parents)}function uF(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function hF(){return[]}function rS(e){return e==null?hF:function(){return this.querySelectorAll(e)}}function dF(e){return function(){return uF(e.apply(this,arguments))}}function fF(e){typeof e=="function"?e=dF(e):e=rS(e);for(var t=this._groups,r=t.length,i=[],n=[],s=0;s<r;++s)for(var a=t[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(i.push(e.call(l,l.__data__,c,a)),n.push(l));return new Kr(i,n)}function iS(e){return function(){return this.matches(e)}}function nS(e){return function(t){return t.matches(e)}}var pF=Array.prototype.find;function vF(e){return function(){return pF.call(this.children,e)}}function gF(){return this.firstElementChild}function mF(e){return this.select(e==null?gF:vF(typeof e=="function"?e:nS(e)))}var yF=Array.prototype.filter;function _F(){return Array.from(this.children)}function bF(e){return function(){return yF.call(this.children,e)}}function CF(e){return this.selectAll(e==null?_F:bF(typeof e=="function"?e:nS(e)))}function wF(e){typeof e!="function"&&(e=iS(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var s=t[n],a=s.length,o=i[n]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new Kr(i,this._parents)}function sS(e){return new Array(e.length)}function SF(){return new Kr(this._enter||this._groups.map(sS),this._parents)}function mu(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}mu.prototype={constructor:mu,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function kF(e){return function(){return e}}function xF(e,t,r,i,n,s){for(var a=0,o,l=t.length,c=s.length;a<c;++a)(o=t[a])?(o.__data__=s[a],i[a]=o):r[a]=new mu(e,s[a]);for(;a<l;++a)(o=t[a])&&(n[a]=o)}function TF(e,t,r,i,n,s,a){var o,l,c=new Map,u=t.length,h=s.length,d=new Array(u),p;for(o=0;o<u;++o)(l=t[o])&&(d[o]=p=a.call(l,l.__data__,o,t)+"",c.has(p)?n[o]=l:c.set(p,l));for(o=0;o<h;++o)p=a.call(e,s[o],o,s)+"",(l=c.get(p))?(i[o]=l,l.__data__=s[o],c.delete(p)):r[o]=new mu(e,s[o]);for(o=0;o<u;++o)(l=t[o])&&c.get(d[o])===l&&(n[o]=l)}function EF(e){return e.__data__}function AF(e,t){if(!arguments.length)return Array.from(this,EF);var r=t?TF:xF,i=this._parents,n=this._groups;typeof e!="function"&&(e=kF(e));for(var s=n.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=i[c],h=n[c],d=h.length,p=BF(e.call(u,u&&u.__data__,c,i)),y=p.length,_=o[c]=new Array(y),v=a[c]=new Array(y),g=l[c]=new Array(d);r(u,h,_,v,g,p,t);for(var f=0,m=0,b,C;f<y;++f)if(b=_[f]){for(f>=m&&(m=f+1);!(C=v[m])&&++m<y;);b._next=C||null}}return a=new Kr(a,i),a._enter=o,a._exit=l,a}function BF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function DF(){return new Kr(this._exit||this._groups.map(sS),this._parents)}function LF(e,t,r){var i=this.enter(),n=this,s=this.exit();return typeof e=="function"?(i=e(i),i&&(i=i.selection())):i=i.append(e+""),t!=null&&(n=t(n),n&&(n=n.selection())),r==null?s.remove():r(s),i&&n?i.merge(n).order():n}function RF(e){for(var t=e.selection?e.selection():e,r=this._groups,i=t._groups,n=r.length,s=i.length,a=Math.min(n,s),o=new Array(n),l=0;l<a;++l)for(var c=r[l],u=i[l],h=c.length,d=o[l]=new Array(h),p,y=0;y<h;++y)(p=c[y]||u[y])&&(d[y]=p);for(;l<n;++l)o[l]=r[l];return new Kr(o,this._parents)}function MF(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var i=e[t],n=i.length-1,s=i[n],a;--n>=0;)(a=i[n])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function PF(e){e||(e=IF);function t(h,d){return h&&d?e(h.__data__,d.__data__):!h-!d}for(var r=this._groups,i=r.length,n=new Array(i),s=0;s<i;++s){for(var a=r[s],o=a.length,l=n[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(t)}return new Kr(n,this._parents).order()}function IF(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function FF(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function OF(){return Array.from(this)}function NF(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],n=0,s=i.length;n<s;++n){var a=i[n];if(a)return a}return null}function $F(){let e=0;for(const t of this)++e;return e}function zF(){return!this.node()}function HF(e){for(var t=this._groups,r=0,i=t.length;r<i;++r)for(var n=t[r],s=0,a=n.length,o;s<a;++s)(o=n[s])&&e.call(o,o.__data__,s,n);return this}function qF(e){return function(){this.removeAttribute(e)}}function WF(e){return function(){this.removeAttributeNS(e.space,e.local)}}function UF(e,t){return function(){this.setAttribute(e,t)}}function VF(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function jF(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function GF(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function KF(e,t){var r=wh(e);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((t==null?r.local?WF:qF:typeof t=="function"?r.local?GF:jF:r.local?VF:UF)(r,t))}function aS(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function YF(e){return function(){this.style.removeProperty(e)}}function XF(e,t,r){return function(){this.style.setProperty(e,t,r)}}function ZF(e,t,r){return function(){var i=t.apply(this,arguments);i==null?this.style.removeProperty(e):this.style.setProperty(e,i,r)}}function QF(e,t,r){return arguments.length>1?this.each((t==null?YF:typeof t=="function"?ZF:XF)(e,t,r??"")):Ea(this.node(),e)}function Ea(e,t){return e.style.getPropertyValue(t)||aS(e).getComputedStyle(e,null).getPropertyValue(t)}function JF(e){return function(){delete this[e]}}function eO(e,t){return function(){this[e]=t}}function tO(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function rO(e,t){return arguments.length>1?this.each((t==null?JF:typeof t=="function"?tO:eO)(e,t)):this.node()[e]}function oS(e){return e.trim().split(/^|\s+/)}function rg(e){return e.classList||new lS(e)}function lS(e){this._node=e,this._names=oS(e.getAttribute("class")||"")}lS.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cS(e,t){for(var r=rg(e),i=-1,n=t.length;++i<n;)r.add(t[i])}function uS(e,t){for(var r=rg(e),i=-1,n=t.length;++i<n;)r.remove(t[i])}function iO(e){return function(){cS(this,e)}}function nO(e){return function(){uS(this,e)}}function sO(e,t){return function(){(t.apply(this,arguments)?cS:uS)(this,e)}}function aO(e,t){var r=oS(e+"");if(arguments.length<2){for(var i=rg(this.node()),n=-1,s=r.length;++n<s;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof t=="function"?sO:t?iO:nO)(r,t))}function oO(){this.textContent=""}function lO(e){return function(){this.textContent=e}}function cO(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function uO(e){return arguments.length?this.each(e==null?oO:(typeof e=="function"?cO:lO)(e)):this.node().textContent}function hO(){this.innerHTML=""}function dO(e){return function(){this.innerHTML=e}}function fO(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function pO(e){return arguments.length?this.each(e==null?hO:(typeof e=="function"?fO:dO)(e)):this.node().innerHTML}function vO(){this.nextSibling&&this.parentNode.appendChild(this)}function gO(){return this.each(vO)}function mO(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function yO(){return this.each(mO)}function _O(e){var t=typeof e=="function"?e:tS(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function bO(){return null}function CO(e,t){var r=typeof e=="function"?e:tS(e),i=t==null?bO:typeof t=="function"?t:tg(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function wO(){var e=this.parentNode;e&&e.removeChild(this)}function SO(){return this.each(wO)}function kO(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function xO(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function TO(e){return this.select(e?xO:kO)}function EO(e){return arguments.length?this.property("__data__",e):this.node().__data__}function AO(e){return function(t){e.call(this,t,this.__data__)}}function BO(e){return e.trim().split(/^|\s+/).map(function(t){var r="",i=t.indexOf(".");return i>=0&&(r=t.slice(i+1),t=t.slice(0,i)),{type:t,name:r}})}function DO(e){return function(){var t=this.__on;if(t){for(var r=0,i=-1,n=t.length,s;r<n;++r)s=t[r],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++i]=s;++i?t.length=i:delete this.__on}}}function LO(e,t,r){return function(){var i=this.__on,n,s=AO(t);if(i){for(var a=0,o=i.length;a<o;++a)if((n=i[a]).type===e.type&&n.name===e.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=s,n.options=r),n.value=t;return}}this.addEventListener(e.type,s,r),n={type:e.type,name:e.name,value:t,listener:s,options:r},i?i.push(n):this.__on=[n]}}function RO(e,t,r){var i=BO(e+""),n,s=i.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(n=0,u=o[l];n<s;++n)if((a=i[n]).type===u.type&&a.name===u.name)return u.value}return}for(o=t?LO:DO,n=0;n<s;++n)this.each(o(i[n],t,r));return this}function hS(e,t,r){var i=aS(e),n=i.CustomEvent;typeof n=="function"?n=new n(t,r):(n=i.document.createEvent("Event"),r?(n.initEvent(t,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(t,!1,!1)),e.dispatchEvent(n)}function MO(e,t){return function(){return hS(this,e,t)}}function PO(e,t){return function(){return hS(this,e,t.apply(this,arguments))}}function IO(e,t){return this.each((typeof t=="function"?PO:MO)(e,t))}function*FO(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var i=e[t],n=0,s=i.length,a;n<s;++n)(a=i[n])&&(yield a)}var dS=[null];function Kr(e,t){this._groups=e,this._parents=t}function Dl(){return new Kr([[document.documentElement]],dS)}function OO(){return this}Kr.prototype=Dl.prototype={constructor:Kr,select:cF,selectAll:fF,selectChild:mF,selectChildren:CF,filter:wF,data:AF,enter:SF,exit:DF,join:LF,merge:RF,selection:OO,order:MF,sort:PF,call:FF,nodes:OF,node:NF,size:$F,empty:zF,each:HF,attr:KF,style:QF,property:rO,classed:aO,text:uO,html:pO,raise:gO,lower:yO,append:_O,insert:CO,remove:SO,clone:TO,datum:EO,on:RO,dispatch:IO,[Symbol.iterator]:FO};function ri(e){return typeof e=="string"?new Kr([[document.querySelector(e)]],[document.documentElement]):new Kr([[e]],dS)}function ig(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function fS(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function Ll(){}var nl=.7,yu=1/nl,Ca="\\s*([+-]?\\d+)\\s*",sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ii="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",NO=/^#([0-9a-f]{3,8})$/,$O=new RegExp(`^rgb\\(${Ca},${Ca},${Ca}\\)$`),zO=new RegExp(`^rgb\\(${Ii},${Ii},${Ii}\\)$`),HO=new RegExp(`^rgba\\(${Ca},${Ca},${Ca},${sl}\\)$`),qO=new RegExp(`^rgba\\(${Ii},${Ii},${Ii},${sl}\\)$`),WO=new RegExp(`^hsl\\(${sl},${Ii},${Ii}\\)$`),UO=new RegExp(`^hsla\\(${sl},${Ii},${Ii},${sl}\\)$`),__={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ig(Ll,al,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:b_,formatHex:b_,formatHex8:VO,formatHsl:jO,formatRgb:C_,toString:C_});function b_(){return this.rgb().formatHex()}function VO(){return this.rgb().formatHex8()}function jO(){return pS(this).formatHsl()}function C_(){return this.rgb().formatRgb()}function al(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=NO.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?w_(t):r===3?new Hr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?nc(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?nc(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$O.exec(e))?new Hr(t[1],t[2],t[3],1):(t=zO.exec(e))?new Hr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=HO.exec(e))?nc(t[1],t[2],t[3],t[4]):(t=qO.exec(e))?nc(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=WO.exec(e))?x_(t[1],t[2]/100,t[3]/100,1):(t=UO.exec(e))?x_(t[1],t[2]/100,t[3]/100,t[4]):__.hasOwnProperty(e)?w_(__[e]):e==="transparent"?new Hr(NaN,NaN,NaN,0):null}function w_(e){return new Hr(e>>16&255,e>>8&255,e&255,1)}function nc(e,t,r,i){return i<=0&&(e=t=r=NaN),new Hr(e,t,r,i)}function GO(e){return e instanceof Ll||(e=al(e)),e?(e=e.rgb(),new Hr(e.r,e.g,e.b,e.opacity)):new Hr}function Mp(e,t,r,i){return arguments.length===1?GO(e):new Hr(e,t,r,i??1)}function Hr(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}ig(Hr,Mp,fS(Ll,{brighter(e){return e=e==null?yu:Math.pow(yu,e),new Hr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?nl:Math.pow(nl,e),new Hr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hr(ks(this.r),ks(this.g),ks(this.b),_u(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S_,formatHex:S_,formatHex8:KO,formatRgb:k_,toString:k_}));function S_(){return`#${Cs(this.r)}${Cs(this.g)}${Cs(this.b)}`}function KO(){return`#${Cs(this.r)}${Cs(this.g)}${Cs(this.b)}${Cs((isNaN(this.opacity)?1:this.opacity)*255)}`}function k_(){const e=_u(this.opacity);return`${e===1?"rgb(":"rgba("}${ks(this.r)}, ${ks(this.g)}, ${ks(this.b)}${e===1?")":`, ${e})`}`}function _u(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ks(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Cs(e){return e=ks(e),(e<16?"0":"")+e.toString(16)}function x_(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new vi(e,t,r,i)}function pS(e){if(e instanceof vi)return new vi(e.h,e.s,e.l,e.opacity);if(e instanceof Ll||(e=al(e)),!e)return new vi;if(e instanceof vi)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),s=Math.max(t,r,i),a=NaN,o=s-n,l=(s+n)/2;return o?(t===s?a=(r-i)/o+(r<i)*6:r===s?a=(i-t)/o+2:a=(t-r)/o+4,o/=l<.5?s+n:2-s-n,a*=60):o=l>0&&l<1?0:a,new vi(a,o,l,e.opacity)}function YO(e,t,r,i){return arguments.length===1?pS(e):new vi(e,t,r,i??1)}function vi(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}ig(vi,YO,fS(Ll,{brighter(e){return e=e==null?yu:Math.pow(yu,e),new vi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?nl:Math.pow(nl,e),new vi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new Hr(Rf(e>=240?e-240:e+120,n,i),Rf(e,n,i),Rf(e<120?e+240:e-120,n,i),this.opacity)},clamp(){return new vi(T_(this.h),sc(this.s),sc(this.l),_u(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_u(this.opacity);return`${e===1?"hsl(":"hsla("}${T_(this.h)}, ${sc(this.s)*100}%, ${sc(this.l)*100}%${e===1?")":`, ${e})`}`}}));function T_(e){return e=(e||0)%360,e<0?e+360:e}function sc(e){return Math.max(0,Math.min(1,e||0))}function Rf(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const ng=e=>()=>e;function vS(e,t){return function(r){return e+r*t}}function XO(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function ete(e,t){var r=t-e;return r?vS(e,r>180||r<-180?r-360*Math.round(r/360):r):ng(isNaN(e)?t:e)}function ZO(e){return(e=+e)==1?gS:function(t,r){return r-t?XO(t,r,e):ng(isNaN(t)?r:t)}}function gS(e,t){var r=t-e;return r?vS(e,r):ng(isNaN(e)?t:e)}const E_=(function e(t){var r=ZO(t);function i(n,s){var a=r((n=Mp(n)).r,(s=Mp(s)).r),o=r(n.g,s.g),l=r(n.b,s.b),c=gS(n.opacity,s.opacity);return function(u){return n.r=a(u),n.g=o(u),n.b=l(u),n.opacity=c(u),n+""}}return i.gamma=e,i})(1);function Tn(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}var Pp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Mf=new RegExp(Pp.source,"g");function QO(e){return function(){return e}}function JO(e){return function(t){return e(t)+""}}function e3(e,t){var r=Pp.lastIndex=Mf.lastIndex=0,i,n,s,a=-1,o=[],l=[];for(e=e+"",t=t+"";(i=Pp.exec(e))&&(n=Mf.exec(t));)(s=n.index)>r&&(s=t.slice(r,s),o[a]?o[a]+=s:o[++a]=s),(i=i[0])===(n=n[0])?o[a]?o[a]+=n:o[++a]=n:(o[++a]=null,l.push({i:a,x:Tn(i,n)})),r=Mf.lastIndex;return r<t.length&&(s=t.slice(r),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?JO(l[0].x):QO(t):(t=l.length,function(c){for(var u=0,h;u<t;++u)o[(h=l[u]).i]=h.x(c);return o.join("")})}var A_=180/Math.PI,Ip={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mS(e,t,r,i,n,s){var a,o,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*r+t*i)&&(r-=e*l,i-=t*l),(o=Math.sqrt(r*r+i*i))&&(r/=o,i/=o,l/=o),e*i<t*r&&(e=-e,t=-t,l=-l,a=-a),{translateX:n,translateY:s,rotate:Math.atan2(t,e)*A_,skewX:Math.atan(l)*A_,scaleX:a,scaleY:o}}var ac;function t3(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ip:mS(t.a,t.b,t.c,t.d,t.e,t.f)}function r3(e){return e==null||(ac||(ac=document.createElementNS("http://www.w3.org/2000/svg","g")),ac.setAttribute("transform",e),!(e=ac.transform.baseVal.consolidate()))?Ip:(e=e.matrix,mS(e.a,e.b,e.c,e.d,e.e,e.f))}function yS(e,t,r,i){function n(c){return c.length?c.pop()+" ":""}function s(c,u,h,d,p,y){if(c!==h||u!==d){var _=p.push("translate(",null,t,null,r);y.push({i:_-4,x:Tn(c,h)},{i:_-2,x:Tn(u,d)})}else(h||d)&&p.push("translate("+h+t+d+r)}function a(c,u,h,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:h.push(n(h)+"rotate(",null,i)-2,x:Tn(c,u)})):u&&h.push(n(h)+"rotate("+u+i)}function o(c,u,h,d){c!==u?d.push({i:h.push(n(h)+"skewX(",null,i)-2,x:Tn(c,u)}):u&&h.push(n(h)+"skewX("+u+i)}function l(c,u,h,d,p,y){if(c!==h||u!==d){var _=p.push(n(p)+"scale(",null,",",null,")");y.push({i:_-4,x:Tn(c,h)},{i:_-2,x:Tn(u,d)})}else(h!==1||d!==1)&&p.push(n(p)+"scale("+h+","+d+")")}return function(c,u){var h=[],d=[];return c=e(c),u=e(u),s(c.translateX,c.translateY,u.translateX,u.translateY,h,d),a(c.rotate,u.rotate,h,d),o(c.skewX,u.skewX,h,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,h,d),c=u=null,function(p){for(var y=-1,_=d.length,v;++y<_;)h[(v=d[y]).i]=v.x(p);return h.join("")}}}var i3=yS(t3,"px, ","px)","deg)"),n3=yS(r3,", ",")",")"),Aa=0,go=0,no=0,_S=1e3,bu,mo,Cu=0,Rs=0,Sh=0,ol=typeof performance=="object"&&performance.now?performance:Date,bS=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function sg(){return Rs||(bS(s3),Rs=ol.now()+Sh)}function s3(){Rs=0}function wu(){this._call=this._time=this._next=null}wu.prototype=CS.prototype={constructor:wu,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?sg():+r)+(t==null?0:+t),!this._next&&mo!==this&&(mo?mo._next=this:bu=this,mo=this),this._call=e,this._time=r,Fp()},stop:function(){this._call&&(this._call=null,this._time=1/0,Fp())}};function CS(e,t,r){var i=new wu;return i.restart(e,t,r),i}function a3(){sg(),++Aa;for(var e=bu,t;e;)(t=Rs-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Aa}function B_(){Rs=(Cu=ol.now())+Sh,Aa=go=0;try{a3()}finally{Aa=0,l3(),Rs=0}}function o3(){var e=ol.now(),t=e-Cu;t>_S&&(Sh-=t,Cu=e)}function l3(){for(var e,t=bu,r,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:bu=r);mo=e,Fp(i)}function Fp(e){if(!Aa){go&&(go=clearTimeout(go));var t=e-Rs;t>24?(e<1/0&&(go=setTimeout(B_,e-ol.now()-Sh)),no&&(no=clearInterval(no))):(no||(Cu=ol.now(),no=setInterval(o3,_S)),Aa=1,bS(B_))}}function D_(e,t,r){var i=new wu;return t=t==null?0:+t,i.restart(n=>{i.stop(),e(n+t)},t,r),i}var c3=eS("start","end","cancel","interrupt"),u3=[],wS=0,L_=1,Op=2,Rc=3,R_=4,Np=5,Mc=6;function kh(e,t,r,i,n,s){var a=e.__transition;if(!a)e.__transition={};else if(r in a)return;h3(e,r,{name:t,index:i,group:n,on:c3,tween:u3,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:wS})}function ag(e,t){var r=wi(e,t);if(r.state>wS)throw new Error("too late; already scheduled");return r}function Wi(e,t){var r=wi(e,t);if(r.state>Rc)throw new Error("too late; already running");return r}function wi(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function h3(e,t,r){var i=e.__transition,n;i[t]=r,r.timer=CS(s,0,r.time);function s(c){r.state=L_,r.timer.restart(a,r.delay,r.time),r.delay<=c&&a(c-r.delay)}function a(c){var u,h,d,p;if(r.state!==L_)return l();for(u in i)if(p=i[u],p.name===r.name){if(p.state===Rc)return D_(a);p.state===R_?(p.state=Mc,p.timer.stop(),p.on.call("interrupt",e,e.__data__,p.index,p.group),delete i[u]):+u<t&&(p.state=Mc,p.timer.stop(),p.on.call("cancel",e,e.__data__,p.index,p.group),delete i[u])}if(D_(function(){r.state===Rc&&(r.state=R_,r.timer.restart(o,r.delay,r.time),o(c))}),r.state=Op,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Op){for(r.state=Rc,n=new Array(d=r.tween.length),u=0,h=-1;u<d;++u)(p=r.tween[u].value.call(e,e.__data__,r.index,r.group))&&(n[++h]=p);n.length=h+1}}function o(c){for(var u=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=Np,1),h=-1,d=n.length;++h<d;)n[h].call(e,u);r.state===Np&&(r.on.call("end",e,e.__data__,r.index,r.group),l())}function l(){r.state=Mc,r.timer.stop(),delete i[t];for(var c in i)return;delete e.__transition}}function d3(e,t){var r=e.__transition,i,n,s=!0,a;if(r){t=t==null?null:t+"";for(a in r){if((i=r[a]).name!==t){s=!1;continue}n=i.state>Op&&i.state<Np,i.state=Mc,i.timer.stop(),i.on.call(n?"interrupt":"cancel",e,e.__data__,i.index,i.group),delete r[a]}s&&delete e.__transition}}function f3(e){return this.each(function(){d3(this,e)})}function p3(e,t){var r,i;return function(){var n=Wi(this,e),s=n.tween;if(s!==r){i=r=s;for(var a=0,o=i.length;a<o;++a)if(i[a].name===t){i=i.slice(),i.splice(a,1);break}}n.tween=i}}function v3(e,t,r){var i,n;if(typeof r!="function")throw new Error;return function(){var s=Wi(this,e),a=s.tween;if(a!==i){n=(i=a).slice();for(var o={name:t,value:r},l=0,c=n.length;l<c;++l)if(n[l].name===t){n[l]=o;break}l===c&&n.push(o)}s.tween=n}}function g3(e,t){var r=this._id;if(e+="",arguments.length<2){for(var i=wi(this.node(),r).tween,n=0,s=i.length,a;n<s;++n)if((a=i[n]).name===e)return a.value;return null}return this.each((t==null?p3:v3)(r,e,t))}function og(e,t,r){var i=e._id;return e.each(function(){var n=Wi(this,i);(n.value||(n.value={}))[t]=r.apply(this,arguments)}),function(n){return wi(n,i).value[t]}}function SS(e,t){var r;return(typeof t=="number"?Tn:t instanceof al?E_:(r=al(t))?(t=r,E_):e3)(e,t)}function m3(e){return function(){this.removeAttribute(e)}}function y3(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _3(e,t,r){var i,n=r+"",s;return function(){var a=this.getAttribute(e);return a===n?null:a===i?s:s=t(i=a,r)}}function b3(e,t,r){var i,n=r+"",s;return function(){var a=this.getAttributeNS(e.space,e.local);return a===n?null:a===i?s:s=t(i=a,r)}}function C3(e,t,r){var i,n,s;return function(){var a,o=r(this),l;return o==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=o+"",a===l?null:a===i&&l===n?s:(n=l,s=t(i=a,o)))}}function w3(e,t,r){var i,n,s;return function(){var a,o=r(this),l;return o==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=o+"",a===l?null:a===i&&l===n?s:(n=l,s=t(i=a,o)))}}function S3(e,t){var r=wh(e),i=r==="transform"?n3:SS;return this.attrTween(e,typeof t=="function"?(r.local?w3:C3)(r,i,og(this,"attr."+e,t)):t==null?(r.local?y3:m3)(r):(r.local?b3:_3)(r,i,t))}function k3(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function x3(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function T3(e,t){var r,i;function n(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&x3(e,s)),r}return n._value=t,n}function E3(e,t){var r,i;function n(){var s=t.apply(this,arguments);return s!==i&&(r=(i=s)&&k3(e,s)),r}return n._value=t,n}function A3(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var i=wh(e);return this.tween(r,(i.local?T3:E3)(i,t))}function B3(e,t){return function(){ag(this,e).delay=+t.apply(this,arguments)}}function D3(e,t){return t=+t,function(){ag(this,e).delay=t}}function L3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?B3:D3)(t,e)):wi(this.node(),t).delay}function R3(e,t){return function(){Wi(this,e).duration=+t.apply(this,arguments)}}function M3(e,t){return t=+t,function(){Wi(this,e).duration=t}}function P3(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?R3:M3)(t,e)):wi(this.node(),t).duration}function I3(e,t){if(typeof t!="function")throw new Error;return function(){Wi(this,e).ease=t}}function F3(e){var t=this._id;return arguments.length?this.each(I3(t,e)):wi(this.node(),t).ease}function O3(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Wi(this,e).ease=r}}function N3(e){if(typeof e!="function")throw new Error;return this.each(O3(this._id,e))}function $3(e){typeof e!="function"&&(e=iS(e));for(var t=this._groups,r=t.length,i=new Array(r),n=0;n<r;++n)for(var s=t[n],a=s.length,o=i[n]=[],l,c=0;c<a;++c)(l=s[c])&&e.call(l,l.__data__,c,s)&&o.push(l);return new dn(i,this._parents,this._name,this._id)}function z3(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,i=t.length,n=r.length,s=Math.min(i,n),a=new Array(i),o=0;o<s;++o)for(var l=t[o],c=r[o],u=l.length,h=a[o]=new Array(u),d,p=0;p<u;++p)(d=l[p]||c[p])&&(h[p]=d);for(;o<i;++o)a[o]=t[o];return new dn(a,this._parents,this._name,this._id)}function H3(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function q3(e,t,r){var i,n,s=H3(t)?ag:Wi;return function(){var a=s(this,e),o=a.on;o!==i&&(n=(i=o).copy()).on(t,r),a.on=n}}function W3(e,t){var r=this._id;return arguments.length<2?wi(this.node(),r).on.on(e):this.each(q3(r,e,t))}function U3(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function V3(){return this.on("end.remove",U3(this._id))}function j3(e){var t=this._name,r=this._id;typeof e!="function"&&(e=tg(e));for(var i=this._groups,n=i.length,s=new Array(n),a=0;a<n;++a)for(var o=i[a],l=o.length,c=s[a]=new Array(l),u,h,d=0;d<l;++d)(u=o[d])&&(h=e.call(u,u.__data__,d,o))&&("__data__"in u&&(h.__data__=u.__data__),c[d]=h,kh(c[d],t,r,d,c,wi(u,r)));return new dn(s,this._parents,t,r)}function G3(e){var t=this._name,r=this._id;typeof e!="function"&&(e=rS(e));for(var i=this._groups,n=i.length,s=[],a=[],o=0;o<n;++o)for(var l=i[o],c=l.length,u,h=0;h<c;++h)if(u=l[h]){for(var d=e.call(u,u.__data__,h,l),p,y=wi(u,r),_=0,v=d.length;_<v;++_)(p=d[_])&&kh(p,t,r,_,d,y);s.push(d),a.push(u)}return new dn(s,a,t,r)}var K3=Dl.prototype.constructor;function Y3(){return new K3(this._groups,this._parents)}function X3(e,t){var r,i,n;return function(){var s=Ea(this,e),a=(this.style.removeProperty(e),Ea(this,e));return s===a?null:s===r&&a===i?n:n=t(r=s,i=a)}}function kS(e){return function(){this.style.removeProperty(e)}}function Z3(e,t,r){var i,n=r+"",s;return function(){var a=Ea(this,e);return a===n?null:a===i?s:s=t(i=a,r)}}function Q3(e,t,r){var i,n,s;return function(){var a=Ea(this,e),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(e),Ea(this,e))),a===l?null:a===i&&l===n?s:(n=l,s=t(i=a,o))}}function J3(e,t){var r,i,n,s="style."+t,a="end."+s,o;return function(){var l=Wi(this,e),c=l.on,u=l.value[s]==null?o||(o=kS(t)):void 0;(c!==r||n!==u)&&(i=(r=c).copy()).on(a,n=u),l.on=i}}function e4(e,t,r){var i=(e+="")=="transform"?i3:SS;return t==null?this.styleTween(e,X3(e,i)).on("end.style."+e,kS(e)):typeof t=="function"?this.styleTween(e,Q3(e,i,og(this,"style."+e,t))).each(J3(this._id,e)):this.styleTween(e,Z3(e,i,t),r).on("end.style."+e,null)}function t4(e,t,r){return function(i){this.style.setProperty(e,t.call(this,i),r)}}function r4(e,t,r){var i,n;function s(){var a=t.apply(this,arguments);return a!==n&&(i=(n=a)&&t4(e,a,r)),i}return s._value=t,s}function i4(e,t,r){var i="style."+(e+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;return this.tween(i,r4(e,t,r??""))}function n4(e){return function(){this.textContent=e}}function s4(e){return function(){var t=e(this);this.textContent=t??""}}function a4(e){return this.tween("text",typeof e=="function"?s4(og(this,"text",e)):n4(e==null?"":e+""))}function o4(e){return function(t){this.textContent=e.call(this,t)}}function l4(e){var t,r;function i(){var n=e.apply(this,arguments);return n!==r&&(t=(r=n)&&o4(n)),t}return i._value=e,i}function c4(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,l4(e))}function u4(){for(var e=this._name,t=this._id,r=xS(),i=this._groups,n=i.length,s=0;s<n;++s)for(var a=i[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=wi(l,t);kh(l,e,r,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new dn(i,this._parents,e,r)}function h4(){var e,t,r=this,i=r._id,n=r.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--n===0&&s()}};r.each(function(){var c=Wi(this,i),u=c.on;u!==e&&(t=(e=u).copy(),t._.cancel.push(o),t._.interrupt.push(o),t._.end.push(l)),c.on=t}),n===0&&s()})}var d4=0;function dn(e,t,r,i){this._groups=e,this._parents=t,this._name=r,this._id=i}function xS(){return++d4}var Ki=Dl.prototype;dn.prototype={constructor:dn,select:j3,selectAll:G3,selectChild:Ki.selectChild,selectChildren:Ki.selectChildren,filter:$3,merge:z3,selection:Y3,transition:u4,call:Ki.call,nodes:Ki.nodes,node:Ki.node,size:Ki.size,empty:Ki.empty,each:Ki.each,on:W3,attr:S3,attrTween:A3,style:e4,styleTween:i4,text:a4,textTween:c4,remove:V3,tween:g3,delay:L3,duration:P3,ease:F3,easeVarying:N3,end:h4,[Symbol.iterator]:Ki[Symbol.iterator]};function f4(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var p4={time:null,delay:0,duration:250,ease:f4};function v4(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function g4(e){var t,r;e instanceof dn?(t=e._id,e=e._name):(t=xS(),(r=p4).time=sg(),e=e==null?null:e+"");for(var i=this._groups,n=i.length,s=0;s<n;++s)for(var a=i[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&kh(l,e,t,c,a,r||v4(l,t));return new dn(i,this._parents,e,t)}Dl.prototype.interrupt=f3;Dl.prototype.transition=g4;const tte=Math.abs,rte=Math.atan2,ite=Math.cos,nte=Math.max,ste=Math.min,ate=Math.sin,ote=Math.sqrt,M_=1e-12,lg=Math.PI,P_=lg/2,lte=2*lg;function cte(e){return e>1?0:e<-1?lg:Math.acos(e)}function ute(e){return e>=1?P_:e<=-1?-P_:Math.asin(e)}function TS(e){this._context=e}TS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function m4(e){return new TS(e)}class ES{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function y4(e){return new ES(e,!0)}function _4(e){return new ES(e,!1)}function jn(){}function Su(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function xh(e){this._context=e}xh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Su(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Su(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function b4(e){return new xh(e)}function AS(e){this._context=e}AS.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Su(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C4(e){return new AS(e)}function BS(e){this._context=e}BS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:Su(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function w4(e){return new BS(e)}function DS(e,t){this._basis=new xh(e),this._beta=t}DS.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i=e[0],n=t[0],s=e[r]-i,a=t[r]-n,o=-1,l;++o<=r;)l=o/r,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*s),this._beta*t[o]+(1-this._beta)*(n+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const S4=(function e(t){function r(i){return t===1?new xh(i):new DS(i,t)}return r.beta=function(i){return e(+i)},r})(.85);function ku(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function cg(e,t){this._context=e,this._k=(1-t)/6}cg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ku(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ku(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const k4=(function e(t){function r(i){return new cg(i,t)}return r.tension=function(i){return e(+i)},r})(0);function ug(e,t){this._context=e,this._k=(1-t)/6}ug.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ku(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x4=(function e(t){function r(i){return new ug(i,t)}return r.tension=function(i){return e(+i)},r})(0);function hg(e,t){this._context=e,this._k=(1-t)/6}hg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ku(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const T4=(function e(t){function r(i){return new hg(i,t)}return r.tension=function(i){return e(+i)},r})(0);function dg(e,t,r){var i=e._x1,n=e._y1,s=e._x2,a=e._y2;if(e._l01_a>M_){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,n=(n*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>M_){var c=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,u=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*c+e._x1*e._l23_2a-t*e._l12_2a)/u,a=(a*c+e._y1*e._l23_2a-r*e._l12_2a)/u}e._context.bezierCurveTo(i,n,s,a,e._x2,e._y2)}function LS(e,t){this._context=e,this._alpha=t}LS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:dg(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E4=(function e(t){function r(i){return t?new LS(i,t):new cg(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function RS(e,t){this._context=e,this._alpha=t}RS.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:dg(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const A4=(function e(t){function r(i){return t?new RS(i,t):new ug(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function MS(e,t){this._context=e,this._alpha=t}MS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dg(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const B4=(function e(t){function r(i){return t?new MS(i,t):new hg(i,0)}return r.alpha=function(i){return e(+i)},r})(.5);function PS(e){this._context=e}PS.prototype={areaStart:jn,areaEnd:jn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function D4(e){return new PS(e)}function I_(e){return e<0?-1:1}function F_(e,t,r){var i=e._x1-e._x0,n=t-e._x1,s=(e._y1-e._y0)/(i||n<0&&-0),a=(r-e._y1)/(n||i<0&&-0),o=(s*n+a*i)/(i+n);return(I_(s)+I_(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function O_(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Pf(e,t,r){var i=e._x0,n=e._y0,s=e._x1,a=e._y1,o=(s-i)/3;e._context.bezierCurveTo(i+o,n+o*t,s-o,a-o*r,s,a)}function xu(e){this._context=e}xu.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Pf(this,this._t0,O_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Pf(this,O_(this,r=F_(this,e,t)),r);break;default:Pf(this,this._t0,r=F_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function IS(e){this._context=new FS(e)}(IS.prototype=Object.create(xu.prototype)).point=function(e,t){xu.prototype.point.call(this,t,e)};function FS(e){this._context=e}FS.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,n,s){this._context.bezierCurveTo(t,e,i,r,s,n)}};function L4(e){return new xu(e)}function R4(e){return new IS(e)}function OS(e){this._context=e}OS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=N_(e),n=N_(t),s=0,a=1;a<r;++s,++a)this._context.bezierCurveTo(i[0][s],n[0][s],i[1][s],n[1][s],e[a],t[a]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function N_(e){var t,r=e.length-1,i,n=new Array(r),s=new Array(r),a=new Array(r);for(n[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)n[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(n[r-1]=2,s[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=n[t]/s[t-1],s[t]-=i,a[t]-=i*a[t-1];for(n[r-1]=a[r-1]/s[r-1],t=r-2;t>=0;--t)n[t]=(a[t]-n[t+1])/s[t];for(s[r-1]=(e[r]+n[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-n[t+1];return[n,s]}function M4(e){return new OS(e)}function Th(e,t){this._context=e,this._t=t}Th.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function P4(e){return new Th(e,.5)}function I4(e){return new Th(e,0)}function F4(e){return new Th(e,1)}function yo(e,t,r){this.k=e,this.x=t,this.y=r}yo.prototype={constructor:yo,scale:function(e){return e===1?this:new yo(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new yo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};yo.prototype;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:NS,setPrototypeOf:$_,isFrozen:O4,getPrototypeOf:N4,getOwnPropertyDescriptor:$4}=Object;let{freeze:Pr,seal:oi,create:$S}=Object,{apply:$p,construct:zp}=typeof Reflect<"u"&&Reflect;Pr||(Pr=function(t){return t});oi||(oi=function(t){return t});$p||($p=function(t,r,i){return t.apply(r,i)});zp||(zp=function(t,r){return new t(...r)});const oc=Yr(Array.prototype.forEach),z_=Yr(Array.prototype.pop),so=Yr(Array.prototype.push),Pc=Yr(String.prototype.toLowerCase),If=Yr(String.prototype.toString),H_=Yr(String.prototype.match),ao=Yr(String.prototype.replace),z4=Yr(String.prototype.indexOf),H4=Yr(String.prototype.trim),fi=Yr(Object.prototype.hasOwnProperty),Tr=Yr(RegExp.prototype.test),oo=q4(TypeError);function Yr(e){return function(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return $p(e,t,i)}}function q4(e){return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return zp(e,r)}}function nt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pc;$_&&$_(e,null);let i=t.length;for(;i--;){let n=t[i];if(typeof n=="string"){const s=r(n);s!==n&&(O4(t)||(t[i]=s),n=s)}e[n]=!0}return e}function W4(e){for(let t=0;t<e.length;t++)fi(e,t)||(e[t]=null);return e}function ps(e){const t=$S(null);for(const[r,i]of NS(e))fi(e,r)&&(Array.isArray(i)?t[r]=W4(i):i&&typeof i=="object"&&i.constructor===Object?t[r]=ps(i):t[r]=i);return t}function lo(e,t){for(;e!==null;){const i=$4(e,t);if(i){if(i.get)return Yr(i.get);if(typeof i.value=="function")return Yr(i.value)}e=N4(e)}function r(){return null}return r}const q_=Pr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ff=Pr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Of=Pr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U4=Pr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Nf=Pr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),V4=Pr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),W_=Pr(["#text"]),U_=Pr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),$f=Pr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),V_=Pr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lc=Pr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),j4=oi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),G4=oi(/<%[\w\W]*|[\w\W]*%>/gm),K4=oi(/\${[\w\W]*}/gm),Y4=oi(/^data-[\-\w.\u00B7-\uFFFF]/),X4=oi(/^aria-[\-\w]+$/),zS=oi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z4=oi(/^(?:\w+script|data):/i),Q4=oi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),HS=oi(/^html$/i),J4=oi(/^[a-z][.\w]*(-[.\w]+)+$/i);var j_=Object.freeze({__proto__:null,MUSTACHE_EXPR:j4,ERB_EXPR:G4,TMPLIT_EXPR:K4,DATA_ATTR:Y4,ARIA_ATTR:X4,IS_ALLOWED_URI:zS,IS_SCRIPT_OR_DATA:Z4,ATTR_WHITESPACE:Q4,DOCTYPE_NAME:HS,CUSTOM_ELEMENT:J4});const co={element:1,text:3,progressingInstruction:7,comment:8,document:9},e6=function(){return typeof window>"u"?null:window},t6=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";r&&r.hasAttribute(n)&&(i=r.getAttribute(n));const s="dompurify"+(i?"#"+i:"");try{return t.createPolicy(s,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}};function qS(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e6();const t=Fe=>qS(Fe);if(t.version="3.1.6",t.removed=[],!e||!e.document||e.document.nodeType!==co.document)return t.isSupported=!1,t;let{document:r}=e;const i=r,n=i.currentScript,{DocumentFragment:s,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:p}=e,y=l.prototype,_=lo(y,"cloneNode"),v=lo(y,"remove"),g=lo(y,"nextSibling"),f=lo(y,"childNodes"),m=lo(y,"parentNode");if(typeof a=="function"){const Fe=r.createElement("template");Fe.content&&Fe.content.ownerDocument&&(r=Fe.content.ownerDocument)}let b,C="";const{implementation:S,createNodeIterator:k,createDocumentFragment:w,getElementsByTagName:x}=r,{importNode:A}=i;let D={};t.isSupported=typeof NS=="function"&&typeof m=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:T,ERB_EXPR:E,TMPLIT_EXPR:R,DATA_ATTR:F,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:H,CUSTOM_ELEMENT:L}=j_;let{IS_ALLOWED_URI:I}=j_,P=null;const z=nt({},[...q_,...Ff,...Of,...Nf,...W_]);let K=null;const te=nt({},[...U_,...$f,...V_,...lc]);let J=Object.seal($S(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ne=null,V=null,N=!0,ee=!0,U=!1,X=!0,M=!1,q=!0,Q=!1,se=!1,Z=!1,Y=!1,ae=!1,he=!1,ce=!0,ue=!1;const ye="user-content-";let ve=!0,_e=!1,Ce={},ke=null;const Me=nt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ae=null;const We=nt({},["audio","video","img","source","image","track"]);let Ee=null;const Se=nt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),de="http://www.w3.org/1998/Math/MathML",W="http://www.w3.org/2000/svg",oe="http://www.w3.org/1999/xhtml";let fe=oe,pe=!1,ge=null;const De=nt({},[de,W,oe],If);let be=null;const Ne=["application/xhtml+xml","text/html"],Re="text/html";let Be=null,Ze=null;const Je=r.createElement("form"),Ie=function(ie){return ie instanceof RegExp||ie instanceof Function},et=function(){let ie=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ze&&Ze===ie)){if((!ie||typeof ie!="object")&&(ie={}),ie=ps(ie),be=Ne.indexOf(ie.PARSER_MEDIA_TYPE)===-1?Re:ie.PARSER_MEDIA_TYPE,Be=be==="application/xhtml+xml"?If:Pc,P=fi(ie,"ALLOWED_TAGS")?nt({},ie.ALLOWED_TAGS,Be):z,K=fi(ie,"ALLOWED_ATTR")?nt({},ie.ALLOWED_ATTR,Be):te,ge=fi(ie,"ALLOWED_NAMESPACES")?nt({},ie.ALLOWED_NAMESPACES,If):De,Ee=fi(ie,"ADD_URI_SAFE_ATTR")?nt(ps(Se),ie.ADD_URI_SAFE_ATTR,Be):Se,Ae=fi(ie,"ADD_DATA_URI_TAGS")?nt(ps(We),ie.ADD_DATA_URI_TAGS,Be):We,ke=fi(ie,"FORBID_CONTENTS")?nt({},ie.FORBID_CONTENTS,Be):Me,ne=fi(ie,"FORBID_TAGS")?nt({},ie.FORBID_TAGS,Be):{},V=fi(ie,"FORBID_ATTR")?nt({},ie.FORBID_ATTR,Be):{},Ce=fi(ie,"USE_PROFILES")?ie.USE_PROFILES:!1,N=ie.ALLOW_ARIA_ATTR!==!1,ee=ie.ALLOW_DATA_ATTR!==!1,U=ie.ALLOW_UNKNOWN_PROTOCOLS||!1,X=ie.ALLOW_SELF_CLOSE_IN_ATTR!==!1,M=ie.SAFE_FOR_TEMPLATES||!1,q=ie.SAFE_FOR_XML!==!1,Q=ie.WHOLE_DOCUMENT||!1,Y=ie.RETURN_DOM||!1,ae=ie.RETURN_DOM_FRAGMENT||!1,he=ie.RETURN_TRUSTED_TYPE||!1,Z=ie.FORCE_BODY||!1,ce=ie.SANITIZE_DOM!==!1,ue=ie.SANITIZE_NAMED_PROPS||!1,ve=ie.KEEP_CONTENT!==!1,_e=ie.IN_PLACE||!1,I=ie.ALLOWED_URI_REGEXP||zS,fe=ie.NAMESPACE||oe,J=ie.CUSTOM_ELEMENT_HANDLING||{},ie.CUSTOM_ELEMENT_HANDLING&&Ie(ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(J.tagNameCheck=ie.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ie.CUSTOM_ELEMENT_HANDLING&&Ie(ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(J.attributeNameCheck=ie.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ie.CUSTOM_ELEMENT_HANDLING&&typeof ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(J.allowCustomizedBuiltInElements=ie.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),M&&(ee=!1),ae&&(Y=!0),Ce&&(P=nt({},W_),K=[],Ce.html===!0&&(nt(P,q_),nt(K,U_)),Ce.svg===!0&&(nt(P,Ff),nt(K,$f),nt(K,lc)),Ce.svgFilters===!0&&(nt(P,Of),nt(K,$f),nt(K,lc)),Ce.mathMl===!0&&(nt(P,Nf),nt(K,V_),nt(K,lc))),ie.ADD_TAGS&&(P===z&&(P=ps(P)),nt(P,ie.ADD_TAGS,Be)),ie.ADD_ATTR&&(K===te&&(K=ps(K)),nt(K,ie.ADD_ATTR,Be)),ie.ADD_URI_SAFE_ATTR&&nt(Ee,ie.ADD_URI_SAFE_ATTR,Be),ie.FORBID_CONTENTS&&(ke===Me&&(ke=ps(ke)),nt(ke,ie.FORBID_CONTENTS,Be)),ve&&(P["#text"]=!0),Q&&nt(P,["html","head","body"]),P.table&&(nt(P,["tbody"]),delete ne.tbody),ie.TRUSTED_TYPES_POLICY){if(typeof ie.TRUSTED_TYPES_POLICY.createHTML!="function")throw oo('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ie.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw oo('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');b=ie.TRUSTED_TYPES_POLICY,C=b.createHTML("")}else b===void 0&&(b=t6(p,n)),b!==null&&typeof C=="string"&&(C=b.createHTML(""));Pr&&Pr(ie),Ze=ie}},tt=nt({},["mi","mo","mn","ms","mtext"]),Ot=nt({},["foreignobject","annotation-xml"]),Dt=nt({},["title","style","font","a","script"]),tr=nt({},[...Ff,...Of,...U4]),Mt=nt({},[...Nf,...V4]),Ut=function(ie){let we=m(ie);(!we||!we.tagName)&&(we={namespaceURI:fe,tagName:"template"});const Oe=Pc(ie.tagName),yt=Pc(we.tagName);return ge[ie.namespaceURI]?ie.namespaceURI===W?we.namespaceURI===oe?Oe==="svg":we.namespaceURI===de?Oe==="svg"&&(yt==="annotation-xml"||tt[yt]):!!tr[Oe]:ie.namespaceURI===de?we.namespaceURI===oe?Oe==="math":we.namespaceURI===W?Oe==="math"&&Ot[yt]:!!Mt[Oe]:ie.namespaceURI===oe?we.namespaceURI===W&&!Ot[yt]||we.namespaceURI===de&&!tt[yt]?!1:!Mt[Oe]&&(Dt[Oe]||!tr[Oe]):!!(be==="application/xhtml+xml"&&ge[ie.namespaceURI]):!1},pt=function(ie){so(t.removed,{element:ie});try{m(ie).removeChild(ie)}catch{v(ie)}},Nt=function(ie,we){try{so(t.removed,{attribute:we.getAttributeNode(ie),from:we})}catch{so(t.removed,{attribute:null,from:we})}if(we.removeAttribute(ie),ie==="is"&&!K[ie])if(Y||ae)try{pt(we)}catch{}else try{we.setAttribute(ie,"")}catch{}},ui=function(ie){let we=null,Oe=null;if(Z)ie="<remove></remove>"+ie;else{const Xt=H_(ie,/^[\r\n\t ]+/);Oe=Xt&&Xt[0]}be==="application/xhtml+xml"&&fe===oe&&(ie='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ie+"</body></html>");const yt=b?b.createHTML(ie):ie;if(fe===oe)try{we=new d().parseFromString(yt,be)}catch{}if(!we||!we.documentElement){we=S.createDocument(fe,"template",null);try{we.documentElement.innerHTML=pe?C:yt}catch{}}const rr=we.body||we.documentElement;return ie&&Oe&&rr.insertBefore(r.createTextNode(Oe),rr.childNodes[0]||null),fe===oe?x.call(we,Q?"html":"body")[0]:Q?we.documentElement:rr},Pt=function(ie){return k.call(ie.ownerDocument||ie,ie,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Xr=function(ie){return ie instanceof h&&(typeof ie.nodeName!="string"||typeof ie.textContent!="string"||typeof ie.removeChild!="function"||!(ie.attributes instanceof u)||typeof ie.removeAttribute!="function"||typeof ie.setAttribute!="function"||typeof ie.namespaceURI!="string"||typeof ie.insertBefore!="function"||typeof ie.hasChildNodes!="function")},Zr=function(ie){return typeof o=="function"&&ie instanceof o},fr=function(ie,we,Oe){D[ie]&&oc(D[ie],yt=>{yt.call(t,we,Oe,Ze)})},rs=function(ie){let we=null;if(fr("beforeSanitizeElements",ie,null),Xr(ie))return pt(ie),!0;const Oe=Be(ie.nodeName);if(fr("uponSanitizeElement",ie,{tagName:Oe,allowedTags:P}),ie.hasChildNodes()&&!Zr(ie.firstElementChild)&&Tr(/<[/\w]/g,ie.innerHTML)&&Tr(/<[/\w]/g,ie.textContent)||ie.nodeType===co.progressingInstruction||q&&ie.nodeType===co.comment&&Tr(/<[/\w]/g,ie.data))return pt(ie),!0;if(!P[Oe]||ne[Oe]){if(!ne[Oe]&&ar(Oe)&&(J.tagNameCheck instanceof RegExp&&Tr(J.tagNameCheck,Oe)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Oe)))return!1;if(ve&&!ke[Oe]){const yt=m(ie)||ie.parentNode,rr=f(ie)||ie.childNodes;if(rr&&yt){const Xt=rr.length;for(let vr=Xt-1;vr>=0;--vr){const Qr=_(rr[vr],!0);Qr.__removalCount=(ie.__removalCount||0)+1,yt.insertBefore(Qr,g(ie))}}}return pt(ie),!0}return ie instanceof l&&!Ut(ie)||(Oe==="noscript"||Oe==="noembed"||Oe==="noframes")&&Tr(/<\/no(script|embed|frames)/i,ie.innerHTML)?(pt(ie),!0):(M&&ie.nodeType===co.text&&(we=ie.textContent,oc([T,E,R],yt=>{we=ao(we,yt," ")}),ie.textContent!==we&&(so(t.removed,{element:ie.cloneNode()}),ie.textContent=we)),fr("afterSanitizeElements",ie,null),!1)},Si=function(ie,we,Oe){if(ce&&(we==="id"||we==="name")&&(Oe in r||Oe in Je))return!1;if(!(ee&&!V[we]&&Tr(F,we))){if(!(N&&Tr(O,we))){if(!K[we]||V[we]){if(!(ar(ie)&&(J.tagNameCheck instanceof RegExp&&Tr(J.tagNameCheck,ie)||J.tagNameCheck instanceof Function&&J.tagNameCheck(ie))&&(J.attributeNameCheck instanceof RegExp&&Tr(J.attributeNameCheck,we)||J.attributeNameCheck instanceof Function&&J.attributeNameCheck(we))||we==="is"&&J.allowCustomizedBuiltInElements&&(J.tagNameCheck instanceof RegExp&&Tr(J.tagNameCheck,Oe)||J.tagNameCheck instanceof Function&&J.tagNameCheck(Oe))))return!1}else if(!Ee[we]){if(!Tr(I,ao(Oe,H,""))){if(!((we==="src"||we==="xlink:href"||we==="href")&&ie!=="script"&&z4(Oe,"data:")===0&&Ae[ie])){if(!(U&&!Tr($,ao(Oe,H,"")))){if(Oe)return!1}}}}}}return!0},ar=function(ie){return ie!=="annotation-xml"&&H_(ie,L)},Yt=function(ie){fr("beforeSanitizeAttributes",ie,null);const{attributes:we}=ie;if(!we)return;const Oe={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:K};let yt=we.length;for(;yt--;){const rr=we[yt],{name:Xt,namespaceURI:vr,value:Qr}=rr,is=Be(Xt);let qt=Xt==="value"?Qr:H4(Qr);if(Oe.attrName=is,Oe.attrValue=qt,Oe.keepAttr=!0,Oe.forceKeepAttr=void 0,fr("uponSanitizeAttribute",ie,Oe),qt=Oe.attrValue,q&&Tr(/((--!?|])>)|<\/(style|title)/i,qt)){Nt(Xt,ie);continue}if(Oe.forceKeepAttr||(Nt(Xt,ie),!Oe.keepAttr))continue;if(!X&&Tr(/\/>/i,qt)){Nt(Xt,ie);continue}M&&oc([T,E,R],ns=>{qt=ao(qt,ns," ")});const Us=Be(ie.nodeName);if(Si(Us,is,qt)){if(ue&&(is==="id"||is==="name")&&(Nt(Xt,ie),qt=ye+qt),b&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!vr)switch(p.getAttributeType(Us,is)){case"TrustedHTML":{qt=b.createHTML(qt);break}case"TrustedScriptURL":{qt=b.createScriptURL(qt);break}}try{vr?ie.setAttributeNS(vr,Xt,qt):ie.setAttribute(Xt,qt),Xr(ie)?pt(ie):z_(t.removed)}catch{}}}fr("afterSanitizeAttributes",ie,null)},pr=function Fe(ie){let we=null;const Oe=Pt(ie);for(fr("beforeSanitizeShadowDOM",ie,null);we=Oe.nextNode();)fr("uponSanitizeShadowNode",we,null),!rs(we)&&(we.content instanceof s&&Fe(we.content),Yt(we));fr("afterSanitizeShadowDOM",ie,null)};return t.sanitize=function(Fe){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},we=null,Oe=null,yt=null,rr=null;if(pe=!Fe,pe&&(Fe="<!-->"),typeof Fe!="string"&&!Zr(Fe))if(typeof Fe.toString=="function"){if(Fe=Fe.toString(),typeof Fe!="string")throw oo("dirty is not a string, aborting")}else throw oo("toString is not a function");if(!t.isSupported)return Fe;if(se||et(ie),t.removed=[],typeof Fe=="string"&&(_e=!1),_e){if(Fe.nodeName){const Qr=Be(Fe.nodeName);if(!P[Qr]||ne[Qr])throw oo("root node is forbidden and cannot be sanitized in-place")}}else if(Fe instanceof o)we=ui("<!---->"),Oe=we.ownerDocument.importNode(Fe,!0),Oe.nodeType===co.element&&Oe.nodeName==="BODY"||Oe.nodeName==="HTML"?we=Oe:we.appendChild(Oe);else{if(!Y&&!M&&!Q&&Fe.indexOf("<")===-1)return b&&he?b.createHTML(Fe):Fe;if(we=ui(Fe),!we)return Y?null:he?C:""}we&&Z&&pt(we.firstChild);const Xt=Pt(_e?Fe:we);for(;yt=Xt.nextNode();)rs(yt)||(yt.content instanceof s&&pr(yt.content),Yt(yt));if(_e)return Fe;if(Y){if(ae)for(rr=w.call(we.ownerDocument);we.firstChild;)rr.appendChild(we.firstChild);else rr=we;return(K.shadowroot||K.shadowrootmode)&&(rr=A.call(i,rr,!0)),rr}let vr=Q?we.outerHTML:we.innerHTML;return Q&&P["!doctype"]&&we.ownerDocument&&we.ownerDocument.doctype&&we.ownerDocument.doctype.name&&Tr(HS,we.ownerDocument.doctype.name)&&(vr="<!DOCTYPE "+we.ownerDocument.doctype.name+`>
`+vr),M&&oc([T,E,R],Qr=>{vr=ao(vr,Qr," ")}),b&&he?b.createHTML(vr):vr},t.setConfig=function(){let Fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};et(Fe),se=!0},t.clearConfig=function(){Ze=null,se=!1},t.isValidAttribute=function(Fe,ie,we){Ze||et({});const Oe=Be(Fe),yt=Be(ie);return Si(Oe,yt,we)},t.addHook=function(Fe,ie){typeof ie=="function"&&(D[Fe]=D[Fe]||[],so(D[Fe],ie))},t.removeHook=function(Fe){if(D[Fe])return z_(D[Fe])},t.removeHooks=function(Fe){D[Fe]&&(D[Fe]=[])},t.removeAllHooks=function(){D={}},t}var Ba=qS();const Ic={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:e=>e>=255?255:e<0?0:e,g:e=>e>=255?255:e<0?0:e,b:e=>e>=255?255:e<0?0:e,h:e=>e%360,s:e=>e>=100?100:e<0?0:e,l:e=>e>=100?100:e<0?0:e,a:e=>e>=1?1:e<0?0:e},toLinear:e=>{const t=e/255;return e>.03928?Math.pow((t+.055)/1.055,2.4):t/12.92},hue2rgb:(e,t,r)=>(r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e),hsl2rgb:({h:e,s:t,l:r},i)=>{if(!t)return r*2.55;e/=360,t/=100,r/=100;const n=r<.5?r*(1+t):r+t-r*t,s=2*r-n;switch(i){case"r":return Ic.hue2rgb(s,n,e+1/3)*255;case"g":return Ic.hue2rgb(s,n,e)*255;case"b":return Ic.hue2rgb(s,n,e-1/3)*255}},rgb2hsl:({r:e,g:t,b:r},i)=>{e/=255,t/=255,r/=255;const n=Math.max(e,t,r),s=Math.min(e,t,r),a=(n+s)/2;if(i==="l")return a*100;if(n===s)return 0;const o=n-s,l=a>.5?o/(2-n-s):o/(n+s);if(i==="s")return l*100;switch(n){case e:return((t-r)/o+(t<r?6:0))*60;case t:return((r-e)/o+2)*60;case r:return((e-t)/o+4)*60;default:return-1}}},r6={clamp:(e,t,r)=>t>r?Math.min(t,Math.max(r,e)):Math.min(r,Math.max(t,e)),round:e=>Math.round(e*1e10)/1e10},i6={dec2hex:e=>{const t=Math.round(e).toString(16);return t.length>1?t:`0${t}`}},Xe={channel:Ic,lang:r6,unit:i6},wn={};for(let e=0;e<=255;e++)wn[e]=Xe.unit.dec2hex(e);const gr={ALL:0,RGB:1,HSL:2};class n6{constructor(){this.type=gr.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=gr.ALL}is(t){return this.type===t}}class s6{constructor(t,r){this.color=r,this.changed=!1,this.data=t,this.type=new n6}set(t,r){return this.color=r,this.changed=!1,this.data=t,this.type.type=gr.ALL,this}_ensureHSL(){const t=this.data,{h:r,s:i,l:n}=t;r===void 0&&(t.h=Xe.channel.rgb2hsl(t,"h")),i===void 0&&(t.s=Xe.channel.rgb2hsl(t,"s")),n===void 0&&(t.l=Xe.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r,g:i,b:n}=t;r===void 0&&(t.r=Xe.channel.hsl2rgb(t,"r")),i===void 0&&(t.g=Xe.channel.hsl2rgb(t,"g")),n===void 0&&(t.b=Xe.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,r=t.r;return!this.type.is(gr.HSL)&&r!==void 0?r:(this._ensureHSL(),Xe.channel.hsl2rgb(t,"r"))}get g(){const t=this.data,r=t.g;return!this.type.is(gr.HSL)&&r!==void 0?r:(this._ensureHSL(),Xe.channel.hsl2rgb(t,"g"))}get b(){const t=this.data,r=t.b;return!this.type.is(gr.HSL)&&r!==void 0?r:(this._ensureHSL(),Xe.channel.hsl2rgb(t,"b"))}get h(){const t=this.data,r=t.h;return!this.type.is(gr.RGB)&&r!==void 0?r:(this._ensureRGB(),Xe.channel.rgb2hsl(t,"h"))}get s(){const t=this.data,r=t.s;return!this.type.is(gr.RGB)&&r!==void 0?r:(this._ensureRGB(),Xe.channel.rgb2hsl(t,"s"))}get l(){const t=this.data,r=t.l;return!this.type.is(gr.RGB)&&r!==void 0?r:(this._ensureRGB(),Xe.channel.rgb2hsl(t,"l"))}get a(){return this.data.a}set r(t){this.type.set(gr.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(gr.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(gr.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(gr.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(gr.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(gr.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}const Eh=new s6({r:0,g:0,b:0,a:0},"transparent"),wa={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:e=>{if(e.charCodeAt(0)!==35)return;const t=e.match(wa.re);if(!t)return;const r=t[1],i=parseInt(r,16),n=r.length,s=n%4===0,a=n>4,o=a?1:17,l=a?8:4,c=s?0:-1,u=a?255:15;return Eh.set({r:(i>>l*(c+3)&u)*o,g:(i>>l*(c+2)&u)*o,b:(i>>l*(c+1)&u)*o,a:s?(i&u)*o/255:1},e)},stringify:e=>{const{r:t,g:r,b:i,a:n}=e;return n<1?`#${wn[Math.round(t)]}${wn[Math.round(r)]}${wn[Math.round(i)]}${wn[Math.round(n*255)]}`:`#${wn[Math.round(t)]}${wn[Math.round(r)]}${wn[Math.round(i)]}`}},ws={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:e=>{const t=e.match(ws.hueRe);if(t){const[,r,i]=t;switch(i){case"grad":return Xe.channel.clamp.h(parseFloat(r)*.9);case"rad":return Xe.channel.clamp.h(parseFloat(r)*180/Math.PI);case"turn":return Xe.channel.clamp.h(parseFloat(r)*360)}}return Xe.channel.clamp.h(parseFloat(e))},parse:e=>{const t=e.charCodeAt(0);if(t!==104&&t!==72)return;const r=e.match(ws.re);if(!r)return;const[,i,n,s,a,o]=r;return Eh.set({h:ws._hue2deg(i),s:Xe.channel.clamp.s(parseFloat(n)),l:Xe.channel.clamp.l(parseFloat(s)),a:a?Xe.channel.clamp.a(o?parseFloat(a)/100:parseFloat(a)):1},e)},stringify:e=>{const{h:t,s:r,l:i,a:n}=e;return n<1?`hsla(${Xe.lang.round(t)}, ${Xe.lang.round(r)}%, ${Xe.lang.round(i)}%, ${n})`:`hsl(${Xe.lang.round(t)}, ${Xe.lang.round(r)}%, ${Xe.lang.round(i)}%)`}},Ro={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:e=>{e=e.toLowerCase();const t=Ro.colors[e];if(t)return wa.parse(t)},stringify:e=>{const t=wa.stringify(e);for(const r in Ro.colors)if(Ro.colors[r]===t)return r}},_o={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:e=>{const t=e.charCodeAt(0);if(t!==114&&t!==82)return;const r=e.match(_o.re);if(!r)return;const[,i,n,s,a,o,l,c,u]=r;return Eh.set({r:Xe.channel.clamp.r(n?parseFloat(i)*2.55:parseFloat(i)),g:Xe.channel.clamp.g(a?parseFloat(s)*2.55:parseFloat(s)),b:Xe.channel.clamp.b(l?parseFloat(o)*2.55:parseFloat(o)),a:c?Xe.channel.clamp.a(u?parseFloat(c)/100:parseFloat(c)):1},e)},stringify:e=>{const{r:t,g:r,b:i,a:n}=e;return n<1?`rgba(${Xe.lang.round(t)}, ${Xe.lang.round(r)}, ${Xe.lang.round(i)}, ${Xe.lang.round(n)})`:`rgb(${Xe.lang.round(t)}, ${Xe.lang.round(r)}, ${Xe.lang.round(i)})`}},$i={format:{keyword:Ro,hex:wa,rgb:_o,rgba:_o,hsl:ws,hsla:ws},parse:e=>{if(typeof e!="string")return e;const t=wa.parse(e)||_o.parse(e)||ws.parse(e)||Ro.parse(e);if(t)return t;throw new Error(`Unsupported color format: "${e}"`)},stringify:e=>!e.changed&&e.color?e.color:e.type.is(gr.HSL)||e.data.r===void 0?ws.stringify(e):e.a<1||!Number.isInteger(e.r)||!Number.isInteger(e.g)||!Number.isInteger(e.b)?_o.stringify(e):wa.stringify(e)},WS=(e,t)=>{const r=$i.parse(e);for(const i in t)r[i]=Xe.channel.clamp[i](t[i]);return $i.stringify(r)},Mo=(e,t,r=0,i=1)=>{if(typeof e!="number")return WS(e,{a:t});const n=Eh.set({r:Xe.channel.clamp.r(e),g:Xe.channel.clamp.g(t),b:Xe.channel.clamp.b(r),a:Xe.channel.clamp.a(i)});return $i.stringify(n)},a6=e=>{const{r:t,g:r,b:i}=$i.parse(e),n=.2126*Xe.channel.toLinear(t)+.7152*Xe.channel.toLinear(r)+.0722*Xe.channel.toLinear(i);return Xe.lang.round(n)},o6=e=>a6(e)>=.5,Rl=e=>!o6(e),US=(e,t,r)=>{const i=$i.parse(e),n=i[t],s=Xe.channel.clamp[t](n+r);return n!==s&&(i[t]=s),$i.stringify(i)},ze=(e,t)=>US(e,"l",t),Ve=(e,t)=>US(e,"l",-t),le=(e,t)=>{const r=$i.parse(e),i={};for(const n in t)t[n]&&(i[n]=r[n]+t[n]);return WS(e,i)},l6=(e,t,r=50)=>{const{r:i,g:n,b:s,a}=$i.parse(e),{r:o,g:l,b:c,a:u}=$i.parse(t),h=r/100,d=h*2-1,p=a-u,_=((d*p===-1?d:(d+p)/(1+d*p))+1)/2,v=1-_,g=i*_+o*v,f=n*_+l*v,m=s*_+c*v,b=a*h+u*(1-h);return Mo(g,f,m,b)},Te=(e,t=100)=>{const r=$i.parse(e);return r.r=255-r.r,r.g=255-r.g,r.b=255-r.b,l6(r,e,t)};var VS=typeof global=="object"&&global&&global.Object===Object&&global,c6=typeof self=="object"&&self&&self.Object===Object&&self,Ui=VS||c6||Function("return this")(),Tu=Ui.Symbol,jS=Object.prototype,u6=jS.hasOwnProperty,h6=jS.toString,uo=Tu?Tu.toStringTag:void 0;function d6(e){var t=u6.call(e,uo),r=e[uo];try{e[uo]=void 0;var i=!0}catch{}var n=h6.call(e);return i&&(t?e[uo]=r:delete e[uo]),n}var f6=Object.prototype,p6=f6.toString;function v6(e){return p6.call(e)}var g6="[object Null]",m6="[object Undefined]",G_=Tu?Tu.toStringTag:void 0;function Ua(e){return e==null?e===void 0?m6:g6:G_&&G_ in Object(e)?d6(e):v6(e)}function zs(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var y6="[object AsyncFunction]",_6="[object Function]",b6="[object GeneratorFunction]",C6="[object Proxy]";function fg(e){if(!zs(e))return!1;var t=Ua(e);return t==_6||t==b6||t==y6||t==C6}var zf=Ui["__core-js_shared__"],K_=(function(){var e=/[^.]+$/.exec(zf&&zf.keys&&zf.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""})();function w6(e){return!!K_&&K_ in e}var S6=Function.prototype,k6=S6.toString;function Hs(e){if(e!=null){try{return k6.call(e)}catch{}try{return e+""}catch{}}return""}var x6=/[\\^$.*+?()[\]{}|]/g,T6=/^\[object .+?Constructor\]$/,E6=Function.prototype,A6=Object.prototype,B6=E6.toString,D6=A6.hasOwnProperty,L6=RegExp("^"+B6.call(D6).replace(x6,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function R6(e){if(!zs(e)||w6(e))return!1;var t=fg(e)?L6:T6;return t.test(Hs(e))}function M6(e,t){return e==null?void 0:e[t]}function qs(e,t){var r=M6(e,t);return R6(r)?r:void 0}var ll=qs(Object,"create");function P6(){this.__data__=ll?ll(null):{},this.size=0}function I6(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var F6="__lodash_hash_undefined__",O6=Object.prototype,N6=O6.hasOwnProperty;function $6(e){var t=this.__data__;if(ll){var r=t[e];return r===F6?void 0:r}return N6.call(t,e)?t[e]:void 0}var z6=Object.prototype,H6=z6.hasOwnProperty;function q6(e){var t=this.__data__;return ll?t[e]!==void 0:H6.call(t,e)}var W6="__lodash_hash_undefined__";function U6(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ll&&t===void 0?W6:t,this}function Ms(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ms.prototype.clear=P6;Ms.prototype.delete=I6;Ms.prototype.get=$6;Ms.prototype.has=q6;Ms.prototype.set=U6;function V6(){this.__data__=[],this.size=0}function Ah(e,t){return e===t||e!==e&&t!==t}function Bh(e,t){for(var r=e.length;r--;)if(Ah(e[r][0],t))return r;return-1}var j6=Array.prototype,G6=j6.splice;function K6(e){var t=this.__data__,r=Bh(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():G6.call(t,r,1),--this.size,!0}function Y6(e){var t=this.__data__,r=Bh(t,e);return r<0?void 0:t[r][1]}function X6(e){return Bh(this.__data__,e)>-1}function Z6(e,t){var r=this.__data__,i=Bh(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}function mn(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}mn.prototype.clear=V6;mn.prototype.delete=K6;mn.prototype.get=Y6;mn.prototype.has=X6;mn.prototype.set=Z6;var cl=qs(Ui,"Map");function Q6(){this.size=0,this.__data__={hash:new Ms,map:new(cl||mn),string:new Ms}}function J6(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Dh(e,t){var r=e.__data__;return J6(t)?r[typeof t=="string"?"string":"hash"]:r.map}function eN(e){var t=Dh(this,e).delete(e);return this.size-=t?1:0,t}function tN(e){return Dh(this,e).get(e)}function rN(e){return Dh(this,e).has(e)}function iN(e,t){var r=Dh(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}function ts(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}ts.prototype.clear=Q6;ts.prototype.delete=eN;ts.prototype.get=tN;ts.prototype.has=rN;ts.prototype.set=iN;var nN="Expected a function";function Ml(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(nN);var r=function(){var i=arguments,n=t?t.apply(this,i):i[0],s=r.cache;if(s.has(n))return s.get(n);var a=e.apply(this,i);return r.cache=s.set(n,a)||s,a};return r.cache=new(Ml.Cache||ts),r}Ml.Cache=ts;function sN(){this.__data__=new mn,this.size=0}function aN(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function oN(e){return this.__data__.get(e)}function lN(e){return this.__data__.has(e)}var cN=200;function uN(e,t){var r=this.__data__;if(r instanceof mn){var i=r.__data__;if(!cl||i.length<cN-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new ts(i)}return r.set(e,t),this.size=r.size,this}function Va(e){var t=this.__data__=new mn(e);this.size=t.size}Va.prototype.clear=sN;Va.prototype.delete=aN;Va.prototype.get=oN;Va.prototype.has=lN;Va.prototype.set=uN;var Eu=(function(){try{var e=qs(Object,"defineProperty");return e({},"",{}),e}catch{}})();function pg(e,t,r){t=="__proto__"&&Eu?Eu(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Hp(e,t,r){(r!==void 0&&!Ah(e[t],r)||r===void 0&&!(t in e))&&pg(e,t,r)}function hN(e){return function(t,r,i){for(var n=-1,s=Object(t),a=i(t),o=a.length;o--;){var l=a[++n];if(r(s[l],l,s)===!1)break}return t}}var dN=hN(),GS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Y_=GS&&typeof module=="object"&&module&&!module.nodeType&&module,fN=Y_&&Y_.exports===GS,X_=fN?Ui.Buffer:void 0,Z_=X_?X_.allocUnsafe:void 0;function pN(e,t){if(t)return e.slice();var r=e.length,i=Z_?Z_(r):new e.constructor(r);return e.copy(i),i}var Q_=Ui.Uint8Array;function vN(e){var t=new e.constructor(e.byteLength);return new Q_(t).set(new Q_(e)),t}function gN(e,t){var r=t?vN(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function mN(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}var J_=Object.create,yN=(function(){function e(){}return function(t){if(!zs(t))return{};if(J_)return J_(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}})();function KS(e,t){return function(r){return e(t(r))}}var YS=KS(Object.getPrototypeOf,Object),_N=Object.prototype;function Lh(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||_N;return e===r}function bN(e){return typeof e.constructor=="function"&&!Lh(e)?yN(YS(e)):{}}function Pl(e){return e!=null&&typeof e=="object"}var CN="[object Arguments]";function eb(e){return Pl(e)&&Ua(e)==CN}var XS=Object.prototype,wN=XS.hasOwnProperty,SN=XS.propertyIsEnumerable,Au=eb((function(){return arguments})())?eb:function(e){return Pl(e)&&wN.call(e,"callee")&&!SN.call(e,"callee")},Bu=Array.isArray,kN=9007199254740991;function ZS(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kN}function Rh(e){return e!=null&&ZS(e.length)&&!fg(e)}function xN(e){return Pl(e)&&Rh(e)}function TN(){return!1}var QS=typeof exports=="object"&&exports&&!exports.nodeType&&exports,tb=QS&&typeof module=="object"&&module&&!module.nodeType&&module,EN=tb&&tb.exports===QS,rb=EN?Ui.Buffer:void 0,AN=rb?rb.isBuffer:void 0,vg=AN||TN,BN="[object Object]",DN=Function.prototype,LN=Object.prototype,JS=DN.toString,RN=LN.hasOwnProperty,MN=JS.call(Object);function PN(e){if(!Pl(e)||Ua(e)!=BN)return!1;var t=YS(e);if(t===null)return!0;var r=RN.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&JS.call(r)==MN}var IN="[object Arguments]",FN="[object Array]",ON="[object Boolean]",NN="[object Date]",$N="[object Error]",zN="[object Function]",HN="[object Map]",qN="[object Number]",WN="[object Object]",UN="[object RegExp]",VN="[object Set]",jN="[object String]",GN="[object WeakMap]",KN="[object ArrayBuffer]",YN="[object DataView]",XN="[object Float32Array]",ZN="[object Float64Array]",QN="[object Int8Array]",JN="[object Int16Array]",e$="[object Int32Array]",t$="[object Uint8Array]",r$="[object Uint8ClampedArray]",i$="[object Uint16Array]",n$="[object Uint32Array]",At={};At[XN]=At[ZN]=At[QN]=At[JN]=At[e$]=At[t$]=At[r$]=At[i$]=At[n$]=!0;At[IN]=At[FN]=At[KN]=At[ON]=At[YN]=At[NN]=At[$N]=At[zN]=At[HN]=At[qN]=At[WN]=At[UN]=At[VN]=At[jN]=At[GN]=!1;function s$(e){return Pl(e)&&ZS(e.length)&&!!At[Ua(e)]}function a$(e){return function(t){return e(t)}}var ek=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Po=ek&&typeof module=="object"&&module&&!module.nodeType&&module,o$=Po&&Po.exports===ek,Hf=o$&&VS.process,ib=(function(){try{var e=Po&&Po.require&&Po.require("util").types;return e||Hf&&Hf.binding&&Hf.binding("util")}catch{}})(),nb=ib&&ib.isTypedArray,gg=nb?a$(nb):s$;function qp(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var l$=Object.prototype,c$=l$.hasOwnProperty;function u$(e,t,r){var i=e[t];(!(c$.call(e,t)&&Ah(i,r))||r===void 0&&!(t in e))&&pg(e,t,r)}function h$(e,t,r,i){var n=!r;r||(r={});for(var s=-1,a=t.length;++s<a;){var o=t[s],l=void 0;l===void 0&&(l=e[o]),n?pg(r,o,l):u$(r,o,l)}return r}function d$(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var f$=9007199254740991,p$=/^(?:0|[1-9]\d*)$/;function tk(e,t){var r=typeof e;return t=t??f$,!!t&&(r=="number"||r!="symbol"&&p$.test(e))&&e>-1&&e%1==0&&e<t}var v$=Object.prototype,g$=v$.hasOwnProperty;function m$(e,t){var r=Bu(e),i=!r&&Au(e),n=!r&&!i&&vg(e),s=!r&&!i&&!n&&gg(e),a=r||i||n||s,o=a?d$(e.length,String):[],l=o.length;for(var c in e)(t||g$.call(e,c))&&!(a&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||tk(c,l)))&&o.push(c);return o}function y$(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}var _$=Object.prototype,b$=_$.hasOwnProperty;function C$(e){if(!zs(e))return y$(e);var t=Lh(e),r=[];for(var i in e)i=="constructor"&&(t||!b$.call(e,i))||r.push(i);return r}function rk(e){return Rh(e)?m$(e,!0):C$(e)}function w$(e){return h$(e,rk(e))}function S$(e,t,r,i,n,s,a){var o=qp(e,r),l=qp(t,r),c=a.get(l);if(c){Hp(e,r,c);return}var u=s?s(o,l,r+"",e,t,a):void 0,h=u===void 0;if(h){var d=Bu(l),p=!d&&vg(l),y=!d&&!p&&gg(l);u=l,d||p||y?Bu(o)?u=o:xN(o)?u=mN(o):p?(h=!1,u=pN(l,!0)):y?(h=!1,u=gN(l,!0)):u=[]:PN(l)||Au(l)?(u=o,Au(o)?u=w$(o):(!zs(o)||fg(o))&&(u=bN(l))):h=!1}h&&(a.set(l,u),n(u,l,i,s,a),a.delete(l)),Hp(e,r,u)}function ik(e,t,r,i,n){e!==t&&dN(t,function(s,a){if(n||(n=new Va),zs(s))S$(e,t,a,r,ik,i,n);else{var o=i?i(qp(e,a),s,a+"",e,t,n):void 0;o===void 0&&(o=s),Hp(e,a,o)}},rk)}function nk(e){return e}function k$(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var sb=Math.max;function x$(e,t,r){return t=sb(t===void 0?e.length-1:t,0),function(){for(var i=arguments,n=-1,s=sb(i.length-t,0),a=Array(s);++n<s;)a[n]=i[t+n];n=-1;for(var o=Array(t+1);++n<t;)o[n]=i[n];return o[t]=r(a),k$(e,this,o)}}function T$(e){return function(){return e}}var E$=Eu?function(e,t){return Eu(e,"toString",{configurable:!0,enumerable:!1,value:T$(t),writable:!0})}:nk,A$=800,B$=16,D$=Date.now;function L$(e){var t=0,r=0;return function(){var i=D$(),n=B$-(i-r);if(r=i,n>0){if(++t>=A$)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var R$=L$(E$);function M$(e,t){return R$(x$(e,t,nk),e+"")}function P$(e,t,r){if(!zs(r))return!1;var i=typeof t;return(i=="number"?Rh(r)&&tk(t,r.length):i=="string"&&t in r)?Ah(r[t],e):!1}function I$(e){return M$(function(t,r){var i=-1,n=r.length,s=n>1?r[n-1]:void 0,a=n>2?r[2]:void 0;for(s=e.length>3&&typeof s=="function"?(n--,s):void 0,a&&P$(r[0],r[1],a)&&(s=n<3?void 0:s,n=1),t=Object(t);++i<n;){var o=r[i];o&&e(t,o,i,s)}return t})}var F$=I$(function(e,t,r){ik(e,t,r)}),sk="comm",ak="rule",ok="decl",O$="@import",N$="@namespace",$$="@keyframes",z$="@layer",lk=Math.abs,mg=String.fromCharCode;function ck(e){return e.trim()}function Fc(e,t,r){return e.replace(t,r)}function H$(e,t,r){return e.indexOf(t,r)}function Sa(e,t){return e.charCodeAt(t)|0}function Da(e,t,r){return e.slice(t,r)}function Bi(e){return e.length}function q$(e){return e.length}function cc(e,t){return t.push(e),e}var Mh=1,La=1,uk=0,li=0,Gt=0,ja="";function yg(e,t,r,i,n,s,a,o){return{value:e,root:t,parent:r,type:i,props:n,children:s,line:Mh,column:La,length:a,return:"",siblings:o}}function W$(){return Gt}function U$(){return Gt=li>0?Sa(ja,--li):0,La--,Gt===10&&(La=1,Mh--),Gt}function yi(){return Gt=li<uk?Sa(ja,li++):0,La++,Gt===10&&(La=1,Mh++),Gt}function Ln(){return Sa(ja,li)}function Oc(){return li}function Ph(e,t){return Da(ja,e,t)}function ul(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function V$(e){return Mh=La=1,uk=Bi(ja=e),li=0,[]}function j$(e){return ja="",e}function qf(e){return ck(Ph(li-1,Wp(e===91?e+2:e===40?e+1:e)))}function G$(e){for(;(Gt=Ln())&&Gt<33;)yi();return ul(e)>2||ul(Gt)>3?"":" "}function K$(e,t){for(;--t&&yi()&&!(Gt<48||Gt>102||Gt>57&&Gt<65||Gt>70&&Gt<97););return Ph(e,Oc()+(t<6&&Ln()==32&&yi()==32))}function Wp(e){for(;yi();)switch(Gt){case e:return li;case 34:case 39:e!==34&&e!==39&&Wp(Gt);break;case 40:e===41&&Wp(e);break;case 92:yi();break}return li}function Y$(e,t){for(;yi()&&e+Gt!==57;)if(e+Gt===84&&Ln()===47)break;return"/*"+Ph(t,li-1)+"*"+mg(e===47?e:yi())}function X$(e){for(;!ul(Ln());)yi();return Ph(e,li)}function Z$(e){return j$(Nc("",null,null,null,[""],e=V$(e),0,[0],e))}function Nc(e,t,r,i,n,s,a,o,l){for(var c=0,u=0,h=a,d=0,p=0,y=0,_=1,v=1,g=1,f=0,m="",b=n,C=s,S=i,k=m;v;)switch(y=f,f=yi()){case 40:if(y!=108&&Sa(k,h-1)==58){H$(k+=Fc(qf(f),"&","&\f"),"&\f",lk(c?o[c-1]:0))!=-1&&(g=-1);break}case 34:case 39:case 91:k+=qf(f);break;case 9:case 10:case 13:case 32:k+=G$(y);break;case 92:k+=K$(Oc()-1,7);continue;case 47:switch(Ln()){case 42:case 47:cc(Q$(Y$(yi(),Oc()),t,r,l),l),(ul(y||1)==5||ul(Ln()||1)==5)&&Bi(k)&&Da(k,-1,void 0)!==" "&&(k+=" ");break;default:k+="/"}break;case 123*_:o[c++]=Bi(k)*g;case 125*_:case 59:case 0:switch(f){case 0:case 125:v=0;case 59+u:g==-1&&(k=Fc(k,/\f/g,"")),p>0&&(Bi(k)-h||_===0&&y===47)&&cc(p>32?ob(k+";",i,r,h-1,l):ob(Fc(k," ","")+";",i,r,h-2,l),l);break;case 59:k+=";";default:if(cc(S=ab(k,t,r,c,u,n,o,m,b=[],C=[],h,s),s),f===123)if(u===0)Nc(k,t,S,S,b,s,h,o,C);else{switch(d){case 99:if(Sa(k,3)===110)break;case 108:if(Sa(k,2)===97)break;default:u=0;case 100:case 109:case 115:}u?Nc(e,S,S,i&&cc(ab(e,S,S,0,0,n,o,m,n,b=[],h,C),C),n,C,h,o,i?b:C):Nc(k,S,S,S,[""],C,0,o,C)}}c=u=p=0,_=g=1,m=k="",h=a;break;case 58:h=1+Bi(k),p=y;default:if(_<1){if(f==123)--_;else if(f==125&&_++==0&&U$()==125)continue}switch(k+=mg(f),f*_){case 38:g=u>0?1:(k+="\f",-1);break;case 44:o[c++]=(Bi(k)-1)*g,g=1;break;case 64:Ln()===45&&(k+=qf(yi())),d=Ln(),u=h=Bi(m=k+=X$(Oc())),f++;break;case 45:y===45&&Bi(k)==2&&(_=0)}}return s}function ab(e,t,r,i,n,s,a,o,l,c,u,h){for(var d=n-1,p=n===0?s:[""],y=q$(p),_=0,v=0,g=0;_<i;++_)for(var f=0,m=Da(e,d+1,d=lk(v=a[_])),b=e;f<y;++f)(b=ck(v>0?p[f]+" "+m:Fc(m,/&\f/g,p[f])))&&(l[g++]=b);return yg(e,t,r,n===0?ak:o,l,c,u,h)}function Q$(e,t,r,i){return yg(e,t,r,sk,mg(W$()),Da(e,2,-2),0,i)}function ob(e,t,r,i,n){return yg(e,t,r,ok,Da(e,0,i),Da(e,i+1,-1),i,n)}function Up(e,t){for(var r="",i=0;i<e.length;i++)r+=t(e[i],i,e,t)||"";return r}function J$(e,t,r,i){switch(e.type){case z$:if(e.children.length)break;case O$:case N$:case ok:return e.return=e.return||e.value;case sk:return"";case $$:return e.return=e.value+"{"+Up(e.children,i)+"}";case ak:if(!Bi(e.value=e.props.join(",")))return""}return Bi(r=Up(e.children,i))?e.return=e.value+"{"+r+"}":""}var e8=KS(Object.keys,Object),t8=Object.prototype,r8=t8.hasOwnProperty;function i8(e){if(!Lh(e))return e8(e);var t=[];for(var r in Object(e))r8.call(e,r)&&r!="constructor"&&t.push(r);return t}var Vp=qs(Ui,"DataView"),jp=qs(Ui,"Promise"),Gp=qs(Ui,"Set"),Kp=qs(Ui,"WeakMap"),lb="[object Map]",n8="[object Object]",cb="[object Promise]",ub="[object Set]",hb="[object WeakMap]",db="[object DataView]",s8=Hs(Vp),a8=Hs(cl),o8=Hs(jp),l8=Hs(Gp),c8=Hs(Kp),vs=Ua;(Vp&&vs(new Vp(new ArrayBuffer(1)))!=db||cl&&vs(new cl)!=lb||jp&&vs(jp.resolve())!=cb||Gp&&vs(new Gp)!=ub||Kp&&vs(new Kp)!=hb)&&(vs=function(e){var t=Ua(e),r=t==n8?e.constructor:void 0,i=r?Hs(r):"";if(i)switch(i){case s8:return db;case a8:return lb;case o8:return cb;case l8:return ub;case c8:return hb}return t});var u8="[object Map]",h8="[object Set]",d8=Object.prototype,f8=d8.hasOwnProperty;function Wf(e){if(e==null)return!0;if(Rh(e)&&(Bu(e)||typeof e=="string"||typeof e.splice=="function"||vg(e)||gg(e)||Au(e)))return!e.length;var t=vs(e);if(t==u8||t==h8)return!e.size;if(Lh(e))return!i8(e).length;for(var r in e)if(f8.call(e,r))return!1;return!0}const Yi={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Ue={trace:(...e)=>{},debug:(...e)=>{},info:(...e)=>{},warn:(...e)=>{},error:(...e)=>{},fatal:(...e)=>{}},_g=function(e="fatal"){let t=Yi.fatal;typeof e=="string"?(e=e.toLowerCase(),e in Yi&&(t=Yi[e])):typeof e=="number"&&(t=e),Ue.trace=()=>{},Ue.debug=()=>{},Ue.info=()=>{},Ue.warn=()=>{},Ue.error=()=>{},Ue.fatal=()=>{},t<=Yi.fatal&&(Ue.fatal=console.error?console.error.bind(console,ei("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",ei("FATAL"))),t<=Yi.error&&(Ue.error=console.error?console.error.bind(console,ei("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",ei("ERROR"))),t<=Yi.warn&&(Ue.warn=console.warn?console.warn.bind(console,ei("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",ei("WARN"))),t<=Yi.info&&(Ue.info=console.info?console.info.bind(console,ei("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",ei("INFO"))),t<=Yi.debug&&(Ue.debug=console.debug?console.debug.bind(console,ei("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ei("DEBUG"))),t<=Yi.trace&&(Ue.trace=console.debug?console.debug.bind(console,ei("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",ei("TRACE")))},ei=e=>`%c${eF().format("ss.SSS")} : ${e} : `,Il=/<br\s*\/?>/gi,p8=e=>e?dk(e).replace(/\\n/g,"#br#").split("#br#"):[""],v8=(()=>{let e=!1;return()=>{e||(g8(),e=!0)}})();function g8(){const e="data-temp-href-target";Ba.addHook("beforeSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute("target")&&t.setAttribute(e,t.getAttribute("target")||"")}),Ba.addHook("afterSanitizeAttributes",t=>{t.tagName==="A"&&t.hasAttribute(e)&&(t.setAttribute("target",t.getAttribute(e)||""),t.removeAttribute(e),t.getAttribute("target")==="_blank"&&t.setAttribute("rel","noopener"))})}const hk=e=>(v8(),Ba.sanitize(e)),fb=(e,t)=>{var r;if(((r=t.flowchart)==null?void 0:r.htmlLabels)!==!1){const i=t.securityLevel;i==="antiscript"||i==="strict"?e=hk(e):i!=="loose"&&(e=dk(e),e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),e=e.replace(/=/g,"&equals;"),e=b8(e))}return e},Ra=(e,t)=>e&&(t.dompurifyConfig?e=Ba.sanitize(fb(e,t),t.dompurifyConfig).toString():e=Ba.sanitize(fb(e,t),{FORBID_TAGS:["style"]}).toString(),e),m8=(e,t)=>typeof e=="string"?Ra(e,t):e.flat().map(r=>Ra(r,t)),y8=e=>Il.test(e),_8=e=>e.split(Il),b8=e=>e.replace(/#br#/g,"<br/>"),dk=e=>e.replace(Il,"#br#"),C8=e=>{let t="";return e&&(t=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,t=t.replaceAll(/\(/g,"\\("),t=t.replaceAll(/\)/g,"\\)")),t},fk=e=>!(e===!1||["false","null","0"].includes(String(e).trim().toLowerCase())),w8=function(...e){const t=e.filter(r=>!isNaN(r));return Math.max(...t)},S8=function(...e){const t=e.filter(r=>!isNaN(r));return Math.min(...t)},hte=function(e){const t=e.split(/(,)/),r=[];for(let i=0;i<t.length;i++){let n=t[i];if(n===","&&i>0&&i+1<t.length){const s=t[i-1],a=t[i+1];k8(s,a)&&(n=s+","+a,i++,r.pop())}r.push(x8(n))}return r.join("")},Yp=(e,t)=>Math.max(0,e.split(t).length-1),k8=(e,t)=>{const r=Yp(e,"~"),i=Yp(t,"~");return r===1&&i===1},x8=e=>{const t=Yp(e,"~");let r=!1;if(t<=1)return e;t%2!==0&&e.startsWith("~")&&(e=e.substring(1),r=!0);const i=[...e];let n=i.indexOf("~"),s=i.lastIndexOf("~");for(;n!==-1&&s!==-1&&n!==s;)i[n]="<",i[s]=">",n=i.indexOf("~"),s=i.lastIndexOf("~");return r&&i.unshift("~"),i.join("")},pb=()=>window.MathMLElement!==void 0,Xp=/\$\$(.*)\$\$/g,vb=e=>{var t;return(((t=e.match(Xp))==null?void 0:t.length)??0)>0},dte=async(e,t)=>{const r=document.createElement("div");r.innerHTML=await E8(e,t),r.id="katex-temp",r.style.visibility="hidden",r.style.position="absolute",r.style.top="0";const i=document.querySelector("body");i==null||i.insertAdjacentElement("beforeend",r);const n={width:r.clientWidth,height:r.clientHeight};return r.remove(),n},T8=async(e,t)=>{if(!vb(e))return e;if(!pb()&&!t.legacyMathML)return e.replace(Xp,"MathML is unsupported in this environment.");const{default:r}=await Ft(async()=>{const{default:i}=await import("./chunks/katex-ChWnQ-fc.js");return{default:i}},[]);return e.split(Il).map(i=>vb(i)?`
            <div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">
              ${i}
            </div>
          `:`<div>${i}</div>`).join("").replace(Xp,(i,n)=>r.renderToString(n,{throwOnError:!0,displayMode:!0,output:pb()?"mathml":"htmlAndMathml"}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},E8=async(e,t)=>Ra(await T8(e,t),t),bg={getRows:p8,sanitizeText:Ra,sanitizeTextOrArray:m8,hasBreaks:y8,splitBreaks:_8,lineBreakRegex:Il,removeScript:hk,getUrl:C8,evaluate:fk,getMax:w8,getMin:S8},Rr=(e,t)=>t?le(e,{s:-40,l:10}):le(e,{s:-40,l:-10}),Ih="#ffffff",Fh="#f2f2f2";let A8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var t,r,i,n,s,a,o,l,c,u,h;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||le(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||le(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||Rr(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||Rr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||Rr(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||Rr(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||Te(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||Te(this.tertiaryColor),this.lineColor=this.lineColor||Te(this.background),this.arrowheadColor=this.arrowheadColor||Te(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?Ve(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||Ve(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||Te(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||ze(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||le(this.primaryColor,{h:30}),this.cScale4=this.cScale4||le(this.primaryColor,{h:60}),this.cScale5=this.cScale5||le(this.primaryColor,{h:90}),this.cScale6=this.cScale6||le(this.primaryColor,{h:120}),this.cScale7=this.cScale7||le(this.primaryColor,{h:150}),this.cScale8=this.cScale8||le(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||le(this.primaryColor,{h:270}),this.cScale10=this.cScale10||le(this.primaryColor,{h:300}),this.cScale11=this.cScale11||le(this.primaryColor,{h:330}),this.darkMode)for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=Ve(this["cScale"+p],75);else for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScale"+p]=Ve(this["cScale"+p],25);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleInv"+p]=this["cScaleInv"+p]||Te(this["cScale"+p]);for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this.darkMode?this["cScalePeer"+p]=this["cScalePeer"+p]||ze(this["cScale"+p],10):this["cScalePeer"+p]=this["cScalePeer"+p]||Ve(this["cScale"+p],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let p=0;p<this.THEME_COLOR_LIMIT;p++)this["cScaleLabel"+p]=this["cScaleLabel"+p]||this.scaleLabelColor;const d=this.darkMode?-4:-1;for(let p=0;p<5;p++)this["surface"+p]=this["surface"+p]||le(this.mainBkg,{h:180,s:-15,l:d*(5+p*3)}),this["surfacePeer"+p]=this["surfacePeer"+p]||le(this.mainBkg,{h:180,s:-15,l:d*(8+p*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||le(this.primaryColor,{h:64}),this.fillType3=this.fillType3||le(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||le(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||le(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||le(this.primaryColor,{h:128}),this.fillType7=this.fillType7||le(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||le(this.primaryColor,{l:-10}),this.pie5=this.pie5||le(this.secondaryColor,{l:-10}),this.pie6=this.pie6||le(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||le(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||le(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||le(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||le(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||le(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||le(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||le(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||le(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||le(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||le(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||le(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||le(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rl(this.quadrant1Fill)?ze(this.quadrant1Fill):Ve(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ve(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||le(this.primaryColor,{h:-30}),this.git4=this.git4||le(this.primaryColor,{h:-60}),this.git5=this.git5||le(this.primaryColor,{h:-90}),this.git6=this.git6||le(this.primaryColor,{h:60}),this.git7=this.git7||le(this.primaryColor,{h:120}),this.darkMode?(this.git0=ze(this.git0,25),this.git1=ze(this.git1,25),this.git2=ze(this.git2,25),this.git3=ze(this.git3,25),this.git4=ze(this.git4,25),this.git5=ze(this.git5,25),this.git6=ze(this.git6,25),this.git7=ze(this.git7,25)):(this.git0=Ve(this.git0,25),this.git1=Ve(this.git1,25),this.git2=Ve(this.git2,25),this.git3=Ve(this.git3,25),this.git4=Ve(this.git4,25),this.git5=Ve(this.git5,25),this.git6=Ve(this.git6,25),this.git7=Ve(this.git7,25)),this.gitInv0=this.gitInv0||Te(this.git0),this.gitInv1=this.gitInv1||Te(this.git1),this.gitInv2=this.gitInv2||Te(this.git2),this.gitInv3=this.gitInv3||Te(this.git3),this.gitInv4=this.gitInv4||Te(this.git4),this.gitInv5=this.gitInv5||Te(this.git5),this.gitInv6=this.gitInv6||Te(this.git6),this.gitInv7=this.gitInv7||Te(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ih,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}};const B8=e=>{const t=new A8;return t.calculate(e),t};let D8=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=ze(this.primaryColor,16),this.tertiaryColor=le(this.primaryColor,{h:-160}),this.primaryBorderColor=Te(this.background),this.secondaryBorderColor=Rr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Rr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Te(this.primaryColor),this.secondaryTextColor=Te(this.secondaryColor),this.tertiaryTextColor=Te(this.tertiaryColor),this.lineColor=Te(this.background),this.textColor=Te(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=ze(Te("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=Mo(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=Ve("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=Ve(this.sectionBkgColor,10),this.taskBorderColor=Mo(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=Mo(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var t,r,i,n,s,a,o,l,c,u,h;this.secondBkg=ze(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=ze(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=ze(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=le(this.primaryColor,{h:64}),this.fillType3=le(this.secondaryColor,{h:64}),this.fillType4=le(this.primaryColor,{h:-64}),this.fillType5=le(this.secondaryColor,{h:-64}),this.fillType6=le(this.primaryColor,{h:128}),this.fillType7=le(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||le(this.primaryColor,{h:30}),this.cScale4=this.cScale4||le(this.primaryColor,{h:60}),this.cScale5=this.cScale5||le(this.primaryColor,{h:90}),this.cScale6=this.cScale6||le(this.primaryColor,{h:120}),this.cScale7=this.cScale7||le(this.primaryColor,{h:150}),this.cScale8=this.cScale8||le(this.primaryColor,{h:210}),this.cScale9=this.cScale9||le(this.primaryColor,{h:270}),this.cScale10=this.cScale10||le(this.primaryColor,{h:300}),this.cScale11=this.cScale11||le(this.primaryColor,{h:330});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Te(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScalePeer"+d]=this["cScalePeer"+d]||ze(this["cScale"+d],10);for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||le(this.mainBkg,{h:30,s:-30,l:-(-10+d*4)}),this["surfacePeer"+d]=this["surfacePeer"+d]||le(this.mainBkg,{h:30,s:-30,l:-(-7+d*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||le(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||le(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||le(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||le(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||le(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||le(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rl(this.quadrant1Fill)?ze(this.quadrant1Fill):Ve(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?Ve(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=ze(this.secondaryColor,20),this.git1=ze(this.pie2||this.secondaryColor,20),this.git2=ze(this.pie3||this.tertiaryColor,20),this.git3=ze(this.pie4||le(this.primaryColor,{h:-30}),20),this.git4=ze(this.pie5||le(this.primaryColor,{h:-60}),20),this.git5=ze(this.pie6||le(this.primaryColor,{h:-90}),10),this.git6=ze(this.pie7||le(this.primaryColor,{h:60}),10),this.git7=ze(this.pie8||le(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||Te(this.git0),this.gitInv1=this.gitInv1||Te(this.git1),this.gitInv2=this.gitInv2||Te(this.git2),this.gitInv3=this.gitInv3||Te(this.git3),this.gitInv4=this.gitInv4||Te(this.git4),this.gitInv5=this.gitInv5||Te(this.git5),this.gitInv6=this.gitInv6||Te(this.git6),this.gitInv7=this.gitInv7||Te(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Te(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Te(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||ze(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||ze(this.background,2)}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}};const L8=e=>{const t=new D8;return t.calculate(e),t};let R8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=le(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=le(this.primaryColor,{h:-160}),this.primaryBorderColor=Rr(this.primaryColor,this.darkMode),this.secondaryBorderColor=Rr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Rr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Te(this.primaryColor),this.secondaryTextColor=Te(this.secondaryColor),this.tertiaryTextColor=Te(this.tertiaryColor),this.lineColor=Te(this.background),this.textColor=Te(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=Mo(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var t,r,i,n,s,a,o,l,c,u,h;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||le(this.primaryColor,{h:30}),this.cScale4=this.cScale4||le(this.primaryColor,{h:60}),this.cScale5=this.cScale5||le(this.primaryColor,{h:90}),this.cScale6=this.cScale6||le(this.primaryColor,{h:120}),this.cScale7=this.cScale7||le(this.primaryColor,{h:150}),this.cScale8=this.cScale8||le(this.primaryColor,{h:210}),this.cScale9=this.cScale9||le(this.primaryColor,{h:270}),this.cScale10=this.cScale10||le(this.primaryColor,{h:300}),this.cScale11=this.cScale11||le(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ve(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ve(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=Ve(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||Ve(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||le(this["cScale"+d],{h:180});for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||le(this.mainBkg,{h:30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||le(this.mainBkg,{h:30,l:-(7+d*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||Te(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||Te(this.labelTextColor);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=ze(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=le(this.primaryColor,{h:64}),this.fillType3=le(this.secondaryColor,{h:64}),this.fillType4=le(this.primaryColor,{h:-64}),this.fillType5=le(this.secondaryColor,{h:-64}),this.fillType6=le(this.primaryColor,{h:128}),this.fillType7=le(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||le(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||le(this.primaryColor,{l:-10}),this.pie5=this.pie5||le(this.secondaryColor,{l:-30}),this.pie6=this.pie6||le(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||le(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||le(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||le(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||le(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||le(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||le(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||le(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||le(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||le(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||le(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||le(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||le(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rl(this.quadrant1Fill)?ze(this.quadrant1Fill):Ve(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||le(this.primaryColor,{h:-30}),this.git4=this.git4||le(this.primaryColor,{h:-60}),this.git5=this.git5||le(this.primaryColor,{h:-90}),this.git6=this.git6||le(this.primaryColor,{h:60}),this.git7=this.git7||le(this.primaryColor,{h:120}),this.darkMode?(this.git0=ze(this.git0,25),this.git1=ze(this.git1,25),this.git2=ze(this.git2,25),this.git3=ze(this.git3,25),this.git4=ze(this.git4,25),this.git5=ze(this.git5,25),this.git6=ze(this.git6,25),this.git7=ze(this.git7,25)):(this.git0=Ve(this.git0,25),this.git1=Ve(this.git1,25),this.git2=Ve(this.git2,25),this.git3=Ve(this.git3,25),this.git4=Ve(this.git4,25),this.git5=Ve(this.git5,25),this.git6=Ve(this.git6,25),this.git7=Ve(this.git7,25)),this.gitInv0=this.gitInv0||Ve(Te(this.git0),25),this.gitInv1=this.gitInv1||Te(this.git1),this.gitInv2=this.gitInv2||Te(this.git2),this.gitInv3=this.gitInv3||Te(this.git3),this.gitInv4=this.gitInv4||Te(this.git4),this.gitInv5=this.gitInv5||Te(this.git5),this.gitInv6=this.gitInv6||Te(this.git6),this.gitInv7=this.gitInv7||Te(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Te(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Te(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ih,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}};const M8=e=>{const t=new R8;return t.calculate(e),t};let P8=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=ze("#cde498",10),this.primaryBorderColor=Rr(this.primaryColor,this.darkMode),this.secondaryBorderColor=Rr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Rr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Te(this.primaryColor),this.secondaryTextColor=Te(this.secondaryColor),this.tertiaryTextColor=Te(this.primaryColor),this.lineColor=Te(this.background),this.textColor=Te(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,n,s,a,o,l,c,u,h;this.actorBorder=Ve(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||le(this.primaryColor,{h:30}),this.cScale4=this.cScale4||le(this.primaryColor,{h:60}),this.cScale5=this.cScale5||le(this.primaryColor,{h:90}),this.cScale6=this.cScale6||le(this.primaryColor,{h:120}),this.cScale7=this.cScale7||le(this.primaryColor,{h:150}),this.cScale8=this.cScale8||le(this.primaryColor,{h:210}),this.cScale9=this.cScale9||le(this.primaryColor,{h:270}),this.cScale10=this.cScale10||le(this.primaryColor,{h:300}),this.cScale11=this.cScale11||le(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||Ve(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||Ve(this.tertiaryColor,40);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScale"+d]=Ve(this["cScale"+d],10),this["cScalePeer"+d]=this["cScalePeer"+d]||Ve(this["cScale"+d],25);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||le(this["cScale"+d],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||le(this.mainBkg,{h:30,s:-30,l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||le(this.mainBkg,{h:30,s:-30,l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=le(this.primaryColor,{h:64}),this.fillType3=le(this.secondaryColor,{h:64}),this.fillType4=le(this.primaryColor,{h:-64}),this.fillType5=le(this.secondaryColor,{h:-64}),this.fillType6=le(this.primaryColor,{h:128}),this.fillType7=le(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||le(this.primaryColor,{l:-30}),this.pie5=this.pie5||le(this.secondaryColor,{l:-30}),this.pie6=this.pie6||le(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||le(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||le(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||le(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||le(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||le(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||le(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||le(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||le(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||le(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||le(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||le(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||le(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rl(this.quadrant1Fill)?ze(this.quadrant1Fill):Ve(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||le(this.primaryColor,{h:-30}),this.git4=this.git4||le(this.primaryColor,{h:-60}),this.git5=this.git5||le(this.primaryColor,{h:-90}),this.git6=this.git6||le(this.primaryColor,{h:60}),this.git7=this.git7||le(this.primaryColor,{h:120}),this.darkMode?(this.git0=ze(this.git0,25),this.git1=ze(this.git1,25),this.git2=ze(this.git2,25),this.git3=ze(this.git3,25),this.git4=ze(this.git4,25),this.git5=ze(this.git5,25),this.git6=ze(this.git6,25),this.git7=ze(this.git7,25)):(this.git0=Ve(this.git0,25),this.git1=Ve(this.git1,25),this.git2=Ve(this.git2,25),this.git3=Ve(this.git3,25),this.git4=Ve(this.git4,25),this.git5=Ve(this.git5,25),this.git6=Ve(this.git6,25),this.git7=Ve(this.git7,25)),this.gitInv0=this.gitInv0||Te(this.git0),this.gitInv1=this.gitInv1||Te(this.git1),this.gitInv2=this.gitInv2||Te(this.git2),this.gitInv3=this.gitInv3||Te(this.git3),this.gitInv4=this.gitInv4||Te(this.git4),this.gitInv5=this.gitInv5||Te(this.git5),this.gitInv6=this.gitInv6||Te(this.git6),this.gitInv7=this.gitInv7||Te(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||Te(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||Te(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ih,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}};const I8=e=>{const t=new P8;return t.calculate(e),t};class F8{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=ze(this.contrast,55),this.background="#ffffff",this.tertiaryColor=le(this.primaryColor,{h:-160}),this.primaryBorderColor=Rr(this.primaryColor,this.darkMode),this.secondaryBorderColor=Rr(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=Rr(this.tertiaryColor,this.darkMode),this.primaryTextColor=Te(this.primaryColor),this.secondaryTextColor=Te(this.secondaryColor),this.tertiaryTextColor=Te(this.tertiaryColor),this.lineColor=Te(this.background),this.textColor=Te(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var t,r,i,n,s,a,o,l,c,u,h;this.secondBkg=ze(this.contrast,55),this.border2=this.contrast,this.actorBorder=ze(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleInv"+d]=this["cScaleInv"+d]||Te(this["cScale"+d]);for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this.darkMode?this["cScalePeer"+d]=this["cScalePeer"+d]||ze(this["cScale"+d],10):this["cScalePeer"+d]=this["cScalePeer"+d]||Ve(this["cScale"+d],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["cScaleLabel"+d]=this["cScaleLabel"+d]||this.scaleLabelColor;for(let d=0;d<5;d++)this["surface"+d]=this["surface"+d]||le(this.mainBkg,{l:-(5+d*5)}),this["surfacePeer"+d]=this["surfacePeer"+d]||le(this.mainBkg,{l:-(8+d*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=ze(this.contrast,30),this.sectionBkgColor2=ze(this.contrast,30),this.taskBorderColor=Ve(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=ze(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=Ve(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=le(this.primaryColor,{h:64}),this.fillType3=le(this.secondaryColor,{h:64}),this.fillType4=le(this.primaryColor,{h:-64}),this.fillType5=le(this.secondaryColor,{h:-64}),this.fillType6=le(this.primaryColor,{h:128}),this.fillType7=le(this.secondaryColor,{h:128});for(let d=0;d<this.THEME_COLOR_LIMIT;d++)this["pie"+d]=this["cScale"+d];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||le(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||le(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||le(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||le(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||le(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||le(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||Rl(this.quadrant1Fill)?ze(this.quadrant1Fill):Ve(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((t=this.xyChart)==null?void 0:t.backgroundColor)||this.background,titleColor:((r=this.xyChart)==null?void 0:r.titleColor)||this.primaryTextColor,xAxisTitleColor:((i=this.xyChart)==null?void 0:i.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((n=this.xyChart)==null?void 0:n.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((s=this.xyChart)==null?void 0:s.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((a=this.xyChart)==null?void 0:a.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((o=this.xyChart)==null?void 0:o.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:((l=this.xyChart)==null?void 0:l.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((c=this.xyChart)==null?void 0:c.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((u=this.xyChart)==null?void 0:u.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((h=this.xyChart)==null?void 0:h.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=Ve(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||le(this.primaryColor,{h:-30}),this.git4=this.pie5||le(this.primaryColor,{h:-60}),this.git5=this.pie6||le(this.primaryColor,{h:-90}),this.git6=this.pie7||le(this.primaryColor,{h:60}),this.git7=this.pie8||le(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||Te(this.git0),this.gitInv1=this.gitInv1||Te(this.git1),this.gitInv2=this.gitInv2||Te(this.git2),this.gitInv3=this.gitInv3||Te(this.git3),this.gitInv4=this.gitInv4||Te(this.git4),this.gitInv5=this.gitInv5||Te(this.git5),this.gitInv6=this.gitInv6||Te(this.git6),this.gitInv7=this.gitInv7||Te(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||Ih,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||Fh}calculate(t){if(typeof t!="object"){this.updateColors();return}const r=Object.keys(t);r.forEach(i=>{this[i]=t[i]}),this.updateColors(),r.forEach(i=>{this[i]=t[i]})}}const O8=e=>{const t=new F8;return t.calculate(e),t},on={base:{getThemeVariables:B8},dark:{getThemeVariables:L8},default:{getThemeVariables:M8},forest:{getThemeVariables:I8},neutral:{getThemeVariables:O8}},Xi={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},pk={...Xi,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:on.default.getThemeVariables(),sequence:{...Xi.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...Xi.gantt,tickInterval:void 0,useWidth:void 0},c4:{...Xi.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...Xi.pie,useWidth:984},xyChart:{...Xi.xyChart,useWidth:void 0},requirement:{...Xi.requirement,useWidth:void 0},gitGraph:{...Xi.gitGraph,useMaxWidth:!1},sankey:{...Xi.sankey,useMaxWidth:!1}},vk=(e,t="")=>Object.keys(e).reduce((r,i)=>Array.isArray(e[i])?r:typeof e[i]=="object"&&e[i]!==null?[...r,t+i,...vk(e[i],"")]:[...r,t+i],[]),N8=new Set(vk(pk,"")),$8=pk,Du=e=>{if(Ue.debug("sanitizeDirective called with",e),!(typeof e!="object"||e==null)){if(Array.isArray(e)){e.forEach(t=>Du(t));return}for(const t of Object.keys(e)){if(Ue.debug("Checking key",t),t.startsWith("__")||t.includes("proto")||t.includes("constr")||!N8.has(t)||e[t]==null){Ue.debug("sanitize deleting key: ",t),delete e[t];continue}if(typeof e[t]=="object"){Ue.debug("sanitizing object",t),Du(e[t]);continue}const r=["themeCSS","fontFamily","altFontFamily"];for(const i of r)t.includes(i)&&(Ue.debug("sanitizing css option",t),e[t]=z8(e[t]))}if(e.themeVariables)for(const t of Object.keys(e.themeVariables)){const r=e.themeVariables[t];r!=null&&r.match&&!r.match(/^[\d "#%(),.;A-Za-z]+$/)&&(e.themeVariables[t]="")}Ue.debug("After sanitization",e)}},z8=e=>{let t=0,r=0;for(const i of e){if(t<r)return"{ /* ERROR: Unbalanced CSS */ }";i==="{"?t++:i==="}"&&r++}return t!==r?"{ /* ERROR: Unbalanced CSS */ }":e},gk=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,Io=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,H8=/\s*%%.*\n/gm;class mk extends Error{constructor(t){super(t),this.name="UnknownDiagramError"}}const Ma={},Oh=function(e,t){e=e.replace(gk,"").replace(Io,"").replace(H8,`
`);for(const[r,{detector:i}]of Object.entries(Ma))if(i(e,t))return r;throw new mk(`No diagram type detected matching given configuration for text: ${e}`)},yk=(...e)=>{for(const{id:t,detector:r,loader:i}of e)_k(t,r,i)},_k=(e,t,r)=>{Ma[e]?Ue.error(`Detector with key ${e} already exists`):Ma[e]={detector:t,loader:r},Ue.debug(`Detector with key ${e} added${r?" with loader":""}`)},q8=e=>Ma[e].loader,Zp=(e,t,{depth:r=2,clobber:i=!1}={})=>{const n={depth:r,clobber:i};return Array.isArray(t)&&!Array.isArray(e)?(t.forEach(s=>Zp(e,s,n)),e):Array.isArray(t)&&Array.isArray(e)?(t.forEach(s=>{e.includes(s)||e.push(s)}),e):e===void 0||r<=0?e!=null&&typeof e=="object"&&typeof t=="object"?Object.assign(e,t):t:(t!==void 0&&typeof e=="object"&&typeof t=="object"&&Object.keys(t).forEach(s=>{typeof t[s]=="object"&&(e[s]===void 0||typeof e[s]=="object")?(e[s]===void 0&&(e[s]=Array.isArray(t[s])?[]:{}),e[s]=Zp(e[s],t[s],{depth:r-1,clobber:i})):(i||typeof e[s]!="object"&&typeof t[s]!="object")&&(e[s]=t[s])}),e)},_r=Zp,W8="",U8={curveBasis:b4,curveBasisClosed:C4,curveBasisOpen:w4,curveBumpX:y4,curveBumpY:_4,curveBundle:S4,curveCardinalClosed:x4,curveCardinalOpen:T4,curveCardinal:k4,curveCatmullRomClosed:A4,curveCatmullRomOpen:B4,curveCatmullRom:E4,curveLinear:m4,curveLinearClosed:D4,curveMonotoneX:L4,curveMonotoneY:R4,curveNatural:M4,curveStep:P4,curveStepAfter:F4,curveStepBefore:I4},V8=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,j8=function(e,t){const r=bk(e,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(r)){const a=r.map(o=>o.args);Du(a),i=_r(i,[...a])}else i=r.args;if(!i)return;let n=Oh(e,t);const s="config";return i[s]!==void 0&&(n==="flowchart-v2"&&(n="flowchart"),i[n]=i[s],delete i[s]),i},bk=function(e,t=null){try{const r=new RegExp(`[%]{2}(?![{]${V8.source})(?=[}][%]{2}).*
`,"ig");e=e.trim().replace(r,"").replace(/'/gm,'"'),Ue.debug(`Detecting diagram directive${t!==null?" type:"+t:""} based on the text:${e}`);let i;const n=[];for(;(i=Io.exec(e))!==null;)if(i.index===Io.lastIndex&&Io.lastIndex++,i&&!t||t&&i[1]&&i[1].match(t)||t&&i[2]&&i[2].match(t)){const s=i[1]?i[1]:i[2],a=i[3]?i[3].trim():i[4]?JSON.parse(i[4].trim()):null;n.push({type:s,args:a})}return n.length===0?{type:e,args:null}:n.length===1?n[0]:n}catch(r){return Ue.error(`ERROR: ${r.message} - Unable to parse directive type: '${t}' based on the text: '${e}'`),{type:void 0,args:null}}},G8=function(e){return e.replace(Io,"")},K8=function(e,t){for(const[r,i]of t.entries())if(i.match(e))return r;return-1};function Y8(e,t){if(!e)return t;const r=`curve${e.charAt(0).toUpperCase()+e.slice(1)}`;return U8[r]??t}function X8(e,t){const r=e.trim();if(r)return t.securityLevel!=="loose"?rF.sanitizeUrl(r):r}const Z8=(e,...t)=>{const r=e.split("."),i=r.length-1,n=r[i];let s=window;for(let a=0;a<i;a++)if(s=s[r[a]],!s){Ue.error(`Function name: ${e} not found in window`);return}s[n](...t)};function Ck(e,t){return!e||!t?0:Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Q8(e){let t,r=0;e.forEach(n=>{r+=Ck(n,t),t=n});const i=r/2;return Cg(e,i)}function J8(e){return e.length===1?e[0]:Q8(e)}const gb=(e,t=2)=>{const r=Math.pow(10,t);return Math.round(e*r)/r},Cg=(e,t)=>{let r,i=t;for(const n of e){if(r){const s=Ck(n,r);if(s<i)i-=s;else{const a=i/s;if(a<=0)return r;if(a>=1)return{x:n.x,y:n.y};if(a>0&&a<1)return{x:gb((1-a)*r.x+a*n.x,5),y:gb((1-a)*r.y+a*n.y,5)}}}r=n}throw new Error("Could not find a suitable point for the given distance")},ez=(e,t,r)=>{Ue.info(`our points ${JSON.stringify(t)}`),t[0]!==r&&(t=t.reverse());const n=Cg(t,25),s=e?10:5,a=Math.atan2(t[0].y-n.y,t[0].x-n.x),o={x:0,y:0};return o.x=Math.sin(a)*s+(t[0].x+n.x)/2,o.y=-Math.cos(a)*s+(t[0].y+n.y)/2,o};function tz(e,t,r){const i=structuredClone(r);Ue.info("our points",i),t!=="start_left"&&t!=="start_right"&&i.reverse();const n=25+e,s=Cg(i,n),a=10+e*.5,o=Math.atan2(i[0].y-s.y,i[0].x-s.x),l={x:0,y:0};return t==="start_left"?(l.x=Math.sin(o+Math.PI)*a+(i[0].x+s.x)/2,l.y=-Math.cos(o+Math.PI)*a+(i[0].y+s.y)/2):t==="end_right"?(l.x=Math.sin(o-Math.PI)*a+(i[0].x+s.x)/2-5,l.y=-Math.cos(o-Math.PI)*a+(i[0].y+s.y)/2-5):t==="end_left"?(l.x=Math.sin(o)*a+(i[0].x+s.x)/2-5,l.y=-Math.cos(o)*a+(i[0].y+s.y)/2-5):(l.x=Math.sin(o)*a+(i[0].x+s.x)/2,l.y=-Math.cos(o)*a+(i[0].y+s.y)/2),l}function rz(e){let t="",r="";for(const i of e)i!==void 0&&(i.startsWith("color:")||i.startsWith("text-align:")?r=r+i+";":t=t+i+";");return{style:t,labelStyle:r}}let mb=0;const iz=()=>(mb++,"id-"+Math.random().toString(36).substr(2,12)+"-"+mb);function nz(e){let t="";const r="0123456789abcdef",i=r.length;for(let n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*i));return t}const sz=e=>nz(e.length),az=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},oz=function(e,t){const r=t.text.replace(bg.lineBreakRegex," "),[,i]=Sg(t.fontSize),n=e.append("text");n.attr("x",t.x),n.attr("y",t.y),n.style("text-anchor",t.anchor),n.style("font-family",t.fontFamily),n.style("font-size",i),n.style("font-weight",t.fontWeight),n.attr("fill",t.fill),t.class!==void 0&&n.attr("class",t.class);const s=n.append("tspan");return s.attr("x",t.x+t.textMargin*2),s.attr("fill",t.fill),s.text(r),n},lz=Ml((e,t,r)=>{if(!e||(r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},r),bg.lineBreakRegex.test(e)))return e;const i=e.split(" "),n=[];let s="";return i.forEach((a,o)=>{const l=Lu(`${a} `,r),c=Lu(s,r);if(l>t){const{hyphenatedStrings:d,remainingWord:p}=cz(a,t,"-",r);n.push(s,...d),s=p}else c+l>=t?(n.push(s),s=a):s=[s,a].filter(Boolean).join(" ");o+1===i.length&&n.push(s)}),n.filter(a=>a!=="").join(r.joinWith)},(e,t,r)=>`${e}${t}${r.fontSize}${r.fontWeight}${r.fontFamily}${r.joinWith}`),cz=Ml((e,t,r="-",i)=>{i=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},i);const n=[...e],s=[];let a="";return n.forEach((o,l)=>{const c=`${a}${o}`;if(Lu(c,i)>=t){const h=l+1,d=n.length===h,p=`${c}${r}`;s.push(d?c:p),a=""}else a=c}),{hyphenatedStrings:s,remainingWord:a}},(e,t,r="-",i)=>`${e}${t}${r}${i.fontSize}${i.fontWeight}${i.fontFamily}`);function uz(e,t){return wg(e,t).height}function Lu(e,t){return wg(e,t).width}const wg=Ml((e,t)=>{const{fontSize:r=12,fontFamily:i="Arial",fontWeight:n=400}=t;if(!e)return{width:0,height:0};const[,s]=Sg(r),a=["sans-serif",i],o=e.split(bg.lineBreakRegex),l=[],c=ri("body");if(!c.remove)return{width:0,height:0,lineHeight:0};const u=c.append("svg");for(const d of a){let p=0;const y={width:0,height:0,lineHeight:0};for(const _ of o){const v=az();v.text=_||W8;const g=oz(u,v).style("font-size",s).style("font-weight",n).style("font-family",d),f=(g._groups||g)[0][0].getBBox();if(f.width===0&&f.height===0)throw new Error("svg element not in render tree");y.width=Math.round(Math.max(y.width,f.width)),p=Math.round(f.height),y.height+=p,y.lineHeight=Math.round(Math.max(y.lineHeight,p))}l.push(y)}u.remove();const h=isNaN(l[1].height)||isNaN(l[1].width)||isNaN(l[1].lineHeight)||l[0].height>l[1].height&&l[0].width>l[1].width&&l[0].lineHeight>l[1].lineHeight?0:1;return l[h]},(e,t)=>`${e}${t.fontSize}${t.fontWeight}${t.fontFamily}`);class hz{constructor(t=!1,r){this.count=0,this.count=r?r.length:0,this.next=t?()=>this.count++:()=>Date.now()}}let uc;const dz=function(e){return uc=uc||document.createElement("div"),e=escape(e).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),uc.innerHTML=e,unescape(uc.textContent)};function wk(e){return"str"in e}const fz=(e,t,r,i)=>{var n;if(!i)return;const s=(n=e.node())==null?void 0:n.getBBox();s&&e.append("text").text(i).attr("x",s.x+s.width/2).attr("y",-r).attr("class",t)},Sg=e=>{if(typeof e=="number")return[e,e+"px"];const t=parseInt(e??"",10);return Number.isNaN(t)?[void 0,void 0]:e===String(t)?[t,e+"px"]:[t,e]};function Sk(e,t){return F$({},e,t)}const Fo={assignWithDepth:_r,wrapLabel:lz,calculateTextHeight:uz,calculateTextWidth:Lu,calculateTextDimensions:wg,cleanAndMerge:Sk,detectInit:j8,detectDirective:bk,isSubstringInArray:K8,interpolateToCurve:Y8,calcLabelPosition:J8,calcCardinalityPosition:ez,calcTerminalLabelPosition:tz,formatUrl:X8,getStylesFromArray:rz,generateId:iz,random:sz,runFunc:Z8,entityDecode:dz,insertTitle:fz,parseFontSize:Sg,InitIDGenerator:hz},pz=function(e){let t=e;return t=t.replace(/style.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/classDef.*:\S*#.*;/g,function(r){return r.substring(0,r.length-1)}),t=t.replace(/#\w+;/g,function(r){const i=r.substring(1,r.length-1);return/^\+?\d+$/.test(i)?""+i+"":""+i+""}),t},vz=function(e){return e.replace(//g,"&#").replace(//g,"&").replace(//g,";")},yb="10.9.4",Pa=Object.freeze($8);let $r=_r({},Pa),kk,Ia=[],Oo=_r({},Pa);const Nh=(e,t)=>{let r=_r({},e),i={};for(const n of t)Ek(n),i=_r(i,n);if(r=_r(r,i),i.theme&&i.theme in on){const n=_r({},kk),s=_r(n.themeVariables||{},i.themeVariables);r.theme&&r.theme in on&&(r.themeVariables=on[r.theme].getThemeVariables(s))}return Oo=r,Ak(Oo),Oo},gz=e=>($r=_r({},Pa),$r=_r($r,e),e.theme&&on[e.theme]&&($r.themeVariables=on[e.theme].getThemeVariables(e.themeVariables)),Nh($r,Ia),$r),mz=e=>{kk=_r({},e)},yz=e=>($r=_r($r,e),Nh($r,Ia),$r),xk=()=>_r({},$r),Tk=e=>(Ak(e),_r(Oo,e),zi()),zi=()=>_r({},Oo),Ek=e=>{e&&(["secure",...$r.secure??[]].forEach(t=>{Object.hasOwn(e,t)&&(Ue.debug(`Denied attempt to modify a secure key ${t}`,e[t]),delete e[t])}),Object.keys(e).forEach(t=>{t.startsWith("__")&&delete e[t]}),Object.keys(e).forEach(t=>{typeof e[t]=="string"&&(e[t].includes("<")||e[t].includes(">")||e[t].includes("url(data:"))&&delete e[t],typeof e[t]=="object"&&Ek(e[t])}))},_z=e=>{Du(e),e.fontFamily&&(!e.themeVariables||!e.themeVariables.fontFamily)&&(e.themeVariables={fontFamily:e.fontFamily}),Ia.push(e),Nh($r,Ia)},Ru=(e=$r)=>{Ia=[],Nh(e,Ia)},bz={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},_b={},Cz=e=>{_b[e]||(Ue.warn(bz[e]),_b[e]=!0)},Ak=e=>{e&&(e.lazyLoadedDiagrams||e.loadExternalDiagramsAtStartup)&&Cz("LAZY_LOAD_DEPRECATED")},Bk="c4",wz=e=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(e),Sz=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/c4Diagram-15b5d702-BtZobvnC.js");return{diagram:t}},__vite__mapDeps([0,1]));return{id:Bk,diagram:e}},kz={id:Bk,detector:wz,loader:Sz},xz=kz,Dk="flowchart",Tz=(e,t)=>{var r,i;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-wrapper"||((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)},Ez=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/flowDiagram-cbd28bf7-BBGv6jIm.js");return{diagram:t}},__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14]));return{id:Dk,diagram:e}},Az={id:Dk,detector:Tz,loader:Ez},Bz=Az,Lk="flowchart-v2",Dz=(e,t)=>{var r,i,n;return((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="dagre-d3"||((i=t==null?void 0:t.flowchart)==null?void 0:i.defaultRenderer)==="elk"?!1:/^\s*graph/.test(e)&&((n=t==null?void 0:t.flowchart)==null?void 0:n.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(e)},Lz=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/flowDiagram-v2-ffc7f31a-9uzUqGLS.js");return{diagram:t}},__vite__mapDeps([15,3,6,4,7,5,8,9,10,11,12,13,14]));return{id:Lk,diagram:e}},Rz={id:Lk,detector:Dz,loader:Lz},Mz=Rz,Rk="er",Pz=e=>/^\s*erDiagram/.test(e),Iz=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/erDiagram-880f2ed8-DGu80oZn.js");return{diagram:t}},__vite__mapDeps([16,4,5,11,12,13]));return{id:Rk,diagram:e}},Fz={id:Rk,detector:Pz,loader:Iz},Oz=Fz,Mk="gitGraph",Nz=e=>/^\s*gitGraph/.test(e),$z=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/gitGraphDiagram-21fc4d3e-B1MO5BMh.js");return{diagram:t}},[]);return{id:Mk,diagram:e}},zz={id:Mk,detector:Nz,loader:$z},Hz=zz,Pk="gantt",qz=e=>/^\s*gantt/.test(e),Wz=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/ganttDiagram-04f9e578-BHgJNci-.js");return{diagram:t}},__vite__mapDeps([17,18,19]));return{id:Pk,diagram:e}},Uz={id:Pk,detector:qz,loader:Wz},Vz=Uz,Ik="info",jz=e=>/^\s*info/.test(e),Gz=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/infoDiagram-4a4f5b27-B8l0jpZN.js");return{diagram:t}},[]);return{id:Ik,diagram:e}},Kz={id:Ik,detector:jz,loader:Gz},Fk="pie",Yz=e=>/^\s*pie/.test(e),Xz=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/pieDiagram-421022e6-Dv7vMdKC.js");return{diagram:t}},__vite__mapDeps([20,21,13,22,19,12]));return{id:Fk,diagram:e}},Zz={id:Fk,detector:Yz,loader:Xz},Ok="quadrantChart",Qz=e=>/^\s*quadrantChart/.test(e),Jz=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/quadrantDiagram-0957ecba-CADpULQT.js");return{diagram:t}},__vite__mapDeps([23,18,19]));return{id:Ok,diagram:e}},eH={id:Ok,detector:Qz,loader:Jz},tH=eH,Nk="xychart",rH=e=>/^\s*xychart-beta/.test(e),iH=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/xychartDiagram-b6496bcd-C15EwDeW.js");return{diagram:t}},__vite__mapDeps([24,10,19,22,18,11,12,13]));return{id:Nk,diagram:e}},nH={id:Nk,detector:rH,loader:iH},sH=nH,$k="requirement",aH=e=>/^\s*requirement(Diagram)?/.test(e),oH=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/requirementDiagram-23d650b8-fnGkM_1S.js");return{diagram:t}},__vite__mapDeps([25,4,5,11,12,13]));return{id:$k,diagram:e}},lH={id:$k,detector:aH,loader:oH},cH=lH,zk="sequence",uH=e=>/^\s*sequenceDiagram/.test(e),hH=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/sequenceDiagram-17ac3bff-FpNbcy82.js");return{diagram:t}},__vite__mapDeps([26,1]));return{id:zk,diagram:e}},dH={id:zk,detector:uH,loader:hH},fH=dH,Hk="class",pH=(e,t)=>{var r;return((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(e)},vH=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/classDiagram-d40c83e7-Cj-mRfxo.js");return{diagram:t}},__vite__mapDeps([27,28,4,5,11,12,13]));return{id:Hk,diagram:e}},gH={id:Hk,detector:pH,loader:vH},mH=gH,qk="classDiagram",yH=(e,t)=>{var r;return/^\s*classDiagram/.test(e)&&((r=t==null?void 0:t.class)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(e)},_H=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/classDiagram-v2-d5a6b087-CR3m-0v5.js");return{diagram:t}},__vite__mapDeps([29,28,4,7,5,8,9,10,11,12,13]));return{id:qk,diagram:e}},bH={id:qk,detector:yH,loader:_H},CH=bH,Wk="state",wH=(e,t)=>{var r;return((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(e)},SH=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/stateDiagram-9c5f0230-CBqKgsIg.js");return{diagram:t}},__vite__mapDeps([30,31,4,5,11,12,13]));return{id:Wk,diagram:e}},kH={id:Wk,detector:wH,loader:SH},xH=kH,Uk="stateDiagram",TH=(e,t)=>{var r;return!!(/^\s*stateDiagram-v2/.test(e)||/^\s*stateDiagram/.test(e)&&((r=t==null?void 0:t.state)==null?void 0:r.defaultRenderer)==="dagre-wrapper")},EH=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/stateDiagram-v2-51a3dcff-Bug3r4RQ.js");return{diagram:t}},__vite__mapDeps([32,31,4,7,5,8,9,10,11,12,13]));return{id:Uk,diagram:e}},AH={id:Uk,detector:TH,loader:EH},BH=AH,Vk="journey",DH=e=>/^\s*journey/.test(e),LH=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/journeyDiagram-29694f62-BFvE3EY9.js");return{diagram:t}},__vite__mapDeps([33,1,21,13]));return{id:Vk,diagram:e}},RH={id:Vk,detector:DH,loader:LH},MH=RH,PH=function(e,t){for(let r of t)e.attr(r[0],r[1])},IH=function(e,t,r){let i=new Map;return r?(i.set("width","100%"),i.set("style",`max-width: ${t}px;`)):(i.set("height",e),i.set("width",t)),i},jk=function(e,t,r,i){const n=IH(t,r,i);PH(e,n)},FH=function(e,t,r,i){const n=t.node().getBBox(),s=n.width,a=n.height;Ue.info(`SVG bounds: ${s}x${a}`,n);let o=0,l=0;Ue.info(`Graph bounds: ${o}x${l}`,e),o=s+r*2,l=a+r*2,Ue.info(`Calculated bounds: ${o}x${l}`),jk(t,l,o,i);const c=`${n.x-r} ${n.y-r} ${n.width+2*r} ${n.height+2*r}`;t.attr("viewBox",c)},$c={},OH=(e,t,r)=>{let i="";return e in $c&&$c[e]?i=$c[e](r):Ue.warn(`No theme found for ${e}`),` & {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
    fill: ${r.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${r.errorBkgColor};
  }
  & .error-text {
    fill: ${r.errorTextColor};
    stroke: ${r.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${r.lineColor};
    stroke: ${r.lineColor};
  }
  & .marker.cross {
    stroke: ${r.lineColor};
  }

  & svg {
    font-family: ${r.fontFamily};
    font-size: ${r.fontSize};
  }

  ${i}

  ${t}
`},NH=(e,t)=>{t!==void 0&&($c[e]=t)},$H=OH;let kg="",xg="",Tg="";const Eg=e=>Ra(e,zi()),zH=()=>{kg="",Tg="",xg=""},HH=e=>{kg=Eg(e).replace(/^\s+/g,"")},qH=()=>kg,WH=e=>{Tg=Eg(e).replace(/\n\s+/g,`
`)},UH=()=>Tg,VH=e=>{xg=Eg(e)},jH=()=>xg,GH=Object.freeze(Object.defineProperty({__proto__:null,clear:zH,getAccDescription:UH,getAccTitle:qH,getDiagramTitle:jH,setAccDescription:WH,setAccTitle:HH,setDiagramTitle:VH},Symbol.toStringTag,{value:"Module"})),KH=Ue,YH=_g,Ag=zi,mte=Tk,yte=Pa,XH=e=>Ra(e,Ag()),ZH=FH,QH=()=>GH,Mu={},Pu=(e,t,r)=>{var i;if(Mu[e])throw new Error(`Diagram ${e} already registered.`);Mu[e]=t,r&&_k(e,r),NH(e,t.styles),(i=t.injectUtils)==null||i.call(t,KH,YH,Ag,XH,ZH,QH(),()=>{})},Bg=e=>{if(e in Mu)return Mu[e];throw new JH(e)};class JH extends Error{constructor(t){super(`Diagram ${t} not found.`)}}const eq=e=>{var t;const{securityLevel:r}=Ag();let i=ri("body");if(r==="sandbox"){const a=((t=ri(`#i${e}`).node())==null?void 0:t.contentDocument)??document;i=ri(a.body)}return i.select(`#${e}`)},tq=(e,t,r)=>{Ue.debug(`rendering svg for syntax error
`);const i=eq(t),n=i.append("g");i.attr("viewBox","0 0 2412 512"),jk(i,100,512,!0),n.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),n.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),n.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),n.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),n.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),n.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),n.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),n.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${r}`)},Gk={draw:tq},rq=Gk,iq={db:{},renderer:Gk,parser:{parser:{yy:{}},parse:()=>{}}},nq=iq,Kk="flowchart-elk",sq=(e,t)=>{var r;return!!(/^\s*flowchart-elk/.test(e)||/^\s*flowchart|graph/.test(e)&&((r=t==null?void 0:t.flowchart)==null?void 0:r.defaultRenderer)==="elk")},aq=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/flowchart-elk-definition-36e2d292-DrgB5VCD.js");return{diagram:t}},__vite__mapDeps([34,3,9,10,11,12,13]));return{id:Kk,diagram:e}},oq={id:Kk,detector:sq,loader:aq},lq=oq,Yk="timeline",cq=e=>/^\s*timeline/.test(e),uq=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/timeline-definition-7e6b55e7-CJ1Wwb16.js");return{diagram:t}},__vite__mapDeps([35,21,13]));return{id:Yk,diagram:e}},hq={id:Yk,detector:cq,loader:uq},dq=hq,Xk="mindmap",fq=e=>/^\s*mindmap/.test(e),pq=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/mindmap-definition-ac74a2e8-CQsjJXmd.js");return{diagram:t}},__vite__mapDeps([36,10]));return{id:Xk,diagram:e}},vq={id:Xk,detector:fq,loader:pq},gq=vq,Zk="sankey",mq=e=>/^\s*sankey-beta/.test(e),yq=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/sankeyDiagram-23345273-C3k3szqQ.js");return{diagram:t}},__vite__mapDeps([37,22,19,38]));return{id:Zk,diagram:e}},_q={id:Zk,detector:mq,loader:yq},bq=_q,Qk="block",Cq=e=>/^\s*block-beta/.test(e),wq=async()=>{const{diagram:e}=await Ft(async()=>{const{diagram:t}=await import("./chunks/blockDiagram-68f4deed-Cg9y_k4L.js");return{diagram:t}},__vite__mapDeps([39,8,4,9,10,11,12,13,14,22,19,38]));return{id:Qk,diagram:e}},Sq={id:Qk,detector:Cq,loader:wq},kq=Sq;let bb=!1;const Dg=()=>{bb||(bb=!0,Pu("error",nq,e=>e.toLowerCase().trim()==="error"),Pu("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},e=>e.toLowerCase().trimStart().startsWith("---")),yk(xz,CH,mH,Oz,Vz,Kz,Zz,cH,fH,lq,Mz,Bz,gq,dq,Hz,BH,xH,MH,tH,bq,sH,kq))};class Jk{constructor(t,r={}){this.text=t,this.metadata=r,this.type="graph",this.text=pz(t),this.text+=`
`;const i=zi();try{this.type=Oh(t,i)}catch(s){this.type="error",this.detectError=s}const n=Bg(this.type);Ue.debug("Type "+this.type),this.db=n.db,this.renderer=n.renderer,this.parser=n.parser,this.parser.parser.yy=this.db,this.init=n.init,this.parse()}parse(){var t,r,i,n,s;if(this.detectError)throw this.detectError;(r=(t=this.db).clear)==null||r.call(t);const a=zi();(i=this.init)==null||i.call(this,a),this.metadata.title&&((s=(n=this.db).setDiagramTitle)==null||s.call(n,this.metadata.title)),this.parser.parse(this.text)}async render(t,r){await this.renderer.draw(this.text,t,r,this)}getParser(){return this.parser}getType(){return this.type}}const xq=async(e,t={})=>{const r=Oh(e,zi());try{Bg(r)}catch{const n=q8(r);if(!n)throw new mk(`Diagram ${r} not found.`);const{id:s,diagram:a}=await n();Pu(s,a)}return new Jk(e,t)};let Cb=[];const Tq=()=>{Cb.forEach(e=>{e()}),Cb=[]},Eq="graphics-document document";function Aq(e,t){e.attr("role",Eq),t!==""&&e.attr("aria-roledescription",t)}function Bq(e,t,r,i){if(e.insert!==void 0){if(r){const n=`chart-desc-${i}`;e.attr("aria-describedby",n),e.insert("desc",":first-child").attr("id",n).text(r)}if(t){const n=`chart-title-${i}`;e.attr("aria-labelledby",n),e.insert("title",":first-child").attr("id",n).text(t)}}}const Dq=e=>e.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function ex(e){return typeof e>"u"||e===null}function Lq(e){return typeof e=="object"&&e!==null}function Rq(e){return Array.isArray(e)?e:ex(e)?[]:[e]}function Mq(e,t){var r,i,n,s;if(t)for(s=Object.keys(t),r=0,i=s.length;r<i;r+=1)n=s[r],e[n]=t[n];return e}function Pq(e,t){var r="",i;for(i=0;i<t;i+=1)r+=e;return r}function Iq(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Fq=ex,Oq=Lq,Nq=Rq,$q=Pq,zq=Iq,Hq=Mq,Lr={isNothing:Fq,isObject:Oq,toArray:Nq,repeat:$q,isNegativeZero:zq,extend:Hq};function tx(e,t){var r="",i=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(r+='in "'+e.mark.name+'" '),r+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!t&&e.mark.snippet&&(r+=`

`+e.mark.snippet),i+" "+r):i}function hl(e,t){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=t,this.message=tx(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}hl.prototype=Object.create(Error.prototype);hl.prototype.constructor=hl;hl.prototype.toString=function(t){return this.name+": "+tx(this,t)};var rn=hl;function Uf(e,t,r,i,n){var s="",a="",o=Math.floor(n/2)-1;return i-t>o&&(s=" ... ",t=i-o+s.length),r-i>o&&(a=" ...",r=i+o-a.length),{str:s+e.slice(t,r).replace(/\t/g,"")+a,pos:i-t+s.length}}function Vf(e,t){return Lr.repeat(" ",t-e.length)+e}function qq(e,t){if(t=Object.create(t||null),!e.buffer)return null;t.maxLength||(t.maxLength=79),typeof t.indent!="number"&&(t.indent=1),typeof t.linesBefore!="number"&&(t.linesBefore=3),typeof t.linesAfter!="number"&&(t.linesAfter=2);for(var r=/\r?\n|\r|\0/g,i=[0],n=[],s,a=-1;s=r.exec(e.buffer);)n.push(s.index),i.push(s.index+s[0].length),e.position<=s.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var o="",l,c,u=Math.min(e.line+t.linesAfter,n.length).toString().length,h=t.maxLength-(t.indent+u+3);for(l=1;l<=t.linesBefore&&!(a-l<0);l++)c=Uf(e.buffer,i[a-l],n[a-l],e.position-(i[a]-i[a-l]),h),o=Lr.repeat(" ",t.indent)+Vf((e.line-l+1).toString(),u)+" | "+c.str+`
`+o;for(c=Uf(e.buffer,i[a],n[a],e.position,h),o+=Lr.repeat(" ",t.indent)+Vf((e.line+1).toString(),u)+" | "+c.str+`
`,o+=Lr.repeat("-",t.indent+u+3+c.pos)+`^
`,l=1;l<=t.linesAfter&&!(a+l>=n.length);l++)c=Uf(e.buffer,i[a+l],n[a+l],e.position-(i[a]-i[a+l]),h),o+=Lr.repeat(" ",t.indent)+Vf((e.line+l+1).toString(),u)+" | "+c.str+`
`;return o.replace(/\n$/,"")}var Wq=qq,Uq=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],Vq=["scalar","sequence","mapping"];function jq(e){var t={};return e!==null&&Object.keys(e).forEach(function(r){e[r].forEach(function(i){t[String(i)]=r})}),t}function Gq(e,t){if(t=t||{},Object.keys(t).forEach(function(r){if(Uq.indexOf(r)===-1)throw new rn('Unknown option "'+r+'" is met in definition of "'+e+'" YAML type.')}),this.options=t,this.tag=e,this.kind=t.kind||null,this.resolve=t.resolve||function(){return!0},this.construct=t.construct||function(r){return r},this.instanceOf=t.instanceOf||null,this.predicate=t.predicate||null,this.represent=t.represent||null,this.representName=t.representName||null,this.defaultStyle=t.defaultStyle||null,this.multi=t.multi||!1,this.styleAliases=jq(t.styleAliases||null),Vq.indexOf(this.kind)===-1)throw new rn('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var Cr=Gq;function wb(e,t){var r=[];return e[t].forEach(function(i){var n=r.length;r.forEach(function(s,a){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=a)}),r[n]=i}),r}function Kq(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},t,r;function i(n){n.multi?(e.multi[n.kind].push(n),e.multi.fallback.push(n)):e[n.kind][n.tag]=e.fallback[n.tag]=n}for(t=0,r=arguments.length;t<r;t+=1)arguments[t].forEach(i);return e}function Qp(e){return this.extend(e)}Qp.prototype.extend=function(t){var r=[],i=[];if(t instanceof Cr)i.push(t);else if(Array.isArray(t))i=i.concat(t);else if(t&&(Array.isArray(t.implicit)||Array.isArray(t.explicit)))t.implicit&&(r=r.concat(t.implicit)),t.explicit&&(i=i.concat(t.explicit));else throw new rn("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");r.forEach(function(s){if(!(s instanceof Cr))throw new rn("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new rn("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new rn("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof Cr))throw new rn("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(Qp.prototype);return n.implicit=(this.implicit||[]).concat(r),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=wb(n,"implicit"),n.compiledExplicit=wb(n,"explicit"),n.compiledTypeMap=Kq(n.compiledImplicit,n.compiledExplicit),n};var Yq=Qp,Xq=new Cr("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Zq=new Cr("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),Qq=new Cr("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Jq=new Yq({explicit:[Xq,Zq,Qq]});function e9(e){if(e===null)return!0;var t=e.length;return t===1&&e==="~"||t===4&&(e==="null"||e==="Null"||e==="NULL")}function t9(){return null}function r9(e){return e===null}var i9=new Cr("tag:yaml.org,2002:null",{kind:"scalar",resolve:e9,construct:t9,predicate:r9,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function n9(e){if(e===null)return!1;var t=e.length;return t===4&&(e==="true"||e==="True"||e==="TRUE")||t===5&&(e==="false"||e==="False"||e==="FALSE")}function s9(e){return e==="true"||e==="True"||e==="TRUE"}function a9(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var o9=new Cr("tag:yaml.org,2002:bool",{kind:"scalar",resolve:n9,construct:s9,predicate:a9,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function l9(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function c9(e){return 48<=e&&e<=55}function u9(e){return 48<=e&&e<=57}function h9(e){if(e===null)return!1;var t=e.length,r=0,i=!1,n;if(!t)return!1;if(n=e[r],(n==="-"||n==="+")&&(n=e[++r]),n==="0"){if(r+1===t)return!0;if(n=e[++r],n==="b"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(!l9(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(r++;r<t;r++)if(n=e[r],n!=="_"){if(!c9(e.charCodeAt(r)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;r<t;r++)if(n=e[r],n!=="_"){if(!u9(e.charCodeAt(r)))return!1;i=!0}return!(!i||n==="_")}function d9(e){var t=e,r=1,i;if(t.indexOf("_")!==-1&&(t=t.replace(/_/g,"")),i=t[0],(i==="-"||i==="+")&&(i==="-"&&(r=-1),t=t.slice(1),i=t[0]),t==="0")return 0;if(i==="0"){if(t[1]==="b")return r*parseInt(t.slice(2),2);if(t[1]==="x")return r*parseInt(t.slice(2),16);if(t[1]==="o")return r*parseInt(t.slice(2),8)}return r*parseInt(t,10)}function f9(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!Lr.isNegativeZero(e)}var p9=new Cr("tag:yaml.org,2002:int",{kind:"scalar",resolve:h9,construct:d9,predicate:f9,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),v9=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function g9(e){return!(e===null||!v9.test(e)||e[e.length-1]==="_")}function m9(e){var t,r;return t=e.replace(/_/g,"").toLowerCase(),r=t[0]==="-"?-1:1,"+-".indexOf(t[0])>=0&&(t=t.slice(1)),t===".inf"?r===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:t===".nan"?NaN:r*parseFloat(t,10)}var y9=/^[-+]?[0-9]+e/;function _9(e,t){var r;if(isNaN(e))switch(t){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(t){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(t){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(Lr.isNegativeZero(e))return"-0.0";return r=e.toString(10),y9.test(r)?r.replace("e",".e"):r}function b9(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||Lr.isNegativeZero(e))}var C9=new Cr("tag:yaml.org,2002:float",{kind:"scalar",resolve:g9,construct:m9,predicate:b9,represent:_9,defaultStyle:"lowercase"}),rx=Jq.extend({implicit:[i9,o9,p9,C9]}),w9=rx,ix=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),nx=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function S9(e){return e===null?!1:ix.exec(e)!==null||nx.exec(e)!==null}function k9(e){var t,r,i,n,s,a,o,l=0,c=null,u,h,d;if(t=ix.exec(e),t===null&&(t=nx.exec(e)),t===null)throw new Error("Date resolve error");if(r=+t[1],i=+t[2]-1,n=+t[3],!t[4])return new Date(Date.UTC(r,i,n));if(s=+t[4],a=+t[5],o=+t[6],t[7]){for(l=t[7].slice(0,3);l.length<3;)l+="0";l=+l}return t[9]&&(u=+t[10],h=+(t[11]||0),c=(u*60+h)*6e4,t[9]==="-"&&(c=-c)),d=new Date(Date.UTC(r,i,n,s,a,o,l)),c&&d.setTime(d.getTime()-c),d}function x9(e){return e.toISOString()}var T9=new Cr("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:S9,construct:k9,instanceOf:Date,represent:x9});function E9(e){return e==="<<"||e===null}var A9=new Cr("tag:yaml.org,2002:merge",{kind:"scalar",resolve:E9}),Lg=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function B9(e){if(e===null)return!1;var t,r,i=0,n=e.length,s=Lg;for(r=0;r<n;r++)if(t=s.indexOf(e.charAt(r)),!(t>64)){if(t<0)return!1;i+=6}return i%8===0}function D9(e){var t,r,i=e.replace(/[\r\n=]/g,""),n=i.length,s=Lg,a=0,o=[];for(t=0;t<n;t++)t%4===0&&t&&(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)),a=a<<6|s.indexOf(i.charAt(t));return r=n%4*6,r===0?(o.push(a>>16&255),o.push(a>>8&255),o.push(a&255)):r===18?(o.push(a>>10&255),o.push(a>>2&255)):r===12&&o.push(a>>4&255),new Uint8Array(o)}function L9(e){var t="",r=0,i,n,s=e.length,a=Lg;for(i=0;i<s;i++)i%3===0&&i&&(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]),r=(r<<8)+e[i];return n=s%3,n===0?(t+=a[r>>18&63],t+=a[r>>12&63],t+=a[r>>6&63],t+=a[r&63]):n===2?(t+=a[r>>10&63],t+=a[r>>4&63],t+=a[r<<2&63],t+=a[64]):n===1&&(t+=a[r>>2&63],t+=a[r<<4&63],t+=a[64],t+=a[64]),t}function R9(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var M9=new Cr("tag:yaml.org,2002:binary",{kind:"scalar",resolve:B9,construct:D9,predicate:R9,represent:L9}),P9=Object.prototype.hasOwnProperty,I9=Object.prototype.toString;function F9(e){if(e===null)return!0;var t=[],r,i,n,s,a,o=e;for(r=0,i=o.length;r<i;r+=1){if(n=o[r],a=!1,I9.call(n)!=="[object Object]")return!1;for(s in n)if(P9.call(n,s))if(!a)a=!0;else return!1;if(!a)return!1;if(t.indexOf(s)===-1)t.push(s);else return!1}return!0}function O9(e){return e!==null?e:[]}var N9=new Cr("tag:yaml.org,2002:omap",{kind:"sequence",resolve:F9,construct:O9}),$9=Object.prototype.toString;function z9(e){if(e===null)return!0;var t,r,i,n,s,a=e;for(s=new Array(a.length),t=0,r=a.length;t<r;t+=1){if(i=a[t],$9.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[t]=[n[0],i[n[0]]]}return!0}function H9(e){if(e===null)return[];var t,r,i,n,s,a=e;for(s=new Array(a.length),t=0,r=a.length;t<r;t+=1)i=a[t],n=Object.keys(i),s[t]=[n[0],i[n[0]]];return s}var q9=new Cr("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:z9,construct:H9}),W9=Object.prototype.hasOwnProperty;function U9(e){if(e===null)return!0;var t,r=e;for(t in r)if(W9.call(r,t)&&r[t]!==null)return!1;return!0}function V9(e){return e!==null?e:{}}var j9=new Cr("tag:yaml.org,2002:set",{kind:"mapping",resolve:U9,construct:V9}),G9=w9.extend({implicit:[T9,A9],explicit:[M9,N9,q9,j9]}),Gn=Object.prototype.hasOwnProperty,Iu=1,sx=2,ax=3,Fu=4,jf=1,K9=2,Sb=3,Y9=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,X9=/[\x85\u2028\u2029]/,Z9=/[,\[\]\{\}]/,ox=/^(?:!|!!|![a-z\-]+!)$/i,lx=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function kb(e){return Object.prototype.toString.call(e)}function Fi(e){return e===10||e===13}function xs(e){return e===9||e===32}function qr(e){return e===9||e===32||e===10||e===13}function la(e){return e===44||e===91||e===93||e===123||e===125}function Q9(e){var t;return 48<=e&&e<=57?e-48:(t=e|32,97<=t&&t<=102?t-97+10:-1)}function J9(e){return e===120?2:e===117?4:e===85?8:0}function e7(e){return 48<=e&&e<=57?e-48:-1}function xb(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?"":e===76?"\u2028":e===80?"\u2029":""}function t7(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var cx=new Array(256),ux=new Array(256);for(var ea=0;ea<256;ea++)cx[ea]=xb(ea)?1:0,ux[ea]=xb(ea);function r7(e,t){this.input=e,this.filename=t.filename||null,this.schema=t.schema||G9,this.onWarning=t.onWarning||null,this.legacy=t.legacy||!1,this.json=t.json||!1,this.listener=t.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function hx(e,t){var r={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return r.snippet=Wq(r),new rn(t,r)}function He(e,t){throw hx(e,t)}function Ou(e,t){e.onWarning&&e.onWarning.call(null,hx(e,t))}var Tb={YAML:function(t,r,i){var n,s,a;t.version!==null&&He(t,"duplication of %YAML directive"),i.length!==1&&He(t,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&He(t,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),a=parseInt(n[2],10),s!==1&&He(t,"unacceptable YAML version of the document"),t.version=i[0],t.checkLineBreaks=a<2,a!==1&&a!==2&&Ou(t,"unsupported YAML version of the document")},TAG:function(t,r,i){var n,s;i.length!==2&&He(t,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],ox.test(n)||He(t,"ill-formed tag handle (first argument) of the TAG directive"),Gn.call(t.tagMap,n)&&He(t,'there is a previously declared suffix for "'+n+'" tag handle'),lx.test(s)||He(t,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{He(t,"tag prefix is malformed: "+s)}t.tagMap[n]=s}};function Fn(e,t,r,i){var n,s,a,o;if(t<r){if(o=e.input.slice(t,r),i)for(n=0,s=o.length;n<s;n+=1)a=o.charCodeAt(n),a===9||32<=a&&a<=1114111||He(e,"expected valid JSON character");else Y9.test(o)&&He(e,"the stream contains non-printable characters");e.result+=o}}function Eb(e,t,r,i){var n,s,a,o;for(Lr.isObject(r)||He(e,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(r),a=0,o=n.length;a<o;a+=1)s=n[a],Gn.call(t,s)||(t[s]=r[s],i[s]=!0)}function ca(e,t,r,i,n,s,a,o,l){var c,u;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),c=0,u=n.length;c<u;c+=1)Array.isArray(n[c])&&He(e,"nested arrays are not supported inside keys"),typeof n=="object"&&kb(n[c])==="[object Object]"&&(n[c]="[object Object]");if(typeof n=="object"&&kb(n)==="[object Object]"&&(n="[object Object]"),n=String(n),t===null&&(t={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(c=0,u=s.length;c<u;c+=1)Eb(e,t,s[c],r);else Eb(e,t,s,r);else!e.json&&!Gn.call(r,n)&&Gn.call(t,n)&&(e.line=a||e.line,e.lineStart=o||e.lineStart,e.position=l||e.position,He(e,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(t,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):t[n]=s,delete r[n];return t}function Rg(e){var t;t=e.input.charCodeAt(e.position),t===10?e.position++:t===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):He(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function Kt(e,t,r){for(var i=0,n=e.input.charCodeAt(e.position);n!==0;){for(;xs(n);)n===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),n=e.input.charCodeAt(++e.position);if(t&&n===35)do n=e.input.charCodeAt(++e.position);while(n!==10&&n!==13&&n!==0);if(Fi(n))for(Rg(e),n=e.input.charCodeAt(e.position),i++,e.lineIndent=0;n===32;)e.lineIndent++,n=e.input.charCodeAt(++e.position);else break}return r!==-1&&i!==0&&e.lineIndent<r&&Ou(e,"deficient indentation"),i}function $h(e){var t=e.position,r;return r=e.input.charCodeAt(t),!!((r===45||r===46)&&r===e.input.charCodeAt(t+1)&&r===e.input.charCodeAt(t+2)&&(t+=3,r=e.input.charCodeAt(t),r===0||qr(r)))}function Mg(e,t){t===1?e.result+=" ":t>1&&(e.result+=Lr.repeat(`
`,t-1))}function i7(e,t,r){var i,n,s,a,o,l,c,u,h=e.kind,d=e.result,p;if(p=e.input.charCodeAt(e.position),qr(p)||la(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(n=e.input.charCodeAt(e.position+1),qr(n)||r&&la(n)))return!1;for(e.kind="scalar",e.result="",s=a=e.position,o=!1;p!==0;){if(p===58){if(n=e.input.charCodeAt(e.position+1),qr(n)||r&&la(n))break}else if(p===35){if(i=e.input.charCodeAt(e.position-1),qr(i))break}else{if(e.position===e.lineStart&&$h(e)||r&&la(p))break;if(Fi(p))if(l=e.line,c=e.lineStart,u=e.lineIndent,Kt(e,!1,-1),e.lineIndent>=t){o=!0,p=e.input.charCodeAt(e.position);continue}else{e.position=a,e.line=l,e.lineStart=c,e.lineIndent=u;break}}o&&(Fn(e,s,a,!1),Mg(e,e.line-l),s=a=e.position,o=!1),xs(p)||(a=e.position+1),p=e.input.charCodeAt(++e.position)}return Fn(e,s,a,!1),e.result?!0:(e.kind=h,e.result=d,!1)}function n7(e,t){var r,i,n;if(r=e.input.charCodeAt(e.position),r!==39)return!1;for(e.kind="scalar",e.result="",e.position++,i=n=e.position;(r=e.input.charCodeAt(e.position))!==0;)if(r===39)if(Fn(e,i,e.position,!0),r=e.input.charCodeAt(++e.position),r===39)i=e.position,e.position++,n=e.position;else return!0;else Fi(r)?(Fn(e,i,n,!0),Mg(e,Kt(e,!1,t)),i=n=e.position):e.position===e.lineStart&&$h(e)?He(e,"unexpected end of the document within a single quoted scalar"):(e.position++,n=e.position);He(e,"unexpected end of the stream within a single quoted scalar")}function s7(e,t){var r,i,n,s,a,o;if(o=e.input.charCodeAt(e.position),o!==34)return!1;for(e.kind="scalar",e.result="",e.position++,r=i=e.position;(o=e.input.charCodeAt(e.position))!==0;){if(o===34)return Fn(e,r,e.position,!0),e.position++,!0;if(o===92){if(Fn(e,r,e.position,!0),o=e.input.charCodeAt(++e.position),Fi(o))Kt(e,!1,t);else if(o<256&&cx[o])e.result+=ux[o],e.position++;else if((a=J9(o))>0){for(n=a,s=0;n>0;n--)o=e.input.charCodeAt(++e.position),(a=Q9(o))>=0?s=(s<<4)+a:He(e,"expected hexadecimal character");e.result+=t7(s),e.position++}else He(e,"unknown escape sequence");r=i=e.position}else Fi(o)?(Fn(e,r,i,!0),Mg(e,Kt(e,!1,t)),r=i=e.position):e.position===e.lineStart&&$h(e)?He(e,"unexpected end of the document within a double quoted scalar"):(e.position++,i=e.position)}He(e,"unexpected end of the stream within a double quoted scalar")}function a7(e,t){var r=!0,i,n,s,a=e.tag,o,l=e.anchor,c,u,h,d,p,y=Object.create(null),_,v,g,f;if(f=e.input.charCodeAt(e.position),f===91)u=93,p=!1,o=[];else if(f===123)u=125,p=!0,o={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=o),f=e.input.charCodeAt(++e.position);f!==0;){if(Kt(e,!0,t),f=e.input.charCodeAt(e.position),f===u)return e.position++,e.tag=a,e.anchor=l,e.kind=p?"mapping":"sequence",e.result=o,!0;r?f===44&&He(e,"expected the node content, but found ','"):He(e,"missed comma between flow collection entries"),v=_=g=null,h=d=!1,f===63&&(c=e.input.charCodeAt(e.position+1),qr(c)&&(h=d=!0,e.position++,Kt(e,!0,t))),i=e.line,n=e.lineStart,s=e.position,Fa(e,t,Iu,!1,!0),v=e.tag,_=e.result,Kt(e,!0,t),f=e.input.charCodeAt(e.position),(d||e.line===i)&&f===58&&(h=!0,f=e.input.charCodeAt(++e.position),Kt(e,!0,t),Fa(e,t,Iu,!1,!0),g=e.result),p?ca(e,o,y,v,_,g,i,n,s):h?o.push(ca(e,null,y,v,_,g,i,n,s)):o.push(_),Kt(e,!0,t),f=e.input.charCodeAt(e.position),f===44?(r=!0,f=e.input.charCodeAt(++e.position)):r=!1}He(e,"unexpected end of the stream within a flow collection")}function o7(e,t){var r,i,n=jf,s=!1,a=!1,o=t,l=0,c=!1,u,h;if(h=e.input.charCodeAt(e.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(e.kind="scalar",e.result="";h!==0;)if(h=e.input.charCodeAt(++e.position),h===43||h===45)jf===n?n=h===43?Sb:K9:He(e,"repeat of a chomping mode identifier");else if((u=e7(h))>=0)u===0?He(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?He(e,"repeat of an indentation width identifier"):(o=t+u-1,a=!0);else break;if(xs(h)){do h=e.input.charCodeAt(++e.position);while(xs(h));if(h===35)do h=e.input.charCodeAt(++e.position);while(!Fi(h)&&h!==0)}for(;h!==0;){for(Rg(e),e.lineIndent=0,h=e.input.charCodeAt(e.position);(!a||e.lineIndent<o)&&h===32;)e.lineIndent++,h=e.input.charCodeAt(++e.position);if(!a&&e.lineIndent>o&&(o=e.lineIndent),Fi(h)){l++;continue}if(e.lineIndent<o){n===Sb?e.result+=Lr.repeat(`
`,s?1+l:l):n===jf&&s&&(e.result+=`
`);break}for(i?xs(h)?(c=!0,e.result+=Lr.repeat(`
`,s?1+l:l)):c?(c=!1,e.result+=Lr.repeat(`
`,l+1)):l===0?s&&(e.result+=" "):e.result+=Lr.repeat(`
`,l):e.result+=Lr.repeat(`
`,s?1+l:l),s=!0,a=!0,l=0,r=e.position;!Fi(h)&&h!==0;)h=e.input.charCodeAt(++e.position);Fn(e,r,e.position,!1)}return!0}function Ab(e,t){var r,i=e.tag,n=e.anchor,s=[],a,o=!1,l;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),l=e.input.charCodeAt(e.position);l!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,He(e,"tab characters must not be used in indentation")),!(l!==45||(a=e.input.charCodeAt(e.position+1),!qr(a))));){if(o=!0,e.position++,Kt(e,!0,-1)&&e.lineIndent<=t){s.push(null),l=e.input.charCodeAt(e.position);continue}if(r=e.line,Fa(e,t,ax,!1,!0),s.push(e.result),Kt(e,!0,-1),l=e.input.charCodeAt(e.position),(e.line===r||e.lineIndent>t)&&l!==0)He(e,"bad indentation of a sequence entry");else if(e.lineIndent<t)break}return o?(e.tag=i,e.anchor=n,e.kind="sequence",e.result=s,!0):!1}function l7(e,t,r){var i,n,s,a,o,l,c=e.tag,u=e.anchor,h={},d=Object.create(null),p=null,y=null,_=null,v=!1,g=!1,f;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=h),f=e.input.charCodeAt(e.position);f!==0;){if(!v&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,He(e,"tab characters must not be used in indentation")),i=e.input.charCodeAt(e.position+1),s=e.line,(f===63||f===58)&&qr(i))f===63?(v&&(ca(e,h,d,p,y,null,a,o,l),p=y=_=null),g=!0,v=!0,n=!0):v?(v=!1,n=!0):He(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,f=i;else{if(a=e.line,o=e.lineStart,l=e.position,!Fa(e,r,sx,!1,!0))break;if(e.line===s){for(f=e.input.charCodeAt(e.position);xs(f);)f=e.input.charCodeAt(++e.position);if(f===58)f=e.input.charCodeAt(++e.position),qr(f)||He(e,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(ca(e,h,d,p,y,null,a,o,l),p=y=_=null),g=!0,v=!1,n=!1,p=e.tag,y=e.result;else if(g)He(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=c,e.anchor=u,!0}else if(g)He(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=c,e.anchor=u,!0}if((e.line===s||e.lineIndent>t)&&(v&&(a=e.line,o=e.lineStart,l=e.position),Fa(e,t,Fu,!0,n)&&(v?y=e.result:_=e.result),v||(ca(e,h,d,p,y,_,a,o,l),p=y=_=null),Kt(e,!0,-1),f=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>t)&&f!==0)He(e,"bad indentation of a mapping entry");else if(e.lineIndent<t)break}return v&&ca(e,h,d,p,y,null,a,o,l),g&&(e.tag=c,e.anchor=u,e.kind="mapping",e.result=h),g}function c7(e){var t,r=!1,i=!1,n,s,a;if(a=e.input.charCodeAt(e.position),a!==33)return!1;if(e.tag!==null&&He(e,"duplication of a tag property"),a=e.input.charCodeAt(++e.position),a===60?(r=!0,a=e.input.charCodeAt(++e.position)):a===33?(i=!0,n="!!",a=e.input.charCodeAt(++e.position)):n="!",t=e.position,r){do a=e.input.charCodeAt(++e.position);while(a!==0&&a!==62);e.position<e.length?(s=e.input.slice(t,e.position),a=e.input.charCodeAt(++e.position)):He(e,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!qr(a);)a===33&&(i?He(e,"tag suffix cannot contain exclamation marks"):(n=e.input.slice(t-1,e.position+1),ox.test(n)||He(e,"named tag handle cannot contain such characters"),i=!0,t=e.position+1)),a=e.input.charCodeAt(++e.position);s=e.input.slice(t,e.position),Z9.test(s)&&He(e,"tag suffix cannot contain flow indicator characters")}s&&!lx.test(s)&&He(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{He(e,"tag name is malformed: "+s)}return r?e.tag=s:Gn.call(e.tagMap,n)?e.tag=e.tagMap[n]+s:n==="!"?e.tag="!"+s:n==="!!"?e.tag="tag:yaml.org,2002:"+s:He(e,'undeclared tag handle "'+n+'"'),!0}function u7(e){var t,r;if(r=e.input.charCodeAt(e.position),r!==38)return!1;for(e.anchor!==null&&He(e,"duplication of an anchor property"),r=e.input.charCodeAt(++e.position),t=e.position;r!==0&&!qr(r)&&!la(r);)r=e.input.charCodeAt(++e.position);return e.position===t&&He(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(t,e.position),!0}function h7(e){var t,r,i;if(i=e.input.charCodeAt(e.position),i!==42)return!1;for(i=e.input.charCodeAt(++e.position),t=e.position;i!==0&&!qr(i)&&!la(i);)i=e.input.charCodeAt(++e.position);return e.position===t&&He(e,"name of an alias node must contain at least one character"),r=e.input.slice(t,e.position),Gn.call(e.anchorMap,r)||He(e,'unidentified alias "'+r+'"'),e.result=e.anchorMap[r],Kt(e,!0,-1),!0}function Fa(e,t,r,i,n){var s,a,o,l=1,c=!1,u=!1,h,d,p,y,_,v;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=a=o=Fu===r||ax===r,i&&Kt(e,!0,-1)&&(c=!0,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)),l===1)for(;c7(e)||u7(e);)Kt(e,!0,-1)?(c=!0,o=s,e.lineIndent>t?l=1:e.lineIndent===t?l=0:e.lineIndent<t&&(l=-1)):o=!1;if(o&&(o=c||n),(l===1||Fu===r)&&(Iu===r||sx===r?_=t:_=t+1,v=e.position-e.lineStart,l===1?o&&(Ab(e,v)||l7(e,v,_))||a7(e,_)?u=!0:(a&&o7(e,_)||n7(e,_)||s7(e,_)?u=!0:h7(e)?(u=!0,(e.tag!==null||e.anchor!==null)&&He(e,"alias node should not have any properties")):i7(e,_,Iu===r)&&(u=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):l===0&&(u=o&&Ab(e,v))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&He(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),h=0,d=e.implicitTypes.length;h<d;h+=1)if(y=e.implicitTypes[h],y.resolve(e.result)){e.result=y.construct(e.result),e.tag=y.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(Gn.call(e.typeMap[e.kind||"fallback"],e.tag))y=e.typeMap[e.kind||"fallback"][e.tag];else for(y=null,p=e.typeMap.multi[e.kind||"fallback"],h=0,d=p.length;h<d;h+=1)if(e.tag.slice(0,p[h].tag.length)===p[h].tag){y=p[h];break}y||He(e,"unknown tag !<"+e.tag+">"),e.result!==null&&y.kind!==e.kind&&He(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+y.kind+'", not "'+e.kind+'"'),y.resolve(e.result,e.tag)?(e.result=y.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):He(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||u}function d7(e){var t=e.position,r,i,n,s=!1,a;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(a=e.input.charCodeAt(e.position))!==0&&(Kt(e,!0,-1),a=e.input.charCodeAt(e.position),!(e.lineIndent>0||a!==37));){for(s=!0,a=e.input.charCodeAt(++e.position),r=e.position;a!==0&&!qr(a);)a=e.input.charCodeAt(++e.position);for(i=e.input.slice(r,e.position),n=[],i.length<1&&He(e,"directive name must not be less than one character in length");a!==0;){for(;xs(a);)a=e.input.charCodeAt(++e.position);if(a===35){do a=e.input.charCodeAt(++e.position);while(a!==0&&!Fi(a));break}if(Fi(a))break;for(r=e.position;a!==0&&!qr(a);)a=e.input.charCodeAt(++e.position);n.push(e.input.slice(r,e.position))}a!==0&&Rg(e),Gn.call(Tb,i)?Tb[i](e,i,n):Ou(e,'unknown document directive "'+i+'"')}if(Kt(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,Kt(e,!0,-1)):s&&He(e,"directives end mark is expected"),Fa(e,e.lineIndent-1,Fu,!1,!0),Kt(e,!0,-1),e.checkLineBreaks&&X9.test(e.input.slice(t,e.position))&&Ou(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&$h(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,Kt(e,!0,-1));return}if(e.position<e.length-1)He(e,"end of the stream or a document separator is expected");else return}function f7(e,t){e=String(e),t=t||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var r=new r7(e,t),i=e.indexOf("\0");for(i!==-1&&(r.position=i,He(r,"null byte is not allowed in input")),r.input+="\0";r.input.charCodeAt(r.position)===32;)r.lineIndent+=1,r.position+=1;for(;r.position<r.length-1;)d7(r);return r.documents}function p7(e,t){var r=f7(e,t);if(r.length!==0){if(r.length===1)return r[0];throw new rn("expected a single document in the stream, but found more")}}var v7=p7,g7={load:v7},m7=rx,y7=g7.load;function _7(e){const t=e.match(gk);if(!t)return{text:e,metadata:{}};let r=y7(t[1],{schema:m7})??{};r=typeof r=="object"&&!Array.isArray(r)?r:{};const i={};return r.displayMode&&(i.displayMode=r.displayMode.toString()),r.title&&(i.title=r.title.toString()),r.config&&(i.config=r.config),{text:e.slice(t[0].length),metadata:i}}const b7=e=>e.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(t,r,i)=>"<"+r+i.replace(/="([^"]*)"/g,"='$1'")+">"),C7=e=>{const{text:t,metadata:r}=_7(e),{displayMode:i,title:n,config:s={}}=r;return i&&(s.gantt||(s.gantt={}),s.gantt.displayMode=i),{title:n,config:s,text:t}},w7=e=>{const t=Fo.detectInit(e)??{},r=Fo.detectDirective(e,"wrap");return Array.isArray(r)?t.wrap=r.some(({type:i})=>{}):(r==null?void 0:r.type)==="wrap"&&(t.wrap=!0),{text:G8(e),directive:t}};function dx(e){const t=b7(e),r=C7(t),i=w7(r.text),n=Sk(r.config,i.directive);return e=Dq(i.text),{code:e,title:r.title,config:n}}const S7=5e4,k7="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",x7="sandbox",T7="loose",E7="http://www.w3.org/2000/svg",A7="http://www.w3.org/1999/xlink",B7="http://www.w3.org/1999/xhtml",D7="100%",L7="100%",R7="border:0;margin:0;",M7="margin:0",P7="allow-top-navigation-by-user-activation allow-popups",I7='The "iframe" tag is not supported by your browser.',F7=["foreignobject"],O7=["dominant-baseline"];function fx(e){const t=dx(e);return Ru(),_z(t.config??{}),t}async function N7(e,t){Dg(),e=fx(e).code;try{await Pg(e)}catch(r){if(t!=null&&t.suppressErrors)return!1;throw r}return!0}const Bb=(e,t,r=[])=>`
.${e} ${t} { ${r.join(" !important; ")} !important; }`,$7=(e,t={})=>{var r;let i="";if(e.themeCSS!==void 0&&(i+=`
${e.themeCSS}`),e.fontFamily!==void 0&&(i+=`
:root { --mermaid-font-family: ${e.fontFamily}}`),e.altFontFamily!==void 0&&(i+=`
:root { --mermaid-alt-font-family: ${e.altFontFamily}}`),!Wf(t)){const o=e.htmlLabels||((r=e.flowchart)==null?void 0:r.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const l in t){const c=t[l];Wf(c.styles)||o.forEach(u=>{i+=Bb(c.id,u,c.styles)}),Wf(c.textStyles)||(i+=Bb(c.id,"tspan",c.textStyles))}}return i},z7=(e,t,r,i)=>{const n=$7(e,r),s=$H(t,n,e.themeVariables);return Up(Z$(`${i}{${s}}`),J$)},H7=(e="",t,r)=>{let i=e;return!r&&!t&&(i=i.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),i=vz(i),i=i.replace(/<br>/g,"<br/>"),i},q7=(e="",t)=>{var r,i;const n=(i=(r=t==null?void 0:t.viewBox)==null?void 0:r.baseVal)!=null&&i.height?t.viewBox.baseVal.height+"px":L7,s=btoa('<body style="'+M7+'">'+e+"</body>");return`<iframe style="width:${D7};height:${n};${R7}" src="data:text/html;base64,${s}" sandbox="${P7}">
  ${I7}
</iframe>`},Db=(e,t,r,i,n)=>{const s=e.append("div");s.attr("id",r),i&&s.attr("style",i);const a=s.append("svg").attr("id",t).attr("width","100%").attr("xmlns",E7);return n&&a.attr("xmlns:xlink",n),a.append("g"),e};function Lb(e,t){return e.append("iframe").attr("id",t).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const W7=(e,t,r,i)=>{var n,s,a;(n=e.getElementById(t))==null||n.remove(),(s=e.getElementById(r))==null||s.remove(),(a=e.getElementById(i))==null||a.remove()},U7=async function(e,t,r){var i,n,s,a,o,l;Dg();const c=fx(t);t=c.code;const u=zi();Ue.debug(u),t.length>((u==null?void 0:u.maxTextSize)??S7)&&(t=k7);const h="#"+e,d="i"+e,p="#"+d,y="d"+e,_="#"+y;let v=ri("body");const g=u.securityLevel===x7,f=u.securityLevel===T7,m=u.fontFamily;if(r!==void 0){if(r&&(r.innerHTML=""),g){const L=Lb(ri(r),d);v=ri(L.nodes()[0].contentDocument.body),v.node().style.margin=0}else v=ri(r);Db(v,e,y,`font-family: ${m}`,A7)}else{if(W7(document,e,y,d),g){const L=Lb(ri("body"),d);v=ri(L.nodes()[0].contentDocument.body),v.node().style.margin=0}else v=ri("body");Db(v,e,y)}let b,C;try{b=await Pg(t,{title:c.title})}catch(L){b=new Jk("error"),C=L}const S=v.select(_).node(),k=b.type,w=S.firstChild,x=w.firstChild,A=(n=(i=b.renderer).getClasses)==null?void 0:n.call(i,t,b),D=z7(u,k,A,h),T=document.createElement("style");T.innerHTML=D,w.insertBefore(T,x);try{await b.renderer.draw(t,e,yb,b)}catch(L){throw rq.draw(t,e,yb),L}const E=v.select(`${_} svg`),R=(a=(s=b.db).getAccTitle)==null?void 0:a.call(s),F=(l=(o=b.db).getAccDescription)==null?void 0:l.call(o);j7(k,E,R,F),v.select(`[id="${e}"]`).selectAll("foreignobject > *").attr("xmlns",B7);let O=v.select(_).node().innerHTML;if(Ue.debug("config.arrowMarkerAbsolute",u.arrowMarkerAbsolute),O=H7(O,g,fk(u.arrowMarkerAbsolute)),g){const L=v.select(_+" svg").node();O=q7(O,L)}else f||(O=Ba.sanitize(O,{ADD_TAGS:F7,ADD_ATTR:O7}));if(Tq(),C)throw C;const H=ri(g?p:_).node();return H&&"remove"in H&&H.remove(),{svg:O,bindFunctions:b.db.bindFunctions}};function V7(e={}){var t;e!=null&&e.fontFamily&&!((t=e.themeVariables)!=null&&t.fontFamily)&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),mz(e),e!=null&&e.theme&&e.theme in on?e.themeVariables=on[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=on.default.getThemeVariables(e.themeVariables));const r=typeof e=="object"?gz(e):xk();_g(r.logLevel),Dg()}const Pg=(e,t={})=>{const{code:r}=dx(e);return xq(r,t)};function j7(e,t,r,i){Aq(t,e),Bq(t,r,i,t.attr("id"))}const Ps=Object.freeze({render:U7,parse:N7,getDiagramFromText:Pg,initialize:V7,getConfig:zi,setConfig:Tk,getSiteConfig:xk,updateSiteConfig:yz,reset:()=>{Ru()},globalReset:()=>{Ru(Pa)},defaultConfig:Pa});_g(zi().logLevel);Ru(zi());const G7=async()=>{Ue.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(Ma).map(async([r,{detector:i,loader:n}])=>{if(n)try{Bg(r)}catch{try{const{diagram:a,id:o}=await n();Pu(o,a,i)}catch(a){throw Ue.error(`Failed to load external diagram with key ${r}. Removing from detectors.`),delete Ma[r],a}}}))).filter(r=>r.status==="rejected");if(t.length>0){Ue.error(`Failed to load ${t.length} external diagrams`);for(const r of t)Ue.error(r);throw new Error(`Failed to load ${t.length} external diagrams`)}},K7=(e,t,r)=>{Ue.warn(e),wk(e)?(r&&r(e.str,e.hash),t.push({...e,message:e.str,error:e})):(r&&r(e),e instanceof Error&&t.push({str:e.message,message:e.message,hash:e.name,error:e}))},px=async function(e={querySelector:".mermaid"}){try{await Y7(e)}catch(t){if(wk(t)&&Ue.error(t.str),ci.parseError&&ci.parseError(t),!e.suppressErrors)throw Ue.error("Use the suppressErrors option to suppress these errors"),t}},Y7=async function({postRenderCallback:e,querySelector:t,nodes:r}={querySelector:".mermaid"}){const i=Ps.getConfig();Ue.debug(`${e?"":"No "}Callback function found`);let n;if(r)n=r;else if(t)n=document.querySelectorAll(t);else throw new Error("Nodes and querySelector are both undefined");Ue.debug(`Found ${n.length} diagrams`),(i==null?void 0:i.startOnLoad)!==void 0&&(Ue.debug("Start On Load: "+(i==null?void 0:i.startOnLoad)),Ps.updateSiteConfig({startOnLoad:i==null?void 0:i.startOnLoad}));const s=new Fo.InitIDGenerator(i.deterministicIds,i.deterministicIDSeed);let a;const o=[];for(const l of Array.from(n)){Ue.info("Rendering diagram: "+l.id);/*! Check if previously processed */if(l.getAttribute("data-processed"))continue;l.setAttribute("data-processed","true");const c=`mermaid-${s.next()}`;a=l.innerHTML,a=KI(Fo.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const u=Fo.detectInit(a);u&&Ue.debug("Detected early reinit: ",u);try{const{svg:h,bindFunctions:d}=await yx(c,a,l);l.innerHTML=h,e&&await e(c),d&&d(l)}catch(h){K7(h,o,ci.parseError)}}if(o.length>0)throw o[0]},vx=function(e){Ps.initialize(e)},X7=async function(e,t,r){Ue.warn("mermaid.init is deprecated. Please use run instead."),e&&vx(e);const i={postRenderCallback:r,querySelector:".mermaid"};typeof t=="string"?i.querySelector=t:t&&(t instanceof HTMLElement?i.nodes=[t]:i.nodes=t),await px(i)},Z7=async(e,{lazyLoad:t=!0}={})=>{yk(...e),t===!1&&await G7()},gx=function(){if(ci.startOnLoad){const{startOnLoad:e}=Ps.getConfig();e&&ci.run().catch(t=>Ue.error("Mermaid failed to initialize",t))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",gx,!1)}const Q7=function(e){ci.parseError=e},Nu=[];let Gf=!1;const mx=async()=>{if(!Gf){for(Gf=!0;Nu.length>0;){const e=Nu.shift();if(e)try{await e()}catch(t){Ue.error("Error executing queue",t)}}Gf=!1}},J7=async(e,t)=>new Promise((r,i)=>{const n=()=>new Promise((s,a)=>{Ps.parse(e,t).then(o=>{s(o),r(o)},o=>{var l;Ue.error("Error parsing",o),(l=ci.parseError)==null||l.call(ci,o),a(o),i(o)})});Nu.push(n),mx().catch(i)}),yx=(e,t,r)=>new Promise((i,n)=>{const s=()=>new Promise((a,o)=>{Ps.render(e,t,r).then(l=>{a(l),i(l)},l=>{var c;Ue.error("Error parsing",l),(c=ci.parseError)==null||c.call(ci,l),o(l),n(l)})});Nu.push(s),mx().catch(n)}),ci={startOnLoad:!0,mermaidAPI:Ps,parse:J7,render:yx,init:X7,run:px,registerExternalDiagrams:Z7,initialize:vx,parseError:void 0,contentLoaded:gx,setParseErrorHandler:Q7,detectType:Oh};function eW(e){const t=e==="canyon"?{primaryColor:"#FF8C3B",primaryTextColor:"#FFDEAD",primaryBorderColor:"#DAA520",lineColor:"#CD5C5C",secondaryColor:"#5F9EA0",tertiaryColor:"#8A2BE2"}:{primaryColor:"#1FB6FF",primaryTextColor:"#FAEBD7",primaryBorderColor:"#06B6D4",lineColor:"#06B6D4",secondaryColor:"#E94560",tertiaryColor:"#8B5CF6"};ci.initialize({startOnLoad:!1,theme:"dark",themeVariables:t})}async function tW(e){this.mermaidError="";try{const t=await B5(e,{refresh:!0});t&&t.mermaid?(this.mermaidCode=t.mermaid,this.$nextTick(()=>Ig.call(this)),this.addTask("Diagram Generator",`Generated ${e} diagram`,"complete")):(!t||!t.mermaid)&&(this.mermaidError="No diagram content returned")}catch(t){console.error("Generate diagram failed",t),this.mermaidError=(t==null?void 0:t.message)||"Diagram generation failed",this.addTask("Diagram Generator","Diagram generation failed","complete")}}function rW(){let e=`graph TD
`;this.modules.forEach(t=>{e+=`    ${t.id.replace(/[^a-zA-Z0-9_]/g,"_")}[${t.name}]
`}),e+=`
`,this.moduleEdges.forEach(t=>{e+=`    ${t.source.replace(/[^a-zA-Z0-9_]/g,"_")} --> ${t.target.replace(/[^a-zA-Z0-9_]/g,"_")}
`}),this.mermaidCode=e,Ig.call(this)}function Ig(){const e=document.getElementById("mermaid-output");if(!e)return;const t=(this.mermaidCode||"").trim();this.mermaidError="",e.innerHTML="",e.removeAttribute("data-processed"),t&&ci.render(`mermaid-${Date.now()}`,t).then(r=>{e.innerHTML=r.svg,this.mermaidError=""}).catch(r=>{this.mermaidError=(r==null?void 0:r.message)||"Failed to render diagram"})}const Fg="opnixTheme",iW={mole:"/css/theme-mole.css",canyon:"/css/theme-canyon.css"},Rb="opnix-theme-link",hc=new Map;function Og(){return typeof document<"u"}function nW(){if(!Og())return null;let e=document.getElementById(Rb);if(e)return e.rel||(e.rel="stylesheet"),e;const t=document.head||document.getElementsByTagName("head")[0];if(!t)throw new Error("Unable to locate <head> element to mount theme stylesheet");return e=document.createElement("link"),e.id=Rb,e.rel="stylesheet",e.type="text/css",e.setAttribute("data-theme-loader","opnix"),t.appendChild(e),e}function sW(e,{previousTheme:t}={}){if(!Og())return Promise.resolve();const r=iW[e];if(!r)return Promise.reject(new Error(`Unsupported theme "${e}"`));if(hc.has(e))return hc.get(e);const i=nW(),n=i?i.getAttribute("href"):"",s=i?i.dataset.loaded:"",a=new Promise((o,l)=>{if(!i){o();return}const c=()=>{i.removeEventListener("load",u),i.removeEventListener("error",h)},u=()=>{c(),i.dataset.loaded="true",o()},h=()=>{c(),n&&(i.href=n),t&&(i.dataset.theme=t),i.dataset.loaded=s||"",l(new Error(`Failed to load stylesheet for theme "${e}"`))};if(i.dataset.theme===e&&i.dataset.loaded==="true"){o();return}i.addEventListener("load",u,{once:!0}),i.addEventListener("error",h,{once:!0}),i.dataset.loaded="pending",i.dataset.theme=e,i.href!==r&&(i.href=r);try{i.sheet&&(i.sheet.cssRules||i.sheet.cssText!==void 0)&&(c(),i.dataset.loaded="true",o())}catch{}}).finally(()=>{hc.delete(e)});return hc.set(e,a),a}function aW(e){if(!Og())return;const t=document.documentElement,r=document.body;t&&t.setAttribute("data-theme",e),r&&r.setAttribute("data-theme",e)}function oW(e){if(!(typeof localStorage>"u"))try{localStorage.setItem(Fg,e)}catch{}}function lW(){if(!(typeof localStorage>"u"))try{localStorage.removeItem(Fg)}catch{}}function cW(){if(typeof localStorage>"u")return null;try{const e=localStorage.getItem(Fg);return e||null}catch{return null}}function _x(e,t){return e||t||es()}function uW(){return typeof window>"u"||typeof window.matchMedia!="function"?null:window.matchMedia("(prefers-color-scheme: dark)").matches?"mole":window.matchMedia("(prefers-color-scheme: light)").matches?"canyon":null}function hW(e){if(typeof window>"u"||typeof window.matchMedia!="function")return null;const t=window.matchMedia("(prefers-color-scheme: dark)"),r=i=>{if(!e||e.themeMode!=="system")return;const n=i.matches?"mole":"canyon";return No.call(e,n,void 0,{persist:!1,source:"system-watch"})};return typeof t.addEventListener=="function"?t.addEventListener("change",r):typeof t.addListener=="function"&&t.addListener(r),e.themeMediaCleanup&&e.themeMediaCleanup(),e.themeMediaCleanup=()=>{typeof t.removeEventListener=="function"?t.removeEventListener("change",r):typeof t.removeListener=="function"&&t.removeListener(r),e.themeMediaCleanup=null},t}function No(e,t,r={}){const i=_x(t,this);if(!i)return;const{persist:n=!0}=r;i.themeError="",i.themeLoading=!0;const s=i.currentTheme;return sW(e,{previousTheme:s}).then(()=>{i.currentTheme=e,aW(e),n?(oW(e),i.themeMode="manual",i.themeMediaCleanup&&i.themeMediaCleanup()):(lW(),i.themeMode="system"),eW(e),i.cy&&i.cy.resize()}).catch(a=>{console.error("Theme load failed",a),i.themeError=a&&a.message?a.message:"Failed to load theme stylesheet"}).finally(()=>{i.themeLoading=!1})}function dW(e={},t){const{fallback:r="mole",respectSystemPreference:i=!0}=e,n=_x(t,this);if(!n)return Promise.resolve();const s=cW();if(s)return No.call(n,s,void 0,{persist:!0});if(i){const a=uW();if(n.themeMode="system",hW(n),a)return No.call(n,a,void 0,{persist:!1})}return No.call(n,r,void 0,{persist:!i})}function fW(){return{bootstrapTheme(e){dW.call(this,e)},setTheme(e){No.call(this,e),typeof this.refreshStorybookFrame=="function"&&this.refreshStorybookFrame({reason:"theme-change"})}}}function Ws(e,t){return e||t||es()}async function pW(e){const t=Ws(e,this),r=(t.claudeCommand||"").trim();if(!r)return;const i=/--ultrathink/i.test(r)?r:`${r} --ultrathink`;Rn.call(t,"Claude CLI",i,"processing");try{const n=await E5({command:i});if(t.claudeLastResponse=n.result||"Command executed",Rn.call(t,"Claude CLI",t.claudeLastResponse,"complete"),n.audit){t.latestAudit=n.audit,console.group("Opnix Audit"),console.table(n.audit.project||{}),console.table(n.audit.ticketStats||{}),console.groupEnd(),Rn.call(t,"Audit","Initial audit artefacts generated","complete");const s=[];typeof t.fetchModulesGraph=="function"&&s.push(t.fetchModulesGraph()),typeof t.fetchExports=="function"&&s.push(t.fetchExports()),typeof t.fetchStats=="function"&&s.push(t.fetchStats()),s.length&&await Promise.all(s)}}catch(n){console.error("Claude command failed",n),Rn.call(t,"Claude CLI","Execution failed","complete")}t.claudeCommand=""}async function vW(e){const t=Ws(e,this);if(!t.cliSessionsLoading){t.cliSessionsLoading=!0,t.cliSessionsError="";try{const r=await C5();t.cliSessions=Array.isArray(r.sessions)?r.sessions:[],t.cliGateLog=Array.isArray(r.gates)?r.gates:[],t.selectedCliSession&&(t.cliSessions.some(n=>n.sessionId===t.selectedCliSession)||bx.call(t))}catch(r){console.error("CLI sessions load error",r),t.cliSessionsError=r.message||"Failed to load CLI sessions"}finally{t.cliSessionsLoading=!1}}}async function gW(e,t){const r=Ws(t,this);r.selectedCliSession=e,r.cliSessionDetailsError="",r.cliSessionDetails=null;try{r.cliSessionDetails=await w5(e)}catch(i){console.error("CLI session detail error",i),r.cliSessionDetailsError=i.message||"Failed to load session details"}}function bx(e){const t=Ws(e,this);t.selectedCliSession=null,t.cliSessionDetails=null,t.cliSessionDetailsError=""}async function mW(e,t){const r=Ws(t,this);r.agents=r.agents.map(i=>({...i,status:i.id===e.id?"active":"idle",taskCount:i.id===e.id?i.taskCount+1:i.taskCount}));try{await Zw(e.id),Rn.call(r,e.name,"Agent activated","complete")}catch(i){console.error("Agent activation error",i),Rn.call(r,e.name,"Activation failed","complete")}}function Rn(e,t,r="pending",i){const n=Ws(i,this),s={id:Date.now()+Math.random(),agent:e,description:t,status:r};n.taskQueue=[s,...n.taskQueue].slice(0,5),r!=="complete"&&setTimeout(()=>{s.status="complete"},2e3)}function yW(e){const t=Ws(e,this);t.taskQueue=[]}const _W=100;function Fl(e,t){return e||t||es()}function Jp(e,t,r,i="pending"){typeof e.addTask=="function"?e.addTask(t,r,i):Rn.call(e,t,r,i)}async function bW(e){const t=Fl(e,this);t.terminalLoading=!0,t.terminalError="";try{const r=await d5();t.terminalHistory=Array.isArray(r)?r:[]}catch(r){console.error("Terminal history load error",r),t.terminalError=r.message||"Failed to load terminal history"}finally{t.terminalLoading=!1}}async function CW(e){const t=Fl(e,this),r=(t.terminalCommand||"").trim();if(!r)return;const i=(t.terminalWorkingDirectory||"").trim()||".";t.terminalRunning=!0,t.terminalError="";try{const n=await f5({command:r,cwd:i}),s={...n,command:n.command||r,cwd:n.cwd||i,ranAt:n.ranAt||new Date().toISOString()};t.terminalHistory=[...t.terminalHistory,s].slice(-_W),t.terminalCommand="",Jp(t,"Terminal",`Executed: ${r}`,"complete")}catch(n){console.error("Terminal command failed",n),t.terminalError=n.message||"Command failed",Jp(t,"Terminal","Command failed","complete")}finally{t.terminalRunning=!1}await Cx.call(t),await wx.call(t)}async function wW(e){const t=Fl(e,this);t.terminalError="";try{await p5(),t.terminalHistory=[],Jp(t,"Terminal","History cleared","complete")}catch(r){console.error("Terminal history clear error",r),t.terminalError=r.message||"Failed to clear terminal history"}}async function Cx(e){const t=Fl(e,this);t.branchStatusLoading=!0,t.branchStatusError="";try{const r=await v5();t.branchStatus={name:r.branch||r.name||"unknown",ahead:Number.parseInt(r.ahead,10)||0,behind:Number.parseInt(r.behind,10)||0,dirty:!!r.dirty,detached:!!r.detached,notGitRepo:!!r.notGitRepo,lastUpdated:r.timestamp||new Date().toISOString()}}catch(r){console.error("Branch status load error",r),t.branchStatusError=r.message||"Failed to load branch status"}finally{t.branchStatusLoading=!1}}async function wx(e){const t=Fl(e,this);t.contextStatusLoading=!0,t.contextStatusError="";try{const r=await g5();t.contextStatus={contextUsed:Number.parseInt(r.contextUsed,10)||0,contextLimit:Number.parseInt(r.contextLimit,10)||0,percentage:typeof r.percentage=="number"?r.percentage:0,remaining:Number.parseInt(r.remaining,10)||0,displayText:r.displayText||"",warning:r.warning||"",currentTask:r.currentTask||"System Ready",filesEdited:Number.parseInt(r.filesEdited,10)||0,daicState:r.daicState||"Discussion"}}catch(r){console.error("Context status load error",r),t.contextStatusError=r.message||"Failed to load context status"}finally{t.contextStatusLoading=!1}}function SW(e){const t=e||this;return{loadTerminalHistory(){return bW.call(t)},runTerminalCommand(){return CW.call(t)},clearTerminalHistory(){return wW.call(t)},refreshBranchStatus(){return Cx.call(t)},refreshContextStatus(){return wx.call(t)},async executeClaudeCommand(){await pW.call(t)},async fetchCliSessions(){await vW.call(t)},async viewCliSession(r){await gW.call(t,r)},clearCliSessionDetails(){bx.call(t)},activateAgent(r){mW.call(t,r)},addTask(r,i,n="pending"){Rn.call(t,r,i,n)},clearTaskQueue(){yW.call(t)}}}function Ol(e,t){return e||t||es()}async function kW(e={},t){const r=Ol(t,this),{iconMap:i={}}=e;r.loading.agents=!0;try{const s=((await XP()).agents||[]).map(a=>({id:a.id,name:a.name,category:a.category,path:a.path,icon:i[a.category]||i.general||"",status:"idle",taskCount:0}));r.agents=s}catch(n){console.error("Agent load error",n)}finally{r.loading.agents=!1}}async function xW(e){const t=Ol(e,this);t.loading.tickets=!0;try{const r=await ZP();t.tickets=Array.isArray(r)?r:[]}catch(r){console.error("Ticket load error",r)}finally{t.loading.tickets=!1}}async function TW(e){const t=Ol(e,this);t.loading.features=!0;try{const r=await e5();t.features=Array.isArray(r)?r:[]}catch(r){console.error("Feature load error",r)}finally{t.loading.features=!1}}async function EW(e){const t=Ol(e,this);t.loading.exports=!0;try{const r=await m5();t.exportsList=r.files||[]}catch(r){console.error("Exports load error",r)}finally{t.loading.exports=!1}}async function AW(e){const t=Ol(e,this);t.loading.stats=!0;try{t.stats=await y5()}catch(r){console.error("Stats load error",r)}finally{t.loading.stats=!1}}function BW(e,{agentIconMap:t}={}){const r=t||{};function i(n,s=500){return async function(...o){await n.call(this,...o);const l=this&&typeof this.queueRoadmapRefresh=="function"?this:e;l&&typeof l.queueRoadmapRefresh=="function"&&l.queueRoadmapRefresh({delay:s})}}return{async fetchAgents(n={}){const s=n.iconMap||r;await kW.call(this,{iconMap:s})},fetchTickets:i(function(){return xW.call(this)}),fetchFeatures:i(function(){return TW.call(this)}),async fetchExports(){await EW.call(this)},async fetchStats(){await AW.call(this)}}}function DW(){return{openAddModuleModal(){dI.call(this)},closeAddModuleModal(){fI.call(this)},updateModuleDraft(e){pI.call(this,e)},updateRunbookDraft(e){gI.call(this,e)}}}function Sx(e){if(!e)return;(this.typeSectionMap[e]||[]).forEach(r=>{this.currentSectionOrder.includes(r)||this.currentSectionOrder.push(r)})}function kx(e){if(!e)return;const t=Object.keys(this.frameworkSectionMap).find(i=>i.toLowerCase()===String(e).toLowerCase());if(!t)return;(this.frameworkSectionMap[t]||[]).forEach(i=>{this.currentSectionOrder.includes(i)||this.currentSectionOrder.push(i)})}function xx(e){if(!e)return;const t=Object.keys(this.languageFrameworks).find(n=>n.toLowerCase()===String(e).toLowerCase()),r=t?this.languageFrameworks[t]:["None/Custom"],i=this.currentQuestions.find(n=>n.id==="preferred-framework");i&&(i.options=r,r.includes(i.answer)||(i.answer="",this.questionAnswers["preferred-framework"]=""))}function Tx(e){if(!e||this.completedSections.includes(e))return;const t=this.getSection(e);if(!(!t||!t.questions.every(i=>{if(i.required===!1)return!0;const n=this.questionAnswers[i.id];return n==null?!1:String(n).trim().length>0})))if(this.completedSections.push(e),this.activeSectionIndex<this.currentSectionOrder.length-1){this.activeSectionIndex+=1;const i=this.currentSectionOrder[this.activeSectionIndex];this.enqueueSection(i),this.currentPhase=this.getSectionTitle(i)}else this.currentPhase="Complete"}function LW(e){!e||!e.id||(this.questionAnswers[e.id]=e.answer,e.id==="project-type"&&e.answer&&this.extendSectionsForProjectType(e.answer),e.id==="primary-language"&&e.answer&&this.updateFrameworkOptions(e.answer),e.id==="preferred-framework"&&e.answer&&this.extendSectionsForFramework(e.answer),this.advanceSectionIfComplete(e.sectionId))}function RW(){const e={};return Object.entries(this.questionAnswers).forEach(([t,r])=>{r!=null&&String(r).trim().length>0&&(e[t]=r)}),e}function MW(){const e=this.collectAnswers();return{generatedAt:new Date().toISOString(),questionAnswers:e,project:{name:e["project-name"]||"Untitled Project",type:e["project-type"]||"Unknown",goal:e["project-purpose"]||e["value-proposition"]||""},technical:{language:e["primary-language"]||null,framework:e["preferred-framework"]||null,stack:e["supporting-libraries"]||null,architecture:{current:e["current-architecture"]||null,target:e["target-architecture-vision"]||null,dataStores:e["data-sources"]||null,integrations:e["integration-providers"]||e["integration-consumers"]||null,testingStrategy:e["testing-strategy"]||null,observability:e["observability-tooling"]||null}},modules:this.modules,canvas:{edges:this.moduleEdges,summary:this.moduleSummary},features:this.features,tickets:this.tickets}}function PW(){return{extendSectionsForProjectType(e){Sx.call(this,e)},extendSectionsForFramework(e){kx.call(this,e)},updateFrameworkOptions(e){xx.call(this,e)},advanceSectionIfComplete(e){Tx.call(this,e)},updateSpecExportFormat(e){this.specExportFormat=e},processAnswer(e){LW.call(this,e)},collectAnswers(){return RW.call(this)},buildSpecPayload(){return MW.call(this)},async generateSpec(){const e=this.buildSpecPayload();this.latestSpecPayload=e,this.generatedSpec=JSON.stringify(e,null,2);try{const t=this.specExportFormat==="github"?"github-spec-kit":this.specExportFormat,r=await T5({spec:e,format:t});r.success&&(this.latestSpecMeta=r,this.addTask("Spec Builder",`Spec saved as ${r.filename}`,"complete"),await this.fetchExports(),typeof this.queueRoadmapRefresh=="function"&&this.queueRoadmapRefresh({delay:600}))}catch(t){console.error("Generate spec failed",t)}}}}function IW(){return{async loadInterviewBlueprint(){if(!this.interviewBlueprint)try{const e=await _5();this.interviewBlueprint=e.sections||{},this.baseSectionOrder=e.baseOrder||Object.keys(this.interviewBlueprint),this.typeSectionMap=e.typeOrder||{},this.frameworkSectionMap=e.frameworkSectionMap||{},this.languageFrameworks=e.languageFrameworks||{}}catch(e){console.error("Interview blueprint load error",e),this.interviewBlueprint={},this.baseSectionOrder=[],this.typeSectionMap={},this.frameworkSectionMap={},this.languageFrameworks={}}},initializeInterview(){if(!this.interviewBlueprint||this.baseSectionOrder.length===0){this.currentQuestions=[],this.currentSectionOrder=[],this.currentPhase="initial";return}this.questionAnswers={},this.completedSections=[],this.currentSectionOrder=[...this.baseSectionOrder],this.activeSectionIndex=0,this.currentQuestions=[];const e=this.currentSectionOrder[0];e&&(this.enqueueSection(e),this.currentPhase=this.getSectionTitle(e))},getSection(e){return!e||!this.interviewBlueprint?null:this.interviewBlueprint[e]||null},getSectionTitle(e){const t=this.getSection(e);return t?t.title:"Interview"},cloneSectionQuestions(e){const t=this.getSection(e);return!t||!Array.isArray(t.questions)?[]:t.questions.map((r,i)=>({...r,answer:this.questionAnswers[r.id]||"",sectionId:e,sectionTitle:t.title,sectionDescription:t.description||"",isSectionFirst:i===0}))},enqueueSection(e){if(!e||this.currentQuestions.some(r=>r.sectionId===e))return;const t=this.cloneSectionQuestions(e);t.length&&this.currentQuestions.push(...t)},extendSectionsForProjectType(e){Sx.call(this,e)},extendSectionsForFramework(e){kx.call(this,e)},updateFrameworkOptions(e){xx.call(this,e)},advanceSectionIfComplete(e){Tx.call(this,e)},async reloadInterviewQuestions(){if(this.interviewBlueprint=null,await this.loadInterviewBlueprint(),this.currentQuestions.length>0){const e={...this.questionAnswers};this.initializeInterview(),this.questionAnswers=e,this.currentQuestions=this.currentQuestions.map(t=>({...t,answer:e[t.id]||t.answer||""}))}console.log("Interview questions reloaded")}}}function FW(){return{updateMermaidCode(e){this.mermaidCode=e,this.mermaidError=""},async generateDiagram(e){await tW.call(this,e)},generateFromModules(){rW.call(this)},renderMermaid(){Ig.call(this)}}}function OW(){return{setTab(e){this.activeTab=e,e==="canvas"&&typeof this.ensureCanvas=="function"&&this.$nextTick(()=>this.ensureCanvas()),e==="specs"&&typeof this.fetchCliSessions=="function"&&this.fetchCliSessions(),e==="diagrams"&&(!this.mermaidCode&&typeof this.generateDiagram=="function"?this.generateDiagram("architecture"):typeof this.renderMermaid=="function"&&this.$nextTick(()=>this.renderMermaid())),e==="storybook"&&typeof this.refreshStorybookFrame=="function"&&this.refreshStorybookFrame({reason:"tab-activate"}),e==="roadmap"&&typeof this.refreshRoadmapState=="function"&&this.refreshRoadmapState(),e==="stack"&&typeof this.refreshTechStackSummary=="function"&&this.refreshTechStackSummary()}}}function NW(e){return e?e.completed?"Completed":"In Progress":"Unknown"}function $W(e,t){if(!e||!Array.isArray(e.questions))return t;const r=e.questions.find(i=>i&&i.id===t);return r&&(r.prompt||r.title)||t}function zW(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function HW(e){const t=e&&e.diagnostics;if(!t)return"n/a";const r=t.contextUsed,i=t.contextLimit;return typeof r!="number"||typeof i!="number"||i<=0?"n/a":`${Math.round(r/i*100)}%`}function qW(e){if(!e)return"unknown";const t=new Date(e);return Number.isNaN(t.getTime())?e:t.toLocaleString()}function WW(){return{formatCliSessionStatus:NW,findCliQuestionPrompt:$W,formatGateTimestamp:zW,formatGateContext:HW,formatCliTimestamp:qW}}function UW(){return{async bootstrap(){await this.loadInterviewBlueprint(),this.initializeInterview(),await Promise.all([this.fetchAgents(),this.fetchTickets(),this.fetchFeatures(),this.fetchModulesGraph(),this.fetchExports(),this.fetchStats(),this.fetchTechStackSummary({background:!0,force:!0}),this.refreshRoadmapState({background:!0}),this.loadTerminalHistory(),this.refreshBranchStatus(),this.refreshContextStatus()]),await this.fetchCliSessions(),this.activeTab==="canvas"&&typeof this.ensureCanvas=="function"&&this.$nextTick(()=>this.ensureCanvas())}}}function VW(){return{setRoadmapViewMode(e){$5.call(this,e)},selectRoadmapVersion(e){this.roadmapSelectedVersion=e||""},async refreshRoadmapState(e={}){await j5.call(this,e)},async fetchRoadmapState(e={}){await Qv.call(this,e)},async fetchRoadmapVersions(e={}){await gu.call(this,e)},async generateRoadmapFromData(){await H5.call(this)},async exportRoadmapSnapshot(){await q5.call(this)},downloadRoadmapSnapshot(){V5.call(this)},async rollbackRoadmap(e){const t=e||this.roadmapSelectedVersion;if(!t){this.roadmapError="Select a version to rollback.";return}await W5.call(this,t),this.roadmapSelectedVersion="",await gu.call(this,{background:!0})},async updateRoadmapMilestone(e={}){await U5.call(this,e)},queueRoadmapRefresh(e={}){$s.call(this,e)}}}function jW(){return{queueRoadmapRefresh({delay:e=500}={}){this.roadmapRefreshHandle&&(clearTimeout(this.roadmapRefreshHandle),this.roadmapRefreshHandle=null),this.roadmapRefreshHandle=setTimeout(()=>{typeof this.refreshRoadmapState=="function"&&this.refreshRoadmapState({background:!0}),this.roadmapRefreshHandle=null},e)}}}function Ex(e,t){return e||t||es()}function GW(e){if(!e||typeof e!="object")return null;const t={...e};return t.package=t.package&&typeof t.package=="object"?t.package:{name:"unregistered-project",version:"0.0.0",packageManager:"npm"},t.dependencies=t.dependencies&&typeof t.dependencies=="object"?t.dependencies:{total:0,items:[]},t.devDependencies=t.devDependencies&&typeof t.devDependencies=="object"?t.devDependencies:{total:0,items:[]},t.frameworks=Array.isArray(t.frameworks)?t.frameworks:[],t.moduleSummary=t.moduleSummary&&typeof t.moduleSummary=="object"?t.moduleSummary:{total:0,detectedCount:0,manualCount:0,byType:{},externalDependencyCount:0,details:[]},t.moduleSummary.details=Array.isArray(t.moduleSummary.details)?t.moduleSummary.details:[],t.cliInsights=t.cliInsights&&typeof t.cliInsights=="object"?t.cliInsights:{project:[],module:[],sessionsAnalyzed:0},t.cliInsights.project=Array.isArray(t.cliInsights.project)?t.cliInsights.project:[],t.cliInsights.module=Array.isArray(t.cliInsights.module)?t.cliInsights.module:[],t.cliInsights.sessionsAnalyzed=t.cliInsights.sessionsAnalyzed||0,t.generatedAt=t.generatedAt||new Date().toISOString(),t}async function ev(e={},t){const r=Ex(t,this),{background:i=!1,force:n=!1}=e;i||(r.techStackLoading=!0,r.techStackError="");try{if(!n&&r.techStackSummary&&!i)return r.techStackSummary;const s=await P5();if(!s||s.success!==!0)throw new Error((s==null?void 0:s.error)||"Unable to load tech stack summary");const a=GW(s.summary);return r.techStackSummary=a,!i&&typeof r.addTask=="function"&&r.addTask("Tech Stack","Tech stack summary refreshed","complete"),a}catch(s){throw console.error("Tech stack summary fetch failed",s),r.techStackError=s.message||"Failed to load tech stack summary",s}finally{i||(r.techStackLoading=!1)}}async function KW(e){var r,i;const t=Ex(e,this);t.techStackExporting=!0,t.techStackExportError="";try{const n=await I5();if(!n||n.success!==!0)throw new Error((n==null?void 0:n.error)||"Tech stack export failed");if(t.techStackExportResult=n.export||null,typeof t.addTask=="function"){const s=((r=n.export)==null?void 0:r.relativePath)||((i=n.export)==null?void 0:i.path),a=s?`Tech stack saved to ${s}`:"Tech stack export complete";t.addTask("Tech Stack",a,"complete")}return typeof t.fetchExports=="function"&&await t.fetchExports(),await ev({background:!0,force:!0},t),n}catch(n){throw console.error("Tech stack export error",n),t.techStackExportError=n.message||"Failed to export tech stack summary",n}finally{t.techStackExporting=!1}}function YW(){return{async fetchTechStackSummary(e={}){await ev.call(this,e)},async refreshTechStackSummary(){await ev.call(this,{force:!0})},async exportTechStackSummary(){await KW.call(this)}}}Vn.use(XM);const Ng=es(),XW=tP(),ZW=tI(),QW=mI(),JW=AI(),eU=zI(),tU=jI(),rU=GI(),iU=fW(),nU=SW(Ng),sU={development:"","data-ai":"",infrastructure:"",security:"","quality-testing":"",specialization:"",general:""},aU=BW(Ng,{agentIconMap:sU}),oU=DW(),lU=PW(),cU=IW(),uU=FW(),hU=OW(),dU=WW(),fU=UW(),pU=VW(),vU=jW(),gU=YW(),Kf={data(){return Ng},computed:{filteredFeatures(){return this.features.filter(e=>!(this.featureFilter.module&&e.moduleId!==this.featureFilter.module||this.featureFilter.status&&e.status!==this.featureFilter.status||this.selectedModules.length>0&&!this.selectedModules.includes(e.moduleId)))},availableTags(){const e=new Set;return this.tickets.forEach(t=>{(t.tags||[]).forEach(r=>e.add(r))}),Array.from(e).sort()},moduleLookup(){return this.modules.reduce((e,t)=>(e[t.id]=t,e),{})},ticketProgress(){return XW.ticketProgress.value},canvasProps(){return rP(this)},ticketsProps(){return iP(this)},featuresProps(){return nP(this)},modulesProps(){return sP(this)},roadmapProps(){return aP(this)},specsProps(){return oP(this)},diagramsProps(){return lP(this)},apiProps(){return cP(this)},storybookProps(){return uP(this)},docsProps(){return hP(this)},techStackProps(){return dP(this)}},methods:{...ZW,...fU,...QW,...eU,...tU,...rU,...iU,...JW,...nU,...aU,...oU,...lU,...cU,...uU,...hU,...dU,...vU,...pU,...gU,async refreshTickets(){await this.fetchTickets()},async refreshFeatures(){await this.fetchFeatures()},handleBulkExport(e){const{type:t,items:r}=e,i={type:t,items:r,exportedAt:new Date().toISOString(),count:r.length},n=JSON.stringify(i,null,2),s=new Blob([n],{type:"application/json"}),a=URL.createObjectURL(s),o=document.createElement("a");o.href=a,o.download=`${t}-bulk-export-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a),console.log(` Exported ${r.length} ${t}`)}},mounted(){this.bootstrapTheme({fallback:"mole"}),this.bootstrap(),this.cliSessionsRefreshHandle=setInterval(()=>{this.activeTab==="specs"&&this.fetchCliSessions()},2e4),this.branchStatusRefreshHandle=setInterval(()=>{this.refreshBranchStatus()},6e4),this.contextStatusRefreshHandle=setInterval(()=>{this.refreshContextStatus()},45e3)},beforeUnmount(){this.cliSessionsRefreshHandle&&(clearInterval(this.cliSessionsRefreshHandle),this.cliSessionsRefreshHandle=null),this.branchStatusRefreshHandle&&(clearInterval(this.branchStatusRefreshHandle),this.branchStatusRefreshHandle=null),this.contextStatusRefreshHandle&&(clearInterval(this.contextStatusRefreshHandle),this.contextStatusRefreshHandle=null),this.roadmapRefreshHandle&&(clearTimeout(this.roadmapRefreshHandle),this.roadmapRefreshHandle=null)}},ht=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r},mU={name:"AppHeader",props:{currentTheme:{type:String,required:!0}},emits:["set-theme"],methods:{emitTheme(e){this.$emit("set-theme",e)}}},yU={class:"app-header header"},_U={class:"theme-switcher"};function bU(e,t,r,i,n,s){return j(),G("header",yU,[B("div",_U,[B("button",{class:Ye(["theme-btn",{active:r.currentTheme==="mole"}]),type:"button",onClick:t[0]||(t[0]=a=>s.emitTheme("mole"))}," MOLE ",2),B("button",{class:Ye(["theme-btn",{active:r.currentTheme==="canyon"}]),type:"button",onClick:t[1]||(t[1]=a=>s.emitTheme("canyon"))}," CANYON ",2)]),t[2]||(t[2]=B("h1",null,"OTKIT",-1)),t[3]||(t[3]=B("p",{class:"subtitle"},"OPERATIONAL TOOLKIT // v1.0",-1))])}const CU=ht(mU,[["render",bU]]),wU={name:"StatuslinePanel",props:{stats:{type:Object,default:null},ticketProgress:{type:Object,default:()=>({open:0,closed:0,total:0,openPct:0,closedPct:0,reported:0,inProgress:0,finished:0})},latestAudit:{type:Object,default:null}},computed:{statusBarOpenClass(){return this.buildStatusWidthClass("status-bar-open",this.ticketProgress.openPct)},statusBarClosedClass(){return this.buildStatusWidthClass("status-bar-closed",this.ticketProgress.closedPct)}},methods:{buildStatusWidthClass(e,t){const r=Number(t);if(!Number.isFinite(r))return`${e}--pct-0`;const i=Math.max(0,Math.min(100,Math.round(r)));return`${e}--pct-${i}`}}},SU={key:0,class:"status-overview"},kU={class:"card status-card"},xU={class:"status-header"},TU={class:"status-counts"},EU={class:"status-metric"},AU={class:"status-value"},BU={class:"status-metric"},DU={class:"status-value"},LU={class:"status-metric"},RU={class:"status-value"},MU={class:"status-bar","aria-label":"Open vs closed work balance"},PU={class:"status-legend"},IU={class:"status-chip open"},FU={class:"status-chip closed"},OU={class:"status-chip reported"},NU={class:"status-chip progress"},$U={class:"status-chip finished"},zU={key:0,class:"status-footnote"},HU={key:0,class:"status-followups"};function qU(e,t,r,i,n,s){return r.stats?(j(),G("div",SU,[B("div",kU,[B("div",xU,[t[3]||(t[3]=B("div",null,[B("h3",{class:"status-header-title"},"Ticket Pulse"),B("p",{class:"status-header-subtitle"},"Live view of open vs closed work")],-1)),B("div",TU,[B("div",EU,[B("div",AU,re(r.ticketProgress.open),1),t[0]||(t[0]=B("div",{class:"status-label"},"Open",-1))]),B("div",BU,[B("div",DU,re(r.ticketProgress.closed),1),t[1]||(t[1]=B("div",{class:"status-label"},"Closed",-1))]),B("div",LU,[B("div",RU,re(r.ticketProgress.total),1),t[2]||(t[2]=B("div",{class:"status-label"},"Total",-1))])])]),B("div",MU,[B("div",{class:Ye(["status-bar-open",s.statusBarOpenClass])},null,2),B("div",{class:Ye(["status-bar-closed",s.statusBarClosedClass])},null,2)]),B("div",PU,[B("span",IU,"Open "+re(r.ticketProgress.openPct)+"%",1),B("span",FU,"Closed "+re(r.ticketProgress.closedPct)+"%",1),B("span",OU,"Reported "+re(r.ticketProgress.reported),1),B("span",NU,"In Progress "+re(r.ticketProgress.inProgress),1),B("span",$U,"Finished "+re(r.ticketProgress.finished),1)]),r.latestAudit?(j(),G("div",zU,[dt(re(r.latestAudit.message)+" ",1),r.latestAudit.followUps&&r.latestAudit.followUps.length?(j(),G("ul",HU,[(j(!0),G(Pe,null,Ke(r.latestAudit.followUps.slice(0,3),(a,o)=>(j(),G("li",{key:o},re(a),1))),128))])):me("",!0)])):me("",!0)])])):me("",!0)}const WU=ht(wU,[["render",qU]]),UU={name:"RecentSessions",data(){return{expanded:!1,sessions:[],loading:!1,error:null,resumingSession:null,deletingSession:null,refreshInterval:null}},mounted(){this.loadSessions(),this.refreshInterval=setInterval(()=>{this.expanded&&!this.loading&&this.loadSessions(!0)},3e4)},beforeUnmount(){this.refreshInterval&&clearInterval(this.refreshInterval)},methods:{toggleExpanded(){this.expanded=!this.expanded,this.expanded&&!this.sessions.length&&this.loadSessions()},async loadSessions(e=!1){e||(this.loading=!0),this.error=null;try{const t=await fetch("/api/sessions/recent?limit=5");if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const r=await t.json();this.sessions=r.sessions||[]}catch(t){console.error("Failed to load recent sessions:",t),this.error=t.message}finally{this.loading=!1}},async resumeSession(e){this.resumingSession=e;try{const t=await fetch(`/api/sessions/${e}/resume`,{method:"POST"});if(!t.ok)throw new Error(`Failed to resume session: ${t.statusText}`);await this.loadSessions(!0),this.$emit("session-resumed",e),this.$parent&&this.$parent.showNotification&&this.$parent.showNotification("Session resumed successfully","success")}catch(t){console.error("Failed to resume session:",t),this.error=t.message}finally{this.resumingSession=null}},async deleteSession(e){if(confirm("Are you sure you want to delete this session?")){this.deletingSession=e;try{const t=await fetch(`/api/sessions/${e}`,{method:"DELETE"});if(!t.ok)throw new Error(`Failed to delete session: ${t.statusText}`);this.sessions=this.sessions.filter(r=>r.id!==e),this.$emit("session-deleted",e),this.$parent&&this.$parent.showNotification&&this.$parent.showNotification("Session deleted successfully","success")}catch(t){console.error("Failed to delete session:",t),this.error=t.message}finally{this.deletingSession=null}}},viewSession(e){this.$emit("session-view",e)},viewAllSessions(){this.$emit("view-all-sessions")},refreshSessions(){this.loadSessions()},formatSessionType(e){return{spec:"Spec",feature:"Feature",bug:"Bug",interview:"Interview",custom:"Custom"}[e]||e},formatRelativeTime(e){const t=new Date,r=new Date(e),i=t-r,n=Math.floor(i/(1e3*60)),s=Math.floor(i/(1e3*60*60)),a=Math.floor(i/(1e3*60*60*24));return n<1?"just now":n<60?`${n}m ago`:s<24?`${s}h ago`:a<7?`${a}d ago`:r.toLocaleDateString()}}},VU={class:"recent-sessions"},jU={class:"recent-sessions-header"},GU=["aria-expanded"],KU={key:0,class:"recent-sessions-content"},YU={key:0,class:"sessions-loading"},XU={key:1,class:"sessions-error"},ZU={key:2,class:"sessions-empty"},QU={key:3,class:"sessions-list"},JU={class:"session-info"},eV={class:"session-type-and-status"},tV={class:"session-type"},rV={class:"session-title"},iV={class:"session-meta"},nV={class:"session-time"},sV={class:"session-progress"},aV={class:"session-actions"},oV=["onClick","disabled"],lV=["onClick"],cV=["onClick","disabled"],uV={class:"sessions-footer"},hV=["disabled"];function dV(e,t,r,i,n,s){return j(),G("div",VU,[B("div",jU,[t[3]||(t[3]=B("h3",null,"Recent Sessions",-1)),B("button",{class:"sessions-toggle",onClick:t[0]||(t[0]=(...a)=>s.toggleExpanded&&s.toggleExpanded(...a)),"aria-expanded":n.expanded,"aria-label":"Toggle recent sessions"},re(n.expanded?"":"+"),9,GU)]),n.expanded?(j(),G("div",KU,[n.loading?(j(),G("div",YU," Loading sessions... ")):n.error?(j(),G("div",XU," Failed to load sessions: "+re(n.error),1)):n.sessions.length?(j(),G("ul",QU,[(j(!0),G(Pe,null,Ke(n.sessions,a=>(j(),G("li",{key:a.id,class:"session-item"},[B("div",JU,[B("div",eV,[B("span",tV,re(s.formatSessionType(a.type)),1),B("span",{class:Ye(["session-status",a.status])},re(a.status),3)]),B("div",rV,re(a.metadata.title||a.metadata.description||`Session ${a.id.split("-").pop()}`),1),B("div",iV,[B("span",nV,re(s.formatRelativeTime(a.metadata.lastAccessedAt)),1),B("span",sV,re(a.progress.percentage)+"%",1)])]),B("div",aV,[a.status==="paused"?(j(),G("button",{key:0,class:"session-action session-resume",onClick:o=>s.resumeSession(a.id),disabled:n.resumingSession===a.id,title:"Resume session"},re(n.resumingSession===a.id?"...":""),9,oV)):a.status==="active"?(j(),G("button",{key:1,class:"session-action session-view",onClick:o=>s.viewSession(a.id),title:"View session"},"  ",8,lV)):me("",!0),B("button",{class:"session-action session-delete",onClick:o=>s.deleteSession(a.id),disabled:n.deletingSession===a.id,title:"Delete session"},re(n.deletingSession===a.id?"...":""),9,cV)])]))),128))])):(j(),G("div",ZU," No recent sessions found ")),B("div",uV,[B("button",{class:"sessions-view-all",onClick:t[1]||(t[1]=(...a)=>s.viewAllSessions&&s.viewAllSessions(...a))}," View All Sessions "),B("button",{class:"sessions-refresh",onClick:t[2]||(t[2]=(...a)=>s.refreshSessions&&s.refreshSessions(...a)),disabled:n.loading},re(n.loading?"...":""),9,hV)])])):me("",!0)])}const fV=ht(UU,[["render",dV]]),pV={name:"CommandCenter",components:{StatuslinePanel:WU,RecentSessions:fV},props:{claudeCommand:{type:String,default:""},taskQueue:{type:Array,default:()=>[]},stats:{type:Object,default:null},ticketProgress:{type:Object,default:()=>({open:0,closed:0,total:0,openPct:0,closedPct:0,reported:0,inProgress:0,finished:0})},latestAudit:{type:Object,default:null},placeholder:{type:String,default:"setup audit | analyze modules | detect dependencies | fix issue #123 | generate docs (auto --ultrathink)"},onExecute:{type:Function,default:null}},emits:["update:claudeCommand"],computed:{commandValue:{get(){return this.claudeCommand},set(e){this.$emit("update:claudeCommand",e)}}},methods:{runCommand(){typeof this.onExecute=="function"&&this.onExecute()},clearTasks(){this.$emit("clear-tasks")},handleSessionResumed(e){console.log("Session resumed:",e),this.$emit("session-resumed",e)},handleSessionDeleted(e){console.log("Session deleted:",e),this.$emit("session-deleted",e)},handleSessionView(e){console.log("View session:",e),this.$emit("session-view",e)},handleViewAllSessions(){console.log("View all sessions"),this.$emit("view-all-sessions")}}},vV={class:"command-center","aria-label":"Command Center","data-command-center":""},gV={class:"command-input-row"},mV=["placeholder"],yV={key:0,class:"task-queue"},_V={class:"task-queue-header"},bV={class:"task-list"},CV={class:"task-agent"},wV={class:"task-description"};function SV(e,t,r,i,n,s){const a=ot("StatuslinePanel"),o=ot("RecentSessions");return j(),G("section",vV,[t[6]||(t[6]=Uo('<header class="command-header"><div class="command-title"><span class="command-icon" aria-hidden="true"></span><div><h2>Command Center</h2><p class="command-subtitle">Launch Claude workflows and track automation activity.</p></div></div><div class="command-shortcuts" aria-hidden="true"><code>/spec</code><code>/new-feature</code><code>/runbook</code><code>/run tests</code></div></header>',1)),B("div",gV,[t[4]||(t[4]=B("label",{class:"command-input-label",for:"claude-command-input"},"claude$",-1)),an(B("input",{id:"claude-command-input",class:"command-input",type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>s.commandValue=l),onKeyup:t[1]||(t[1]=na((...l)=>s.runCommand&&s.runCommand(...l),["enter"])),placeholder:r.placeholder,"aria-label":"Claude command"},null,40,mV),[[Zc,s.commandValue]]),B("button",{class:"command-execute",type:"button",onClick:t[2]||(t[2]=(...l)=>s.runCommand&&s.runCommand(...l))},"Execute")]),r.taskQueue.length?(j(),G("div",yV,[B("div",_V,[t[5]||(t[5]=B("h3",null,"Activity",-1)),B("button",{class:"task-clear",type:"button",onClick:t[3]||(t[3]=(...l)=>s.clearTasks&&s.clearTasks(...l)),"aria-label":"Clear completed tasks"},"")]),B("ul",bV,[(j(!0),G(Pe,null,Ke(r.taskQueue,l=>(j(),G("li",{key:l.id,class:"task-item"},[B("span",CV,re(l.agent),1),B("span",wV,re(l.description),1),B("span",{class:Ye(["task-status",l.status])},re(l.status),3)]))),128))])])):me("",!0),st(a,{stats:r.stats,"ticket-progress":r.ticketProgress,"latest-audit":r.latestAudit},null,8,["stats","ticket-progress","latest-audit"]),st(o,{onSessionResumed:s.handleSessionResumed,onSessionDeleted:s.handleSessionDeleted,onSessionView:s.handleSessionView,onViewAllSessions:s.handleViewAllSessions},null,8,["onSessionResumed","onSessionDeleted","onSessionView","onViewAllSessions"])])}const kV=ht(pV,[["render",SV]]);var Yf={exports:{}},Mb;function xV(){return Mb||(Mb=1,(function(e,t){(function(r,i){e.exports=i()})(globalThis,(()=>(()=>{var r={4567:function(a,o,l){var c=this&&this.__decorate||function(f,m,b,C){var S,k=arguments.length,w=k<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,m,b,C);else for(var x=f.length-1;x>=0;x--)(S=f[x])&&(w=(k<3?S(w):k>3?S(m,b,w):S(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(f,m){return function(b,C){m(b,C,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const h=l(9042),d=l(9924),p=l(844),y=l(4725),_=l(2585),v=l(3656);let g=o.AccessibilityManager=class extends p.Disposable{constructor(f,m,b,C){super(),this._terminal=f,this._coreBrowserService=b,this._renderService=C,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let S=0;S<this._terminal.rows;S++)this._rowElements[S]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[S]);if(this._topBoundaryFocusListener=S=>this._handleBoundaryFocus(S,0),this._bottomBoundaryFocusListener=S=>this._handleBoundaryFocus(S,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new d.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((S=>this._handleResize(S.rows)))),this.register(this._terminal.onRender((S=>this._refreshRows(S.start,S.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((S=>this._handleChar(S)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((S=>this._handleTab(S)))),this.register(this._terminal.onKey((S=>this._handleKey(S.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,v.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,p.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(f){for(let m=0;m<f;m++)this._handleChar(" ")}_handleChar(f){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==f&&(this._charsToAnnounce+=f):this._charsToAnnounce+=f,f===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=h.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(f){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(f)||this._charsToConsume.push(f)}_refreshRows(f,m){this._liveRegionDebouncer.refresh(f,m,this._terminal.rows)}_renderRows(f,m){const b=this._terminal.buffer,C=b.lines.length.toString();for(let S=f;S<=m;S++){const k=b.lines.get(b.ydisp+S),w=[],x=(k==null?void 0:k.translateToString(!0,void 0,void 0,w))||"",A=(b.ydisp+S+1).toString(),D=this._rowElements[S];D&&(x.length===0?(D.innerText="",this._rowColumns.set(D,[0,1])):(D.textContent=x,this._rowColumns.set(D,w)),D.setAttribute("aria-posinset",A),D.setAttribute("aria-setsize",C))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(f,m){const b=f.target,C=this._rowElements[m===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(m===0?"1":`${this._terminal.buffer.lines.length}`)||f.relatedTarget!==C)return;let S,k;if(m===0?(S=b,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(S=this._rowElements.shift(),k=b,this._rowContainer.removeChild(S)),S.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),m===0){const w=this._createAccessibilityTreeNode();this._rowElements.unshift(w),this._rowContainer.insertAdjacentElement("afterbegin",w)}else{const w=this._createAccessibilityTreeNode();this._rowElements.push(w),this._rowContainer.appendChild(w)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(m===0?-1:1),this._rowElements[m===0?1:this._rowElements.length-2].focus(),f.preventDefault(),f.stopImmediatePropagation()}_handleSelectionChange(){var x;if(this._rowElements.length===0)return;const f=document.getSelection();if(!f)return;if(f.isCollapsed)return void(this._rowContainer.contains(f.anchorNode)&&this._terminal.clearSelection());if(!f.anchorNode||!f.focusNode)return void console.error("anchorNode and/or focusNode are null");let m={node:f.anchorNode,offset:f.anchorOffset},b={node:f.focusNode,offset:f.focusOffset};if((m.node.compareDocumentPosition(b.node)&Node.DOCUMENT_POSITION_PRECEDING||m.node===b.node&&m.offset>b.offset)&&([m,b]=[b,m]),m.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(m={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(m.node))return;const C=this._rowElements.slice(-1)[0];if(b.node.compareDocumentPosition(C)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(b={node:C,offset:((x=C.textContent)==null?void 0:x.length)??0}),!this._rowContainer.contains(b.node))return;const S=({node:A,offset:D})=>{const T=A instanceof Text?A.parentNode:A;let E=parseInt(T==null?void 0:T.getAttribute("aria-posinset"),10)-1;if(isNaN(E))return console.warn("row is invalid. Race condition?"),null;const R=this._rowColumns.get(T);if(!R)return console.warn("columns is null. Race condition?"),null;let F=D<R.length?R[D]:R.slice(-1)[0]+1;return F>=this._terminal.cols&&(++E,F=0),{row:E,column:F}},k=S(m),w=S(b);if(k&&w){if(k.row>w.row||k.row===w.row&&k.column>=w.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(w.row-k.row)*this._terminal.cols-k.column+w.column)}}_handleResize(f){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let m=this._rowContainer.children.length;m<this._terminal.rows;m++)this._rowElements[m]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[m]);for(;this._rowElements.length>f;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const f=this._coreBrowserService.mainDocument.createElement("div");return f.setAttribute("role","listitem"),f.tabIndex=-1,this._refreshRowDimensions(f),f}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let f=0;f<this._terminal.rows;f++)this._refreshRowDimensions(this._rowElements[f])}}_refreshRowDimensions(f){f.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=g=c([u(1,_.IInstantiationService),u(2,y.ICoreBrowserService),u(3,y.IRenderService)],g)},3614:(a,o)=>{function l(d){return d.replace(/\r?\n/g,"\r")}function c(d,p){return p?"\x1B[200~"+d+"\x1B[201~":d}function u(d,p,y,_){d=c(d=l(d),y.decPrivateModes.bracketedPasteMode&&_.rawOptions.ignoreBracketedPasteMode!==!0),y.triggerDataEvent(d,!0),p.value=""}function h(d,p,y){const _=y.getBoundingClientRect(),v=d.clientX-_.left-10,g=d.clientY-_.top-10;p.style.width="20px",p.style.height="20px",p.style.left=`${v}px`,p.style.top=`${g}px`,p.style.zIndex="1000",p.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=l,o.bracketTextForPaste=c,o.copyHandler=function(d,p){d.clipboardData&&d.clipboardData.setData("text/plain",p.selectionText),d.preventDefault()},o.handlePasteEvent=function(d,p,y,_){d.stopPropagation(),d.clipboardData&&u(d.clipboardData.getData("text/plain"),p,y,_)},o.paste=u,o.moveTextAreaUnderMouseCursor=h,o.rightClickHandler=function(d,p,y,_,v){h(d,p,y),v&&_.rightClickSelect(d),p.value=_.selectionText,p.select()}},7239:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const c=l(1505);o.ColorContrastCache=class{constructor(){this._color=new c.TwoKeyMap,this._css=new c.TwoKeyMap}setCss(u,h,d){this._css.set(u,h,d)}getCss(u,h){return this._css.get(u,h)}setColor(u,h,d){this._color.set(u,h,d)}getColor(u,h){return this._color.get(u,h)}clear(){this._color.clear(),this._css.clear()}}},3656:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(l,c,u,h){l.addEventListener(c,u,h);let d=!1;return{dispose:()=>{d||(d=!0,l.removeEventListener(c,u,h))}}}},3551:function(a,o,l){var c=this&&this.__decorate||function(g,f,m,b){var C,S=arguments.length,k=S<3?f:b===null?b=Object.getOwnPropertyDescriptor(f,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(g,f,m,b);else for(var w=g.length-1;w>=0;w--)(C=g[w])&&(k=(S<3?C(k):S>3?C(f,m,k):C(f,m))||k);return S>3&&k&&Object.defineProperty(f,m,k),k},u=this&&this.__param||function(g,f){return function(m,b){f(m,b,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier=void 0;const h=l(3656),d=l(8460),p=l(844),y=l(2585),_=l(4725);let v=o.Linkifier=class extends p.Disposable{get currentLink(){return this._currentLink}constructor(g,f,m,b,C){super(),this._element=g,this._mouseService=f,this._renderService=m,this._bufferService=b,this._linkProviderService=C,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new d.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new d.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,p.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,p.toDisposable)((()=>{var S;this._lastMouseEvent=void 0,(S=this._activeProviderReplies)==null||S.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,h.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,h.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,h.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(g){this._lastMouseEvent=g;const f=this._positionFromMouseEvent(g,this._element,this._mouseService);if(!f)return;this._isMouseOut=!1;const m=g.composedPath();for(let b=0;b<m.length;b++){const C=m[b];if(C.classList.contains("xterm"))break;if(C.classList.contains("xterm-hover"))return}this._lastBufferCell&&f.x===this._lastBufferCell.x&&f.y===this._lastBufferCell.y||(this._handleHover(f),this._lastBufferCell=f)}_handleHover(g){if(this._activeLine!==g.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(g,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,g)||(this._clearCurrentLink(),this._askForLink(g,!0))}_askForLink(g,f){var b,C;this._activeProviderReplies&&f||((b=this._activeProviderReplies)==null||b.forEach((S=>{S==null||S.forEach((k=>{k.link.dispose&&k.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=g.y);let m=!1;for(const[S,k]of this._linkProviderService.linkProviders.entries())f?(C=this._activeProviderReplies)!=null&&C.get(S)&&(m=this._checkLinkProviderResult(S,g,m)):k.provideLinks(g.y,(w=>{var A,D;if(this._isMouseOut)return;const x=w==null?void 0:w.map((T=>({link:T})));(A=this._activeProviderReplies)==null||A.set(S,x),m=this._checkLinkProviderResult(S,g,m),((D=this._activeProviderReplies)==null?void 0:D.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(g.y,this._activeProviderReplies)}))}_removeIntersectingLinks(g,f){const m=new Set;for(let b=0;b<f.size;b++){const C=f.get(b);if(C)for(let S=0;S<C.length;S++){const k=C[S],w=k.link.range.start.y<g?0:k.link.range.start.x,x=k.link.range.end.y>g?this._bufferService.cols:k.link.range.end.x;for(let A=w;A<=x;A++){if(m.has(A)){C.splice(S--,1);break}m.add(A)}}}}_checkLinkProviderResult(g,f,m){var S;if(!this._activeProviderReplies)return m;const b=this._activeProviderReplies.get(g);let C=!1;for(let k=0;k<g;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(C=!0);if(!C&&b){const k=b.find((w=>this._linkAtPosition(w.link,f)));k&&(m=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!m)for(let k=0;k<this._activeProviderReplies.size;k++){const w=(S=this._activeProviderReplies.get(k))==null?void 0:S.find((x=>this._linkAtPosition(x.link,f)));if(w){m=!0,this._handleNewLink(w);break}}return m}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(g){if(!this._currentLink)return;const f=this._positionFromMouseEvent(g,this._element,this._mouseService);f&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,f)&&this._currentLink.link.activate(g,this._currentLink.link.text)}_clearCurrentLink(g,f){this._currentLink&&this._lastMouseEvent&&(!g||!f||this._currentLink.link.range.start.y>=g&&this._currentLink.link.range.end.y<=f)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,p.disposeArray)(this._linkCacheDisposables))}_handleNewLink(g){if(!this._lastMouseEvent)return;const f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(g.link,f)&&(this._currentLink=g,this._currentLink.state={decorations:{underline:g.link.decorations===void 0||g.link.decorations.underline,pointerCursor:g.link.decorations===void 0||g.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,g.link,this._lastMouseEvent),g.link.decorations={},Object.defineProperties(g.link.decorations,{pointerCursor:{get:()=>{var m,b;return(b=(m=this._currentLink)==null?void 0:m.state)==null?void 0:b.decorations.pointerCursor},set:m=>{var b;(b=this._currentLink)!=null&&b.state&&this._currentLink.state.decorations.pointerCursor!==m&&(this._currentLink.state.decorations.pointerCursor=m,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",m))}},underline:{get:()=>{var m,b;return(b=(m=this._currentLink)==null?void 0:m.state)==null?void 0:b.decorations.underline},set:m=>{var b,C,S;(b=this._currentLink)!=null&&b.state&&((S=(C=this._currentLink)==null?void 0:C.state)==null?void 0:S.decorations.underline)!==m&&(this._currentLink.state.decorations.underline=m,this._currentLink.state.isHovered&&this._fireUnderlineEvent(g.link,m))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((m=>{if(!this._currentLink)return;const b=m.start===0?0:m.start+1+this._bufferService.buffer.ydisp,C=this._bufferService.buffer.ydisp+1+m.end;if(this._currentLink.link.range.start.y>=b&&this._currentLink.link.range.end.y<=C&&(this._clearCurrentLink(b,C),this._lastMouseEvent)){const S=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);S&&this._askForLink(S,!1)}}))))}_linkHover(g,f,m){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!0),this._currentLink.state.decorations.pointerCursor&&g.classList.add("xterm-cursor-pointer")),f.hover&&f.hover(m,f.text)}_fireUnderlineEvent(g,f){const m=g.range,b=this._bufferService.buffer.ydisp,C=this._createLinkUnderlineEvent(m.start.x-1,m.start.y-b-1,m.end.x,m.end.y-b-1,void 0);(f?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(C)}_linkLeave(g,f,m){var b;(b=this._currentLink)!=null&&b.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(f,!1),this._currentLink.state.decorations.pointerCursor&&g.classList.remove("xterm-cursor-pointer")),f.leave&&f.leave(m,f.text)}_linkAtPosition(g,f){const m=g.range.start.y*this._bufferService.cols+g.range.start.x,b=g.range.end.y*this._bufferService.cols+g.range.end.x,C=f.y*this._bufferService.cols+f.x;return m<=C&&C<=b}_positionFromMouseEvent(g,f,m){const b=m.getCoords(g,f,this._bufferService.cols,this._bufferService.rows);if(b)return{x:b[0],y:b[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(g,f,m,b,C){return{x1:g,y1:f,x2:m,y2:b,cols:this._bufferService.cols,fg:C}}};o.Linkifier=v=c([u(1,_.IMouseService),u(2,_.IRenderService),u(3,y.IBufferService),u(4,_.ILinkProviderService)],v)},9042:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(a,o,l){var c=this&&this.__decorate||function(_,v,g,f){var m,b=arguments.length,C=b<3?v:f===null?f=Object.getOwnPropertyDescriptor(v,g):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,v,g,f);else for(var S=_.length-1;S>=0;S--)(m=_[S])&&(C=(b<3?m(C):b>3?m(v,g,C):m(v,g))||C);return b>3&&C&&Object.defineProperty(v,g,C),C},u=this&&this.__param||function(_,v){return function(g,f){v(g,f,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const h=l(511),d=l(2585);let p=o.OscLinkProvider=class{constructor(_,v,g){this._bufferService=_,this._optionsService=v,this._oscLinkService=g}provideLinks(_,v){var x;const g=this._bufferService.buffer.lines.get(_-1);if(!g)return void v(void 0);const f=[],m=this._optionsService.rawOptions.linkHandler,b=new h.CellData,C=g.getTrimmedLength();let S=-1,k=-1,w=!1;for(let A=0;A<C;A++)if(k!==-1||g.hasContent(A)){if(g.loadCell(A,b),b.hasExtendedAttrs()&&b.extended.urlId){if(k===-1){k=A,S=b.extended.urlId;continue}w=b.extended.urlId!==S}else k!==-1&&(w=!0);if(w||k!==-1&&A===C-1){const D=(x=this._oscLinkService.getLinkData(S))==null?void 0:x.uri;if(D){const T={start:{x:k+1,y:_},end:{x:A+(w||A!==C-1?0:1),y:_}};let E=!1;if(!(m!=null&&m.allowNonHttpProtocols))try{const R=new URL(D);["http:","https:"].includes(R.protocol)||(E=!0)}catch{E=!0}E||f.push({text:D,range:T,activate:(R,F)=>m?m.activate(R,F,T):y(0,F),hover:(R,F)=>{var O;return(O=m==null?void 0:m.hover)==null?void 0:O.call(m,R,F,T)},leave:(R,F)=>{var O;return(O=m==null?void 0:m.leave)==null?void 0:O.call(m,R,F,T)}})}w=!1,b.hasExtendedAttrs()&&b.extended.urlId?(k=A,S=b.extended.urlId):(k=-1,S=-1)}}v(f)}};function y(_,v){if(confirm(`Do you want to navigate to ${v}?

WARNING: This link could potentially be dangerous`)){const g=window.open();if(g){try{g.opener=null}catch{}g.location.href=v}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=p=c([u(0,d.IBufferService),u(1,d.IOptionsService),u(2,d.IOscLinkService)],p)},6193:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(l,c){this._renderCallback=l,this._coreBrowserService=c,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},3236:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const c=l(3614),u=l(3656),h=l(3551),d=l(9042),p=l(3730),y=l(1680),_=l(3107),v=l(5744),g=l(2950),f=l(1296),m=l(428),b=l(4269),C=l(5114),S=l(8934),k=l(3230),w=l(9312),x=l(4725),A=l(6731),D=l(8055),T=l(8969),E=l(8460),R=l(844),F=l(6114),O=l(8437),$=l(2584),H=l(7399),L=l(5941),I=l(9074),P=l(2585),z=l(5435),K=l(4567),te=l(779);class J extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(V={}){super(V),this.browser=F,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new R.MutableDisposable),this._onCursorMove=this.register(new E.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new E.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new E.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new E.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new E.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new E.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new E.EventEmitter),this._onBlur=this.register(new E.EventEmitter),this._onA11yCharEmitter=this.register(new E.EventEmitter),this._onA11yTabEmitter=this.register(new E.EventEmitter),this._onWillOpen=this.register(new E.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(P.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(te.LinkProviderService),this._instantiationService.setService(x.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(p.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((N,ee)=>this.refresh(N,ee)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((N=>this._reportWindowsOptions(N)))),this.register(this._inputHandler.onColor((N=>this._handleColorEvent(N)))),this.register((0,E.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,E.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,E.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,E.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((N=>this._afterResize(N.cols,N.rows)))),this.register((0,R.toDisposable)((()=>{var N,ee;this._customKeyEventHandler=void 0,(ee=(N=this.element)==null?void 0:N.parentNode)==null||ee.removeChild(this.element)})))}_handleColorEvent(V){if(this._themeService)for(const N of V){let ee,U="";switch(N.index){case 256:ee="foreground",U="10";break;case 257:ee="background",U="11";break;case 258:ee="cursor",U="12";break;default:ee="ansi",U="4;"+N.index}switch(N.type){case 0:const X=D.color.toColorRGB(ee==="ansi"?this._themeService.colors.ansi[N.index]:this._themeService.colors[ee]);this.coreService.triggerDataEvent(`${$.C0.ESC}]${U};${(0,L.toRgbString)(X)}${$.C1_ESCAPED.ST}`);break;case 1:if(ee==="ansi")this._themeService.modifyColors((M=>M.ansi[N.index]=D.channels.toColor(...N.color)));else{const M=ee;this._themeService.modifyColors((q=>q[M]=D.channels.toColor(...N.color)))}break;case 2:this._themeService.restoreColor(N.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(V){V?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(K.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(V){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent($.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var V;return(V=this.textarea)==null?void 0:V.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent($.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const V=this.buffer.ybase+this.buffer.y,N=this.buffer.lines.get(V);if(!N)return;const ee=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,X=N.getWidth(ee),M=this._renderService.dimensions.css.cell.width*X,q=this.buffer.y*this._renderService.dimensions.css.cell.height,Q=ee*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Q+"px",this.textarea.style.top=q+"px",this.textarea.style.width=M+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,u.addDisposableDomListener)(this.element,"copy",(N=>{this.hasSelection()&&(0,c.copyHandler)(N,this._selectionService)})));const V=N=>(0,c.handlePasteEvent)(N,this.textarea,this.coreService,this.optionsService);this.register((0,u.addDisposableDomListener)(this.textarea,"paste",V)),this.register((0,u.addDisposableDomListener)(this.element,"paste",V)),F.isFirefox?this.register((0,u.addDisposableDomListener)(this.element,"mousedown",(N=>{N.button===2&&(0,c.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,u.addDisposableDomListener)(this.element,"contextmenu",(N=>{(0,c.rightClickHandler)(N,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),F.isLinux&&this.register((0,u.addDisposableDomListener)(this.element,"auxclick",(N=>{N.button===1&&(0,c.moveTextAreaUnderMouseCursor)(N,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,u.addDisposableDomListener)(this.textarea,"keyup",(V=>this._keyUp(V)),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keydown",(V=>this._keyDown(V)),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"keypress",(V=>this._keyPress(V)),!0)),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionupdate",(V=>this._compositionHelper.compositionupdate(V)))),this.register((0,u.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,u.addDisposableDomListener)(this.textarea,"input",(V=>this._inputEvent(V)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(V){var ee;if(!V)throw new Error("Terminal requires a parent element.");if(V.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),((ee=this.element)==null?void 0:ee.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=V.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),V.appendChild(this.element);const N=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),N.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,u.addDisposableDomListener)(this.screenElement,"mousemove",(U=>this.updateCursorStyle(U)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),N.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",d.promptLabel),F.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(C.CoreBrowserService,this.textarea,V.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(x.ICoreBrowserService,this._coreBrowserService),this.register((0,u.addDisposableDomListener)(this.textarea,"focus",(U=>this._handleTextAreaFocus(U)))),this.register((0,u.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(m.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(x.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(A.ThemeService),this._instantiationService.setService(x.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(b.CharacterJoinerService),this._instantiationService.setService(x.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(x.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((U=>this._onRender.fire(U)))),this.onResize((U=>this._renderService.resize(U.cols,U.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(g.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(S.MouseService),this._instantiationService.setService(x.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(h.Linkifier,this.screenElement)),this.element.appendChild(N);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(y.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((U=>this.scrollLines(U.amount,U.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(w.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(x.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((U=>this.scrollLines(U.amount,U.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,u.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(_.BufferDecorationRenderer,this.screenElement)),this.register((0,u.addDisposableDomListener)(this.element,"mousedown",(U=>this._selectionService.handleMouseDown(U)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(K.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(U=>this._handleScreenReaderModeOptionChange(U)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(v.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(v.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(f.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const V=this,N=this.element;function ee(M){const q=V._mouseService.getMouseReportCoords(M,V.screenElement);if(!q)return!1;let Q,se;switch(M.overrideType||M.type){case"mousemove":se=32,M.buttons===void 0?(Q=3,M.button!==void 0&&(Q=M.button<3?M.button:3)):Q=1&M.buttons?0:4&M.buttons?1:2&M.buttons?2:3;break;case"mouseup":se=0,Q=M.button<3?M.button:3;break;case"mousedown":se=1,Q=M.button<3?M.button:3;break;case"wheel":if(V._customWheelEventHandler&&V._customWheelEventHandler(M)===!1||V.viewport.getLinesScrolled(M)===0)return!1;se=M.deltaY<0?0:1,Q=4;break;default:return!1}return!(se===void 0||Q===void 0||Q>4)&&V.coreMouseService.triggerMouseEvent({col:q.col,row:q.row,x:q.x,y:q.y,button:Q,action:se,ctrl:M.ctrlKey,alt:M.altKey,shift:M.shiftKey})}const U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:M=>(ee(M),M.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(M)),wheel:M=>(ee(M),this.cancel(M,!0)),mousedrag:M=>{M.buttons&&ee(M)},mousemove:M=>{M.buttons||ee(M)}};this.register(this.coreMouseService.onProtocolChange((M=>{M?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(M)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&M?U.mousemove||(N.addEventListener("mousemove",X.mousemove),U.mousemove=X.mousemove):(N.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&M?U.wheel||(N.addEventListener("wheel",X.wheel,{passive:!1}),U.wheel=X.wheel):(N.removeEventListener("wheel",U.wheel),U.wheel=null),2&M?U.mouseup||(U.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&M?U.mousedrag||(U.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,u.addDisposableDomListener)(N,"mousedown",(M=>{if(M.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(M))return ee(M),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(M)}))),this.register((0,u.addDisposableDomListener)(N,"wheel",(M=>{if(!U.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(M)===!1)return!1;if(!this.buffer.hasScrollback){const q=this.viewport.getLinesScrolled(M);if(q===0)return;const Q=$.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(M.deltaY<0?"A":"B");let se="";for(let Z=0;Z<Math.abs(q);Z++)se+=Q;return this.coreService.triggerDataEvent(se,!0),this.cancel(M,!0)}return this.viewport.handleWheel(M)?this.cancel(M):void 0}}),{passive:!1})),this.register((0,u.addDisposableDomListener)(N,"touchstart",(M=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(M),this.cancel(M)}),{passive:!0})),this.register((0,u.addDisposableDomListener)(N,"touchmove",(M=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(M)?void 0:this.cancel(M)}),{passive:!1}))}refresh(V,N){var ee;(ee=this._renderService)==null||ee.refreshRows(V,N)}updateCursorStyle(V){var N;(N=this._selectionService)!=null&&N.shouldColumnSelect(V)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(V,N,ee=0){var U;ee===1?(super.scrollLines(V,N,ee),this.refresh(0,this.rows-1)):(U=this.viewport)==null||U.scrollLines(V)}paste(V){(0,c.paste)(V,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(V){this._customKeyEventHandler=V}attachCustomWheelEventHandler(V){this._customWheelEventHandler=V}registerLinkProvider(V){return this._linkProviderService.registerLinkProvider(V)}registerCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const N=this._characterJoinerService.register(V);return this.refresh(0,this.rows-1),N}deregisterCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(V)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(V){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+V)}registerDecoration(V){return this._decorationService.registerDecoration(V)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(V,N,ee){this._selectionService.setSelection(V,N,ee)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var V;(V=this._selectionService)==null||V.clearSelection()}selectAll(){var V;(V=this._selectionService)==null||V.selectAll()}selectLines(V,N){var ee;(ee=this._selectionService)==null||ee.selectLines(V,N)}_keyDown(V){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;const N=this.browser.isMac&&this.options.macOptionIsMeta&&V.altKey;if(!N&&!this._compositionHelper.keydown(V))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;N||V.key!=="Dead"&&V.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const ee=(0,H.evaluateKeyboardEvent)(V,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(V),ee.type===3||ee.type===2){const U=this.rows-1;return this.scrollLines(ee.type===2?-U:U),this.cancel(V,!0)}return ee.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,V)||(ee.cancel&&this.cancel(V,!0),!ee.key||!!(V.key&&!V.ctrlKey&&!V.altKey&&!V.metaKey&&V.key.length===1&&V.key.charCodeAt(0)>=65&&V.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(ee.key!==$.C0.ETX&&ee.key!==$.C0.CR||(this.textarea.value=""),this._onKey.fire({key:ee.key,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(ee.key,!0),!this.optionsService.rawOptions.screenReaderMode||V.altKey||V.ctrlKey?this.cancel(V,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(V,N){const ee=V.isMac&&!this.options.macOptionIsMeta&&N.altKey&&!N.ctrlKey&&!N.metaKey||V.isWindows&&N.altKey&&N.ctrlKey&&!N.metaKey||V.isWindows&&N.getModifierState("AltGraph");return N.type==="keypress"?ee:ee&&(!N.keyCode||N.keyCode>47)}_keyUp(V){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1||((function(N){return N.keyCode===16||N.keyCode===17||N.keyCode===18})(V)||this.focus(),this.updateCursorStyle(V),this._keyPressHandled=!1)}_keyPress(V){let N;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;if(this.cancel(V),V.charCode)N=V.charCode;else if(V.which===null||V.which===void 0)N=V.keyCode;else{if(V.which===0||V.charCode===0)return!1;N=V.which}return!(!N||(V.altKey||V.ctrlKey||V.metaKey)&&!this._isThirdLevelShift(this.browser,V)||(N=String.fromCharCode(N),this._onKey.fire({key:N,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(N,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(V){if(V.data&&V.inputType==="insertText"&&(!V.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const N=V.data;return this.coreService.triggerDataEvent(N,!0),this.cancel(V),!0}return!1}resize(V,N){V!==this.cols||N!==this.rows?super.resize(V,N):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(V,N){var ee,U;(ee=this._charSizeService)==null||ee.measure(),(U=this.viewport)==null||U.syncScrollArea(!0)}clear(){var V;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let N=1;N<this.rows;N++)this.buffer.lines.push(this.buffer.getBlankLine(O.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(V=this.viewport)==null||V.reset(),this.refresh(0,this.rows-1)}}reset(){var N,ee;this.options.rows=this.rows,this.options.cols=this.cols;const V=this._customKeyEventHandler;this._setup(),super.reset(),(N=this._selectionService)==null||N.reset(),this._decorationService.reset(),(ee=this.viewport)==null||ee.reset(),this._customKeyEventHandler=V,this.refresh(0,this.rows-1)}clearTextureAtlas(){var V;(V=this._renderService)==null||V.clearTextureAtlas()}_reportFocus(){var V;(V=this.element)!=null&&V.classList.contains("focus")?this.coreService.triggerDataEvent($.C0.ESC+"[I"):this.coreService.triggerDataEvent($.C0.ESC+"[O")}_reportWindowsOptions(V){if(this._renderService)switch(V){case z.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const N=this._renderService.dimensions.css.canvas.width.toFixed(0),ee=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${$.C0.ESC}[4;${ee};${N}t`);break;case z.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const U=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${$.C0.ESC}[6;${X};${U}t`)}}cancel(V,N){if(this.options.cancelEvents||N)return V.preventDefault(),V.stopPropagation(),!1}}o.Terminal=J},9924:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(l,c=1e3){this._renderCallback=l,this._debounceThresholdMS=c,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,c,u){this._rowCount=u,l=l!==void 0?l:0,c=c!==void 0?c:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,c):c;const h=Date.now();if(h-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=h,this._innerRefresh();else if(!this._additionalRefreshRequested){const d=h-this._lastRefreshMs,p=this._debounceThresholdMS-d;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),p)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),c=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,c)}}},1680:function(a,o,l){var c=this&&this.__decorate||function(g,f,m,b){var C,S=arguments.length,k=S<3?f:b===null?b=Object.getOwnPropertyDescriptor(f,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(g,f,m,b);else for(var w=g.length-1;w>=0;w--)(C=g[w])&&(k=(S<3?C(k):S>3?C(f,m,k):C(f,m))||k);return S>3&&k&&Object.defineProperty(f,m,k),k},u=this&&this.__param||function(g,f){return function(m,b){f(m,b,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const h=l(3656),d=l(4725),p=l(8460),y=l(844),_=l(2585);let v=o.Viewport=class extends y.Disposable{constructor(g,f,m,b,C,S,k,w){super(),this._viewportElement=g,this._scrollArea=f,this._bufferService=m,this._optionsService=b,this._charSizeService=C,this._renderService=S,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new p.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,h.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((x=>this._activeBuffer=x.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((x=>this._renderDimensions=x))),this._handleThemeChange(w.colors),this.register(w.onChangeColors((x=>this._handleThemeChange(x)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(g){this._viewportElement.style.backgroundColor=g.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(g){if(g)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const f=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==f&&(this._lastRecordedBufferHeight=f,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const g=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==g&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=g),this._refreshAnimationFrame=null}syncScrollArea(g=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(g);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(g)}_handleScroll(g){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const f=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:f,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const g=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(g*(this._smoothScrollState.target-this._smoothScrollState.origin)),g<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(g,f){const m=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(f<0&&this._viewportElement.scrollTop!==0||f>0&&m<this._lastRecordedBufferHeight)||(g.cancelable&&g.preventDefault(),!1)}handleWheel(g){const f=this._getPixelsScrolled(g);return f!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+f:this._smoothScrollState.target+=f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=f,this._bubbleScroll(g,f))}scrollLines(g){if(g!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const f=g*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+f,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:g,suppressScrollEvent:!1})}_getPixelsScrolled(g){if(g.deltaY===0||g.shiftKey)return 0;let f=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_LINE?f*=this._currentRowHeight:g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._currentRowHeight*this._bufferService.rows),f}getBufferElements(g,f){var w;let m,b="";const C=[],S=f??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let x=g;x<S;x++){const A=k.get(x);if(!A)continue;const D=(w=k.get(x+1))==null?void 0:w.isWrapped;if(b+=A.translateToString(!D),!D||x===k.length-1){const T=document.createElement("div");T.textContent=b,C.push(T),b.length>0&&(m=T),b=""}}return{bufferElements:C,cursorElement:m}}getLinesScrolled(g){if(g.deltaY===0||g.shiftKey)return 0;let f=this._applyScrollModifier(g.deltaY,g);return g.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(f/=this._currentRowHeight+0,this._wheelPartialScroll+=f,f=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):g.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(f*=this._bufferService.rows),f}_applyScrollModifier(g,f){const m=this._optionsService.rawOptions.fastScrollModifier;return m==="alt"&&f.altKey||m==="ctrl"&&f.ctrlKey||m==="shift"&&f.shiftKey?g*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:g*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(g){this._lastTouchY=g.touches[0].pageY}handleTouchMove(g){const f=this._lastTouchY-g.touches[0].pageY;return this._lastTouchY=g.touches[0].pageY,f!==0&&(this._viewportElement.scrollTop+=f,this._bubbleScroll(g,f))}};o.Viewport=v=c([u(2,_.IBufferService),u(3,_.IOptionsService),u(4,d.ICharSizeService),u(5,d.IRenderService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],v)},3107:function(a,o,l){var c=this&&this.__decorate||function(_,v,g,f){var m,b=arguments.length,C=b<3?v:f===null?f=Object.getOwnPropertyDescriptor(v,g):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,v,g,f);else for(var S=_.length-1;S>=0;S--)(m=_[S])&&(C=(b<3?m(C):b>3?m(v,g,C):m(v,g))||C);return b>3&&C&&Object.defineProperty(v,g,C),C},u=this&&this.__param||function(_,v){return function(g,f){v(g,f,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const h=l(4725),d=l(844),p=l(2585);let y=o.BufferDecorationRenderer=class extends d.Disposable{constructor(_,v,g,f,m){super(),this._screenElement=_,this._bufferService=v,this._coreBrowserService=g,this._decorationService=f,this._renderService=m,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((b=>this._removeDecoration(b)))),this.register((0,d.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const _ of this._decorationService.decorations)this._renderDecoration(_);this._dimensionsChanged=!1}_renderDecoration(_){this._refreshStyle(_),this._dimensionsChanged&&this._refreshXPosition(_)}_createElement(_){var f;const v=this._coreBrowserService.mainDocument.createElement("div");v.classList.add("xterm-decoration"),v.classList.toggle("xterm-decoration-top-layer",((f=_==null?void 0:_.options)==null?void 0:f.layer)==="top"),v.style.width=`${Math.round((_.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,v.style.height=(_.options.height||1)*this._renderService.dimensions.css.cell.height+"px",v.style.top=(_.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",v.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const g=_.options.x??0;return g&&g>this._bufferService.cols&&(v.style.display="none"),this._refreshXPosition(_,v),v}_refreshStyle(_){const v=_.marker.line-this._bufferService.buffers.active.ydisp;if(v<0||v>=this._bufferService.rows)_.element&&(_.element.style.display="none",_.onRenderEmitter.fire(_.element));else{let g=this._decorationElements.get(_);g||(g=this._createElement(_),_.element=g,this._decorationElements.set(_,g),this._container.appendChild(g),_.onDispose((()=>{this._decorationElements.delete(_),g.remove()}))),g.style.top=v*this._renderService.dimensions.css.cell.height+"px",g.style.display=this._altBufferIsActive?"none":"block",_.onRenderEmitter.fire(g)}}_refreshXPosition(_,v=_.element){if(!v)return;const g=_.options.x??0;(_.options.anchor||"left")==="right"?v.style.right=g?g*this._renderService.dimensions.css.cell.width+"px":"":v.style.left=g?g*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(_){var v;(v=this._decorationElements.get(_))==null||v.remove(),this._decorationElements.delete(_),_.dispose()}};o.BufferDecorationRenderer=y=c([u(1,p.IBufferService),u(2,h.ICoreBrowserService),u(3,p.IDecorationService),u(4,h.IRenderService)],y)},5871:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const c of this._zones)if(c.color===l.options.overviewRulerOptions.color&&c.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(c,l.marker.line))return;if(this._lineAdjacentToZone(c,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(c,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,c){return c>=l.startBufferLine&&c<=l.endBufferLine}_lineAdjacentToZone(l,c,u){return c>=l.startBufferLine-this._linePadding[u||"full"]&&c<=l.endBufferLine+this._linePadding[u||"full"]}_addLineToZone(l,c){l.startBufferLine=Math.min(l.startBufferLine,c),l.endBufferLine=Math.max(l.endBufferLine,c)}}},5744:function(a,o,l){var c=this&&this.__decorate||function(m,b,C,S){var k,w=arguments.length,x=w<3?b:S===null?S=Object.getOwnPropertyDescriptor(b,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(m,b,C,S);else for(var A=m.length-1;A>=0;A--)(k=m[A])&&(x=(w<3?k(x):w>3?k(b,C,x):k(b,C))||x);return w>3&&x&&Object.defineProperty(b,C,x),x},u=this&&this.__param||function(m,b){return function(C,S){b(C,S,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const h=l(5871),d=l(4725),p=l(844),y=l(2585),_={full:0,left:0,center:0,right:0},v={full:0,left:0,center:0,right:0},g={full:0,left:0,center:0,right:0};let f=o.OverviewRulerRenderer=class extends p.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(m,b,C,S,k,w,x){var D;super(),this._viewportElement=m,this._screenElement=b,this._bufferService=C,this._decorationService=S,this._renderService=k,this._optionsService=w,this._coreBrowserService=x,this._colorZoneStore=new h.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(D=this._viewportElement.parentElement)==null||D.insertBefore(this._canvas,this._viewportElement);const A=this._canvas.getContext("2d");if(!A)throw new Error("Ctx cannot be null");this._ctx=A,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,p.toDisposable)((()=>{var T;(T=this._canvas)==null||T.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const m=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);v.full=this._canvas.width,v.left=m,v.center=b,v.right=m,this._refreshDrawHeightConstants(),g.full=0,g.left=0,g.center=v.left,g.right=v.left+v.center}_refreshDrawHeightConstants(){_.full=Math.round(2*this._coreBrowserService.dpr);const m=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(m,12),6)*this._coreBrowserService.dpr);_.left=b,_.center=b,_.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*_.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const m=this._colorZoneStore.zones;for(const b of m)b.position!=="full"&&this._renderColorZone(b);for(const b of m)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(m){this._ctx.fillStyle=m.color,this._ctx.fillRect(g[m.position||"full"],Math.round((this._canvas.height-1)*(m.startBufferLine/this._bufferService.buffers.active.lines.length)-_[m.position||"full"]/2),v[m.position||"full"],Math.round((this._canvas.height-1)*((m.endBufferLine-m.startBufferLine)/this._bufferService.buffers.active.lines.length)+_[m.position||"full"]))}_queueRefresh(m,b){this._shouldUpdateDimensions=m||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};o.OverviewRulerRenderer=f=c([u(2,y.IBufferService),u(3,y.IDecorationService),u(4,d.IRenderService),u(5,y.IOptionsService),u(6,d.ICoreBrowserService)],f)},2950:function(a,o,l){var c=this&&this.__decorate||function(_,v,g,f){var m,b=arguments.length,C=b<3?v:f===null?f=Object.getOwnPropertyDescriptor(v,g):f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(_,v,g,f);else for(var S=_.length-1;S>=0;S--)(m=_[S])&&(C=(b<3?m(C):b>3?m(v,g,C):m(v,g))||C);return b>3&&C&&Object.defineProperty(v,g,C),C},u=this&&this.__param||function(_,v){return function(g,f){v(g,f,_)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const h=l(4725),d=l(2585),p=l(2584);let y=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(_,v,g,f,m,b){this._textarea=_,this._compositionView=v,this._bufferService=g,this._optionsService=f,this._coreService=m,this._renderService=b,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(_){this._compositionView.textContent=_.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(_){if(this._isComposing||this._isSendingComposition){if(_.keyCode===229||_.keyCode===16||_.keyCode===17||_.keyCode===18)return!1;this._finalizeComposition(!1)}return _.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(_){if(this._compositionView.classList.remove("active"),this._isComposing=!1,_){const v={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let g;this._isSendingComposition=!1,v.start+=this._dataAlreadySent.length,g=this._isComposing?this._textarea.value.substring(v.start,v.end):this._textarea.value.substring(v.start),g.length>0&&this._coreService.triggerDataEvent(g,!0)}}),0)}else{this._isSendingComposition=!1;const v=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(v,!0)}}_handleAnyTextareaChanges(){const _=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const v=this._textarea.value,g=v.replace(_,"");this._dataAlreadySent=g,v.length>_.length?this._coreService.triggerDataEvent(g,!0):v.length<_.length?this._coreService.triggerDataEvent(`${p.C0.DEL}`,!0):v.length===_.length&&v!==_&&this._coreService.triggerDataEvent(v,!0)}}),0)}updateCompositionElements(_){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const v=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),g=this._renderService.dimensions.css.cell.height,f=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,m=v*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=m+"px",this._compositionView.style.top=f+"px",this._compositionView.style.height=g+"px",this._compositionView.style.lineHeight=g+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const b=this._compositionView.getBoundingClientRect();this._textarea.style.left=m+"px",this._textarea.style.top=f+"px",this._textarea.style.width=Math.max(b.width,1)+"px",this._textarea.style.height=Math.max(b.height,1)+"px",this._textarea.style.lineHeight=b.height+"px"}_||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};o.CompositionHelper=y=c([u(2,d.IBufferService),u(3,d.IOptionsService),u(4,d.ICoreService),u(5,h.IRenderService)],y)},9806:(a,o)=>{function l(c,u,h){const d=h.getBoundingClientRect(),p=c.getComputedStyle(h),y=parseInt(p.getPropertyValue("padding-left")),_=parseInt(p.getPropertyValue("padding-top"));return[u.clientX-d.left-y,u.clientY-d.top-_]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=l,o.getCoords=function(c,u,h,d,p,y,_,v,g){if(!y)return;const f=l(c,u,h);return f?(f[0]=Math.ceil((f[0]+(g?_/2:0))/_),f[1]=Math.ceil(f[1]/v),f[0]=Math.min(Math.max(f[0],1),d+(g?1:0)),f[1]=Math.min(Math.max(f[1],1),p),f):void 0}},9504:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const c=l(2584);function u(v,g,f,m){const b=v-h(v,f),C=g-h(g,f),S=Math.abs(b-C)-(function(k,w,x){let A=0;const D=k-h(k,x),T=w-h(w,x);for(let E=0;E<Math.abs(D-T);E++){const R=d(k,w)==="A"?-1:1,F=x.buffer.lines.get(D+R*E);F!=null&&F.isWrapped&&A++}return A})(v,g,f);return _(S,y(d(v,g),m))}function h(v,g){let f=0,m=g.buffer.lines.get(v),b=m==null?void 0:m.isWrapped;for(;b&&v>=0&&v<g.rows;)f++,m=g.buffer.lines.get(--v),b=m==null?void 0:m.isWrapped;return f}function d(v,g){return v>g?"A":"B"}function p(v,g,f,m,b,C){let S=v,k=g,w="";for(;S!==f||k!==m;)S+=b?1:-1,b&&S>C.cols-1?(w+=C.buffer.translateBufferLineToString(k,!1,v,S),S=0,v=0,k++):!b&&S<0&&(w+=C.buffer.translateBufferLineToString(k,!1,0,v+1),S=C.cols-1,v=S,k--);return w+C.buffer.translateBufferLineToString(k,!1,v,S)}function y(v,g){const f=g?"O":"[";return c.C0.ESC+f+v}function _(v,g){v=Math.floor(v);let f="";for(let m=0;m<v;m++)f+=g;return f}o.moveToCellSequence=function(v,g,f,m){const b=f.buffer.x,C=f.buffer.y;if(!f.buffer.hasScrollback)return(function(w,x,A,D,T,E){return u(x,D,T,E).length===0?"":_(p(w,x,w,x-h(x,T),!1,T).length,y("D",E))})(b,C,0,g,f,m)+u(C,g,f,m)+(function(w,x,A,D,T,E){let R;R=u(x,D,T,E).length>0?D-h(D,T):x;const F=D,O=(function($,H,L,I,P,z){let K;return K=u(L,I,P,z).length>0?I-h(I,P):H,$<L&&K<=I||$>=L&&K<I?"C":"D"})(w,x,A,D,T,E);return _(p(w,R,A,F,O==="C",T).length,y(O,E))})(b,C,v,g,f,m);let S;if(C===g)return S=b>v?"D":"C",_(Math.abs(b-v),y(S,m));S=C>g?"D":"C";const k=Math.abs(C-g);return _((function(w,x){return x.cols-w})(C>g?v:b,f)+(k-1)*f.cols+1+((C>g?b:v)-1),y(S,m))}},1296:function(a,o,l){var c=this&&this.__decorate||function(E,R,F,O){var $,H=arguments.length,L=H<3?R:O===null?O=Object.getOwnPropertyDescriptor(R,F):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(E,R,F,O);else for(var I=E.length-1;I>=0;I--)($=E[I])&&(L=(H<3?$(L):H>3?$(R,F,L):$(R,F))||L);return H>3&&L&&Object.defineProperty(R,F,L),L},u=this&&this.__param||function(E,R){return function(F,O){R(F,O,E)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const h=l(3787),d=l(2550),p=l(2223),y=l(6171),_=l(6052),v=l(4725),g=l(8055),f=l(8460),m=l(844),b=l(2585),C="xterm-dom-renderer-owner-",S="xterm-rows",k="xterm-fg-",w="xterm-bg-",x="xterm-focus",A="xterm-selection";let D=1,T=o.DomRenderer=class extends m.Disposable{constructor(E,R,F,O,$,H,L,I,P,z,K,te,J){super(),this._terminal=E,this._document=R,this._element=F,this._screenElement=O,this._viewportElement=$,this._helperContainer=H,this._linkifier2=L,this._charSizeService=P,this._optionsService=z,this._bufferService=K,this._coreBrowserService=te,this._themeService=J,this._terminalClass=D++,this._rowElements=[],this._selectionRenderModel=(0,_.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new f.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(S),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(A),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,y.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((ne=>this._injectCss(ne)))),this._injectCss(this._themeService.colors),this._rowFactory=I.createInstance(h.DomRendererRowFactory,document),this._element.classList.add(C+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((ne=>this._handleLinkHover(ne)))),this.register(this._linkifier2.onHideLinkUnderline((ne=>this._handleLinkLeave(ne)))),this.register((0,m.toDisposable)((()=>{this._element.classList.remove(C+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new d.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const E=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*E,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*E),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/E),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/E),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const F of this._rowElements)F.style.width=`${this.dimensions.css.canvas.width}px`,F.style.height=`${this.dimensions.css.cell.height}px`,F.style.lineHeight=`${this.dimensions.css.cell.height}px`,F.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const R=`${this._terminalSelector} .${S} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=R,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(E){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let R=`${this._terminalSelector} .${S} { color: ${E.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;R+=`${this._terminalSelector} .${S} .xterm-dim { color: ${g.color.multiplyOpacity(E.foreground,.5).css};}`,R+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const F=`blink_underline_${this._terminalClass}`,O=`blink_bar_${this._terminalClass}`,$=`blink_block_${this._terminalClass}`;R+=`@keyframes ${F} { 50% {  border-bottom-style: hidden; }}`,R+=`@keyframes ${O} { 50% {  box-shadow: none; }}`,R+=`@keyframes ${$} { 0% {  background-color: ${E.cursor.css};  color: ${E.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${E.cursor.css}; }}`,R+=`${this._terminalSelector} .${S}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${F} 1s step-end infinite;}${this._terminalSelector} .${S}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${O} 1s step-end infinite;}${this._terminalSelector} .${S}.${x} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${$} 1s step-end infinite;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block { background-color: ${E.cursor.css}; color: ${E.cursorAccent.css};}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${E.cursor.css} !important; color: ${E.cursorAccent.css} !important;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${E.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${E.cursor.css} inset;}${this._terminalSelector} .${S} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${E.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,R+=`${this._terminalSelector} .${A} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${A} div { position: absolute; background-color: ${E.selectionBackgroundOpaque.css};}${this._terminalSelector} .${A} div { position: absolute; background-color: ${E.selectionInactiveBackgroundOpaque.css};}`;for(const[H,L]of E.ansi.entries())R+=`${this._terminalSelector} .${k}${H} { color: ${L.css}; }${this._terminalSelector} .${k}${H}.xterm-dim { color: ${g.color.multiplyOpacity(L,.5).css}; }${this._terminalSelector} .${w}${H} { background-color: ${L.css}; }`;R+=`${this._terminalSelector} .${k}${p.INVERTED_DEFAULT_COLOR} { color: ${g.color.opaque(E.background).css}; }${this._terminalSelector} .${k}${p.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${g.color.multiplyOpacity(g.color.opaque(E.background),.5).css}; }${this._terminalSelector} .${w}${p.INVERTED_DEFAULT_COLOR} { background-color: ${E.foreground.css}; }`,this._themeStyleElement.textContent=R}_setDefaultSpacing(){const E=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${E}px`,this._rowFactory.defaultSpacing=E}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(E,R){for(let F=this._rowElements.length;F<=R;F++){const O=this._document.createElement("div");this._rowContainer.appendChild(O),this._rowElements.push(O)}for(;this._rowElements.length>R;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(E,R){this._refreshRowElements(E,R),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(x),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(x),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(E,R,F){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(E,R,F),this.renderRows(0,this._bufferService.rows-1),!E||!R)return;this._selectionRenderModel.update(this._terminal,E,R,F);const O=this._selectionRenderModel.viewportStartRow,$=this._selectionRenderModel.viewportEndRow,H=this._selectionRenderModel.viewportCappedStartRow,L=this._selectionRenderModel.viewportCappedEndRow;if(H>=this._bufferService.rows||L<0)return;const I=this._document.createDocumentFragment();if(F){const P=E[0]>R[0];I.appendChild(this._createSelectionElement(H,P?R[0]:E[0],P?E[0]:R[0],L-H+1))}else{const P=O===H?E[0]:0,z=H===$?R[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(H,P,z));const K=L-H-1;if(I.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,K)),H!==L){const te=$===L?R[0]:this._bufferService.cols;I.appendChild(this._createSelectionElement(L,0,te))}}this._selectionContainer.appendChild(I)}_createSelectionElement(E,R,F,O=1){const $=this._document.createElement("div"),H=R*this.dimensions.css.cell.width;let L=this.dimensions.css.cell.width*(F-R);return H+L>this.dimensions.css.canvas.width&&(L=this.dimensions.css.canvas.width-H),$.style.height=O*this.dimensions.css.cell.height+"px",$.style.top=E*this.dimensions.css.cell.height+"px",$.style.left=`${H}px`,$.style.width=`${L}px`,$}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const E of this._rowElements)E.replaceChildren()}renderRows(E,R){const F=this._bufferService.buffer,O=F.ybase+F.y,$=Math.min(F.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink,L=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=E;P<=R;P++){const z=P+F.ydisp,K=this._rowElements[P],te=F.lines.get(z);if(!K||!te)break;K.replaceChildren(...this._rowFactory.createRow(te,z,z===O,L,I,$,H,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${C}${this._terminalClass}`}_handleLinkHover(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!0)}_handleLinkLeave(E){this._setCellUnderline(E.x1,E.x2,E.y1,E.y2,E.cols,!1)}_setCellUnderline(E,R,F,O,$,H){F<0&&(E=0),O<0&&(R=0);const L=this._bufferService.rows-1;F=Math.max(Math.min(F,L),0),O=Math.max(Math.min(O,L),0),$=Math.min($,this._bufferService.cols);const I=this._bufferService.buffer,P=I.ybase+I.y,z=Math.min(I.x,$-1),K=this._optionsService.rawOptions.cursorBlink,te=this._optionsService.rawOptions.cursorStyle,J=this._optionsService.rawOptions.cursorInactiveStyle;for(let ne=F;ne<=O;++ne){const V=ne+I.ydisp,N=this._rowElements[ne],ee=I.lines.get(V);if(!N||!ee)break;N.replaceChildren(...this._rowFactory.createRow(ee,V,V===P,te,J,z,K,this.dimensions.css.cell.width,this._widthCache,H?ne===F?E:0:-1,H?(ne===O?R:$)-1:-1))}}};o.DomRenderer=T=c([u(7,b.IInstantiationService),u(8,v.ICharSizeService),u(9,b.IOptionsService),u(10,b.IBufferService),u(11,v.ICoreBrowserService),u(12,v.IThemeService)],T)},3787:function(a,o,l){var c=this&&this.__decorate||function(S,k,w,x){var A,D=arguments.length,T=D<3?k:x===null?x=Object.getOwnPropertyDescriptor(k,w):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(S,k,w,x);else for(var E=S.length-1;E>=0;E--)(A=S[E])&&(T=(D<3?A(T):D>3?A(k,w,T):A(k,w))||T);return D>3&&T&&Object.defineProperty(k,w,T),T},u=this&&this.__param||function(S,k){return function(w,x){k(w,x,S)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const h=l(2223),d=l(643),p=l(511),y=l(2585),_=l(8055),v=l(4725),g=l(4269),f=l(6171),m=l(3734);let b=o.DomRendererRowFactory=class{constructor(S,k,w,x,A,D,T){this._document=S,this._characterJoinerService=k,this._optionsService=w,this._coreBrowserService=x,this._coreService=A,this._decorationService=D,this._themeService=T,this._workCell=new p.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(S,k,w){this._selectionStart=S,this._selectionEnd=k,this._columnSelectMode=w}createRow(S,k,w,x,A,D,T,E,R,F,O){const $=[],H=this._characterJoinerService.getJoinedCharacters(k),L=this._themeService.colors;let I,P=S.getNoBgTrimmedLength();w&&P<D+1&&(P=D+1);let z=0,K="",te=0,J=0,ne=0,V=!1,N=0,ee=!1,U=0;const X=[],M=F!==-1&&O!==-1;for(let q=0;q<P;q++){S.loadCell(q,this._workCell);let Q=this._workCell.getWidth();if(Q===0)continue;let se=!1,Z=q,Y=this._workCell;if(H.length>0&&q===H[0][0]){se=!0;const de=H.shift();Y=new g.JoinedCellData(this._workCell,S.translateToString(!0,de[0],de[1]),de[1]-de[0]),Z=de[1]-1,Q=Y.getWidth()}const ae=this._isCellInSelection(q,k),he=w&&q===D,ce=M&&q>=F&&q<=O;let ue=!1;this._decorationService.forEachDecorationAtCell(q,k,void 0,(de=>{ue=!0}));let ye=Y.getChars()||d.WHITESPACE_CELL_CHAR;if(ye===" "&&(Y.isUnderline()||Y.isOverline())&&(ye=""),U=Q*E-R.get(ye,Y.isBold(),Y.isItalic()),I){if(z&&(ae&&ee||!ae&&!ee&&Y.bg===te)&&(ae&&ee&&L.selectionForeground||Y.fg===J)&&Y.extended.ext===ne&&ce===V&&U===N&&!he&&!se&&!ue){Y.isInvisible()?K+=d.WHITESPACE_CELL_CHAR:K+=ye,z++;continue}z&&(I.textContent=K),I=this._document.createElement("span"),z=0,K=""}else I=this._document.createElement("span");if(te=Y.bg,J=Y.fg,ne=Y.extended.ext,V=ce,N=U,ee=ae,se&&D>=q&&D<=Z&&(D=q),!this._coreService.isCursorHidden&&he&&this._coreService.isCursorInitialized){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&X.push("xterm-cursor-blink"),X.push(x==="bar"?"xterm-cursor-bar":x==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(A)switch(A){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(Y.isBold()&&X.push("xterm-bold"),Y.isItalic()&&X.push("xterm-italic"),Y.isDim()&&X.push("xterm-dim"),K=Y.isInvisible()?d.WHITESPACE_CELL_CHAR:Y.getChars()||d.WHITESPACE_CELL_CHAR,Y.isUnderline()&&(X.push(`xterm-underline-${Y.extended.underlineStyle}`),K===" "&&(K=""),!Y.isUnderlineColorDefault()))if(Y.isUnderlineColorRGB())I.style.textDecorationColor=`rgb(${m.AttributeData.toColorRGB(Y.getUnderlineColor()).join(",")})`;else{let de=Y.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Y.isBold()&&de<8&&(de+=8),I.style.textDecorationColor=L.ansi[de].css}Y.isOverline()&&(X.push("xterm-overline"),K===" "&&(K="")),Y.isStrikethrough()&&X.push("xterm-strikethrough"),ce&&(I.style.textDecoration="underline");let ve=Y.getFgColor(),_e=Y.getFgColorMode(),Ce=Y.getBgColor(),ke=Y.getBgColorMode();const Me=!!Y.isInverse();if(Me){const de=ve;ve=Ce,Ce=de;const W=_e;_e=ke,ke=W}let Ae,We,Ee,Se=!1;switch(this._decorationService.forEachDecorationAtCell(q,k,void 0,(de=>{de.options.layer!=="top"&&Se||(de.backgroundColorRGB&&(ke=50331648,Ce=de.backgroundColorRGB.rgba>>8&16777215,Ae=de.backgroundColorRGB),de.foregroundColorRGB&&(_e=50331648,ve=de.foregroundColorRGB.rgba>>8&16777215,We=de.foregroundColorRGB),Se=de.options.layer==="top")})),!Se&&ae&&(Ae=this._coreBrowserService.isFocused?L.selectionBackgroundOpaque:L.selectionInactiveBackgroundOpaque,Ce=Ae.rgba>>8&16777215,ke=50331648,Se=!0,L.selectionForeground&&(_e=50331648,ve=L.selectionForeground.rgba>>8&16777215,We=L.selectionForeground)),Se&&X.push("xterm-decoration-top"),ke){case 16777216:case 33554432:Ee=L.ansi[Ce],X.push(`xterm-bg-${Ce}`);break;case 50331648:Ee=_.channels.toColor(Ce>>16,Ce>>8&255,255&Ce),this._addStyle(I,`background-color:#${C((Ce>>>0).toString(16),"0",6)}`);break;default:Me?(Ee=L.foreground,X.push(`xterm-bg-${h.INVERTED_DEFAULT_COLOR}`)):Ee=L.background}switch(Ae||Y.isDim()&&(Ae=_.color.multiplyOpacity(Ee,.5)),_e){case 16777216:case 33554432:Y.isBold()&&ve<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(ve+=8),this._applyMinimumContrast(I,Ee,L.ansi[ve],Y,Ae,void 0)||X.push(`xterm-fg-${ve}`);break;case 50331648:const de=_.channels.toColor(ve>>16&255,ve>>8&255,255&ve);this._applyMinimumContrast(I,Ee,de,Y,Ae,We)||this._addStyle(I,`color:#${C(ve.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(I,Ee,L.foreground,Y,Ae,We)||Me&&X.push(`xterm-fg-${h.INVERTED_DEFAULT_COLOR}`)}X.length&&(I.className=X.join(" "),X.length=0),he||se||ue?I.textContent=K:z++,U!==this.defaultSpacing&&(I.style.letterSpacing=`${U}px`),$.push(I),q=Z}return I&&z&&(I.textContent=K),$}_applyMinimumContrast(S,k,w,x,A,D){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,f.treatGlyphAsBackgroundColor)(x.getCode()))return!1;const T=this._getContrastCache(x);let E;if(A||D||(E=T.getColor(k.rgba,w.rgba)),E===void 0){const R=this._optionsService.rawOptions.minimumContrastRatio/(x.isDim()?2:1);E=_.color.ensureContrastRatio(A||k,D||w,R),T.setColor((A||k).rgba,(D||w).rgba,E??null)}return!!E&&(this._addStyle(S,`color:${E.css}`),!0)}_getContrastCache(S){return S.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(S,k){S.setAttribute("style",`${S.getAttribute("style")||""}${k};`)}_isCellInSelection(S,k){const w=this._selectionStart,x=this._selectionEnd;return!(!w||!x)&&(this._columnSelectMode?w[0]<=x[0]?S>=w[0]&&k>=w[1]&&S<x[0]&&k<=x[1]:S<w[0]&&k>=w[1]&&S>=x[0]&&k<=x[1]:k>w[1]&&k<x[1]||w[1]===x[1]&&k===w[1]&&S>=w[0]&&S<x[0]||w[1]<x[1]&&k===x[1]&&S<x[0]||w[1]<x[1]&&k===w[1]&&S>=w[0])}};function C(S,k,w){for(;S.length<w;)S=k+S;return S}o.DomRendererRowFactory=b=c([u(1,v.ICharacterJoinerService),u(2,y.IOptionsService),u(3,v.ICoreBrowserService),u(4,y.ICoreService),u(5,y.IDecorationService),u(6,v.IThemeService)],b)},2550:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(l,c){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=l.createElement("span");u.classList.add("xterm-char-measure-element");const h=l.createElement("span");h.classList.add("xterm-char-measure-element"),h.style.fontWeight="bold";const d=l.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontStyle="italic";const p=l.createElement("span");p.classList.add("xterm-char-measure-element"),p.style.fontWeight="bold",p.style.fontStyle="italic",this._measureElements=[u,h,d,p],this._container.appendChild(u),this._container.appendChild(h),this._container.appendChild(d),this._container.appendChild(p),c.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,c,u,h){l===this._font&&c===this._fontSize&&u===this._weight&&h===this._weightBold||(this._font=l,this._fontSize=c,this._weight=u,this._weightBold=h,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${u}`,this._measureElements[1].style.fontWeight=`${h}`,this._measureElements[2].style.fontWeight=`${u}`,this._measureElements[3].style.fontWeight=`${h}`,this.clear())}get(l,c,u){let h=0;if(!c&&!u&&l.length===1&&(h=l.charCodeAt(0))<256){if(this._flat[h]!==-9999)return this._flat[h];const y=this._measure(l,0);return y>0&&(this._flat[h]=y),y}let d=l;c&&(d+="B"),u&&(d+="I");let p=this._holey.get(d);if(p===void 0){let y=0;c&&(y|=1),u&&(y|=2),p=this._measure(l,y),p>0&&this._holey.set(d,p)}return p}_measure(l,c){const u=this._measureElements[c];return u.textContent=l.repeat(32),u.offsetWidth/32}}},2223:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const c=l(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=c.isFirefox||c.isLegacyEdge?"bottom":"ideographic"},6171:(a,o)=>{function l(u){return 57508<=u&&u<=57558}function c(u){return u>=128512&&u<=128591||u>=127744&&u<=128511||u>=128640&&u<=128767||u>=9728&&u<=9983||u>=9984&&u<=10175||u>=65024&&u<=65039||u>=129280&&u<=129535||u>=127462&&u<=127487}Object.defineProperty(o,"__esModule",{value:!0}),o.computeNextVariantOffset=o.createRenderDimensions=o.treatGlyphAsBackgroundColor=o.allowRescaling=o.isEmoji=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},o.isPowerlineGlyph=l,o.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},o.isEmoji=c,o.allowRescaling=function(u,h,d,p){return h===1&&d>Math.ceil(1.5*p)&&u!==void 0&&u>255&&!c(u)&&!l(u)&&!(function(y){return 57344<=y&&y<=63743})(u)},o.treatGlyphAsBackgroundColor=function(u){return l(u)||(function(h){return 9472<=h&&h<=9631})(u)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},o.computeNextVariantOffset=function(u,h,d=0){return(u-(2*Math.round(h)-d))%(2*Math.round(h))}},6052:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class l{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(u,h,d,p=!1){if(this.selectionStart=h,this.selectionEnd=d,!h||!d||h[0]===d[0]&&h[1]===d[1])return void this.clear();const y=u.buffers.active.ydisp,_=h[1]-y,v=d[1]-y,g=Math.max(_,0),f=Math.min(v,u.rows-1);g>=u.rows||f<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=p,this.viewportStartRow=_,this.viewportEndRow=v,this.viewportCappedStartRow=g,this.viewportCappedEndRow=f,this.startCol=h[0],this.endCol=d[0])}isCellSelected(u,h,d){return!!this.hasSelection&&(d-=u.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?h>=this.startCol&&d>=this.viewportCappedStartRow&&h<this.endCol&&d<=this.viewportCappedEndRow:h<this.startCol&&d>=this.viewportCappedStartRow&&h>=this.endCol&&d<=this.viewportCappedEndRow:d>this.viewportStartRow&&d<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&d===this.viewportStartRow&&h>=this.startCol&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportEndRow&&h<this.endCol||this.viewportStartRow<this.viewportEndRow&&d===this.viewportStartRow&&h>=this.startCol)}}o.createSelectionRenderModel=function(){return new l}},456:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,c=this.selectionEnd;return!(!l||!c)&&(l[1]>c[1]||l[1]===c[1]&&l[0]>c[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(a,o,l){var c=this&&this.__decorate||function(f,m,b,C){var S,k=arguments.length,w=k<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,m,b,C);else for(var x=f.length-1;x>=0;x--)(S=f[x])&&(w=(k<3?S(w):k>3?S(m,b,w):S(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(f,m){return function(b,C){m(b,C,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const h=l(2585),d=l(8460),p=l(844);let y=o.CharSizeService=class extends p.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(f,m,b){super(),this._optionsService=b,this.width=0,this.height=0,this._onCharSizeChange=this.register(new d.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new g(this._optionsService))}catch{this._measureStrategy=this.register(new v(f,m,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const f=this._measureStrategy.measure();f.width===this.width&&f.height===this.height||(this.width=f.width,this.height=f.height,this._onCharSizeChange.fire())}};o.CharSizeService=y=c([u(2,h.IOptionsService)],y);class _ extends p.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(m,b){m!==void 0&&m>0&&b!==void 0&&b>0&&(this._result.width=m,this._result.height=b)}}class v extends _{constructor(m,b,C){super(),this._document=m,this._parentElement=b,this._optionsService=C,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class g extends _{constructor(m){super(),this._optionsService=m,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const b=this._ctx.measureText("W");if(!("width"in b&&"fontBoundingBoxAscent"in b&&"fontBoundingBoxDescent"in b))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const m=this._ctx.measureText("W");return this._validateAndSet(m.width,m.fontBoundingBoxAscent+m.fontBoundingBoxDescent),this._result}}},4269:function(a,o,l){var c=this&&this.__decorate||function(g,f,m,b){var C,S=arguments.length,k=S<3?f:b===null?b=Object.getOwnPropertyDescriptor(f,m):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(g,f,m,b);else for(var w=g.length-1;w>=0;w--)(C=g[w])&&(k=(S<3?C(k):S>3?C(f,m,k):C(f,m))||k);return S>3&&k&&Object.defineProperty(f,m,k),k},u=this&&this.__param||function(g,f){return function(m,b){f(m,b,g)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const h=l(3734),d=l(643),p=l(511),y=l(2585);class _ extends h.AttributeData{constructor(f,m,b){super(),this.content=0,this.combinedData="",this.fg=f.fg,this.bg=f.bg,this.combinedData=m,this._width=b}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(f){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=_;let v=o.CharacterJoinerService=class Ax{constructor(f){this._bufferService=f,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new p.CellData}register(f){const m={id:this._nextCharacterJoinerId++,handler:f};return this._characterJoiners.push(m),m.id}deregister(f){for(let m=0;m<this._characterJoiners.length;m++)if(this._characterJoiners[m].id===f)return this._characterJoiners.splice(m,1),!0;return!1}getJoinedCharacters(f){if(this._characterJoiners.length===0)return[];const m=this._bufferService.buffer.lines.get(f);if(!m||m.length===0)return[];const b=[],C=m.translateToString(!0);let S=0,k=0,w=0,x=m.getFg(0),A=m.getBg(0);for(let D=0;D<m.getTrimmedLength();D++)if(m.loadCell(D,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==x||this._workCell.bg!==A){if(D-S>1){const T=this._getJoinedRanges(C,w,k,m,S);for(let E=0;E<T.length;E++)b.push(T[E])}S=D,w=k,x=this._workCell.fg,A=this._workCell.bg}k+=this._workCell.getChars().length||d.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-S>1){const D=this._getJoinedRanges(C,w,k,m,S);for(let T=0;T<D.length;T++)b.push(D[T])}return b}_getJoinedRanges(f,m,b,C,S){const k=f.substring(m,b);let w=[];try{w=this._characterJoiners[0].handler(k)}catch(x){console.error(x)}for(let x=1;x<this._characterJoiners.length;x++)try{const A=this._characterJoiners[x].handler(k);for(let D=0;D<A.length;D++)Ax._mergeRanges(w,A[D])}catch(A){console.error(A)}return this._stringRangesToCellRanges(w,C,S),w}_stringRangesToCellRanges(f,m,b){let C=0,S=!1,k=0,w=f[C];if(w){for(let x=b;x<this._bufferService.cols;x++){const A=m.getWidth(x),D=m.getString(x).length||d.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!S&&w[0]<=k&&(w[0]=x,S=!0),w[1]<=k){if(w[1]=x,w=f[++C],!w)break;w[0]<=k?(w[0]=x,S=!0):S=!1}k+=D}}w&&(w[1]=this._bufferService.cols)}}static _mergeRanges(f,m){let b=!1;for(let C=0;C<f.length;C++){const S=f[C];if(b){if(m[1]<=S[0])return f[C-1][1]=m[1],f;if(m[1]<=S[1])return f[C-1][1]=Math.max(m[1],S[1]),f.splice(C,1),f;f.splice(C,1),C--}else{if(m[1]<=S[0])return f.splice(C,0,m),f;if(m[1]<=S[1])return S[0]=Math.min(m[0],S[0]),f;m[0]<S[1]&&(S[0]=Math.min(m[0],S[0]),b=!0)}}return b?f[f.length-1][1]=m[1]:f.push(m),f}};o.CharacterJoinerService=v=c([u(0,y.IBufferService)],v)},5114:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;const c=l(844),u=l(8460),h=l(3656);class d extends c.Disposable{constructor(_,v,g){super(),this._textarea=_,this._window=v,this.mainDocument=g,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new p(this._window),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new u.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((f=>this._screenDprMonitor.setWindow(f)))),this.register((0,u.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(_){this._window!==_&&(this._window=_,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}o.CoreBrowserService=d;class p extends c.Disposable{constructor(_){super(),this._parentWindow=_,this._windowResizeListener=this.register(new c.MutableDisposable),this._onDprChange=this.register(new u.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,c.toDisposable)((()=>this.clearListener())))}setWindow(_){this._parentWindow=_,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,h.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)==null||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkProviderService=void 0;const c=l(844);class u extends c.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,c.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(d){return this.linkProviders.push(d),{dispose:()=>{const p=this.linkProviders.indexOf(d);p!==-1&&this.linkProviders.splice(p,1)}}}}o.LinkProviderService=u},8934:function(a,o,l){var c=this&&this.__decorate||function(y,_,v,g){var f,m=arguments.length,b=m<3?_:g===null?g=Object.getOwnPropertyDescriptor(_,v):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(y,_,v,g);else for(var C=y.length-1;C>=0;C--)(f=y[C])&&(b=(m<3?f(b):m>3?f(_,v,b):f(_,v))||b);return m>3&&b&&Object.defineProperty(_,v,b),b},u=this&&this.__param||function(y,_){return function(v,g){_(v,g,y)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const h=l(4725),d=l(9806);let p=o.MouseService=class{constructor(y,_){this._renderService=y,this._charSizeService=_}getCoords(y,_,v,g,f){return(0,d.getCoords)(window,y,_,v,g,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,f)}getMouseReportCoords(y,_){const v=(0,d.getCoordsRelativeToElement)(window,y,_);if(this._charSizeService.hasValidSize)return v[0]=Math.min(Math.max(v[0],0),this._renderService.dimensions.css.canvas.width-1),v[1]=Math.min(Math.max(v[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(v[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(v[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(v[0]),y:Math.floor(v[1])}}};o.MouseService=p=c([u(0,h.IRenderService),u(1,h.ICharSizeService)],p)},3230:function(a,o,l){var c=this&&this.__decorate||function(f,m,b,C){var S,k=arguments.length,w=k<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,m,b,C);else for(var x=f.length-1;x>=0;x--)(S=f[x])&&(w=(k<3?S(w):k>3?S(m,b,w):S(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(f,m){return function(b,C){m(b,C,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const h=l(6193),d=l(4725),p=l(8460),y=l(844),_=l(7226),v=l(2585);let g=o.RenderService=class extends y.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(f,m,b,C,S,k,w,x){super(),this._rowCount=f,this._charSizeService=C,this._renderer=this.register(new y.MutableDisposable),this._pausedResizeTask=new _.DebouncedIdleTask,this._observerDisposable=this.register(new y.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new p.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new p.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new p.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new p.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new h.RenderDebouncer(((A,D)=>this._renderRows(A,D)),w),this.register(this._renderDebouncer),this.register(w.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(k.onResize((()=>this._fullRefresh()))),this.register(k.buffers.onBufferActivate((()=>{var A;return(A=this._renderer.value)==null?void 0:A.clear()}))),this.register(b.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(S.onDecorationRegistered((()=>this._fullRefresh()))),this.register(S.onDecorationRemoved((()=>this._fullRefresh()))),this.register(b.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()}))),this.register(b.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(k.buffer.y,k.buffer.y,!0)))),this.register(x.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(w.window,m),this.register(w.onWindowChange((A=>this._registerIntersectionObserver(A,m))))}_registerIntersectionObserver(f,m){if("IntersectionObserver"in f){const b=new f.IntersectionObserver((C=>this._handleIntersectionChange(C[C.length-1])),{threshold:0});b.observe(m),this._observerDisposable.value=(0,y.toDisposable)((()=>b.disconnect()))}}_handleIntersectionChange(f){this._isPaused=f.isIntersecting===void 0?f.intersectionRatio===0:!f.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(f,m,b=!1){this._isPaused?this._needsFullRefresh=!0:(b||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(f,m,this._rowCount))}_renderRows(f,m){this._renderer.value&&(f=Math.min(f,this._rowCount-1),m=Math.min(m,this._rowCount-1),this._renderer.value.renderRows(f,m),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:f,end:m}),this._onRender.fire({start:f,end:m}),this._isNextRenderRedrawOnly=!0)}resize(f,m){this._rowCount=m,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(f){this._renderer.value=f,this._renderer.value&&(this._renderer.value.onRequestRedraw((m=>this.refreshRows(m.start,m.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(f){return this._renderDebouncer.addRefreshCallback(f)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var f,m;this._renderer.value&&((m=(f=this._renderer.value).clearTextureAtlas)==null||m.call(f),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(f,m){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>{var b;return(b=this._renderer.value)==null?void 0:b.handleResize(f,m)})):this._renderer.value.handleResize(f,m),this._fullRefresh())}handleCharSizeChanged(){var f;(f=this._renderer.value)==null||f.handleCharSizeChanged()}handleBlur(){var f;(f=this._renderer.value)==null||f.handleBlur()}handleFocus(){var f;(f=this._renderer.value)==null||f.handleFocus()}handleSelectionChanged(f,m,b){var C;this._selectionState.start=f,this._selectionState.end=m,this._selectionState.columnSelectMode=b,(C=this._renderer.value)==null||C.handleSelectionChanged(f,m,b)}handleCursorMove(){var f;(f=this._renderer.value)==null||f.handleCursorMove()}clear(){var f;(f=this._renderer.value)==null||f.clear()}};o.RenderService=g=c([u(2,v.IOptionsService),u(3,d.ICharSizeService),u(4,v.IDecorationService),u(5,v.IBufferService),u(6,d.ICoreBrowserService),u(7,d.IThemeService)],g)},9312:function(a,o,l){var c=this&&this.__decorate||function(w,x,A,D){var T,E=arguments.length,R=E<3?x:D===null?D=Object.getOwnPropertyDescriptor(x,A):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")R=Reflect.decorate(w,x,A,D);else for(var F=w.length-1;F>=0;F--)(T=w[F])&&(R=(E<3?T(R):E>3?T(x,A,R):T(x,A))||R);return E>3&&R&&Object.defineProperty(x,A,R),R},u=this&&this.__param||function(w,x){return function(A,D){x(A,D,w)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const h=l(9806),d=l(9504),p=l(456),y=l(4725),_=l(8460),v=l(844),g=l(6114),f=l(4841),m=l(511),b=l(2585),C="",S=new RegExp(C,"g");let k=o.SelectionService=class extends v.Disposable{constructor(w,x,A,D,T,E,R,F,O){super(),this._element=w,this._screenElement=x,this._linkifier=A,this._bufferService=D,this._coreService=T,this._mouseService=E,this._optionsService=R,this._renderService=F,this._coreBrowserService=O,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new m.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new _.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new _.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new _.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new _.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=$=>this._handleMouseMove($),this._mouseUpListener=$=>this._handleMouseUp($),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim(($=>this._handleTrim($))),this.register(this._bufferService.buffers.onBufferActivate(($=>this._handleBufferActivate($)))),this.enable(),this._model=new p.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,v.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const w=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;return!(!w||!x||w[0]===x[0]&&w[1]===x[1])}get selectionText(){const w=this._model.finalSelectionStart,x=this._model.finalSelectionEnd;if(!w||!x)return"";const A=this._bufferService.buffer,D=[];if(this._activeSelectionMode===3){if(w[0]===x[0])return"";const T=w[0]<x[0]?w[0]:x[0],E=w[0]<x[0]?x[0]:w[0];for(let R=w[1];R<=x[1];R++){const F=A.translateBufferLineToString(R,!0,T,E);D.push(F)}}else{const T=w[1]===x[1]?x[0]:void 0;D.push(A.translateBufferLineToString(w[1],!0,w[0],T));for(let E=w[1]+1;E<=x[1]-1;E++){const R=A.lines.get(E),F=A.translateBufferLineToString(E,!0);R!=null&&R.isWrapped?D[D.length-1]+=F:D.push(F)}if(w[1]!==x[1]){const E=A.lines.get(x[1]),R=A.translateBufferLineToString(x[1],!0,0,x[0]);E&&E.isWrapped?D[D.length-1]+=R:D.push(R)}}return D.map((T=>T.replace(S," "))).join(g.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(w){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),g.isLinux&&w&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(w){const x=this._getMouseBufferCoords(w),A=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!!(A&&D&&x)&&this._areCoordsInSelection(x,A,D)}isCellInSelection(w,x){const A=this._model.finalSelectionStart,D=this._model.finalSelectionEnd;return!(!A||!D)&&this._areCoordsInSelection([w,x],A,D)}_areCoordsInSelection(w,x,A){return w[1]>x[1]&&w[1]<A[1]||x[1]===A[1]&&w[1]===x[1]&&w[0]>=x[0]&&w[0]<A[0]||x[1]<A[1]&&w[1]===A[1]&&w[0]<A[0]||x[1]<A[1]&&w[1]===x[1]&&w[0]>=x[0]}_selectWordAtCursor(w,x){var T,E;const A=(E=(T=this._linkifier.currentLink)==null?void 0:T.link)==null?void 0:E.range;if(A)return this._model.selectionStart=[A.start.x-1,A.start.y-1],this._model.selectionStartLength=(0,f.getRangeLength)(A,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const D=this._getMouseBufferCoords(w);return!!D&&(this._selectWordAt(D,x),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(w,x){this._model.clearSelection(),w=Math.max(w,0),x=Math.min(x,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,w],this._model.selectionEnd=[this._bufferService.cols,x],this.refresh(),this._onSelectionChange.fire()}_handleTrim(w){this._model.handleTrim(w)&&this.refresh()}_getMouseBufferCoords(w){const x=this._mouseService.getCoords(w,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(x)return x[0]--,x[1]--,x[1]+=this._bufferService.buffer.ydisp,x}_getMouseEventScrollAmount(w){let x=(0,h.getCoordsRelativeToElement)(this._coreBrowserService.window,w,this._screenElement)[1];const A=this._renderService.dimensions.css.canvas.height;return x>=0&&x<=A?0:(x>A&&(x-=A),x=Math.min(Math.max(x,-50),50),x/=50,x/Math.abs(x)+Math.round(14*x))}shouldForceSelection(w){return g.isMac?w.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:w.shiftKey}handleMouseDown(w){if(this._mouseDownTimeStamp=w.timeStamp,(w.button!==2||!this.hasSelection)&&w.button===0){if(!this._enabled){if(!this.shouldForceSelection(w))return;w.stopPropagation()}w.preventDefault(),this._dragScrollAmount=0,this._enabled&&w.shiftKey?this._handleIncrementalClick(w):w.detail===1?this._handleSingleClick(w):w.detail===2?this._handleDoubleClick(w):w.detail===3&&this._handleTripleClick(w),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(w){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(w))}_handleSingleClick(w){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(w)?3:0,this._model.selectionStart=this._getMouseBufferCoords(w),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const x=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);x&&x.length!==this._model.selectionStart[0]&&x.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(w){this._selectWordAtCursor(w,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(w){const x=this._getMouseBufferCoords(w);x&&(this._activeSelectionMode=2,this._selectLineAt(x[1]))}shouldColumnSelect(w){return w.altKey&&!(g.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(w){if(w.stopImmediatePropagation(),!this._model.selectionStart)return;const x=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(w),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(w),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){const D=A.lines.get(this._model.selectionEnd[1]);D&&D.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}x&&x[0]===this._model.selectionEnd[0]&&x[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const w=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(w.ydisp+this._bufferService.rows,w.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=w.ydisp),this.refresh()}}_handleMouseUp(w){const x=w.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&x<500&&w.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const A=this._mouseService.getCoords(w,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){const D=(0,d.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(D,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const w=this._model.finalSelectionStart,x=this._model.finalSelectionEnd,A=!(!w||!x||w[0]===x[0]&&w[1]===x[1]);A?w&&x&&(this._oldSelectionStart&&this._oldSelectionEnd&&w[0]===this._oldSelectionStart[0]&&w[1]===this._oldSelectionStart[1]&&x[0]===this._oldSelectionEnd[0]&&x[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(w,x,A)):this._oldHasSelection&&this._fireOnSelectionChange(w,x,A)}_fireOnSelectionChange(w,x,A){this._oldSelectionStart=w,this._oldSelectionEnd=x,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(w){this.clearSelection(),this._trimListener.dispose(),this._trimListener=w.activeBuffer.lines.onTrim((x=>this._handleTrim(x)))}_convertViewportColToCharacterIndex(w,x){let A=x;for(let D=0;x>=D;D++){const T=w.loadCell(D,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:T>1&&x!==D&&(A+=T-1)}return A}setSelection(w,x,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[w,x],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(w){this._isClickInSelection(w)||(this._selectWordAtCursor(w,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(w,x,A=!0,D=!0){if(w[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,E=T.lines.get(w[1]);if(!E)return;const R=T.translateBufferLineToString(w[1],!1);let F=this._convertViewportColToCharacterIndex(E,w[0]),O=F;const $=w[0]-F;let H=0,L=0,I=0,P=0;if(R.charAt(F)===" "){for(;F>0&&R.charAt(F-1)===" ";)F--;for(;O<R.length&&R.charAt(O+1)===" ";)O++}else{let te=w[0],J=w[0];E.getWidth(te)===0&&(H++,te--),E.getWidth(J)===2&&(L++,J++);const ne=E.getString(J).length;for(ne>1&&(P+=ne-1,O+=ne-1);te>0&&F>0&&!this._isCharWordSeparator(E.loadCell(te-1,this._workCell));){E.loadCell(te-1,this._workCell);const V=this._workCell.getChars().length;this._workCell.getWidth()===0?(H++,te--):V>1&&(I+=V-1,F-=V-1),F--,te--}for(;J<E.length&&O+1<R.length&&!this._isCharWordSeparator(E.loadCell(J+1,this._workCell));){E.loadCell(J+1,this._workCell);const V=this._workCell.getChars().length;this._workCell.getWidth()===2?(L++,J++):V>1&&(P+=V-1,O+=V-1),O++,J++}}O++;let z=F+$-H+I,K=Math.min(this._bufferService.cols,O-F+H+L-I-P);if(x||R.slice(F,O).trim()!==""){if(A&&z===0&&E.getCodePoint(0)!==32){const te=T.lines.get(w[1]-1);if(te&&E.isWrapped&&te.getCodePoint(this._bufferService.cols-1)!==32){const J=this._getWordAt([this._bufferService.cols-1,w[1]-1],!1,!0,!1);if(J){const ne=this._bufferService.cols-J.start;z-=ne,K+=ne}}}if(D&&z+K===this._bufferService.cols&&E.getCodePoint(this._bufferService.cols-1)!==32){const te=T.lines.get(w[1]+1);if(te!=null&&te.isWrapped&&te.getCodePoint(0)!==32){const J=this._getWordAt([0,w[1]+1],!1,!1,!0);J&&(K+=J.length)}}return{start:z,length:K}}}_selectWordAt(w,x){const A=this._getWordAt(w,x);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,w[1]--;this._model.selectionStart=[A.start,w[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(w){const x=this._getWordAt(w,!0);if(x){let A=w[1];for(;x.start<0;)x.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;x.start+x.length>this._bufferService.cols;)x.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?x.start:x.start+x.length,A]}}_isCharWordSeparator(w){return w.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(w.getChars())>=0}_selectLineAt(w){const x=this._bufferService.buffer.getWrappedRangeForLine(w),A={start:{x:0,y:x.first},end:{x:this._bufferService.cols-1,y:x.last}};this._model.selectionStart=[0,x.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,f.getRangeLength)(A,this._bufferService.cols)}};o.SelectionService=k=c([u(3,b.IBufferService),u(4,b.ICoreService),u(5,y.IMouseService),u(6,b.IOptionsService),u(7,y.IRenderService),u(8,y.ICoreBrowserService)],k)},4725:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ILinkProviderService=o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const c=l(8343);o.ICharSizeService=(0,c.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,c.createDecorator)("CoreBrowserService"),o.IMouseService=(0,c.createDecorator)("MouseService"),o.IRenderService=(0,c.createDecorator)("RenderService"),o.ISelectionService=(0,c.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,c.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,c.createDecorator)("ThemeService"),o.ILinkProviderService=(0,c.createDecorator)("LinkProviderService")},6731:function(a,o,l){var c=this&&this.__decorate||function(k,w,x,A){var D,T=arguments.length,E=T<3?w:A===null?A=Object.getOwnPropertyDescriptor(w,x):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(k,w,x,A);else for(var R=k.length-1;R>=0;R--)(D=k[R])&&(E=(T<3?D(E):T>3?D(w,x,E):D(w,x))||E);return T>3&&E&&Object.defineProperty(w,x,E),E},u=this&&this.__param||function(k,w){return function(x,A){w(x,A,k)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const h=l(7239),d=l(8055),p=l(8460),y=l(844),_=l(2585),v=d.css.toColor("#ffffff"),g=d.css.toColor("#000000"),f=d.css.toColor("#ffffff"),m=d.css.toColor("#000000"),b={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],w=[0,95,135,175,215,255];for(let x=0;x<216;x++){const A=w[x/36%6|0],D=w[x/6%6|0],T=w[x%6];k.push({css:d.channels.toCss(A,D,T),rgba:d.channels.toRgba(A,D,T)})}for(let x=0;x<24;x++){const A=8+10*x;k.push({css:d.channels.toCss(A,A,A),rgba:d.channels.toRgba(A,A,A)})}return k})());let C=o.ThemeService=class extends y.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new h.ColorContrastCache,this._halfContrastCache=new h.ColorContrastCache,this._onChangeColors=this.register(new p.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:v,background:g,cursor:f,cursorAccent:m,selectionForeground:void 0,selectionBackgroundTransparent:b,selectionBackgroundOpaque:d.color.blend(g,b),selectionInactiveBackgroundTransparent:b,selectionInactiveBackgroundOpaque:d.color.blend(g,b),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(k={}){const w=this._colors;if(w.foreground=S(k.foreground,v),w.background=S(k.background,g),w.cursor=S(k.cursor,f),w.cursorAccent=S(k.cursorAccent,m),w.selectionBackgroundTransparent=S(k.selectionBackground,b),w.selectionBackgroundOpaque=d.color.blend(w.background,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundTransparent=S(k.selectionInactiveBackground,w.selectionBackgroundTransparent),w.selectionInactiveBackgroundOpaque=d.color.blend(w.background,w.selectionInactiveBackgroundTransparent),w.selectionForeground=k.selectionForeground?S(k.selectionForeground,d.NULL_COLOR):void 0,w.selectionForeground===d.NULL_COLOR&&(w.selectionForeground=void 0),d.color.isOpaque(w.selectionBackgroundTransparent)&&(w.selectionBackgroundTransparent=d.color.opacity(w.selectionBackgroundTransparent,.3)),d.color.isOpaque(w.selectionInactiveBackgroundTransparent)&&(w.selectionInactiveBackgroundTransparent=d.color.opacity(w.selectionInactiveBackgroundTransparent,.3)),w.ansi=o.DEFAULT_ANSI_COLORS.slice(),w.ansi[0]=S(k.black,o.DEFAULT_ANSI_COLORS[0]),w.ansi[1]=S(k.red,o.DEFAULT_ANSI_COLORS[1]),w.ansi[2]=S(k.green,o.DEFAULT_ANSI_COLORS[2]),w.ansi[3]=S(k.yellow,o.DEFAULT_ANSI_COLORS[3]),w.ansi[4]=S(k.blue,o.DEFAULT_ANSI_COLORS[4]),w.ansi[5]=S(k.magenta,o.DEFAULT_ANSI_COLORS[5]),w.ansi[6]=S(k.cyan,o.DEFAULT_ANSI_COLORS[6]),w.ansi[7]=S(k.white,o.DEFAULT_ANSI_COLORS[7]),w.ansi[8]=S(k.brightBlack,o.DEFAULT_ANSI_COLORS[8]),w.ansi[9]=S(k.brightRed,o.DEFAULT_ANSI_COLORS[9]),w.ansi[10]=S(k.brightGreen,o.DEFAULT_ANSI_COLORS[10]),w.ansi[11]=S(k.brightYellow,o.DEFAULT_ANSI_COLORS[11]),w.ansi[12]=S(k.brightBlue,o.DEFAULT_ANSI_COLORS[12]),w.ansi[13]=S(k.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),w.ansi[14]=S(k.brightCyan,o.DEFAULT_ANSI_COLORS[14]),w.ansi[15]=S(k.brightWhite,o.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const x=Math.min(w.ansi.length-16,k.extendedAnsi.length);for(let A=0;A<x;A++)w.ansi[A+16]=S(k.extendedAnsi[A],o.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let w=0;w<this._restoreColors.ansi.length;++w)this._colors.ansi[w]=this._restoreColors.ansi[w]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function S(k,w){if(k!==void 0)try{return d.css.toColor(k)}catch{}return w}o.ThemeService=C=c([u(0,_.IOptionsService)],C)},6349:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(p){super(),this._maxLength=p,this.onDeleteEmitter=this.register(new c.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new c.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new c.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(p){if(this._maxLength===p)return;const y=new Array(p);for(let _=0;_<Math.min(p,this.length);_++)y[_]=this._array[this._getCyclicIndex(_)];this._array=y,this._maxLength=p,this._startIndex=0}get length(){return this._length}set length(p){if(p>this._length)for(let y=this._length;y<p;y++)this._array[y]=void 0;this._length=p}get(p){return this._array[this._getCyclicIndex(p)]}set(p,y){this._array[this._getCyclicIndex(p)]=y}push(p){this._array[this._getCyclicIndex(this._length)]=p,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(p,y,..._){if(y){for(let v=p;v<this._length-y;v++)this._array[this._getCyclicIndex(v)]=this._array[this._getCyclicIndex(v+y)];this._length-=y,this.onDeleteEmitter.fire({index:p,amount:y})}for(let v=this._length-1;v>=p;v--)this._array[this._getCyclicIndex(v+_.length)]=this._array[this._getCyclicIndex(v)];for(let v=0;v<_.length;v++)this._array[this._getCyclicIndex(p+v)]=_[v];if(_.length&&this.onInsertEmitter.fire({index:p,amount:_.length}),this._length+_.length>this._maxLength){const v=this._length+_.length-this._maxLength;this._startIndex+=v,this._length=this._maxLength,this.onTrimEmitter.fire(v)}else this._length+=_.length}trimStart(p){p>this._length&&(p=this._length),this._startIndex+=p,this._length-=p,this.onTrimEmitter.fire(p)}shiftElements(p,y,_){if(!(y<=0)){if(p<0||p>=this._length)throw new Error("start argument out of range");if(p+_<0)throw new Error("Cannot shift elements in list beyond index 0");if(_>0){for(let g=y-1;g>=0;g--)this.set(p+g+_,this.get(p+g));const v=p+y+_-this._length;if(v>0)for(this._length+=v;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let v=0;v<y;v++)this.set(p+v+_,this.get(p+v))}}_getCyclicIndex(p){return(this._startIndex+p)%this._maxLength}}o.CircularList=h},1439:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function l(c,u=5){if(typeof c!="object")return c;const h=Array.isArray(c)?[]:{};for(const d in c)h[d]=u<=1?c[d]:c[d]&&l(c[d],u-1);return h}},8055:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let l=0,c=0,u=0,h=0;var d,p,y,_,v;function g(m){const b=m.toString(16);return b.length<2?"0"+b:b}function f(m,b){return m<b?(b+.05)/(m+.05):(m+.05)/(b+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},(function(m){m.toCss=function(b,C,S,k){return k!==void 0?`#${g(b)}${g(C)}${g(S)}${g(k)}`:`#${g(b)}${g(C)}${g(S)}`},m.toRgba=function(b,C,S,k=255){return(b<<24|C<<16|S<<8|k)>>>0},m.toColor=function(b,C,S,k){return{css:m.toCss(b,C,S,k),rgba:m.toRgba(b,C,S,k)}}})(d||(o.channels=d={})),(function(m){function b(C,S){return h=Math.round(255*S),[l,c,u]=v.toChannels(C.rgba),{css:d.toCss(l,c,u,h),rgba:d.toRgba(l,c,u,h)}}m.blend=function(C,S){if(h=(255&S.rgba)/255,h===1)return{css:S.css,rgba:S.rgba};const k=S.rgba>>24&255,w=S.rgba>>16&255,x=S.rgba>>8&255,A=C.rgba>>24&255,D=C.rgba>>16&255,T=C.rgba>>8&255;return l=A+Math.round((k-A)*h),c=D+Math.round((w-D)*h),u=T+Math.round((x-T)*h),{css:d.toCss(l,c,u),rgba:d.toRgba(l,c,u)}},m.isOpaque=function(C){return(255&C.rgba)==255},m.ensureContrastRatio=function(C,S,k){const w=v.ensureContrastRatio(C.rgba,S.rgba,k);if(w)return d.toColor(w>>24&255,w>>16&255,w>>8&255)},m.opaque=function(C){const S=(255|C.rgba)>>>0;return[l,c,u]=v.toChannels(S),{css:d.toCss(l,c,u),rgba:S}},m.opacity=b,m.multiplyOpacity=function(C,S){return h=255&C.rgba,b(C,h*S/255)},m.toColorRGB=function(C){return[C.rgba>>24&255,C.rgba>>16&255,C.rgba>>8&255]}})(p||(o.color=p={})),(function(m){let b,C;try{const S=document.createElement("canvas");S.width=1,S.height=1;const k=S.getContext("2d",{willReadFrequently:!0});k&&(b=k,b.globalCompositeOperation="copy",C=b.createLinearGradient(0,0,1,1))}catch{}m.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),d.toColor(l,c,u);case 5:return l=parseInt(S.slice(1,2).repeat(2),16),c=parseInt(S.slice(2,3).repeat(2),16),u=parseInt(S.slice(3,4).repeat(2),16),h=parseInt(S.slice(4,5).repeat(2),16),d.toColor(l,c,u,h);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const k=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return l=parseInt(k[1]),c=parseInt(k[2]),u=parseInt(k[3]),h=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),d.toColor(l,c,u,h);if(!b||!C)throw new Error("css.toColor: Unsupported css format");if(b.fillStyle=C,b.fillStyle=S,typeof b.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(b.fillRect(0,0,1,1),[l,c,u,h]=b.getImageData(0,0,1,1).data,h!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:d.toRgba(l,c,u,h),css:S}}})(y||(o.css=y={})),(function(m){function b(C,S,k){const w=C/255,x=S/255,A=k/255;return .2126*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.7152*(x<=.03928?x/12.92:Math.pow((x+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}m.relativeLuminance=function(C){return b(C>>16&255,C>>8&255,255&C)},m.relativeLuminance2=b})(_||(o.rgb=_={})),(function(m){function b(S,k,w){const x=S>>24&255,A=S>>16&255,D=S>>8&255;let T=k>>24&255,E=k>>16&255,R=k>>8&255,F=f(_.relativeLuminance2(T,E,R),_.relativeLuminance2(x,A,D));for(;F<w&&(T>0||E>0||R>0);)T-=Math.max(0,Math.ceil(.1*T)),E-=Math.max(0,Math.ceil(.1*E)),R-=Math.max(0,Math.ceil(.1*R)),F=f(_.relativeLuminance2(T,E,R),_.relativeLuminance2(x,A,D));return(T<<24|E<<16|R<<8|255)>>>0}function C(S,k,w){const x=S>>24&255,A=S>>16&255,D=S>>8&255;let T=k>>24&255,E=k>>16&255,R=k>>8&255,F=f(_.relativeLuminance2(T,E,R),_.relativeLuminance2(x,A,D));for(;F<w&&(T<255||E<255||R<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),E=Math.min(255,E+Math.ceil(.1*(255-E))),R=Math.min(255,R+Math.ceil(.1*(255-R))),F=f(_.relativeLuminance2(T,E,R),_.relativeLuminance2(x,A,D));return(T<<24|E<<16|R<<8|255)>>>0}m.blend=function(S,k){if(h=(255&k)/255,h===1)return k;const w=k>>24&255,x=k>>16&255,A=k>>8&255,D=S>>24&255,T=S>>16&255,E=S>>8&255;return l=D+Math.round((w-D)*h),c=T+Math.round((x-T)*h),u=E+Math.round((A-E)*h),d.toRgba(l,c,u)},m.ensureContrastRatio=function(S,k,w){const x=_.relativeLuminance(S>>8),A=_.relativeLuminance(k>>8);if(f(x,A)<w){if(A<x){const E=b(S,k,w),R=f(x,_.relativeLuminance(E>>8));if(R<w){const F=C(S,k,w);return R>f(x,_.relativeLuminance(F>>8))?E:F}return E}const D=C(S,k,w),T=f(x,_.relativeLuminance(D>>8));if(T<w){const E=b(S,k,w);return T>f(x,_.relativeLuminance(E>>8))?D:E}return D}},m.reduceLuminance=b,m.increaseLuminance=C,m.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]}})(v||(o.rgba=v={})),o.toPaddedHex=g,o.contrastRatio=f},8969:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const c=l(844),u=l(2585),h=l(4348),d=l(7866),p=l(744),y=l(7302),_=l(6975),v=l(8460),g=l(1753),f=l(1480),m=l(7994),b=l(9282),C=l(5435),S=l(5981),k=l(2660);let w=!1;class x extends c.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new v.EventEmitter),this._onScroll.event((D=>{var T;(T=this._onScrollApi)==null||T.fire(D.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(D){for(const T in D)this.optionsService.options[T]=D[T]}constructor(D){super(),this._windowsWrappingHeuristics=this.register(new c.MutableDisposable),this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new v.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new v.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new v.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new v.EventEmitter),this._instantiationService=new h.InstantiationService,this.optionsService=this.register(new y.OptionsService(D)),this._instantiationService.setService(u.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(p.BufferService)),this._instantiationService.setService(u.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(d.LogService)),this._instantiationService.setService(u.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(_.CoreService)),this._instantiationService.setService(u.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(g.CoreMouseService)),this._instantiationService.setService(u.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(f.UnicodeService)),this._instantiationService.setService(u.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(m.CharsetService),this._instantiationService.setService(u.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(u.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new C.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,v.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,v.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,v.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,v.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new S.WriteBuffer(((T,E)=>this._inputHandler.parse(T,E)))),this.register((0,v.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(D,T){this._writeBuffer.write(D,T)}writeSync(D,T){this._logService.logLevel<=u.LogLevelEnum.WARN&&!w&&(this._logService.warn("writeSync is unreliable and will be removed soon."),w=!0),this._writeBuffer.writeSync(D,T)}input(D,T=!0){this.coreService.triggerDataEvent(D,T)}resize(D,T){isNaN(D)||isNaN(T)||(D=Math.max(D,p.MINIMUM_COLS),T=Math.max(T,p.MINIMUM_ROWS),this._bufferService.resize(D,T))}scroll(D,T=!1){this._bufferService.scroll(D,T)}scrollLines(D,T,E){this._bufferService.scrollLines(D,T,E)}scrollPages(D){this.scrollLines(D*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(D){const T=D-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(D,T){return this._inputHandler.registerEscHandler(D,T)}registerDcsHandler(D,T){return this._inputHandler.registerDcsHandler(D,T)}registerCsiHandler(D,T){return this._inputHandler.registerCsiHandler(D,T)}registerOscHandler(D,T){return this._inputHandler.registerOscHandler(D,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let D=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?D=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(D=!0),D?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const D=[];D.push(this.onLineFeed(b.updateWindowsModeWrappedState.bind(null,this._bufferService))),D.push(this.registerCsiHandler({final:"H"},(()=>((0,b.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,c.toDisposable)((()=>{for(const T of D)T.dispose()}))}}}o.CoreTerminal=x},8460:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.runAndSubscribe=o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let c=0;c<this._listeners.length;c++)if(this._listeners[c]===l)return void this._listeners.splice(c,1)}}})),this._event}fire(l,c){const u=[];for(let h=0;h<this._listeners.length;h++)u.push(this._listeners[h]);for(let h=0;h<u.length;h++)u[h].call(void 0,l,c)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(l,c){return l((u=>c.fire(u)))},o.runAndSubscribe=function(l,c){return c(void 0),l((u=>c(u)))}},5435:function(a,o,l){var c=this&&this.__decorate||function(H,L,I,P){var z,K=arguments.length,te=K<3?L:P===null?P=Object.getOwnPropertyDescriptor(L,I):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")te=Reflect.decorate(H,L,I,P);else for(var J=H.length-1;J>=0;J--)(z=H[J])&&(te=(K<3?z(te):K>3?z(L,I,te):z(L,I))||te);return K>3&&te&&Object.defineProperty(L,I,te),te},u=this&&this.__param||function(H,L){return function(I,P){L(I,P,H)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const h=l(2584),d=l(7116),p=l(2015),y=l(844),_=l(482),v=l(8437),g=l(8460),f=l(643),m=l(511),b=l(3734),C=l(2585),S=l(1480),k=l(6242),w=l(6351),x=l(5941),A={"(":0,")":1,"*":2,"+":3,"-":1,".":2},D=131072;function T(H,L){if(H>24)return L.setWinLines||!1;switch(H){case 1:return!!L.restoreWin;case 2:return!!L.minimizeWin;case 3:return!!L.setWinPosition;case 4:return!!L.setWinSizePixels;case 5:return!!L.raiseWin;case 6:return!!L.lowerWin;case 7:return!!L.refreshWin;case 8:return!!L.setWinSizeChars;case 9:return!!L.maximizeWin;case 10:return!!L.fullscreenWin;case 11:return!!L.getWinState;case 13:return!!L.getWinPosition;case 14:return!!L.getWinSizePixels;case 15:return!!L.getScreenSizePixels;case 16:return!!L.getCellSizePixels;case 18:return!!L.getWinSizeChars;case 19:return!!L.getScreenSizeChars;case 20:return!!L.getIconTitle;case 21:return!!L.getWinTitle;case 22:return!!L.pushTitle;case 23:return!!L.popTitle;case 24:return!!L.setWinLines}return!1}var E;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(E||(o.WindowsOptionsReportType=E={}));let R=0;class F extends y.Disposable{getAttrData(){return this._curAttrData}constructor(L,I,P,z,K,te,J,ne,V=new p.EscapeSequenceParser){super(),this._bufferService=L,this._charsetService=I,this._coreService=P,this._logService=z,this._optionsService=K,this._oscLinkService=te,this._coreMouseService=J,this._unicodeService=ne,this._parser=V,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new _.StringToUtf32,this._utf8Decoder=new _.Utf8ToUtf32,this._workCell=new m.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=v.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=v.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new g.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new g.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new g.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new g.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new g.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new g.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new g.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new g.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new g.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new g.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new g.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new g.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new O(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((N=>this._activeBuffer=N.activeBuffer))),this._parser.setCsiHandlerFallback(((N,ee)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(N),params:ee.toArray()})})),this._parser.setEscHandlerFallback((N=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(N)})})),this._parser.setExecuteHandlerFallback((N=>{this._logService.debug("Unknown EXECUTE code: ",{code:N})})),this._parser.setOscHandlerFallback(((N,ee,U)=>{this._logService.debug("Unknown OSC code: ",{identifier:N,action:ee,data:U})})),this._parser.setDcsHandlerFallback(((N,ee,U)=>{ee==="HOOK"&&(U=U.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(N),action:ee,payload:U})})),this._parser.setPrintHandler(((N,ee,U)=>this.print(N,ee,U))),this._parser.registerCsiHandler({final:"@"},(N=>this.insertChars(N))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(N=>this.scrollLeft(N))),this._parser.registerCsiHandler({final:"A"},(N=>this.cursorUp(N))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(N=>this.scrollRight(N))),this._parser.registerCsiHandler({final:"B"},(N=>this.cursorDown(N))),this._parser.registerCsiHandler({final:"C"},(N=>this.cursorForward(N))),this._parser.registerCsiHandler({final:"D"},(N=>this.cursorBackward(N))),this._parser.registerCsiHandler({final:"E"},(N=>this.cursorNextLine(N))),this._parser.registerCsiHandler({final:"F"},(N=>this.cursorPrecedingLine(N))),this._parser.registerCsiHandler({final:"G"},(N=>this.cursorCharAbsolute(N))),this._parser.registerCsiHandler({final:"H"},(N=>this.cursorPosition(N))),this._parser.registerCsiHandler({final:"I"},(N=>this.cursorForwardTab(N))),this._parser.registerCsiHandler({final:"J"},(N=>this.eraseInDisplay(N,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(N=>this.eraseInDisplay(N,!0))),this._parser.registerCsiHandler({final:"K"},(N=>this.eraseInLine(N,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(N=>this.eraseInLine(N,!0))),this._parser.registerCsiHandler({final:"L"},(N=>this.insertLines(N))),this._parser.registerCsiHandler({final:"M"},(N=>this.deleteLines(N))),this._parser.registerCsiHandler({final:"P"},(N=>this.deleteChars(N))),this._parser.registerCsiHandler({final:"S"},(N=>this.scrollUp(N))),this._parser.registerCsiHandler({final:"T"},(N=>this.scrollDown(N))),this._parser.registerCsiHandler({final:"X"},(N=>this.eraseChars(N))),this._parser.registerCsiHandler({final:"Z"},(N=>this.cursorBackwardTab(N))),this._parser.registerCsiHandler({final:"`"},(N=>this.charPosAbsolute(N))),this._parser.registerCsiHandler({final:"a"},(N=>this.hPositionRelative(N))),this._parser.registerCsiHandler({final:"b"},(N=>this.repeatPrecedingCharacter(N))),this._parser.registerCsiHandler({final:"c"},(N=>this.sendDeviceAttributesPrimary(N))),this._parser.registerCsiHandler({prefix:">",final:"c"},(N=>this.sendDeviceAttributesSecondary(N))),this._parser.registerCsiHandler({final:"d"},(N=>this.linePosAbsolute(N))),this._parser.registerCsiHandler({final:"e"},(N=>this.vPositionRelative(N))),this._parser.registerCsiHandler({final:"f"},(N=>this.hVPosition(N))),this._parser.registerCsiHandler({final:"g"},(N=>this.tabClear(N))),this._parser.registerCsiHandler({final:"h"},(N=>this.setMode(N))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(N=>this.setModePrivate(N))),this._parser.registerCsiHandler({final:"l"},(N=>this.resetMode(N))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(N=>this.resetModePrivate(N))),this._parser.registerCsiHandler({final:"m"},(N=>this.charAttributes(N))),this._parser.registerCsiHandler({final:"n"},(N=>this.deviceStatus(N))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(N=>this.deviceStatusPrivate(N))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(N=>this.softReset(N))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(N=>this.setCursorStyle(N))),this._parser.registerCsiHandler({final:"r"},(N=>this.setScrollRegion(N))),this._parser.registerCsiHandler({final:"s"},(N=>this.saveCursor(N))),this._parser.registerCsiHandler({final:"t"},(N=>this.windowOptions(N))),this._parser.registerCsiHandler({final:"u"},(N=>this.restoreCursor(N))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(N=>this.insertColumns(N))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(N=>this.deleteColumns(N))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(N=>this.selectProtected(N))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(N=>this.requestMode(N,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(N=>this.requestMode(N,!1))),this._parser.setExecuteHandler(h.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(h.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(h.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(h.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(h.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(h.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(h.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(h.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(h.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(h.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new k.OscHandler((N=>(this.setTitle(N),this.setIconName(N),!0)))),this._parser.registerOscHandler(1,new k.OscHandler((N=>this.setIconName(N)))),this._parser.registerOscHandler(2,new k.OscHandler((N=>this.setTitle(N)))),this._parser.registerOscHandler(4,new k.OscHandler((N=>this.setOrReportIndexedColor(N)))),this._parser.registerOscHandler(8,new k.OscHandler((N=>this.setHyperlink(N)))),this._parser.registerOscHandler(10,new k.OscHandler((N=>this.setOrReportFgColor(N)))),this._parser.registerOscHandler(11,new k.OscHandler((N=>this.setOrReportBgColor(N)))),this._parser.registerOscHandler(12,new k.OscHandler((N=>this.setOrReportCursorColor(N)))),this._parser.registerOscHandler(104,new k.OscHandler((N=>this.restoreIndexedColor(N)))),this._parser.registerOscHandler(110,new k.OscHandler((N=>this.restoreFgColor(N)))),this._parser.registerOscHandler(111,new k.OscHandler((N=>this.restoreBgColor(N)))),this._parser.registerOscHandler(112,new k.OscHandler((N=>this.restoreCursorColor(N)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const N in d.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:N},(()=>this.selectCharset("("+N))),this._parser.registerEscHandler({intermediates:")",final:N},(()=>this.selectCharset(")"+N))),this._parser.registerEscHandler({intermediates:"*",final:N},(()=>this.selectCharset("*"+N))),this._parser.registerEscHandler({intermediates:"+",final:N},(()=>this.selectCharset("+"+N))),this._parser.registerEscHandler({intermediates:"-",final:N},(()=>this.selectCharset("-"+N))),this._parser.registerEscHandler({intermediates:".",final:N},(()=>this.selectCharset("."+N))),this._parser.registerEscHandler({intermediates:"/",final:N},(()=>this.selectCharset("/"+N)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((N=>(this._logService.error("Parsing error: ",N),N))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new w.DcsHandler(((N,ee)=>this.requestStatusString(N,ee))))}_preserveStack(L,I,P,z){this._parseStack.paused=!0,this._parseStack.cursorStartX=L,this._parseStack.cursorStartY=I,this._parseStack.decodedLength=P,this._parseStack.position=z}_logSlowResolvingAsync(L){this._logService.logLevel<=C.LogLevelEnum.WARN&&Promise.race([L,new Promise(((I,P)=>setTimeout((()=>P("#SLOW_TIMEOUT")),5e3)))]).catch((I=>{if(I!=="#SLOW_TIMEOUT")throw I;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(L,I){let P,z=this._activeBuffer.x,K=this._activeBuffer.y,te=0;const J=this._parseStack.paused;if(J){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,I))return this._logSlowResolvingAsync(P),P;z=this._parseStack.cursorStartX,K=this._parseStack.cursorStartY,this._parseStack.paused=!1,L.length>D&&(te=this._parseStack.position+D)}if(this._logService.logLevel<=C.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof L=="string"?` "${L}"`:` "${Array.prototype.map.call(L,(N=>String.fromCharCode(N))).join("")}"`),typeof L=="string"?L.split("").map((N=>N.charCodeAt(0))):L),this._parseBuffer.length<L.length&&this._parseBuffer.length<D&&(this._parseBuffer=new Uint32Array(Math.min(L.length,D))),J||this._dirtyRowTracker.clearRange(),L.length>D)for(let N=te;N<L.length;N+=D){const ee=N+D<L.length?N+D:L.length,U=typeof L=="string"?this._stringDecoder.decode(L.substring(N,ee),this._parseBuffer):this._utf8Decoder.decode(L.subarray(N,ee),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,U))return this._preserveStack(z,K,U,N),this._logSlowResolvingAsync(P),P}else if(!J){const N=typeof L=="string"?this._stringDecoder.decode(L,this._parseBuffer):this._utf8Decoder.decode(L,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,N))return this._preserveStack(z,K,N,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===z&&this._activeBuffer.y===K||this._onCursorMove.fire();const ne=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),V=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);V<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(V,this._bufferService.rows-1),Math.min(ne,this._bufferService.rows-1))}print(L,I,P){let z,K;const te=this._charsetService.charset,J=this._optionsService.rawOptions.screenReaderMode,ne=this._bufferService.cols,V=this._coreService.decPrivateModes.wraparound,N=this._coreService.modes.insertMode,ee=this._curAttrData;let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-I>0&&U.getWidth(this._activeBuffer.x-1)===2&&U.setCellFromCodepoint(this._activeBuffer.x-1,0,1,ee);let X=this._parser.precedingJoinState;for(let M=I;M<P;++M){if(z=L[M],z<127&&te){const Z=te[String.fromCharCode(z)];Z&&(z=Z.charCodeAt(0))}const q=this._unicodeService.charProperties(z,X);K=S.UnicodeService.extractWidth(q);const Q=S.UnicodeService.extractShouldJoin(q),se=Q?S.UnicodeService.extractWidth(X):0;if(X=q,J&&this._onA11yChar.fire((0,_.stringFromCodePoint)(z)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+K-se>ne){if(V){const Z=U;let Y=this._activeBuffer.x-se;for(this._activeBuffer.x=se,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),U=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),se>0&&U instanceof v.BufferLine&&U.copyCellsFrom(Z,Y,0,se,!1);Y<ne;)Z.setCellFromCodepoint(Y++,0,1,ee)}else if(this._activeBuffer.x=ne-1,K===2)continue}if(Q&&this._activeBuffer.x){const Z=U.getWidth(this._activeBuffer.x-1)?1:2;U.addCodepointToCell(this._activeBuffer.x-Z,z,K);for(let Y=K-se;--Y>=0;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}else if(N&&(U.insertCells(this._activeBuffer.x,K-se,this._activeBuffer.getNullCell(ee)),U.getWidth(ne-1)===2&&U.setCellFromCodepoint(ne-1,f.NULL_CELL_CODE,f.NULL_CELL_WIDTH,ee)),U.setCellFromCodepoint(this._activeBuffer.x++,z,K,ee),K>0)for(;--K;)U.setCellFromCodepoint(this._activeBuffer.x++,0,0,ee)}this._parser.precedingJoinState=X,this._activeBuffer.x<ne&&P-I>0&&U.getWidth(this._activeBuffer.x)===0&&!U.hasContent(this._activeBuffer.x)&&U.setCellFromCodepoint(this._activeBuffer.x,0,1,ee),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(L,I){return L.final!=="t"||L.prefix||L.intermediates?this._parser.registerCsiHandler(L,I):this._parser.registerCsiHandler(L,(P=>!T(P.params[0],this._optionsService.rawOptions.windowOptions)||I(P)))}registerDcsHandler(L,I){return this._parser.registerDcsHandler(L,new w.DcsHandler(I))}registerEscHandler(L,I){return this._parser.registerEscHandler(L,I)}registerOscHandler(L,I){return this._parser.registerOscHandler(L,new k.OscHandler(I))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var L;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((L=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&L.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);I.hasWidth(this._activeBuffer.x)&&!I.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const L=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-L),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(L=this._bufferService.cols-1){this._activeBuffer.x=Math.min(L,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(L,I){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=L,this._activeBuffer.y=this._activeBuffer.scrollTop+I):(this._activeBuffer.x=L,this._activeBuffer.y=I),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(L,I){this._restrictCursor(),this._setCursor(this._activeBuffer.x+L,this._activeBuffer.y+I)}cursorUp(L){const I=this._activeBuffer.y-this._activeBuffer.scrollTop;return I>=0?this._moveCursor(0,-Math.min(I,L.params[0]||1)):this._moveCursor(0,-(L.params[0]||1)),!0}cursorDown(L){const I=this._activeBuffer.scrollBottom-this._activeBuffer.y;return I>=0?this._moveCursor(0,Math.min(I,L.params[0]||1)):this._moveCursor(0,L.params[0]||1),!0}cursorForward(L){return this._moveCursor(L.params[0]||1,0),!0}cursorBackward(L){return this._moveCursor(-(L.params[0]||1),0),!0}cursorNextLine(L){return this.cursorDown(L),this._activeBuffer.x=0,!0}cursorPrecedingLine(L){return this.cursorUp(L),this._activeBuffer.x=0,!0}cursorCharAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(L){return this._setCursor(L.length>=2?(L.params[1]||1)-1:0,(L.params[0]||1)-1),!0}charPosAbsolute(L){return this._setCursor((L.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(L){return this._moveCursor(L.params[0]||1,0),!0}linePosAbsolute(L){return this._setCursor(this._activeBuffer.x,(L.params[0]||1)-1),!0}vPositionRelative(L){return this._moveCursor(0,L.params[0]||1),!0}hVPosition(L){return this.cursorPosition(L),!0}tabClear(L){const I=L.params[0];return I===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:I===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=L.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(L){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let I=L.params[0]||1;for(;I--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(L){const I=L.params[0];return I===1&&(this._curAttrData.bg|=536870912),I!==2&&I!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(L,I,P,z=!1,K=!1){const te=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);te.replaceCells(I,P,this._activeBuffer.getNullCell(this._eraseAttrData()),K),z&&(te.isWrapped=!1)}_resetBufferLine(L,I=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+L);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),I),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+L),P.isWrapped=!1)}eraseInDisplay(L,I=!1){let P;switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);P<this._bufferService.rows;P++)this._resetBufferLine(P,I);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,I),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,I);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,I);this._dirtyRowTracker.markDirty(0);break;case 3:const z=this._activeBuffer.lines.length-this._bufferService.rows;z>0&&(this._activeBuffer.lines.trimStart(z),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-z,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-z,0),this._onScroll.fire(0))}return!0}eraseInLine(L,I=!1){switch(this._restrictCursor(this._bufferService.cols),L.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,I);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,I);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,I)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(L){this._restrictCursor();let I=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,K=this._bufferService.rows-1+this._activeBuffer.ybase-z+1;for(;I--;)this._activeBuffer.lines.splice(K-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(L){this._restrictCursor();let I=L.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let z;for(z=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-z;I--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(z,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.insertCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.deleteCells(this._activeBuffer.x,L.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(L){let I=L.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(L){let I=L.params[0]||1;for(;I--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(v.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);z.deleteCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);z.insertCells(0,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);z.insertCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(L){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const I=L.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const z=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);z.deleteCells(this._activeBuffer.x,I,this._activeBuffer.getNullCell(this._eraseAttrData())),z.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(L){this._restrictCursor();const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return I&&(I.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(L.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(L){const I=this._parser.precedingJoinState;if(!I)return!0;const P=L.params[0]||1,z=S.UnicodeService.extractWidth(I),K=this._activeBuffer.x-z,te=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(K),J=new Uint32Array(te.length*P);let ne=0;for(let N=0;N<te.length;){const ee=te.codePointAt(N)||0;J[ne++]=ee,N+=ee>65535?2:1}let V=ne;for(let N=1;N<P;++N)J.copyWithin(V,0,ne),V+=ne;return this.print(J,0,V),!0}sendDeviceAttributesPrimary(L){return L.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(h.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(h.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(L){return L.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(h.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(h.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(L.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(h.C0.ESC+"[>83;40003;0c")),!0}_is(L){return(this._optionsService.rawOptions.termName+"").indexOf(L)===0}setMode(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),this._charsetService.setgCharset(1,d.DEFAULT_CHARSET),this._charsetService.setgCharset(2,d.DEFAULT_CHARSET),this._charsetService.setgCharset(3,d.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(L){for(let I=0;I<L.length;I++)switch(L.params[I]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),L.params[I]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(L,I){const P=this._coreService.decPrivateModes,{activeProtocol:z,activeEncoding:K}=this._coreMouseService,te=this._coreService,{buffers:J,cols:ne}=this._bufferService,{active:V,alt:N}=J,ee=this._optionsService.rawOptions,U=Q=>Q?1:2,X=L.params[0];return M=X,q=I?X===2?4:X===4?U(te.modes.insertMode):X===12?3:X===20?U(ee.convertEol):0:X===1?U(P.applicationCursorKeys):X===3?ee.windowOptions.setWinLines?ne===80?2:ne===132?1:0:0:X===6?U(P.origin):X===7?U(P.wraparound):X===8?3:X===9?U(z==="X10"):X===12?U(ee.cursorBlink):X===25?U(!te.isCursorHidden):X===45?U(P.reverseWraparound):X===66?U(P.applicationKeypad):X===67?4:X===1e3?U(z==="VT200"):X===1002?U(z==="DRAG"):X===1003?U(z==="ANY"):X===1004?U(P.sendFocus):X===1005?4:X===1006?U(K==="SGR"):X===1015?4:X===1016?U(K==="SGR_PIXELS"):X===1048?1:X===47||X===1047||X===1049?U(V===N):X===2004?U(P.bracketedPasteMode):0,te.triggerDataEvent(`${h.C0.ESC}[${I?"":"?"}${M};${q}$y`),!0;var M,q}_updateAttrColor(L,I,P,z,K){return I===2?(L|=50331648,L&=-16777216,L|=b.AttributeData.fromColorRGB([P,z,K])):I===5&&(L&=-50331904,L|=33554432|255&P),L}_extractColor(L,I,P){const z=[0,0,-1,0,0,0];let K=0,te=0;do{if(z[te+K]=L.params[I+te],L.hasSubParams(I+te)){const J=L.getSubParams(I+te);let ne=0;do z[1]===5&&(K=1),z[te+ne+1+K]=J[ne];while(++ne<J.length&&ne+te+1+K<z.length);break}if(z[1]===5&&te+K>=2||z[1]===2&&te+K>=5)break;z[1]&&(K=1)}while(++te+I<L.length&&te+K<z.length);for(let J=2;J<z.length;++J)z[J]===-1&&(z[J]=0);switch(z[0]){case 38:P.fg=this._updateAttrColor(P.fg,z[1],z[3],z[4],z[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,z[1],z[3],z[4],z[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,z[1],z[3],z[4],z[5])}return te}_processUnderline(L,I){I.extended=I.extended.clone(),(!~L||L>5)&&(L=1),I.extended.underlineStyle=L,I.fg|=268435456,L===0&&(I.fg&=-268435457),I.updateExtended()}_processSGR0(L){L.fg=v.DEFAULT_ATTR_DATA.fg,L.bg=v.DEFAULT_ATTR_DATA.bg,L.extended=L.extended.clone(),L.extended.underlineStyle=0,L.extended.underlineColor&=-67108864,L.updateExtended()}charAttributes(L){if(L.length===1&&L.params[0]===0)return this._processSGR0(this._curAttrData),!0;const I=L.length;let P;const z=this._curAttrData;for(let K=0;K<I;K++)P=L.params[K],P>=30&&P<=37?(z.fg&=-50331904,z.fg|=16777216|P-30):P>=40&&P<=47?(z.bg&=-50331904,z.bg|=16777216|P-40):P>=90&&P<=97?(z.fg&=-50331904,z.fg|=16777224|P-90):P>=100&&P<=107?(z.bg&=-50331904,z.bg|=16777224|P-100):P===0?this._processSGR0(z):P===1?z.fg|=134217728:P===3?z.bg|=67108864:P===4?(z.fg|=268435456,this._processUnderline(L.hasSubParams(K)?L.getSubParams(K)[0]:1,z)):P===5?z.fg|=536870912:P===7?z.fg|=67108864:P===8?z.fg|=1073741824:P===9?z.fg|=2147483648:P===2?z.bg|=134217728:P===21?this._processUnderline(2,z):P===22?(z.fg&=-134217729,z.bg&=-134217729):P===23?z.bg&=-67108865:P===24?(z.fg&=-268435457,this._processUnderline(0,z)):P===25?z.fg&=-536870913:P===27?z.fg&=-67108865:P===28?z.fg&=-1073741825:P===29?z.fg&=2147483647:P===39?(z.fg&=-67108864,z.fg|=16777215&v.DEFAULT_ATTR_DATA.fg):P===49?(z.bg&=-67108864,z.bg|=16777215&v.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?K+=this._extractColor(L,K,z):P===53?z.bg|=1073741824:P===55?z.bg&=-1073741825:P===59?(z.extended=z.extended.clone(),z.extended.underlineColor=-1,z.updateExtended()):P===100?(z.fg&=-67108864,z.fg|=16777215&v.DEFAULT_ATTR_DATA.fg,z.bg&=-67108864,z.bg|=16777215&v.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(L){switch(L.params[0]){case 5:this._coreService.triggerDataEvent(`${h.C0.ESC}[0n`);break;case 6:const I=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[${I};${P}R`)}return!0}deviceStatusPrivate(L){if(L.params[0]===6){const I=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${h.C0.ESC}[?${I};${P}R`)}return!0}softReset(L){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=v.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(L){const I=L.params[0]||1;switch(I){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=I%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(L){const I=L.params[0]||1;let P;return(L.length<2||(P=L.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>I&&(this._activeBuffer.scrollTop=I-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(L){if(!T(L.params[0],this._optionsService.rawOptions.windowOptions))return!0;const I=L.length>1?L.params[1]:0;switch(L.params[0]){case 14:I!==2&&this._onRequestWindowsOptionsReport.fire(E.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(E.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${h.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:I!==0&&I!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),I!==0&&I!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:I!==0&&I!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),I!==0&&I!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(L){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(L){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(L){return this._windowTitle=L,this._onTitleChange.fire(L),!0}setIconName(L){return this._iconName=L,!0}setOrReportIndexedColor(L){const I=[],P=L.split(";");for(;P.length>1;){const z=P.shift(),K=P.shift();if(/^\d+$/.exec(z)){const te=parseInt(z);if($(te))if(K==="?")I.push({type:0,index:te});else{const J=(0,x.parseColor)(K);J&&I.push({type:1,index:te,color:J})}}}return I.length&&this._onColor.fire(I),!0}setHyperlink(L){const I=L.split(";");return!(I.length<2)&&(I[1]?this._createHyperlink(I[0],I[1]):!I[0]&&this._finishHyperlink())}_createHyperlink(L,I){this._getCurrentLinkId()&&this._finishHyperlink();const P=L.split(":");let z;const K=P.findIndex((te=>te.startsWith("id=")));return K!==-1&&(z=P[K].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:z,uri:I}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(L,I){const P=L.split(";");for(let z=0;z<P.length&&!(I>=this._specialColors.length);++z,++I)if(P[z]==="?")this._onColor.fire([{type:0,index:this._specialColors[I]}]);else{const K=(0,x.parseColor)(P[z]);K&&this._onColor.fire([{type:1,index:this._specialColors[I],color:K}])}return!0}setOrReportFgColor(L){return this._setOrReportSpecialColor(L,0)}setOrReportBgColor(L){return this._setOrReportSpecialColor(L,1)}setOrReportCursorColor(L){return this._setOrReportSpecialColor(L,2)}restoreIndexedColor(L){if(!L)return this._onColor.fire([{type:2}]),!0;const I=[],P=L.split(";");for(let z=0;z<P.length;++z)if(/^\d+$/.exec(P[z])){const K=parseInt(P[z]);$(K)&&I.push({type:2,index:K})}return I.length&&this._onColor.fire(I),!0}restoreFgColor(L){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(L){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(L){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,d.DEFAULT_CHARSET),!0}selectCharset(L){return L.length!==2?(this.selectDefaultCharset(),!0):(L[0]==="/"||this._charsetService.setgCharset(A[L[0]],d.CHARSETS[L[1]]||d.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const L=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,L,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=v.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=v.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(L){return this._charsetService.setgLevel(L),!0}screenAlignmentPattern(){const L=new m.CellData;L.content=4194373,L.fg=this._curAttrData.fg,L.bg=this._curAttrData.bg,this._setCursor(0,0);for(let I=0;I<this._bufferService.rows;++I){const P=this._activeBuffer.ybase+this._activeBuffer.y+I,z=this._activeBuffer.lines.get(P);z&&(z.fill(L),z.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(L,I){const P=this._bufferService.buffer,z=this._optionsService.rawOptions;return(K=>(this._coreService.triggerDataEvent(`${h.C0.ESC}${K}${h.C0.ESC}\\`),!0))(L==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:L==='"p'?'P1$r61;1"p':L==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:L==="m"?"P1$r0m":L===" q"?`P1$r${{block:2,underline:4,bar:6}[z.cursorStyle]-(z.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(L,I){this._dirtyRowTracker.markRangeDirty(L,I)}}o.InputHandler=F;let O=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,L){H>L&&(R=H,H=L,L=R),H<this.start&&(this.start=H),L>this.end&&(this.end=L)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function $(H){return 0<=H&&H<256}O=c([u(0,C.IBufferService)],O)},844:(a,o)=>{function l(c){for(const u of c)u.dispose();c.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const c of this._disposables)c.dispose();this._disposables.length=0}register(c){return this._disposables.push(c),c}unregister(c){const u=this._disposables.indexOf(c);u!==-1&&this._disposables.splice(u,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(c){var u;this._isDisposed||c===this._value||((u=this._value)==null||u.dispose(),this._value=c)}clear(){this.value=void 0}dispose(){var c;this._isDisposed=!0,(c=this._value)==null||c.dispose(),this._value=void 0}},o.toDisposable=function(c){return{dispose:c}},o.disposeArray=l,o.getDisposeArrayDisposable=function(c){return{dispose:()=>l(c)}}},1505:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(u,h,d){this._data[u]||(this._data[u]={}),this._data[u][h]=d}get(u,h){return this._data[u]?this._data[u][h]:void 0}clear(){this._data={}}}o.TwoKeyMap=l,o.FourKeyMap=class{constructor(){this._data=new l}set(c,u,h,d,p){this._data.get(c,u)||this._data.set(c,u,new l),this._data.get(c,u).set(h,d,p)}get(c,u,h,d){var p;return(p=this._data.get(c,u))==null?void 0:p.get(h,d)}clear(){this._data.clear()}}},6114:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof process<"u"&&"title"in process;const l=o.isNode?"node":navigator.userAgent,c=o.isNode?"node":navigator.platform;o.isFirefox=l.includes("Firefox"),o.isLegacyEdge=l.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(l),o.getSafariVersion=function(){if(!o.isSafari)return 0;const u=l.match(/Version\/(\d+)/);return u===null||u.length<2?0:parseInt(u[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(c),o.isIpad=c==="iPad",o.isIphone=c==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(c),o.isLinux=c.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(l)},6106:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let l=0;o.SortedList=class{constructor(c){this._getKey=c,this._array=[]}clear(){this._array.length=0}insert(c){this._array.length!==0?(l=this._search(this._getKey(c)),this._array.splice(l,0,c)):this._array.push(c)}delete(c){if(this._array.length===0)return!1;const u=this._getKey(c);if(u===void 0||(l=this._search(u),l===-1)||this._getKey(this._array[l])!==u)return!1;do if(this._array[l]===c)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===u);return!1}*getKeyIterator(c){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===c)}forEachByKey(c,u){if(this._array.length!==0&&(l=this._search(c),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===c))do u(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===c)}values(){return[...this._array].values()}_search(c){let u=0,h=this._array.length-1;for(;h>=u;){let d=u+h>>1;const p=this._getKey(this._array[d]);if(p>c)h=d-1;else{if(!(p<c)){for(;d>0&&this._getKey(this._array[d-1])===c;)d--;return d}u=d+1}}return u}}},7226:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const c=l(6114);class u{constructor(){this._tasks=[],this._i=0}enqueue(p){this._tasks.push(p),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(p){this._idleCallback=void 0;let y=0,_=0,v=p.timeRemaining(),g=0;for(;this._i<this._tasks.length;){if(y=Date.now(),this._tasks[this._i]()||this._i++,y=Math.max(1,Date.now()-y),_=Math.max(y,_),g=p.timeRemaining(),1.5*_>g)return v-y<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(v-y))}ms`),void this._start();v=g}this.clear()}}class h extends u{_requestCallback(p){return setTimeout((()=>p(this._createDeadline(16))))}_cancelCallback(p){clearTimeout(p)}_createDeadline(p){const y=Date.now()+p;return{timeRemaining:()=>Math.max(0,y-Date.now())}}}o.PriorityTaskQueue=h,o.IdleTaskQueue=!c.isNode&&"requestIdleCallback"in window?class extends u{_requestCallback(d){return requestIdleCallback(d)}_cancelCallback(d){cancelIdleCallback(d)}}:h,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(d){this._queue.clear(),this._queue.enqueue(d)}flush(){this._queue.flush()}}},9282:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const c=l(643);o.updateWindowsModeWrappedState=function(u){const h=u.buffer.lines.get(u.buffer.ybase+u.buffer.y-1),d=h==null?void 0:h.get(u.cols-1),p=u.buffer.lines.get(u.buffer.ybase+u.buffer.y);p&&d&&(p.isWrapped=d[c.CHAR_DATA_CODE_INDEX]!==c.NULL_CELL_CODE&&d[c.CHAR_DATA_CODE_INDEX]!==c.WHITESPACE_CELL_CODE)}},3734:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new c}static toColorRGB(h){return[h>>>16&255,h>>>8&255,255&h]}static fromColorRGB(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]}clone(){const h=new l;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}o.AttributeData=l;class c{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(h){this._ext=h}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(h){this._ext&=-469762049,this._ext|=h<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(h){this._ext&=-67108864,this._ext|=67108863&h}get urlId(){return this._urlId}set urlId(h){this._urlId=h}get underlineVariantOffset(){const h=(3758096384&this._ext)>>29;return h<0?4294967288^h:h}set underlineVariantOffset(h){this._ext&=536870911,this._ext|=h<<29&3758096384}constructor(h=0,d=0){this._ext=0,this._urlId=0,this._ext=h,this._urlId=d}clone(){return new c(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=c},9092:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const c=l(6349),u=l(7226),h=l(3734),d=l(8437),p=l(4634),y=l(511),_=l(643),v=l(4863),g=l(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(f,m,b){this._hasScrollback=f,this._optionsService=m,this._bufferService=b,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=d.DEFAULT_ATTR_DATA.clone(),this.savedCharset=g.DEFAULT_CHARSET,this.markers=[],this._nullCell=y.CellData.fromCharData([0,_.NULL_CELL_CHAR,_.NULL_CELL_WIDTH,_.NULL_CELL_CODE]),this._whitespaceCell=y.CellData.fromCharData([0,_.WHITESPACE_CELL_CHAR,_.WHITESPACE_CELL_WIDTH,_.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new u.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(f){return f?(this._nullCell.fg=f.fg,this._nullCell.bg=f.bg,this._nullCell.extended=f.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new h.ExtendedAttrs),this._nullCell}getWhitespaceCell(f){return f?(this._whitespaceCell.fg=f.fg,this._whitespaceCell.bg=f.bg,this._whitespaceCell.extended=f.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new h.ExtendedAttrs),this._whitespaceCell}getBlankLine(f,m){return new d.BufferLine(this._bufferService.cols,this.getNullCell(f),m)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const f=this.ybase+this.y-this.ydisp;return f>=0&&f<this._rows}_getCorrectBufferLength(f){if(!this._hasScrollback)return f;const m=f+this._optionsService.rawOptions.scrollback;return m>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:m}fillViewportRows(f){if(this.lines.length===0){f===void 0&&(f=d.DEFAULT_ATTR_DATA);let m=this._rows;for(;m--;)this.lines.push(this.getBlankLine(f))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new c.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(f,m){const b=this.getNullCell(d.DEFAULT_ATTR_DATA);let C=0;const S=this._getCorrectBufferLength(m);if(S>this.lines.maxLength&&(this.lines.maxLength=S),this.lines.length>0){if(this._cols<f)for(let w=0;w<this.lines.length;w++)C+=+this.lines.get(w).resize(f,b);let k=0;if(this._rows<m)for(let w=this._rows;w<m;w++)this.lines.length<m+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new d.BufferLine(f,b)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new d.BufferLine(f,b)));else for(let w=this._rows;w>m;w--)this.lines.length>m+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(S<this.lines.maxLength){const w=this.lines.length-S;w>0&&(this.lines.trimStart(w),this.ybase=Math.max(this.ybase-w,0),this.ydisp=Math.max(this.ydisp-w,0),this.savedY=Math.max(this.savedY-w,0)),this.lines.maxLength=S}this.x=Math.min(this.x,f-1),this.y=Math.min(this.y,m-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,f-1),this.scrollTop=0}if(this.scrollBottom=m-1,this._isReflowEnabled&&(this._reflow(f,m),this._cols>f))for(let k=0;k<this.lines.length;k++)C+=+this.lines.get(k).resize(f,b);this._cols=f,this._rows=m,this._memoryCleanupQueue.clear(),C>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let f=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,f=!1);let m=0;for(;this._memoryCleanupPosition<this.lines.length;)if(m+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),m>100)return!0;return f}get _isReflowEnabled(){const f=this._optionsService.rawOptions.windowsPty;return f&&f.buildNumber?this._hasScrollback&&f.backend==="conpty"&&f.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(f,m){this._cols!==f&&(f>this._cols?this._reflowLarger(f,m):this._reflowSmaller(f,m))}_reflowLarger(f,m){const b=(0,p.reflowLargerGetLinesToRemove)(this.lines,this._cols,f,this.ybase+this.y,this.getNullCell(d.DEFAULT_ATTR_DATA));if(b.length>0){const C=(0,p.reflowLargerCreateNewLayout)(this.lines,b);(0,p.reflowLargerApplyNewLayout)(this.lines,C.layout),this._reflowLargerAdjustViewport(f,m,C.countRemoved)}}_reflowLargerAdjustViewport(f,m,b){const C=this.getNullCell(d.DEFAULT_ATTR_DATA);let S=b;for(;S-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<m&&this.lines.push(new d.BufferLine(f,C))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-b,0)}_reflowSmaller(f,m){const b=this.getNullCell(d.DEFAULT_ATTR_DATA),C=[];let S=0;for(let k=this.lines.length-1;k>=0;k--){let w=this.lines.get(k);if(!w||!w.isWrapped&&w.getTrimmedLength()<=f)continue;const x=[w];for(;w.isWrapped&&k>0;)w=this.lines.get(--k),x.unshift(w);const A=this.ybase+this.y;if(A>=k&&A<k+x.length)continue;const D=x[x.length-1].getTrimmedLength(),T=(0,p.reflowSmallerGetNewLineLengths)(x,this._cols,f),E=T.length-x.length;let R;R=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+E):Math.max(0,this.lines.length-this.lines.maxLength+E);const F=[];for(let P=0;P<E;P++){const z=this.getBlankLine(d.DEFAULT_ATTR_DATA,!0);F.push(z)}F.length>0&&(C.push({start:k+x.length+S,newLines:F}),S+=F.length),x.push(...F);let O=T.length-1,$=T[O];$===0&&(O--,$=T[O]);let H=x.length-E-1,L=D;for(;H>=0;){const P=Math.min(L,$);if(x[O]===void 0)break;if(x[O].copyCellsFrom(x[H],L-P,$-P,P,!0),$-=P,$===0&&(O--,$=T[O]),L-=P,L===0){H--;const z=Math.max(H,0);L=(0,p.getWrappedLineTrimmedLength)(x,z,this._cols)}}for(let P=0;P<x.length;P++)T[P]<f&&x[P].setCell(T[P],b);let I=E-R;for(;I-- >0;)this.ybase===0?this.y<m-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+S)-m&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+E,this.ybase+m-1)}if(C.length>0){const k=[],w=[];for(let O=0;O<this.lines.length;O++)w.push(this.lines.get(O));const x=this.lines.length;let A=x-1,D=0,T=C[D];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+S);let E=0;for(let O=Math.min(this.lines.maxLength-1,x+S-1);O>=0;O--)if(T&&T.start>A+E){for(let $=T.newLines.length-1;$>=0;$--)this.lines.set(O--,T.newLines[$]);O++,k.push({index:A+1,amount:T.newLines.length}),E+=T.newLines.length,T=C[++D]}else this.lines.set(O,w[A--]);let R=0;for(let O=k.length-1;O>=0;O--)k[O].index+=R,this.lines.onInsertEmitter.fire(k[O]),R+=k[O].amount;const F=Math.max(0,x+S-this.lines.maxLength);F>0&&this.lines.onTrimEmitter.fire(F)}}translateBufferLineToString(f,m,b=0,C){const S=this.lines.get(f);return S?S.translateToString(m,b,C):""}getWrappedRangeForLine(f){let m=f,b=f;for(;m>0&&this.lines.get(m).isWrapped;)m--;for(;b+1<this.lines.length&&this.lines.get(b+1).isWrapped;)b++;return{first:m,last:b}}setupTabStops(f){for(f!=null?this.tabs[f]||(f=this.prevStop(f)):(this.tabs={},f=0);f<this._cols;f+=this._optionsService.rawOptions.tabStopWidth)this.tabs[f]=!0}prevStop(f){for(f==null&&(f=this.x);!this.tabs[--f]&&f>0;);return f>=this._cols?this._cols-1:f<0?0:f}nextStop(f){for(f==null&&(f=this.x);!this.tabs[++f]&&f<this._cols;);return f>=this._cols?this._cols-1:f<0?0:f}clearMarkers(f){this._isClearing=!0;for(let m=0;m<this.markers.length;m++)this.markers[m].line===f&&(this.markers[m].dispose(),this.markers.splice(m--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let f=0;f<this.markers.length;f++)this.markers[f].dispose(),this.markers.splice(f--,1);this._isClearing=!1}addMarker(f){const m=new v.Marker(f);return this.markers.push(m),m.register(this.lines.onTrim((b=>{m.line-=b,m.line<0&&m.dispose()}))),m.register(this.lines.onInsert((b=>{m.line>=b.index&&(m.line+=b.amount)}))),m.register(this.lines.onDelete((b=>{m.line>=b.index&&m.line<b.index+b.amount&&m.dispose(),m.line>b.index&&(m.line-=b.amount)}))),m.register(m.onDispose((()=>this._removeMarker(m)))),m}_removeMarker(f){this._isClearing||this.markers.splice(this.markers.indexOf(f),1)}}},8437:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const c=l(3734),u=l(511),h=l(643),d=l(482);o.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let p=0;class y{constructor(v,g,f=!1){this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*v);const m=g||u.CellData.fromCharData([0,h.NULL_CELL_CHAR,h.NULL_CELL_WIDTH,h.NULL_CELL_CODE]);for(let b=0;b<v;++b)this.setCell(b,m);this.length=v}get(v){const g=this._data[3*v+0],f=2097151&g;return[this._data[3*v+1],2097152&g?this._combined[v]:f?(0,d.stringFromCodePoint)(f):"",g>>22,2097152&g?this._combined[v].charCodeAt(this._combined[v].length-1):f]}set(v,g){this._data[3*v+1]=g[h.CHAR_DATA_ATTR_INDEX],g[h.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[v]=g[1],this._data[3*v+0]=2097152|v|g[h.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*v+0]=g[h.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|g[h.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(v){return this._data[3*v+0]>>22}hasWidth(v){return 12582912&this._data[3*v+0]}getFg(v){return this._data[3*v+1]}getBg(v){return this._data[3*v+2]}hasContent(v){return 4194303&this._data[3*v+0]}getCodePoint(v){const g=this._data[3*v+0];return 2097152&g?this._combined[v].charCodeAt(this._combined[v].length-1):2097151&g}isCombined(v){return 2097152&this._data[3*v+0]}getString(v){const g=this._data[3*v+0];return 2097152&g?this._combined[v]:2097151&g?(0,d.stringFromCodePoint)(2097151&g):""}isProtected(v){return 536870912&this._data[3*v+2]}loadCell(v,g){return p=3*v,g.content=this._data[p+0],g.fg=this._data[p+1],g.bg=this._data[p+2],2097152&g.content&&(g.combinedData=this._combined[v]),268435456&g.bg&&(g.extended=this._extendedAttrs[v]),g}setCell(v,g){2097152&g.content&&(this._combined[v]=g.combinedData),268435456&g.bg&&(this._extendedAttrs[v]=g.extended),this._data[3*v+0]=g.content,this._data[3*v+1]=g.fg,this._data[3*v+2]=g.bg}setCellFromCodepoint(v,g,f,m){268435456&m.bg&&(this._extendedAttrs[v]=m.extended),this._data[3*v+0]=g|f<<22,this._data[3*v+1]=m.fg,this._data[3*v+2]=m.bg}addCodepointToCell(v,g,f){let m=this._data[3*v+0];2097152&m?this._combined[v]+=(0,d.stringFromCodePoint)(g):2097151&m?(this._combined[v]=(0,d.stringFromCodePoint)(2097151&m)+(0,d.stringFromCodePoint)(g),m&=-2097152,m|=2097152):m=g|4194304,f&&(m&=-12582913,m|=f<<22),this._data[3*v+0]=m}insertCells(v,g,f){if((v%=this.length)&&this.getWidth(v-1)===2&&this.setCellFromCodepoint(v-1,0,1,f),g<this.length-v){const m=new u.CellData;for(let b=this.length-v-g-1;b>=0;--b)this.setCell(v+g+b,this.loadCell(v+b,m));for(let b=0;b<g;++b)this.setCell(v+b,f)}else for(let m=v;m<this.length;++m)this.setCell(m,f);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,f)}deleteCells(v,g,f){if(v%=this.length,g<this.length-v){const m=new u.CellData;for(let b=0;b<this.length-v-g;++b)this.setCell(v+b,this.loadCell(v+g+b,m));for(let b=this.length-g;b<this.length;++b)this.setCell(b,f)}else for(let m=v;m<this.length;++m)this.setCell(m,f);v&&this.getWidth(v-1)===2&&this.setCellFromCodepoint(v-1,0,1,f),this.getWidth(v)!==0||this.hasContent(v)||this.setCellFromCodepoint(v,0,1,f)}replaceCells(v,g,f,m=!1){if(m)for(v&&this.getWidth(v-1)===2&&!this.isProtected(v-1)&&this.setCellFromCodepoint(v-1,0,1,f),g<this.length&&this.getWidth(g-1)===2&&!this.isProtected(g)&&this.setCellFromCodepoint(g,0,1,f);v<g&&v<this.length;)this.isProtected(v)||this.setCell(v,f),v++;else for(v&&this.getWidth(v-1)===2&&this.setCellFromCodepoint(v-1,0,1,f),g<this.length&&this.getWidth(g-1)===2&&this.setCellFromCodepoint(g,0,1,f);v<g&&v<this.length;)this.setCell(v++,f)}resize(v,g){if(v===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const f=3*v;if(v>this.length){if(this._data.buffer.byteLength>=4*f)this._data=new Uint32Array(this._data.buffer,0,f);else{const m=new Uint32Array(f);m.set(this._data),this._data=m}for(let m=this.length;m<v;++m)this.setCell(m,g)}else{this._data=this._data.subarray(0,f);const m=Object.keys(this._combined);for(let C=0;C<m.length;C++){const S=parseInt(m[C],10);S>=v&&delete this._combined[S]}const b=Object.keys(this._extendedAttrs);for(let C=0;C<b.length;C++){const S=parseInt(b[C],10);S>=v&&delete this._extendedAttrs[S]}}return this.length=v,4*f*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const v=new Uint32Array(this._data.length);return v.set(this._data),this._data=v,1}return 0}fill(v,g=!1){if(g)for(let f=0;f<this.length;++f)this.isProtected(f)||this.setCell(f,v);else{this._combined={},this._extendedAttrs={};for(let f=0;f<this.length;++f)this.setCell(f,v)}}copyFrom(v){this.length!==v.length?this._data=new Uint32Array(v._data):this._data.set(v._data),this.length=v.length,this._combined={};for(const g in v._combined)this._combined[g]=v._combined[g];this._extendedAttrs={};for(const g in v._extendedAttrs)this._extendedAttrs[g]=v._extendedAttrs[g];this.isWrapped=v.isWrapped}clone(){const v=new y(0);v._data=new Uint32Array(this._data),v.length=this.length;for(const g in this._combined)v._combined[g]=this._combined[g];for(const g in this._extendedAttrs)v._extendedAttrs[g]=this._extendedAttrs[g];return v.isWrapped=this.isWrapped,v}getTrimmedLength(){for(let v=this.length-1;v>=0;--v)if(4194303&this._data[3*v+0])return v+(this._data[3*v+0]>>22);return 0}getNoBgTrimmedLength(){for(let v=this.length-1;v>=0;--v)if(4194303&this._data[3*v+0]||50331648&this._data[3*v+2])return v+(this._data[3*v+0]>>22);return 0}copyCellsFrom(v,g,f,m,b){const C=v._data;if(b)for(let k=m-1;k>=0;k--){for(let w=0;w<3;w++)this._data[3*(f+k)+w]=C[3*(g+k)+w];268435456&C[3*(g+k)+2]&&(this._extendedAttrs[f+k]=v._extendedAttrs[g+k])}else for(let k=0;k<m;k++){for(let w=0;w<3;w++)this._data[3*(f+k)+w]=C[3*(g+k)+w];268435456&C[3*(g+k)+2]&&(this._extendedAttrs[f+k]=v._extendedAttrs[g+k])}const S=Object.keys(v._combined);for(let k=0;k<S.length;k++){const w=parseInt(S[k],10);w>=g&&(this._combined[w-g+f]=v._combined[w])}}translateToString(v,g,f,m){g=g??0,f=f??this.length,v&&(f=Math.min(f,this.getTrimmedLength())),m&&(m.length=0);let b="";for(;g<f;){const C=this._data[3*g+0],S=2097151&C,k=2097152&C?this._combined[g]:S?(0,d.stringFromCodePoint)(S):h.WHITESPACE_CELL_CHAR;if(b+=k,m)for(let w=0;w<k.length;++w)m.push(g);g+=C>>22||1}return m&&m.push(g),b}}o.BufferLine=y},4841:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(l,c){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return c*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(a,o)=>{function l(c,u,h){if(u===c.length-1)return c[u].getTrimmedLength();const d=!c[u].hasContent(h-1)&&c[u].getWidth(h-1)===1,p=c[u+1].getWidth(0)===2;return d&&p?h-1:h}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(c,u,h,d,p){const y=[];for(let _=0;_<c.length-1;_++){let v=_,g=c.get(++v);if(!g.isWrapped)continue;const f=[c.get(_)];for(;v<c.length&&g.isWrapped;)f.push(g),g=c.get(++v);if(d>=_&&d<v){_+=f.length-1;continue}let m=0,b=l(f,m,u),C=1,S=0;for(;C<f.length;){const w=l(f,C,u),x=w-S,A=h-b,D=Math.min(x,A);f[m].copyCellsFrom(f[C],S,b,D,!1),b+=D,b===h&&(m++,b=0),S+=D,S===w&&(C++,S=0),b===0&&m!==0&&f[m-1].getWidth(h-1)===2&&(f[m].copyCellsFrom(f[m-1],h-1,b++,1,!1),f[m-1].setCell(h-1,p))}f[m].replaceCells(b,h,p);let k=0;for(let w=f.length-1;w>0&&(w>m||f[w].getTrimmedLength()===0);w--)k++;k>0&&(y.push(_+f.length-k),y.push(k)),_+=f.length-1}return y},o.reflowLargerCreateNewLayout=function(c,u){const h=[];let d=0,p=u[d],y=0;for(let _=0;_<c.length;_++)if(p===_){const v=u[++d];c.onDeleteEmitter.fire({index:_-y,amount:v}),_+=v-1,y+=v,p=u[++d]}else h.push(_);return{layout:h,countRemoved:y}},o.reflowLargerApplyNewLayout=function(c,u){const h=[];for(let d=0;d<u.length;d++)h.push(c.get(u[d]));for(let d=0;d<h.length;d++)c.set(d,h[d]);c.length=u.length},o.reflowSmallerGetNewLineLengths=function(c,u,h){const d=[],p=c.map(((g,f)=>l(c,f,u))).reduce(((g,f)=>g+f));let y=0,_=0,v=0;for(;v<p;){if(p-v<h){d.push(p-v);break}y+=h;const g=l(c,_,u);y>g&&(y-=g,_++);const f=c[_].getWidth(y-1)===2;f&&y--;const m=f?h-1:h;d.push(m),v+=m}return d},o.getWrappedLineTrimmedLength=l},5295:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const c=l(8460),u=l(844),h=l(9092);class d extends u.Disposable{constructor(y,_){super(),this._optionsService=y,this._bufferService=_,this._onBufferActivate=this.register(new c.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new h.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new h.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(y){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(y),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(y,_){this._normal.resize(y,_),this._alt.resize(y,_),this.setupTabStops(y)}setupTabStops(y){this._normal.setupTabStops(y),this._alt.setupTabStops(y)}}o.BufferSet=d},511:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const c=l(482),u=l(643),h=l(3734);class d extends h.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new h.ExtendedAttrs,this.combinedData=""}static fromCharData(y){const _=new d;return _.setFromCharData(y),_}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,c.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(y){this.fg=y[u.CHAR_DATA_ATTR_INDEX],this.bg=0;let _=!1;if(y[u.CHAR_DATA_CHAR_INDEX].length>2)_=!0;else if(y[u.CHAR_DATA_CHAR_INDEX].length===2){const v=y[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=v&&v<=56319){const g=y[u.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=g&&g<=57343?this.content=1024*(v-55296)+g-56320+65536|y[u.CHAR_DATA_WIDTH_INDEX]<<22:_=!0}else _=!0}else this.content=y[u.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|y[u.CHAR_DATA_WIDTH_INDEX]<<22;_&&(this.combinedData=y[u.CHAR_DATA_CHAR_INDEX],this.content=2097152|y[u.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=d},643:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const c=l(8460),u=l(844);class h{get id(){return this._id}constructor(p){this.line=p,this.isDisposed=!1,this._disposables=[],this._id=h._nextId++,this._onDispose=this.register(new c.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,u.disposeArray)(this._disposables),this._disposables.length=0)}register(p){return this._disposables.push(p),p}}o.Marker=h,h._nextId=1},7116:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},o.CHARSETS.A={"#":""},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},o.CHARSETS.C=o.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.E=o.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},o.CHARSETS.H=o.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(a,o)=>{var l,c,u;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,(function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="\x07",h.BS="\b",h.HT="	",h.LF=`
`,h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="\x1B",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""})(l||(o.C0=l={})),(function(h){h.PAD="",h.HOP="",h.BPH="",h.NBH="",h.IND="",h.NEL="",h.SSA="",h.ESA="",h.HTS="",h.HTJ="",h.VTS="",h.PLD="",h.PLU="",h.RI="",h.SS2="",h.SS3="",h.DCS="",h.PU1="",h.PU2="",h.STS="",h.CCH="",h.MW="",h.SPA="",h.EPA="",h.SOS="",h.SGCI="",h.SCI="",h.CSI="",h.ST="",h.OSC="",h.PM="",h.APC=""})(c||(o.C1=c={})),(function(h){h.ST=`${l.ESC}\\`})(u||(o.C1_ESCAPED=u={}))},7399:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const c=l(2584),u={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(h,d,p,y){const _={type:0,cancel:!1,key:void 0},v=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:h.key==="UIKeyInputUpArrow"?_.key=d?c.C0.ESC+"OA":c.C0.ESC+"[A":h.key==="UIKeyInputLeftArrow"?_.key=d?c.C0.ESC+"OD":c.C0.ESC+"[D":h.key==="UIKeyInputRightArrow"?_.key=d?c.C0.ESC+"OC":c.C0.ESC+"[C":h.key==="UIKeyInputDownArrow"&&(_.key=d?c.C0.ESC+"OB":c.C0.ESC+"[B");break;case 8:_.key=h.ctrlKey?"\b":c.C0.DEL,h.altKey&&(_.key=c.C0.ESC+_.key);break;case 9:if(h.shiftKey){_.key=c.C0.ESC+"[Z";break}_.key=c.C0.HT,_.cancel=!0;break;case 13:_.key=h.altKey?c.C0.ESC+c.C0.CR:c.C0.CR,_.cancel=!0;break;case 27:_.key=c.C0.ESC,h.altKey&&(_.key=c.C0.ESC+c.C0.ESC),_.cancel=!0;break;case 37:if(h.metaKey)break;v?(_.key=c.C0.ESC+"[1;"+(v+1)+"D",_.key===c.C0.ESC+"[1;3D"&&(_.key=c.C0.ESC+(p?"b":"[1;5D"))):_.key=d?c.C0.ESC+"OD":c.C0.ESC+"[D";break;case 39:if(h.metaKey)break;v?(_.key=c.C0.ESC+"[1;"+(v+1)+"C",_.key===c.C0.ESC+"[1;3C"&&(_.key=c.C0.ESC+(p?"f":"[1;5C"))):_.key=d?c.C0.ESC+"OC":c.C0.ESC+"[C";break;case 38:if(h.metaKey)break;v?(_.key=c.C0.ESC+"[1;"+(v+1)+"A",p||_.key!==c.C0.ESC+"[1;3A"||(_.key=c.C0.ESC+"[1;5A")):_.key=d?c.C0.ESC+"OA":c.C0.ESC+"[A";break;case 40:if(h.metaKey)break;v?(_.key=c.C0.ESC+"[1;"+(v+1)+"B",p||_.key!==c.C0.ESC+"[1;3B"||(_.key=c.C0.ESC+"[1;5B")):_.key=d?c.C0.ESC+"OB":c.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(_.key=c.C0.ESC+"[2~");break;case 46:_.key=v?c.C0.ESC+"[3;"+(v+1)+"~":c.C0.ESC+"[3~";break;case 36:_.key=v?c.C0.ESC+"[1;"+(v+1)+"H":d?c.C0.ESC+"OH":c.C0.ESC+"[H";break;case 35:_.key=v?c.C0.ESC+"[1;"+(v+1)+"F":d?c.C0.ESC+"OF":c.C0.ESC+"[F";break;case 33:h.shiftKey?_.type=2:h.ctrlKey?_.key=c.C0.ESC+"[5;"+(v+1)+"~":_.key=c.C0.ESC+"[5~";break;case 34:h.shiftKey?_.type=3:h.ctrlKey?_.key=c.C0.ESC+"[6;"+(v+1)+"~":_.key=c.C0.ESC+"[6~";break;case 112:_.key=v?c.C0.ESC+"[1;"+(v+1)+"P":c.C0.ESC+"OP";break;case 113:_.key=v?c.C0.ESC+"[1;"+(v+1)+"Q":c.C0.ESC+"OQ";break;case 114:_.key=v?c.C0.ESC+"[1;"+(v+1)+"R":c.C0.ESC+"OR";break;case 115:_.key=v?c.C0.ESC+"[1;"+(v+1)+"S":c.C0.ESC+"OS";break;case 116:_.key=v?c.C0.ESC+"[15;"+(v+1)+"~":c.C0.ESC+"[15~";break;case 117:_.key=v?c.C0.ESC+"[17;"+(v+1)+"~":c.C0.ESC+"[17~";break;case 118:_.key=v?c.C0.ESC+"[18;"+(v+1)+"~":c.C0.ESC+"[18~";break;case 119:_.key=v?c.C0.ESC+"[19;"+(v+1)+"~":c.C0.ESC+"[19~";break;case 120:_.key=v?c.C0.ESC+"[20;"+(v+1)+"~":c.C0.ESC+"[20~";break;case 121:_.key=v?c.C0.ESC+"[21;"+(v+1)+"~":c.C0.ESC+"[21~";break;case 122:_.key=v?c.C0.ESC+"[23;"+(v+1)+"~":c.C0.ESC+"[23~";break;case 123:_.key=v?c.C0.ESC+"[24;"+(v+1)+"~":c.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(p&&!y||!h.altKey||h.metaKey)!p||h.altKey||h.ctrlKey||h.shiftKey||!h.metaKey?h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&h.key.length===1?_.key=h.key:h.key&&h.ctrlKey&&(h.key==="_"&&(_.key=c.C0.US),h.key==="@"&&(_.key=c.C0.NUL)):h.keyCode===65&&(_.type=1);else{const g=u[h.keyCode],f=g==null?void 0:g[h.shiftKey?1:0];if(f)_.key=c.C0.ESC+f;else if(h.keyCode>=65&&h.keyCode<=90){const m=h.ctrlKey?h.keyCode-64:h.keyCode+32;let b=String.fromCharCode(m);h.shiftKey&&(b=b.toUpperCase()),_.key=c.C0.ESC+b}else if(h.keyCode===32)_.key=c.C0.ESC+(h.ctrlKey?c.C0.NUL:" ");else if(h.key==="Dead"&&h.code.startsWith("Key")){let m=h.code.slice(3,4);h.shiftKey||(m=m.toLowerCase()),_.key=c.C0.ESC+m,_.cancel=!0}}else h.keyCode>=65&&h.keyCode<=90?_.key=String.fromCharCode(h.keyCode-64):h.keyCode===32?_.key=c.C0.NUL:h.keyCode>=51&&h.keyCode<=55?_.key=String.fromCharCode(h.keyCode-51+27):h.keyCode===56?_.key=c.C0.DEL:h.keyCode===219?_.key=c.C0.ESC:h.keyCode===220?_.key=c.C0.FS:h.keyCode===221&&(_.key=c.C0.GS)}return _}},482:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},o.utf32ToString=function(l,c=0,u=l.length){let h="";for(let d=c;d<u;++d){let p=l[d];p>65535?(p-=65536,h+=String.fromCharCode(55296+(p>>10))+String.fromCharCode(p%1024+56320)):h+=String.fromCharCode(p)}return h},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,c){const u=l.length;if(!u)return 0;let h=0,d=0;if(this._interim){const p=l.charCodeAt(d++);56320<=p&&p<=57343?c[h++]=1024*(this._interim-55296)+p-56320+65536:(c[h++]=this._interim,c[h++]=p),this._interim=0}for(let p=d;p<u;++p){const y=l.charCodeAt(p);if(55296<=y&&y<=56319){if(++p>=u)return this._interim=y,h;const _=l.charCodeAt(p);56320<=_&&_<=57343?c[h++]=1024*(y-55296)+_-56320+65536:(c[h++]=y,c[h++]=_)}else y!==65279&&(c[h++]=y)}return h}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,c){const u=l.length;if(!u)return 0;let h,d,p,y,_=0,v=0,g=0;if(this.interim[0]){let b=!1,C=this.interim[0];C&=(224&C)==192?31:(240&C)==224?15:7;let S,k=0;for(;(S=63&this.interim[++k])&&k<4;)C<<=6,C|=S;const w=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,x=w-k;for(;g<x;){if(g>=u)return 0;if(S=l[g++],(192&S)!=128){g--,b=!0;break}this.interim[k++]=S,C<<=6,C|=63&S}b||(w===2?C<128?g--:c[_++]=C:w===3?C<2048||C>=55296&&C<=57343||C===65279||(c[_++]=C):C<65536||C>1114111||(c[_++]=C)),this.interim.fill(0)}const f=u-4;let m=g;for(;m<u;){for(;!(!(m<f)||128&(h=l[m])||128&(d=l[m+1])||128&(p=l[m+2])||128&(y=l[m+3]));)c[_++]=h,c[_++]=d,c[_++]=p,c[_++]=y,m+=4;if(h=l[m++],h<128)c[_++]=h;else if((224&h)==192){if(m>=u)return this.interim[0]=h,_;if(d=l[m++],(192&d)!=128){m--;continue}if(v=(31&h)<<6|63&d,v<128){m--;continue}c[_++]=v}else if((240&h)==224){if(m>=u)return this.interim[0]=h,_;if(d=l[m++],(192&d)!=128){m--;continue}if(m>=u)return this.interim[0]=h,this.interim[1]=d,_;if(p=l[m++],(192&p)!=128){m--;continue}if(v=(15&h)<<12|(63&d)<<6|63&p,v<2048||v>=55296&&v<=57343||v===65279)continue;c[_++]=v}else if((248&h)==240){if(m>=u)return this.interim[0]=h,_;if(d=l[m++],(192&d)!=128){m--;continue}if(m>=u)return this.interim[0]=h,this.interim[1]=d,_;if(p=l[m++],(192&p)!=128){m--;continue}if(m>=u)return this.interim[0]=h,this.interim[1]=d,this.interim[2]=p,_;if(y=l[m++],(192&y)!=128){m--;continue}if(v=(7&h)<<18|(63&d)<<12|(63&p)<<6|63&y,v<65536||v>1114111)continue;c[_++]=v}}return _}}},225:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const c=l(1480),u=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let d;o.UnicodeV6=class{constructor(){if(this.version="6",!d){d=new Uint8Array(65536),d.fill(1),d[0]=0,d.fill(0,1,32),d.fill(0,127,160),d.fill(2,4352,4448),d[9001]=2,d[9002]=2,d.fill(2,11904,42192),d[12351]=1,d.fill(2,44032,55204),d.fill(2,63744,64256),d.fill(2,65040,65050),d.fill(2,65072,65136),d.fill(2,65280,65377),d.fill(2,65504,65511);for(let p=0;p<u.length;++p)d.fill(0,u[p][0],u[p][1]+1)}}wcwidth(p){return p<32?0:p<127?1:p<65536?d[p]:(function(y,_){let v,g=0,f=_.length-1;if(y<_[0][0]||y>_[f][1])return!1;for(;f>=g;)if(v=g+f>>1,y>_[v][1])g=v+1;else{if(!(y<_[v][0]))return!0;f=v-1}return!1})(p,h)?0:p>=131072&&p<=196605||p>=196608&&p<=262141?2:1}charProperties(p,y){let _=this.wcwidth(p),v=_===0&&y!==0;if(v){const g=c.UnicodeService.extractWidth(y);g===0?v=!1:g>_&&(_=g)}return c.UnicodeService.createPropertyValue(0,_,v)}}},5981:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const c=l(8460),u=l(844);class h extends u.Disposable{constructor(p){super(),this._action=p,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(p,y){if(y!==void 0&&this._syncCalls>y)return void(this._syncCalls=0);if(this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let _;for(this._isSyncWriting=!0;_=this._writeBuffer.shift();){this._action(_);const v=this._callbacks.shift();v&&v()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(p,y){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(y),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=p.length,this._writeBuffer.push(p),this._callbacks.push(y)}_innerWrite(p=0,y=!0){const _=p||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const v=this._writeBuffer[this._bufferOffset],g=this._action(v,y);if(g){const m=b=>Date.now()-_>=12?setTimeout((()=>this._innerWrite(0,b))):this._innerWrite(_,b);return void g.catch((b=>(queueMicrotask((()=>{throw b})),Promise.resolve(!1)))).then(m)}const f=this._callbacks[this._bufferOffset];if(f&&f(),this._bufferOffset++,this._pendingData-=v.length,Date.now()-_>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=h},5941:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,c=/^[\da-f]+$/;function u(h,d){const p=h.toString(16),y=p.length<2?"0"+p:p;switch(d){case 4:return p[0];case 8:return y;case 12:return(y+y).slice(0,3);default:return y+y}}o.parseColor=function(h){if(!h)return;let d=h.toLowerCase();if(d.indexOf("rgb:")===0){d=d.slice(4);const p=l.exec(d);if(p){const y=p[1]?15:p[4]?255:p[7]?4095:65535;return[Math.round(parseInt(p[1]||p[4]||p[7]||p[10],16)/y*255),Math.round(parseInt(p[2]||p[5]||p[8]||p[11],16)/y*255),Math.round(parseInt(p[3]||p[6]||p[9]||p[12],16)/y*255)]}}else if(d.indexOf("#")===0&&(d=d.slice(1),c.exec(d)&&[3,6,9,12].includes(d.length))){const p=d.length/3,y=[0,0,0];for(let _=0;_<3;++_){const v=parseInt(d.slice(p*_,p*_+p),16);y[_]=p===1?v<<4:p===2?v:p===3?v>>4:v>>8}return y}},o.toRgbString=function(h,d=16){const[p,y,_]=h;return`rgb:${u(p,d)}/${u(y,d)}/${u(_,d)}`}},5770:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const c=l(482),u=l(8742),h=l(5770),d=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=d,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}registerHandler(y,_){this._handlers[y]===void 0&&(this._handlers[y]=[]);const v=this._handlers[y];return v.push(_),{dispose:()=>{const g=v.indexOf(_);g!==-1&&v.splice(g,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}reset(){if(this._active.length)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].unhook(!1);this._stack.paused=!1,this._active=d,this._ident=0}hook(y,_){if(this.reset(),this._ident=y,this._active=this._handlers[y]||d,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].hook(_);else this._handlerFb(this._ident,"HOOK",_)}put(y,_,v){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(y,_,v);else this._handlerFb(this._ident,"PUT",(0,c.utf32ToString)(y,_,v))}unhook(y,_=!0){if(this._active.length){let v=!1,g=this._active.length-1,f=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,v=_,f=this._stack.fallThrough,this._stack.paused=!1),!f&&v===!1){for(;g>=0&&(v=this._active[g].unhook(y),v!==!0);g--)if(v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,v;g--}for(;g>=0;g--)if(v=this._active[g].unhook(!1),v instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,v}else this._handlerFb(this._ident,"UNHOOK",y);this._active=d,this._ident=0}};const p=new u.Params;p.addParam(0),o.DcsHandler=class{constructor(y){this._handler=y,this._data="",this._params=p,this._hitLimit=!1}hook(y){this._params=y.length>1||y.params[0]?y.clone():p,this._data="",this._hitLimit=!1}put(y,_,v){this._hitLimit||(this._data+=(0,c.utf32ToString)(y,_,v),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(y){let _=!1;if(this._hitLimit)_=!1;else if(y&&(_=this._handler(this._data,this._params),_ instanceof Promise))return _.then((v=>(this._params=p,this._data="",this._hitLimit=!1,v)));return this._params=p,this._data="",this._hitLimit=!1,_}}},2015:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const c=l(844),u=l(8742),h=l(6242),d=l(6351);class p{constructor(g){this.table=new Uint8Array(g)}setDefault(g,f){this.table.fill(g<<4|f)}add(g,f,m,b){this.table[f<<8|g]=m<<4|b}addMany(g,f,m,b){for(let C=0;C<g.length;C++)this.table[f<<8|g[C]]=m<<4|b}}o.TransitionTable=p;const y=160;o.VT500_TRANSITION_TABLE=(function(){const v=new p(4095),g=Array.apply(null,Array(256)).map(((k,w)=>w)),f=(k,w)=>g.slice(k,w),m=f(32,127),b=f(0,24);b.push(25),b.push.apply(b,f(28,32));const C=f(0,14);let S;for(S in v.setDefault(1,0),v.addMany(m,0,2,0),C)v.addMany([24,26,153,154],S,3,0),v.addMany(f(128,144),S,3,0),v.addMany(f(144,152),S,3,0),v.add(156,S,0,0),v.add(27,S,11,1),v.add(157,S,4,8),v.addMany([152,158,159],S,0,7),v.add(155,S,11,3),v.add(144,S,11,9);return v.addMany(b,0,3,0),v.addMany(b,1,3,1),v.add(127,1,0,1),v.addMany(b,8,0,8),v.addMany(b,3,3,3),v.add(127,3,0,3),v.addMany(b,4,3,4),v.add(127,4,0,4),v.addMany(b,6,3,6),v.addMany(b,5,3,5),v.add(127,5,0,5),v.addMany(b,2,3,2),v.add(127,2,0,2),v.add(93,1,4,8),v.addMany(m,8,5,8),v.add(127,8,5,8),v.addMany([156,27,24,26,7],8,6,0),v.addMany(f(28,32),8,0,8),v.addMany([88,94,95],1,0,7),v.addMany(m,7,0,7),v.addMany(b,7,0,7),v.add(156,7,0,0),v.add(127,7,0,7),v.add(91,1,11,3),v.addMany(f(64,127),3,7,0),v.addMany(f(48,60),3,8,4),v.addMany([60,61,62,63],3,9,4),v.addMany(f(48,60),4,8,4),v.addMany(f(64,127),4,7,0),v.addMany([60,61,62,63],4,0,6),v.addMany(f(32,64),6,0,6),v.add(127,6,0,6),v.addMany(f(64,127),6,0,0),v.addMany(f(32,48),3,9,5),v.addMany(f(32,48),5,9,5),v.addMany(f(48,64),5,0,6),v.addMany(f(64,127),5,7,0),v.addMany(f(32,48),4,9,5),v.addMany(f(32,48),1,9,2),v.addMany(f(32,48),2,9,2),v.addMany(f(48,127),2,10,0),v.addMany(f(48,80),1,10,0),v.addMany(f(81,88),1,10,0),v.addMany([89,90,92],1,10,0),v.addMany(f(96,127),1,10,0),v.add(80,1,11,9),v.addMany(b,9,0,9),v.add(127,9,0,9),v.addMany(f(28,32),9,0,9),v.addMany(f(32,48),9,9,12),v.addMany(f(48,60),9,8,10),v.addMany([60,61,62,63],9,9,10),v.addMany(b,11,0,11),v.addMany(f(32,128),11,0,11),v.addMany(f(28,32),11,0,11),v.addMany(b,10,0,10),v.add(127,10,0,10),v.addMany(f(28,32),10,0,10),v.addMany(f(48,60),10,8,10),v.addMany([60,61,62,63],10,0,11),v.addMany(f(32,48),10,9,12),v.addMany(b,12,0,12),v.add(127,12,0,12),v.addMany(f(28,32),12,0,12),v.addMany(f(32,48),12,9,12),v.addMany(f(48,64),12,0,11),v.addMany(f(64,127),12,12,13),v.addMany(f(64,127),10,12,13),v.addMany(f(64,127),9,12,13),v.addMany(b,13,13,13),v.addMany(m,13,13,13),v.add(127,13,0,13),v.addMany([27,156,24,26],13,14,0),v.add(y,0,2,0),v.add(y,8,5,8),v.add(y,6,0,6),v.add(y,11,0,11),v.add(y,13,13,13),v})();class _ extends c.Disposable{constructor(g=o.VT500_TRANSITION_TABLE){super(),this._transitions=g,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new u.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(f,m,b)=>{},this._executeHandlerFb=f=>{},this._csiHandlerFb=(f,m)=>{},this._escHandlerFb=f=>{},this._errorHandlerFb=f=>f,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,c.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new h.OscParser),this._dcsParser=this.register(new d.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(g,f=[64,126]){let m=0;if(g.prefix){if(g.prefix.length>1)throw new Error("only one byte as prefix supported");if(m=g.prefix.charCodeAt(0),m&&60>m||m>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(g.intermediates){if(g.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let C=0;C<g.intermediates.length;++C){const S=g.intermediates.charCodeAt(C);if(32>S||S>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");m<<=8,m|=S}}if(g.final.length!==1)throw new Error("final must be a single byte");const b=g.final.charCodeAt(0);if(f[0]>b||b>f[1])throw new Error(`final must be in range ${f[0]} .. ${f[1]}`);return m<<=8,m|=b,m}identToString(g){const f=[];for(;g;)f.push(String.fromCharCode(255&g)),g>>=8;return f.reverse().join("")}setPrintHandler(g){this._printHandler=g}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(g,f){const m=this._identifier(g,[48,126]);this._escHandlers[m]===void 0&&(this._escHandlers[m]=[]);const b=this._escHandlers[m];return b.push(f),{dispose:()=>{const C=b.indexOf(f);C!==-1&&b.splice(C,1)}}}clearEscHandler(g){this._escHandlers[this._identifier(g,[48,126])]&&delete this._escHandlers[this._identifier(g,[48,126])]}setEscHandlerFallback(g){this._escHandlerFb=g}setExecuteHandler(g,f){this._executeHandlers[g.charCodeAt(0)]=f}clearExecuteHandler(g){this._executeHandlers[g.charCodeAt(0)]&&delete this._executeHandlers[g.charCodeAt(0)]}setExecuteHandlerFallback(g){this._executeHandlerFb=g}registerCsiHandler(g,f){const m=this._identifier(g);this._csiHandlers[m]===void 0&&(this._csiHandlers[m]=[]);const b=this._csiHandlers[m];return b.push(f),{dispose:()=>{const C=b.indexOf(f);C!==-1&&b.splice(C,1)}}}clearCsiHandler(g){this._csiHandlers[this._identifier(g)]&&delete this._csiHandlers[this._identifier(g)]}setCsiHandlerFallback(g){this._csiHandlerFb=g}registerDcsHandler(g,f){return this._dcsParser.registerHandler(this._identifier(g),f)}clearDcsHandler(g){this._dcsParser.clearHandler(this._identifier(g))}setDcsHandlerFallback(g){this._dcsParser.setHandlerFallback(g)}registerOscHandler(g,f){return this._oscParser.registerHandler(g,f)}clearOscHandler(g){this._oscParser.clearHandler(g)}setOscHandlerFallback(g){this._oscParser.setHandlerFallback(g)}setErrorHandler(g){this._errorHandler=g}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(g,f,m,b,C){this._parseStack.state=g,this._parseStack.handlers=f,this._parseStack.handlerPos=m,this._parseStack.transition=b,this._parseStack.chunkPos=C}parse(g,f,m){let b,C=0,S=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(m===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const w=this._parseStack.handlers;let x=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(m===!1&&x>-1){for(;x>=0&&(b=w[x](this._params),b!==!0);x--)if(b instanceof Promise)return this._parseStack.handlerPos=x,b}this._parseStack.handlers=[];break;case 4:if(m===!1&&x>-1){for(;x>=0&&(b=w[x](),b!==!0);x--)if(b instanceof Promise)return this._parseStack.handlerPos=x,b}this._parseStack.handlers=[];break;case 6:if(C=g[this._parseStack.chunkPos],b=this._dcsParser.unhook(C!==24&&C!==26,m),b)return b;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(C=g[this._parseStack.chunkPos],b=this._oscParser.end(C!==24&&C!==26,m),b)return b;C===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let w=k;w<f;++w){switch(C=g[w],S=this._transitions.table[this.currentState<<8|(C<160?C:y)],S>>4){case 2:for(let E=w+1;;++E){if(E>=f||(C=g[E])<32||C>126&&C<y){this._printHandler(g,w,E),w=E-1;break}if(++E>=f||(C=g[E])<32||C>126&&C<y){this._printHandler(g,w,E),w=E-1;break}if(++E>=f||(C=g[E])<32||C>126&&C<y){this._printHandler(g,w,E),w=E-1;break}if(++E>=f||(C=g[E])<32||C>126&&C<y){this._printHandler(g,w,E),w=E-1;break}}break;case 3:this._executeHandlers[C]?this._executeHandlers[C]():this._executeHandlerFb(C),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:C,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const x=this._csiHandlers[this._collect<<8|C];let A=x?x.length-1:-1;for(;A>=0&&(b=x[A](this._params),b!==!0);A--)if(b instanceof Promise)return this._preserveStack(3,x,A,S,w),b;A<0&&this._csiHandlerFb(this._collect<<8|C,this._params),this.precedingJoinState=0;break;case 8:do switch(C){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(C-48)}while(++w<f&&(C=g[w])>47&&C<60);w--;break;case 9:this._collect<<=8,this._collect|=C;break;case 10:const D=this._escHandlers[this._collect<<8|C];let T=D?D.length-1:-1;for(;T>=0&&(b=D[T](),b!==!0);T--)if(b instanceof Promise)return this._preserveStack(4,D,T,S,w),b;T<0&&this._escHandlerFb(this._collect<<8|C),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|C,this._params);break;case 13:for(let E=w+1;;++E)if(E>=f||(C=g[E])===24||C===26||C===27||C>127&&C<y){this._dcsParser.put(g,w,E),w=E-1;break}break;case 14:if(b=this._dcsParser.unhook(C!==24&&C!==26),b)return this._preserveStack(6,[],0,S,w),b;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let E=w+1;;E++)if(E>=f||(C=g[E])<32||C>127&&C<y){this._oscParser.put(g,w,E),w=E-1;break}break;case 6:if(b=this._oscParser.end(C!==24&&C!==26),b)return this._preserveStack(5,[],0,S,w),b;C===27&&(S|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&S}}}o.EscapeSequenceParser=_},6242:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const c=l(5770),u=l(482),h=[];o.OscParser=class{constructor(){this._state=0,this._active=h,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(d,p){this._handlers[d]===void 0&&(this._handlers[d]=[]);const y=this._handlers[d];return y.push(p),{dispose:()=>{const _=y.indexOf(p);_!==-1&&y.splice(_,1)}}}clearHandler(d){this._handlers[d]&&delete this._handlers[d]}setHandlerFallback(d){this._handlerFb=d}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=h}reset(){if(this._state===2)for(let d=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;d>=0;--d)this._active[d].end(!1);this._stack.paused=!1,this._active=h,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||h,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].start();else this._handlerFb(this._id,"START")}_put(d,p,y){if(this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].put(d,p,y);else this._handlerFb(this._id,"PUT",(0,u.utf32ToString)(d,p,y))}start(){this.reset(),this._state=1}put(d,p,y){if(this._state!==3){if(this._state===1)for(;p<y;){const _=d[p++];if(_===59){this._state=2,this._start();break}if(_<48||57<_)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+_-48}this._state===2&&y-p>0&&this._put(d,p,y)}}end(d,p=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let y=!1,_=this._active.length-1,v=!1;if(this._stack.paused&&(_=this._stack.loopPosition-1,y=p,v=this._stack.fallThrough,this._stack.paused=!1),!v&&y===!1){for(;_>=0&&(y=this._active[_].end(d),y!==!0);_--)if(y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!1,y;_--}for(;_>=0;_--)if(y=this._active[_].end(!1),y instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=_,this._stack.fallThrough=!0,y}else this._handlerFb(this._id,"END",d);this._active=h,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(d){this._handler=d,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(d,p,y){this._hitLimit||(this._data+=(0,u.utf32ToString)(d,p,y),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(d){let p=!1;if(this._hitLimit)p=!1;else if(d&&(p=this._handler(this._data),p instanceof Promise))return p.then((y=>(this._data="",this._hitLimit=!1,y)));return this._data="",this._hitLimit=!1,p}}},8742:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const l=2147483647;class c{static fromArray(h){const d=new c;if(!h.length)return d;for(let p=Array.isArray(h[0])?1:0;p<h.length;++p){const y=h[p];if(Array.isArray(y))for(let _=0;_<y.length;++_)d.addSubParam(y[_]);else d.addParam(y)}return d}constructor(h=32,d=32){if(this.maxLength=h,this.maxSubParamsLength=d,d>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(d),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const h=new c(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h}toArray(){const h=[];for(let d=0;d<this.length;++d){h.push(this.params[d]);const p=this._subParamsIdx[d]>>8,y=255&this._subParamsIdx[d];y-p>0&&h.push(Array.prototype.slice.call(this._subParams,p,y))}return h}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>l?l:h}}addSubParam(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>l?l:h,this._subParamsIdx[this.length-1]++}}hasSubParams(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0}getSubParams(h){const d=this._subParamsIdx[h]>>8,p=255&this._subParamsIdx[h];return p-d>0?this._subParams.subarray(d,p):null}getSubParamsAll(){const h={};for(let d=0;d<this.length;++d){const p=this._subParamsIdx[d]>>8,y=255&this._subParamsIdx[d];y-p>0&&(h[d]=this._subParams.slice(p,y))}return h}addDigit(h){let d;if(this._rejectDigits||!(d=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const p=this._digitIsSub?this._subParams:this.params,y=p[d-1];p[d-1]=~y?Math.min(10*y+h,l):h}}o.Params=c},5741:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,c){const u={instance:c,dispose:c.dispose,isDisposed:!1};this._addons.push(u),c.dispose=()=>this._wrappedAddonDispose(u),c.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let c=-1;for(let u=0;u<this._addons.length;u++)if(this._addons[u]===l){c=u;break}if(c===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(c,1)}}},8771:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const c=l(3785),u=l(511);o.BufferApiView=class{constructor(h,d){this._buffer=h,this.type=d}init(h){return this._buffer=h,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(h){const d=this._buffer.lines.get(h);if(d)return new c.BufferLineApiView(d)}getNullCell(){return new u.CellData}}},3785:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const c=l(511);o.BufferLineApiView=class{constructor(u){this._line=u}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(u,h){if(!(u<0||u>=this._line.length))return h?(this._line.loadCell(u,h),h):this._line.loadCell(u,new c.CellData)}translateToString(u,h,d){return this._line.translateToString(u,h,d)}}},8285:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const c=l(8771),u=l(8460),h=l(844);class d extends h.Disposable{constructor(y){super(),this._core=y,this._onBufferChange=this.register(new u.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new c.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new c.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=d},7975:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,c){return this._core.registerCsiHandler(l,(u=>c(u.toArray())))}addCsiHandler(l,c){return this.registerCsiHandler(l,c)}registerDcsHandler(l,c){return this._core.registerDcsHandler(l,((u,h)=>c(u,h.toArray())))}addDcsHandler(l,c){return this.registerDcsHandler(l,c)}registerEscHandler(l,c){return this._core.registerEscHandler(l,c)}addEscHandler(l,c){return this.registerEscHandler(l,c)}registerOscHandler(l,c){return this._core.registerOscHandler(l,c)}addOscHandler(l,c){return this.registerOscHandler(l,c)}}},7090:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(a,o,l){var c=this&&this.__decorate||function(v,g,f,m){var b,C=arguments.length,S=C<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,f):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(v,g,f,m);else for(var k=v.length-1;k>=0;k--)(b=v[k])&&(S=(C<3?b(S):C>3?b(g,f,S):b(g,f))||S);return C>3&&S&&Object.defineProperty(g,f,S),S},u=this&&this.__param||function(v,g){return function(f,m){g(f,m,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const h=l(8460),d=l(844),p=l(5295),y=l(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let _=o.BufferService=class extends d.Disposable{get buffer(){return this.buffers.active}constructor(v){super(),this.isUserScrolling=!1,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new h.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(v.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(v.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new p.BufferSet(v,this))}resize(v,g){this.cols=v,this.rows=g,this.buffers.resize(v,g),this._onResize.fire({cols:v,rows:g})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(v,g=!1){const f=this.buffer;let m;m=this._cachedBlankLine,m&&m.length===this.cols&&m.getFg(0)===v.fg&&m.getBg(0)===v.bg||(m=f.getBlankLine(v,g),this._cachedBlankLine=m),m.isWrapped=g;const b=f.ybase+f.scrollTop,C=f.ybase+f.scrollBottom;if(f.scrollTop===0){const S=f.lines.isFull;C===f.lines.length-1?S?f.lines.recycle().copyFrom(m):f.lines.push(m.clone()):f.lines.splice(C+1,0,m.clone()),S?this.isUserScrolling&&(f.ydisp=Math.max(f.ydisp-1,0)):(f.ybase++,this.isUserScrolling||f.ydisp++)}else{const S=C-b+1;f.lines.shiftElements(b+1,S-1,-1),f.lines.set(C,m.clone())}this.isUserScrolling||(f.ydisp=f.ybase),this._onScroll.fire(f.ydisp)}scrollLines(v,g,f){const m=this.buffer;if(v<0){if(m.ydisp===0)return;this.isUserScrolling=!0}else v+m.ydisp>=m.ybase&&(this.isUserScrolling=!1);const b=m.ydisp;m.ydisp=Math.max(Math.min(m.ydisp+v,m.ybase),0),b!==m.ydisp&&(g||this._onScroll.fire(m.ydisp))}};o.BufferService=_=c([u(0,y.IOptionsService)],_)},7994:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,c){this._charsets[l]=c,this.glevel===l&&(this.charset=c)}}},1753:function(a,o,l){var c=this&&this.__decorate||function(m,b,C,S){var k,w=arguments.length,x=w<3?b:S===null?S=Object.getOwnPropertyDescriptor(b,C):S;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(m,b,C,S);else for(var A=m.length-1;A>=0;A--)(k=m[A])&&(x=(w<3?k(x):w>3?k(b,C,x):k(b,C))||x);return w>3&&x&&Object.defineProperty(b,C,x),x},u=this&&this.__param||function(m,b){return function(C,S){b(C,S,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const h=l(2585),d=l(8460),p=l(844),y={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:m=>m.button!==4&&m.action===1&&(m.ctrl=!1,m.alt=!1,m.shift=!1,!0)},VT200:{events:19,restrict:m=>m.action!==32},DRAG:{events:23,restrict:m=>m.action!==32||m.button!==3},ANY:{events:31,restrict:m=>!0}};function _(m,b){let C=(m.ctrl?16:0)|(m.shift?4:0)|(m.alt?8:0);return m.button===4?(C|=64,C|=m.action):(C|=3&m.button,4&m.button&&(C|=64),8&m.button&&(C|=128),m.action===32?C|=32:m.action!==0||b||(C|=3)),C}const v=String.fromCharCode,g={DEFAULT:m=>{const b=[_(m,!1)+32,m.col+32,m.row+32];return b[0]>255||b[1]>255||b[2]>255?"":`\x1B[M${v(b[0])}${v(b[1])}${v(b[2])}`},SGR:m=>{const b=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${_(m,!0)};${m.col};${m.row}${b}`},SGR_PIXELS:m=>{const b=m.action===0&&m.button!==4?"m":"M";return`\x1B[<${_(m,!0)};${m.x};${m.y}${b}`}};let f=o.CoreMouseService=class extends p.Disposable{constructor(m,b){super(),this._bufferService=m,this._coreService=b,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new d.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const C of Object.keys(y))this.addProtocol(C,y[C]);for(const C of Object.keys(g))this.addEncoding(C,g[C]);this.reset()}addProtocol(m,b){this._protocols[m]=b}addEncoding(m,b){this._encodings[m]=b}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(m){if(!this._protocols[m])throw new Error(`unknown protocol "${m}"`);this._activeProtocol=m,this._onProtocolChange.fire(this._protocols[m].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(m){if(!this._encodings[m])throw new Error(`unknown encoding "${m}"`);this._activeEncoding=m}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(m){if(m.col<0||m.col>=this._bufferService.cols||m.row<0||m.row>=this._bufferService.rows||m.button===4&&m.action===32||m.button===3&&m.action!==32||m.button!==4&&(m.action===2||m.action===3)||(m.col++,m.row++,m.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,m,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(m))return!1;const b=this._encodings[this._activeEncoding](m);return b&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(b):this._coreService.triggerDataEvent(b,!0)),this._lastEvent=m,!0}explainEvents(m){return{down:!!(1&m),up:!!(2&m),drag:!!(4&m),move:!!(8&m),wheel:!!(16&m)}}_equalEvents(m,b,C){if(C){if(m.x!==b.x||m.y!==b.y)return!1}else if(m.col!==b.col||m.row!==b.row)return!1;return m.button===b.button&&m.action===b.action&&m.ctrl===b.ctrl&&m.alt===b.alt&&m.shift===b.shift}};o.CoreMouseService=f=c([u(0,h.IBufferService),u(1,h.ICoreService)],f)},6975:function(a,o,l){var c=this&&this.__decorate||function(f,m,b,C){var S,k=arguments.length,w=k<3?m:C===null?C=Object.getOwnPropertyDescriptor(m,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(f,m,b,C);else for(var x=f.length-1;x>=0;x--)(S=f[x])&&(w=(k<3?S(w):k>3?S(m,b,w):S(m,b))||w);return k>3&&w&&Object.defineProperty(m,b,w),w},u=this&&this.__param||function(f,m){return function(b,C){m(b,C,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const h=l(1439),d=l(8460),p=l(844),y=l(2585),_=Object.freeze({insertMode:!1}),v=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let g=o.CoreService=class extends p.Disposable{constructor(f,m,b){super(),this._bufferService=f,this._logService=m,this._optionsService=b,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new d.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new d.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,h.clone)(_),this.decPrivateModes=(0,h.clone)(v)}reset(){this.modes=(0,h.clone)(_),this.decPrivateModes=(0,h.clone)(v)}triggerDataEvent(f,m=!1){if(this._optionsService.rawOptions.disableStdin)return;const b=this._bufferService.buffer;m&&this._optionsService.rawOptions.scrollOnUserInput&&b.ybase!==b.ydisp&&this._onRequestScrollToBottom.fire(),m&&this._onUserInput.fire(),this._logService.debug(`sending data "${f}"`,(()=>f.split("").map((C=>C.charCodeAt(0))))),this._onData.fire(f)}triggerBinaryEvent(f){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${f}"`,(()=>f.split("").map((m=>m.charCodeAt(0))))),this._onBinary.fire(f))}};o.CoreService=g=c([u(0,y.IBufferService),u(1,y.ILogService),u(2,y.IOptionsService)],g)},9074:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const c=l(8055),u=l(8460),h=l(844),d=l(6106);let p=0,y=0;class _ extends h.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new d.SortedList((f=>f==null?void 0:f.marker.line)),this._onDecorationRegistered=this.register(new u.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new u.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,h.toDisposable)((()=>this.reset())))}registerDecoration(f){if(f.marker.isDisposed)return;const m=new v(f);if(m){const b=m.marker.onDispose((()=>m.dispose()));m.onDispose((()=>{m&&(this._decorations.delete(m)&&this._onDecorationRemoved.fire(m),b.dispose())})),this._decorations.insert(m),this._onDecorationRegistered.fire(m)}return m}reset(){for(const f of this._decorations.values())f.dispose();this._decorations.clear()}*getDecorationsAtCell(f,m,b){let C=0,S=0;for(const k of this._decorations.getKeyIterator(m))C=k.options.x??0,S=C+(k.options.width??1),f>=C&&f<S&&(!b||(k.options.layer??"bottom")===b)&&(yield k)}forEachDecorationAtCell(f,m,b,C){this._decorations.forEachByKey(m,(S=>{p=S.options.x??0,y=p+(S.options.width??1),f>=p&&f<y&&(!b||(S.options.layer??"bottom")===b)&&C(S)}))}}o.DecorationService=_;class v extends h.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=c.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=c.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(f){super(),this.options=f,this.onRenderEmitter=this.register(new u.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=f.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const c=l(2585),u=l(8343);class h{constructor(...p){this._entries=new Map;for(const[y,_]of p)this.set(y,_)}set(p,y){const _=this._entries.get(p);return this._entries.set(p,y),_}forEach(p){for(const[y,_]of this._entries.entries())p(y,_)}has(p){return this._entries.has(p)}get(p){return this._entries.get(p)}}o.ServiceCollection=h,o.InstantiationService=class{constructor(){this._services=new h,this._services.set(c.IInstantiationService,this)}setService(d,p){this._services.set(d,p)}getService(d){return this._services.get(d)}createInstance(d,...p){const y=(0,u.getServiceDependencies)(d).sort(((g,f)=>g.index-f.index)),_=[];for(const g of y){const f=this._services.get(g.id);if(!f)throw new Error(`[createInstance] ${d.name} depends on UNKNOWN service ${g.id}.`);_.push(f)}const v=y.length>0?y[0].index:p.length;if(p.length!==v)throw new Error(`[createInstance] First service dependency of ${d.name} at position ${v+1} conflicts with ${p.length} static arguments`);return new d(...p,..._)}}},7866:function(a,o,l){var c=this&&this.__decorate||function(v,g,f,m){var b,C=arguments.length,S=C<3?g:m===null?m=Object.getOwnPropertyDescriptor(g,f):m;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(v,g,f,m);else for(var k=v.length-1;k>=0;k--)(b=v[k])&&(S=(C<3?b(S):C>3?b(g,f,S):b(g,f))||S);return C>3&&S&&Object.defineProperty(g,f,S),S},u=this&&this.__param||function(v,g){return function(f,m){g(f,m,v)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const h=l(844),d=l(2585),p={trace:d.LogLevelEnum.TRACE,debug:d.LogLevelEnum.DEBUG,info:d.LogLevelEnum.INFO,warn:d.LogLevelEnum.WARN,error:d.LogLevelEnum.ERROR,off:d.LogLevelEnum.OFF};let y,_=o.LogService=class extends h.Disposable{get logLevel(){return this._logLevel}constructor(v){super(),this._optionsService=v,this._logLevel=d.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),y=this}_updateLogLevel(){this._logLevel=p[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(v){for(let g=0;g<v.length;g++)typeof v[g]=="function"&&(v[g]=v[g]())}_log(v,g,f){this._evalLazyOptionalParams(f),v.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+g,...f)}trace(v,...g){var f;this._logLevel<=d.LogLevelEnum.TRACE&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.trace.bind(this._optionsService.options.logger))??console.log,v,g)}debug(v,...g){var f;this._logLevel<=d.LogLevelEnum.DEBUG&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.debug.bind(this._optionsService.options.logger))??console.log,v,g)}info(v,...g){var f;this._logLevel<=d.LogLevelEnum.INFO&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.info.bind(this._optionsService.options.logger))??console.info,v,g)}warn(v,...g){var f;this._logLevel<=d.LogLevelEnum.WARN&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.warn.bind(this._optionsService.options.logger))??console.warn,v,g)}error(v,...g){var f;this._logLevel<=d.LogLevelEnum.ERROR&&this._log(((f=this._optionsService.options.logger)==null?void 0:f.error.bind(this._optionsService.options.logger))??console.error,v,g)}};o.LogService=_=c([u(0,d.IOptionsService)],_),o.setTraceLogger=function(v){y=v},o.traceCall=function(v,g,f){if(typeof f.value!="function")throw new Error("not supported");const m=f.value;f.value=function(...b){if(y.logLevel!==d.LogLevelEnum.TRACE)return m.apply(this,b);y.trace(`GlyphRenderer#${m.name}(${b.map((S=>JSON.stringify(S))).join(", ")})`);const C=m.apply(this,b);return y.trace(`GlyphRenderer#${m.name} return`,C),C}}},7302:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const c=l(8460),u=l(844),h=l(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:h.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const d=["normal","bold","100","200","300","400","500","600","700","800","900"];class p extends u.Disposable{constructor(_){super(),this._onOptionChange=this.register(new c.EventEmitter),this.onOptionChange=this._onOptionChange.event;const v={...o.DEFAULT_OPTIONS};for(const g in _)if(g in v)try{const f=_[g];v[g]=this._sanitizeAndValidateOption(g,f)}catch(f){console.error(f)}this.rawOptions=v,this.options={...v},this._setupOptions(),this.register((0,u.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(_,v){return this.onOptionChange((g=>{g===_&&v(this.rawOptions[_])}))}onMultipleOptionChange(_,v){return this.onOptionChange((g=>{_.indexOf(g)!==-1&&v()}))}_setupOptions(){const _=g=>{if(!(g in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${g}"`);return this.rawOptions[g]},v=(g,f)=>{if(!(g in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${g}"`);f=this._sanitizeAndValidateOption(g,f),this.rawOptions[g]!==f&&(this.rawOptions[g]=f,this._onOptionChange.fire(g))};for(const g in this.rawOptions){const f={get:_.bind(this,g),set:v.bind(this,g)};Object.defineProperty(this.options,g,f)}}_sanitizeAndValidateOption(_,v){switch(_){case"cursorStyle":if(v||(v=o.DEFAULT_OPTIONS[_]),!(function(g){return g==="block"||g==="underline"||g==="bar"})(v))throw new Error(`"${v}" is not a valid value for ${_}`);break;case"wordSeparator":v||(v=o.DEFAULT_OPTIONS[_]);break;case"fontWeight":case"fontWeightBold":if(typeof v=="number"&&1<=v&&v<=1e3)break;v=d.includes(v)?v:o.DEFAULT_OPTIONS[_];break;case"cursorWidth":v=Math.floor(v);case"lineHeight":case"tabStopWidth":if(v<1)throw new Error(`${_} cannot be less than 1, value: ${v}`);break;case"minimumContrastRatio":v=Math.max(1,Math.min(21,Math.round(10*v)/10));break;case"scrollback":if((v=Math.min(v,4294967295))<0)throw new Error(`${_} cannot be less than 0, value: ${v}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(v<=0)throw new Error(`${_} cannot be less than or equal to 0, value: ${v}`);break;case"rows":case"cols":if(!v&&v!==0)throw new Error(`${_} must be numeric, value: ${v}`);break;case"windowsPty":v=v??{}}return v}}o.OptionsService=p},2660:function(a,o,l){var c=this&&this.__decorate||function(p,y,_,v){var g,f=arguments.length,m=f<3?y:v===null?v=Object.getOwnPropertyDescriptor(y,_):v;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")m=Reflect.decorate(p,y,_,v);else for(var b=p.length-1;b>=0;b--)(g=p[b])&&(m=(f<3?g(m):f>3?g(y,_,m):g(y,_))||m);return f>3&&m&&Object.defineProperty(y,_,m),m},u=this&&this.__param||function(p,y){return function(_,v){y(_,v,p)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const h=l(2585);let d=o.OscLinkService=class{constructor(p){this._bufferService=p,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(p){const y=this._bufferService.buffer;if(p.id===void 0){const b=y.addMarker(y.ybase+y.y),C={data:p,id:this._nextId++,lines:[b]};return b.onDispose((()=>this._removeMarkerFromLink(C,b))),this._dataByLinkId.set(C.id,C),C.id}const _=p,v=this._getEntryIdKey(_),g=this._entriesWithId.get(v);if(g)return this.addLineToLink(g.id,y.ybase+y.y),g.id;const f=y.addMarker(y.ybase+y.y),m={id:this._nextId++,key:this._getEntryIdKey(_),data:_,lines:[f]};return f.onDispose((()=>this._removeMarkerFromLink(m,f))),this._entriesWithId.set(m.key,m),this._dataByLinkId.set(m.id,m),m.id}addLineToLink(p,y){const _=this._dataByLinkId.get(p);if(_&&_.lines.every((v=>v.line!==y))){const v=this._bufferService.buffer.addMarker(y);_.lines.push(v),v.onDispose((()=>this._removeMarkerFromLink(_,v)))}}getLinkData(p){var y;return(y=this._dataByLinkId.get(p))==null?void 0:y.data}_getEntryIdKey(p){return`${p.id};;${p.uri}`}_removeMarkerFromLink(p,y){const _=p.lines.indexOf(y);_!==-1&&(p.lines.splice(_,1),p.lines.length===0&&(p.data.id!==void 0&&this._entriesWithId.delete(p.key),this._dataByLinkId.delete(p.id)))}};o.OscLinkService=d=c([u(0,h.IBufferService)],d)},8343:(a,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const l="di$target",c="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(u){return u[c]||[]},o.createDecorator=function(u){if(o.serviceRegistry.has(u))return o.serviceRegistry.get(u);const h=function(d,p,y){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(_,v,g){v[l]===v?v[c].push({id:_,index:g}):(v[c]=[{id:_,index:g}],v[l]=v)})(h,d,y)};return h.toString=()=>u,o.serviceRegistry.set(u,h),h}},2585:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const c=l(8343);var u;o.IBufferService=(0,c.createDecorator)("BufferService"),o.ICoreMouseService=(0,c.createDecorator)("CoreMouseService"),o.ICoreService=(0,c.createDecorator)("CoreService"),o.ICharsetService=(0,c.createDecorator)("CharsetService"),o.IInstantiationService=(0,c.createDecorator)("InstantiationService"),(function(h){h[h.TRACE=0]="TRACE",h[h.DEBUG=1]="DEBUG",h[h.INFO=2]="INFO",h[h.WARN=3]="WARN",h[h.ERROR=4]="ERROR",h[h.OFF=5]="OFF"})(u||(o.LogLevelEnum=u={})),o.ILogService=(0,c.createDecorator)("LogService"),o.IOptionsService=(0,c.createDecorator)("OptionsService"),o.IOscLinkService=(0,c.createDecorator)("OscLinkService"),o.IUnicodeService=(0,c.createDecorator)("UnicodeService"),o.IDecorationService=(0,c.createDecorator)("DecorationService")},1480:(a,o,l)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const c=l(8460),u=l(225);class h{static extractShouldJoin(p){return(1&p)!=0}static extractWidth(p){return p>>1&3}static extractCharKind(p){return p>>3}static createPropertyValue(p,y,_=!1){return(16777215&p)<<3|(3&y)<<1|(_?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new c.EventEmitter,this.onChange=this._onChange.event;const p=new u.UnicodeV6;this.register(p),this._active=p.version,this._activeProvider=p}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(p){if(!this._providers[p])throw new Error(`unknown Unicode version "${p}"`);this._active=p,this._activeProvider=this._providers[p],this._onChange.fire(p)}register(p){this._providers[p.version]=p}wcwidth(p){return this._activeProvider.wcwidth(p)}getStringCellWidth(p){let y=0,_=0;const v=p.length;for(let g=0;g<v;++g){let f=p.charCodeAt(g);if(55296<=f&&f<=56319){if(++g>=v)return y+this.wcwidth(f);const C=p.charCodeAt(g);56320<=C&&C<=57343?f=1024*(f-55296)+C-56320+65536:y+=this.wcwidth(C)}const m=this.charProperties(f,_);let b=h.extractWidth(m);h.extractShouldJoin(m)&&(b-=h.extractWidth(_)),y+=b,_=m}return y}charProperties(p,y){return this._activeProvider.charProperties(p,y)}}o.UnicodeService=h}},i={};function n(a){var o=i[a];if(o!==void 0)return o.exports;var l=i[a]={exports:{}};return r[a].call(l.exports,l,l.exports,n),l.exports}var s={};return(()=>{var a=s;Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const o=n(9042),l=n(3236),c=n(844),u=n(5741),h=n(8285),d=n(7975),p=n(7090),y=["cols","rows"];class _ extends c.Disposable{constructor(g){super(),this._core=this.register(new l.Terminal(g)),this._addonManager=this.register(new u.AddonManager),this._publicOptions={...this._core.options};const f=b=>this._core.options[b],m=(b,C)=>{this._checkReadonlyOptions(b),this._core.options[b]=C};for(const b in this._core.options){const C={get:f.bind(this,b),set:m.bind(this,b)};Object.defineProperty(this._publicOptions,b,C)}}_checkReadonlyOptions(g){if(y.includes(g))throw new Error(`Option "${g}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new d.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new p.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new h.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const g=this._core.coreService.decPrivateModes;let f="none";switch(this._core.coreMouseService.activeProtocol){case"X10":f="x10";break;case"VT200":f="vt200";break;case"DRAG":f="drag";break;case"ANY":f="any"}return{applicationCursorKeysMode:g.applicationCursorKeys,applicationKeypadMode:g.applicationKeypad,bracketedPasteMode:g.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:f,originMode:g.origin,reverseWraparoundMode:g.reverseWraparound,sendFocusMode:g.sendFocus,wraparoundMode:g.wraparound}}get options(){return this._publicOptions}set options(g){for(const f in g)this._publicOptions[f]=g[f]}blur(){this._core.blur()}focus(){this._core.focus()}input(g,f=!0){this._core.input(g,f)}resize(g,f){this._verifyIntegers(g,f),this._core.resize(g,f)}open(g){this._core.open(g)}attachCustomKeyEventHandler(g){this._core.attachCustomKeyEventHandler(g)}attachCustomWheelEventHandler(g){this._core.attachCustomWheelEventHandler(g)}registerLinkProvider(g){return this._core.registerLinkProvider(g)}registerCharacterJoiner(g){return this._checkProposedApi(),this._core.registerCharacterJoiner(g)}deregisterCharacterJoiner(g){this._checkProposedApi(),this._core.deregisterCharacterJoiner(g)}registerMarker(g=0){return this._verifyIntegers(g),this._core.registerMarker(g)}registerDecoration(g){return this._checkProposedApi(),this._verifyPositiveIntegers(g.x??0,g.width??0,g.height??0),this._core.registerDecoration(g)}hasSelection(){return this._core.hasSelection()}select(g,f,m){this._verifyIntegers(g,f,m),this._core.select(g,f,m)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(g,f){this._verifyIntegers(g,f),this._core.selectLines(g,f)}dispose(){super.dispose()}scrollLines(g){this._verifyIntegers(g),this._core.scrollLines(g)}scrollPages(g){this._verifyIntegers(g),this._core.scrollPages(g)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(g){this._verifyIntegers(g),this._core.scrollToLine(g)}clear(){this._core.clear()}write(g,f){this._core.write(g,f)}writeln(g,f){this._core.write(g),this._core.write(`\r
`,f)}paste(g){this._core.paste(g)}refresh(g,f){this._verifyIntegers(g,f),this._core.refresh(g,f)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(g){this._addonManager.loadAddon(this,g)}static get strings(){return o}_verifyIntegers(...g){for(const f of g)if(f===1/0||isNaN(f)||f%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...g){for(const f of g)if(f&&(f===1/0||isNaN(f)||f%1!=0||f<0))throw new Error("This API only accepts positive integers")}}a.Terminal=_})(),s})()))})(Yf)),Yf.exports}var TV=xV(),Xf={exports:{}},Pb;function EV(){return Pb||(Pb=1,(function(e,t){(function(r,i){e.exports=i()})(self,(()=>(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){const n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;const s=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(s._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const n=this._terminal._core,s=n._renderService.dimensions;if(s.css.cell.width===0||s.css.cell.height===0)return;const a=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(o.getPropertyValue("height")),c=Math.max(0,parseInt(o.getPropertyValue("width"))),u=window.getComputedStyle(this._terminal.element),h=l-(parseInt(u.getPropertyValue("padding-top"))+parseInt(u.getPropertyValue("padding-bottom"))),d=c-(parseInt(u.getPropertyValue("padding-right"))+parseInt(u.getPropertyValue("padding-left")))-a;return{cols:Math.max(2,Math.floor(d/s.css.cell.width)),rows:Math.max(1,Math.floor(h/s.css.cell.height))}}}})(),r})()))})(Xf)),Xf.exports}var AV=EV(),Zf={exports:{}},Ib;function BV(){return Ib||(Ib=1,(function(e,t){(function(r,i){e.exports=i()})(self,(()=>(()=>{var r={6:(a,o)=>{function l(u){try{const h=new URL(u),d=h.password&&h.username?`${h.protocol}//${h.username}:${h.password}@${h.host}`:h.username?`${h.protocol}//${h.username}@${h.host}`:`${h.protocol}//${h.host}`;return u.toLocaleLowerCase().startsWith(d.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(o,"__esModule",{value:!0}),o.LinkComputer=o.WebLinkProvider=void 0,o.WebLinkProvider=class{constructor(u,h,d,p={}){this._terminal=u,this._regex=h,this._handler=d,this._options=p}provideLinks(u,h){const d=c.computeLink(u,this._regex,this._terminal,this._handler);h(this._addCallbacks(d))}_addCallbacks(u){return u.map((h=>(h.leave=this._options.leave,h.hover=(d,p)=>{if(this._options.hover){const{range:y}=h;this._options.hover(d,p,y)}},h)))}};class c{static computeLink(h,d,p,y){const _=new RegExp(d.source,(d.flags||"")+"g"),[v,g]=c._getWindowedLineStrings(h-1,p),f=v.join("");let m;const b=[];for(;m=_.exec(f);){const C=m[0];if(!l(C))continue;const[S,k]=c._mapStrIdx(p,g,0,m.index),[w,x]=c._mapStrIdx(p,S,k,C.length);if(S===-1||k===-1||w===-1||x===-1)continue;const A={start:{x:k+1,y:S+1},end:{x,y:w+1}};b.push({range:A,text:C,activate:y})}return b}static _getWindowedLineStrings(h,d){let p,y=h,_=h,v=0,g="";const f=[];if(p=d.buffer.active.getLine(h)){const m=p.translateToString(!0);if(p.isWrapped&&m[0]!==" "){for(v=0;(p=d.buffer.active.getLine(--y))&&v<2048&&(g=p.translateToString(!0),v+=g.length,f.push(g),p.isWrapped&&g.indexOf(" ")===-1););f.reverse()}for(f.push(m),v=0;(p=d.buffer.active.getLine(++_))&&p.isWrapped&&v<2048&&(g=p.translateToString(!0),v+=g.length,f.push(g),g.indexOf(" ")===-1););}return[f,y]}static _mapStrIdx(h,d,p,y){const _=h.buffer.active,v=_.getNullCell();let g=p;for(;y;){const f=_.getLine(d);if(!f)return[-1,-1];for(let m=g;m<f.length;++m){f.getCell(m,v);const b=v.getChars();if(v.getWidth()&&(y-=b.length||1,m===f.length-1&&b==="")){const C=_.getLine(d+1);C&&C.isWrapped&&(C.getCell(0,v),v.getWidth()===2&&(y+=1))}if(y<0)return[d,m]}d++,g=0}return[d,g]}}o.LinkComputer=c}},i={};function n(a){var o=i[a];if(o!==void 0)return o.exports;var l=i[a]={exports:{}};return r[a](l,l.exports,n),l.exports}var s={};return(()=>{var a=s;Object.defineProperty(a,"__esModule",{value:!0}),a.WebLinksAddon=void 0;const o=n(6),l=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function c(u,h){const d=window.open();if(d){try{d.opener=null}catch{}d.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}a.WebLinksAddon=class{constructor(u=c,h={}){this._handler=u,this._options=h}activate(u){this._terminal=u;const h=this._options,d=h.urlRegex||l;this._linkProvider=this._terminal.registerLinkProvider(new o.WebLinkProvider(this._terminal,d,this._handler,h))}dispose(){var u;(u=this._linkProvider)==null||u.dispose()}}})(),s})()))})(Zf)),Zf.exports}var DV=BV();const LV={name:"XTerminal",data(){return{terminal:null,fitAddon:null,socket:null,connecting:!1,error:""}},mounted(){this.initTerminal(),window.addEventListener("resize",this.handleResize)},beforeUnmount(){this.cleanup(),window.removeEventListener("resize",this.handleResize)},methods:{initTerminal(){const e=window.getComputedStyle(document.documentElement),t=e.getPropertyValue("--bg-darkest").trim(),r=e.getPropertyValue("--text-primary").trim(),i=e.getPropertyValue("--accent-1").trim(),n=e.getPropertyValue("--accent-2").trim(),s=e.getPropertyValue("--text-muted").trim(),a=e.getPropertyValue("--danger").trim(),o=e.getPropertyValue("--success").trim(),l=e.getPropertyValue("--warning").trim();this.terminal=new TV.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'"JetBrains Mono", "Courier New", monospace',theme:{background:t,foreground:r,cursor:i,cursorAccent:t,selection:i,selectionInactiveBackground:n,black:t,red:a,green:o,yellow:l,blue:n,magenta:i,cyan:n,white:r,brightBlack:s,brightRed:a,brightGreen:o,brightYellow:l,brightBlue:n,brightMagenta:i,brightCyan:n,brightWhite:r},scrollback:1e4,allowProposedApi:!0}),this.fitAddon=new AV.FitAddon,this.terminal.loadAddon(this.fitAddon),this.terminal.loadAddon(new DV.WebLinksAddon),this.terminal.open(this.$refs.terminalRef),this.fitAddon.fit(),this.connectWebSocket()},connectWebSocket(){this.connecting=!0,this.error="";const e=window.location.protocol==="https:"?"wss:":"ws:",t=window.location.host,r=`${e}//${t}/api/terminal`;this.socket=new window.WebSocket(r),this.socket.onopen=()=>{this.connecting=!1,this.terminal.writeln("\x1B[32m Terminal connected\x1B[0m"),this.terminal.onData(i=>{this.socket&&this.socket.readyState===window.WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"input",data:i}))}),this.terminal.onResize(({cols:i,rows:n})=>{this.socket&&this.socket.readyState===window.WebSocket.OPEN&&this.socket.send(JSON.stringify({type:"resize",cols:i,rows:n}))})},this.socket.onmessage=i=>{try{const n=JSON.parse(i.data);n.type==="output"&&n.data&&this.terminal.write(n.data)}catch{this.terminal.write(i.data)}},this.socket.onerror=()=>{console.error("WebSocket error occurred"),this.error="Connection error",this.connecting=!1},this.socket.onclose=()=>{this.connecting=!1,this.terminal.writeln(`
\x1B[31m Terminal disconnected\x1B[0m`),this.error="Connection closed"}},handleResize(){this.fitAddon&&this.fitAddon.fit()},reconnect(){this.socket&&this.socket.close(),this.connectWebSocket()},clear(){this.terminal&&this.terminal.clear()},cleanup(){this.socket&&this.socket.close(),this.terminal&&this.terminal.dispose()}}},RV={class:"xterm-container"},MV={class:"xterm-header"},PV={class:"xterm-controls"},IV=["disabled"],FV={ref:"terminalRef",class:"xterm-wrapper"},OV={key:0,class:"xterm-error"};function NV(e,t,r,i,n,s){return j(),G("div",RV,[B("div",MV,[t[2]||(t[2]=B("h3",null,"Terminal",-1)),B("div",PV,[B("button",{onClick:t[0]||(t[0]=(...a)=>s.reconnect&&s.reconnect(...a)),disabled:n.connecting,class:"btn secondary"},re(n.connecting?"Connecting...":"Reconnect"),9,IV),B("button",{onClick:t[1]||(t[1]=(...a)=>s.clear&&s.clear(...a)),class:"btn secondary"},"Clear")])]),B("div",FV,null,512),n.error?(j(),G("div",OV,re(n.error),1)):me("",!0)])}const $V=ht(LV,[["render",NV]]),zV={name:"WorkbenchStrip",components:{CommandCenter:kV,XTerminal:$V},props:{claudeCommand:{type:String,default:""},taskQueue:{type:Array,default:()=>[]},stats:{type:Object,default:null},ticketProgress:{type:Object,default:()=>({})},latestAudit:{type:Object,default:null},terminalHistory:{type:Array,default:()=>[]},terminalCommand:{type:String,default:""},terminalWorkingDirectory:{type:String,default:"."},terminalLoading:Boolean,terminalRunning:Boolean,terminalError:{type:String,default:""},branchStatus:{type:Object,default:()=>({})},branchStatusLoading:Boolean,branchStatusError:{type:String,default:""},contextStatus:{type:Object,default:()=>({})},contextStatusLoading:Boolean,contextStatusError:{type:String,default:""}},methods:{emitExecute(){this.$emit("execute-command")}}},HV={class:"workbench-strip"};function qV(e,t,r,i,n,s){const a=ot("CommandCenter"),o=ot("XTerminal");return j(),G("section",HV,[st(a,{"claude-command":r.claudeCommand,"task-queue":r.taskQueue,stats:r.stats,"ticket-progress":r.ticketProgress,"latest-audit":r.latestAudit,"onUpdate:claudeCommand":t[0]||(t[0]=l=>e.$emit("update:claudeCommand",l)),"on-execute":s.emitExecute,onClearTasks:t[1]||(t[1]=l=>e.$emit("clear-tasks"))},null,8,["claude-command","task-queue","stats","ticket-progress","latest-audit","on-execute"]),st(o)])}const WV=ht(zV,[["render",qV]]),UV={name:"BreadcrumbNavigation",props:{activeTab:{type:String,required:!0},mainTabs:{type:Array,required:!0},contextStatus:{type:Object,default:()=>({})},branchStatus:{type:Object,default:()=>({})},currentSessionId:{type:String,default:null},currentTaskId:{type:String,default:null},currentModule:{type:Object,default:null},currentTicket:{type:Object,default:null},currentFeature:{type:Object,default:null}},emits:["navigate"],setup(e,{emit:t}){return{breadcrumbs:Lt(()=>{var a,o;const n=[{id:"root",label:"Opnix",icon:"",path:"/",metadata:(a=e.branchStatus)!=null&&a.name?`(${e.branchStatus.name})`:null}],s=e.mainTabs.find(l=>l.id===e.activeTab);if(s){const l={id:s.id,label:s.label,icon:s.icon,path:`/${s.id}`,metadata:null};e.activeTab==="canvas"&&e.currentModule?l.metadata=`(${e.currentModule.name})`:e.activeTab==="bugs"&&e.currentTicket?l.metadata=`(#${e.currentTicket.id})`:e.activeTab==="features"&&e.currentFeature?l.metadata=`(${e.currentFeature.title})`:(o=e.contextStatus)!=null&&o.currentTask&&(l.metadata=`(${e.contextStatus.currentTask})`),n.push(l)}return e.currentSessionId&&n.push({id:"session",label:"Session",icon:"",path:`/session/${e.currentSessionId}`,metadata:e.currentSessionId.slice(-6)}),e.currentTaskId&&n.push({id:"task",label:"Task",icon:"",path:`/task/${e.currentTaskId}`,metadata:e.currentTaskId.slice(-6)}),n}),navigateToPath:n=>{t("navigate",n)}}}},VV={class:"breadcrumb-navigation","aria-label":"Breadcrumb navigation"},jV={class:"breadcrumb-list"},GV=["aria-label","onClick"],KV={class:"breadcrumb-icon","aria-hidden":"true"},YV={class:"breadcrumb-label"},XV={key:0,class:"breadcrumb-metadata"},ZV={key:1,class:"breadcrumb-current","aria-current":"page"},QV={class:"breadcrumb-icon","aria-hidden":"true"},JV={class:"breadcrumb-label"},ej={key:0,class:"breadcrumb-metadata"},tj={key:2,class:"breadcrumb-separator","aria-hidden":"true"};function rj(e,t,r,i,n,s){return j(),G("nav",VV,[B("ol",jV,[(j(!0),G(Pe,null,Ke(i.breadcrumbs,(a,o)=>(j(),G("li",{key:a.id,class:Ye(["breadcrumb-item",{"is-current":o===i.breadcrumbs.length-1}])},[o<i.breadcrumbs.length-1?(j(),G("button",{key:0,type:"button",class:"breadcrumb-link","aria-label":`Navigate to ${a.label}`,onClick:l=>i.navigateToPath(a.path)},[B("span",KV,re(a.icon),1),B("span",YV,re(a.label),1),a.metadata?(j(),G("span",XV,re(a.metadata),1)):me("",!0)],8,GV)):(j(),G("span",ZV,[B("span",QV,re(a.icon),1),B("span",JV,re(a.label),1),a.metadata?(j(),G("span",ej,re(a.metadata),1)):me("",!0)])),o<i.breadcrumbs.length-1?(j(),G("span",tj,[...t[0]||(t[0]=[B("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor"},[B("path",{d:"M6 3l5 5-5 5",stroke:"currentColor","stroke-width":"2",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})],-1)])])):me("",!0)],2))),128))])])}const ij=ht(UV,[["render",rj]]),nj={name:"TabNavigation",props:{mainTabs:{type:Array,required:!0},activeTab:{type:String,required:!0},stats:{type:Object,default:()=>({})},branchStatus:{type:Object,default:()=>({})},contextStatus:{type:Object,default:()=>({})},terminalRunning:{type:Boolean,default:!1},terminalError:{type:String,default:""}},emits:["select-tab"],setup(e){return{enhancedTabs:Lt(()=>e.mainTabs.map(r=>{var n,s,a,o,l,c,u;const i={...r};switch(r.id){case"bugs":((n=e.stats)==null?void 0:n.open)>0?(i.status="pending",i.statusText=`${e.stats.open} open tickets`):((s=e.stats)==null?void 0:s.finished)>0&&(i.status="active",i.statusText="All tickets resolved");break;case"features":((a=e.stats)==null?void 0:a.inProgress)>0&&(i.status="pending",i.statusText=`${e.stats.inProgress} in progress`);break;case"canvas":(o=e.branchStatus)!=null&&o.dirty?(i.status="pending",i.statusText="Uncommitted changes"):((l=e.branchStatus)==null?void 0:l.ahead)>0&&(i.status="active",i.statusText=`${e.branchStatus.ahead} commits ahead`);break;case"docs":(c=e.contextStatus)!=null&&c.currentTask&&e.contextStatus.currentTask!=="System Ready"&&(i.status="active",i.statusText=e.contextStatus.currentTask);break;case"api":e.terminalError?(i.status="error",i.statusText="Terminal error"):e.terminalRunning&&(i.status="active",i.statusText="Command running");break;case"roadmap":((u=e.contextStatus)==null?void 0:u.percentage)>80&&(i.status="pending",i.statusText="Context usage high");break}return i}))}},methods:{emitSelect(e){this.$emit("select-tab",e)}}},sj={class:"tab-navigation tabs icon-tabs","aria-label":"Main surfaces"},aj=["aria-current","title","onClick"],oj={class:"tab-icon","aria-hidden":"true"},lj={class:"tab-label","aria-hidden":"true"},cj={class:"sr-only"};function uj(e,t,r,i,n,s){return j(),G("nav",sj,[(j(!0),G(Pe,null,Ke(i.enhancedTabs,a=>(j(),G("button",{key:a.id,type:"button",class:Ye(["tab",{active:r.activeTab===a.id,"has-status":a.status,[`status-${a.status}`]:a.status}]),"aria-current":r.activeTab===a.id?"page":void 0,title:`${a.label}${a.statusText?` - ${a.statusText}`:""}`,onClick:o=>s.emitSelect(a.id)},[B("span",oj,re(a.icon),1),B("span",lj,re(a.label),1),B("span",cj,re(a.label)+re(a.statusText?` - ${a.statusText}`:""),1)],10,aj))),128))])}const hj=ht(nj,[["render",uj]]),dj={name:"CanvasTab",props:{active:{type:Boolean,default:!1}},emits:["layout","detect","analyze","export"]},fj={class:"controls"};function pj(e,t,r,i,n,s){return j(),G("div",{class:Ye(["tab-content canvas-tab",{active:r.active}])},[B("div",fj,[B("button",{class:"btn",type:"button",onClick:t[0]||(t[0]=a=>e.$emit("layout","breadthfirst"))}," Tree"),B("button",{class:"btn",type:"button",onClick:t[1]||(t[1]=a=>e.$emit("layout","circle"))}," Circle"),B("button",{class:"btn",type:"button",onClick:t[2]||(t[2]=a=>e.$emit("layout","cose"))}," Force"),B("button",{class:"btn secondary",type:"button",onClick:t[3]||(t[3]=a=>e.$emit("detect"))}," Detect"),B("button",{class:"btn feature",type:"button",onClick:t[4]||(t[4]=a=>e.$emit("analyze"))}," Analyze"),B("button",{class:"btn doc",type:"button",onClick:t[5]||(t[5]=a=>e.$emit("export"))}," Export")]),t[6]||(t[6]=B("div",{id:"canvas-container",class:"modules-canvas"},null,-1))],2)}const vj=ht(dj,[["render",pj]]),rt=fl({selectedTickets:new Set,selectedFeatures:new Set,isSelectionMode:!1,lastOperation:null,undoHistory:[],lastSelectedTicket:null,lastSelectedFeature:null});function $g(){const e=ia(!1),t=ia(null),r=Lt(()=>Array.from(rt.selectedTickets)),i=Lt(()=>Array.from(rt.selectedFeatures)),n=Lt(()=>rt.selectedTickets.size>0),s=Lt(()=>rt.selectedFeatures.size>0),a=Lt(()=>rt.isSelectionMode);function o(){rt.isSelectionMode=!rt.isSelectionMode,rt.isSelectionMode||y()}function l(){rt.isSelectionMode=!0}function c(){rt.isSelectionMode=!1,y()}function u(T){rt.selectedTickets.has(T)?rt.selectedTickets.delete(T):(rt.selectedTickets.add(T),rt.lastSelectedTicket=T)}function h(T){rt.selectedFeatures.has(T)?rt.selectedFeatures.delete(T):(rt.selectedFeatures.add(T),rt.lastSelectedFeature=T)}function d(T){T.forEach(E=>{rt.selectedTickets.add(E.id)})}function p(T){T.forEach(E=>{rt.selectedFeatures.add(E.id)})}function y(){rt.selectedTickets.clear(),rt.selectedFeatures.clear()}function _(T){return rt.selectedTickets.has(T)}function v(T){return rt.selectedFeatures.has(T)}function g(T,E,R,F){const O=T.map(P=>P.id),$=O.indexOf(E),H=O.indexOf(R);if($===-1||H===-1)return;const L=Math.min($,H),I=Math.max($,H);for(let P=L;P<=I;P++){const z=O[P];F==="ticket"?rt.selectedTickets.add(z):F==="feature"&&rt.selectedFeatures.add(z)}}function f(T,E,R,F=[]){if(rt.isSelectionMode)if(T.shiftKey){const O=R==="ticket"?rt.lastSelectedTicket:rt.lastSelectedFeature;O&&F.length>0?g(F,O,E,R):R==="ticket"?u(E):R==="feature"&&h(E)}else(T.ctrlKey||T.metaKey)&&(R==="ticket"?u(E):R==="feature"&&h(E))}async function m(T){if(rt.selectedTickets.size===0)throw new Error("No tickets selected");e.value=!0,t.value=null;try{const E=await fetch("/api/bulk/tickets/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticketIds:r.value,updates:T})});if(!E.ok){const F=await E.json();throw new Error(F.error||"Bulk update failed")}const R=await E.json();return rt.lastOperation=R,await w(),R}catch(E){throw t.value=E.message,E}finally{e.value=!1}}async function b(T){if(rt.selectedFeatures.size===0)throw new Error("No features selected");e.value=!0,t.value=null;try{const E=await fetch("/api/bulk/features/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({featureIds:i.value,updates:T})});if(!E.ok){const F=await E.json();throw new Error(F.error||"Bulk update failed")}const R=await E.json();return rt.lastOperation=R,await w(),R}catch(E){throw t.value=E.message,E}finally{e.value=!1}}async function C(){if(rt.selectedTickets.size===0)throw new Error("No tickets selected");e.value=!0,t.value=null;try{const T=await fetch("/api/bulk/tickets/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ticketIds:r.value})});if(!T.ok){const R=await T.json();throw new Error(R.error||"Bulk deletion failed")}const E=await T.json();return rt.lastOperation=E,await w(),E}catch(T){throw t.value=T.message,T}finally{e.value=!1}}async function S(T){e.value=!0,t.value=null;try{const E=await fetch("/api/bulk/validate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({operations:T})});if(!E.ok){const R=await E.json();throw new Error(R.error||"Validation failed")}return await E.json()}catch(E){throw t.value=E.message,E}finally{e.value=!1}}async function k(T,E){e.value=!0,t.value=null;try{const R=await fetch(`/api/bulk/undo/${T}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:E})});if(!R.ok){const O=await R.json();throw new Error(O.error||"Undo failed")}const F=await R.json();return await w(),F}catch(R){throw t.value=R.message,R}finally{e.value=!1}}async function w(){try{const T=await fetch("/api/bulk/undo/history");if(T.ok){const E=await T.json();rt.undoHistory=E.history||[]}}catch(T){console.warn("Failed to refresh undo history:",T)}}async function x(){try{const T=await fetch("/api/bulk/stats");if(T.ok)return(await T.json()).stats}catch(T){console.warn("Failed to get operation stats:",T)}return null}async function A(){try{const T=await fetch("/api/bulk/undo/clear",{method:"DELETE"});if(T.ok)return rt.undoHistory=[],await T.json()}catch(T){throw t.value=T.message,T}}const D=Lt(()=>{const T=rt.selectedTickets.size,E=rt.selectedFeatures.size;return T>0&&E>0?`${T} tickets, ${E} features selected`:T>0?`${T} ticket${T===1?"":"s"} selected`:E>0?`${E} feature${E===1?"":"s"} selected`:"No items selected"});return w(),{isLoading:e,error:t,selectedTicketIds:r,selectedFeatureIds:i,hasSelectedTickets:n,hasSelectedFeatures:s,isInSelectionMode:a,lastOperation:Lt(()=>rt.lastOperation),undoHistory:Lt(()=>rt.undoHistory),selectionSummary:D,toggleSelectionMode:o,enableSelectionMode:l,disableSelectionMode:c,toggleTicketSelection:u,toggleFeatureSelection:h,selectAllTickets:d,selectAllFeatures:p,clearSelections:y,isTicketSelected:_,isFeatureSelected:v,handleKeyboardSelection:f,bulkUpdateTickets:m,bulkUpdateFeatures:b,bulkDeleteTickets:C,validateBulkOperations:S,undoOperation:k,refreshUndoHistory:w,getOperationStats:x,clearUndoHistory:A}}const gj={name:"ProgressIndicator",props:{title:{type:String,default:"Progress"},steps:{type:Array,default:()=>[]},compact:{type:Boolean,default:!1},variant:{type:String,default:"default",validator:e=>["default","minimal","detailed"].includes(e)},showHeader:{type:Boolean,default:!0},showSteps:{type:Boolean,default:!0},showSummary:{type:Boolean,default:!1},overrideProgress:{type:Number,default:null,validator:e=>e===null||e>=0&&e<=100}},setup(e){const t=Lt(()=>e.steps.filter(c=>c.status==="completed"||c.status==="finished").length),r=Lt(()=>e.steps.filter(c=>c.status==="inProgress"||c.status==="active").length),i=Lt(()=>e.steps.filter(c=>c.status==="pending"||c.status==="reported").length),n=Lt(()=>e.steps.filter(c=>c.status==="blocked"||c.status==="error").length),s=Lt(()=>e.steps.length),a=Lt(()=>e.overrideProgress!==null?Math.round(e.overrideProgress):s.value===0?0:Math.round(t.value/s.value*100)),o=Lt(()=>{const c=a.value;return c===100?"completed":c>=75?"high":c>=50?"medium":c>=25?"low":"minimal"});return{completedSteps:t,inProgressSteps:r,pendingSteps:i,blockedSteps:n,totalSteps:s,progressPercentage:a,progressBarClass:o,formatDate:c=>{try{return new Date(c).toLocaleDateString()}catch{return c}}}}},mj={key:0,class:"progress-header"},yj={class:"progress-title"},_j={class:"progress-summary"},bj=["aria-label"],Cj={class:"progress-fraction"},wj=["aria-valuenow","aria-label"],Sj={class:"progress-bar-track"},kj={key:1,class:"progress-steps"},xj={class:"step-marker"},Tj={key:0,class:"step-checkmark","aria-hidden":"true"},Ej={key:1,class:"step-spinner","aria-hidden":"true"},Aj={key:2,class:"step-blocked","aria-hidden":"true"},Bj={key:3,class:"step-error","aria-hidden":"true"},Dj={key:4,class:"step-number","aria-hidden":"true"},Lj={class:"step-content"},Rj={class:"step-title"},Mj={key:0,class:"step-description"},Pj={key:1,class:"step-metadata"},Ij={key:0,class:"step-assignee"},Fj={key:1,class:"step-priority priority-{{ step.metadata.priority }}"},Oj={key:2,class:"step-due-date"},Nj={key:2,class:"progress-summary-detailed"},$j={class:"summary-stats"},zj={class:"stat-item"},Hj={class:"stat-value completed"},qj={class:"stat-item"},Wj={class:"stat-value in-progress"},Uj={class:"stat-item"},Vj={class:"stat-value pending"},jj={key:0,class:"stat-item"},Gj={class:"stat-value blocked"};function Kj(e,t,r,i,n,s){return j(),G("div",{class:Ye(["progress-indicator",{compact:r.compact,[`variant-${r.variant}`]:r.variant}])},[r.showHeader?(j(),G("div",mj,[B("h3",yj,re(r.title),1),B("div",_j,[B("span",{class:"progress-percentage","aria-label":`${i.progressPercentage}% complete`},re(i.progressPercentage)+"% ",9,bj),B("span",Cj,re(i.completedSteps)+"/"+re(i.totalSteps),1)])])):me("",!0),B("div",{class:"progress-bar-container",role:"progressbar","aria-valuenow":i.progressPercentage,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Progress: ${i.progressPercentage}% complete`},[B("div",Sj,[B("div",{class:Ye(["progress-bar-fill",i.progressBarClass]),style:Oa({width:`${i.progressPercentage}%`})},null,6)])],8,wj),r.showSteps&&r.steps.length>0?(j(),G("div",kj,[(j(!0),G(Pe,null,Ke(r.steps,(a,o)=>(j(),G("div",{key:a.id||o,class:Ye(["progress-step",{completed:a.status==="completed"||a.status==="finished","in-progress":a.status==="inProgress"||a.status==="active",pending:a.status==="pending"||a.status==="reported",blocked:a.status==="blocked",error:a.status==="error"}])},[B("div",xj,[a.status==="completed"||a.status==="finished"?(j(),G("span",Tj,"")):a.status==="inProgress"||a.status==="active"?(j(),G("span",Ej,"")):a.status==="blocked"?(j(),G("span",Aj,"")):a.status==="error"?(j(),G("span",Bj,"")):(j(),G("span",Dj,re(o+1),1))]),B("div",Lj,[B("div",Rj,re(a.title||a.name||`Step ${o+1}`),1),a.description?(j(),G("div",Mj,re(a.description),1)):me("",!0),a.metadata?(j(),G("div",Pj,[a.metadata.assignee?(j(),G("span",Ij,re(a.metadata.assignee),1)):me("",!0),a.metadata.priority?(j(),G("span",Fj,re(a.metadata.priority),1)):me("",!0),a.metadata.dueDate?(j(),G("span",Oj,"Due: "+re(i.formatDate(a.metadata.dueDate)),1)):me("",!0)])):me("",!0)])],2))),128))])):me("",!0),r.showSummary?(j(),G("div",Nj,[B("div",$j,[B("div",zj,[t[0]||(t[0]=B("span",{class:"stat-label"},"Completed",-1)),B("span",Hj,re(i.completedSteps),1)]),B("div",qj,[t[1]||(t[1]=B("span",{class:"stat-label"},"In Progress",-1)),B("span",Wj,re(i.inProgressSteps),1)]),B("div",Uj,[t[2]||(t[2]=B("span",{class:"stat-label"},"Pending",-1)),B("span",Vj,re(i.pendingSteps),1)]),i.blockedSteps>0?(j(),G("div",jj,[t[3]||(t[3]=B("span",{class:"stat-label"},"Blocked",-1)),B("span",Gj,re(i.blockedSteps),1)])):me("",!0)])])):me("",!0)],2)}const Yj=ht(gj,[["render",Kj]]),Xj={name:"TicketsBoard",props:{active:{type:Boolean,default:!1},tickets:{type:Array,default:()=>[]},ticketStatusOptions:{type:Array,default:()=>[]},filter:{type:Object,default:()=>({priority:"",status:""})}},emits:["create","analyze","export","status-change","update:filter"],components:{ProgressIndicator:Yj},setup(){return $g()},data(){return{localFilter:{...this.filter}}},watch:{filter:{deep:!0,handler(e){this.localFilter={...e}}},localFilter:{deep:!0,handler(e){this.$emit("update:filter",e)}}},computed:{filtered(){return this.tickets.filter(e=>!(this.localFilter.priority&&e.priority!==this.localFilter.priority||this.localFilter.status&&e.status!==this.localFilter.status)).sort((e,t)=>new Date(e.created)-new Date(t.created))}},methods:{statusLabel(e){return TI(e)},formatDate(e){return EI(e)},handleTicketClick(e,t){this.isInSelectionMode?(t.preventDefault(),this.handleKeyboardSelection(t,e.id,"ticket")):this.$emit("status-change",e,t)},handleKeyDown(e,t){this.isInSelectionMode&&(t.key===" "||t.key==="Enter")&&(t.preventDefault(),this.toggleTicketSelection(e))},getTicketSteps(e){const t=[],r=[{id:"reported",title:"Reported",status:"completed"},{id:"analysis",title:"Analysis",status:e.status==="reported"?"pending":"completed"},{id:"implementation",title:"Implementation",status:e.status==="inProgress"?"active":e.status==="finished"?"completed":"pending"},{id:"testing",title:"Testing",status:e.status==="finished"?"completed":"pending"},{id:"completion",title:"Completion",status:e.status==="finished"?"completed":"pending"}];return t.push(...r),e.checklist&&e.checklist.length>0&&e.checklist.forEach((i,n)=>{t.push({id:`checklist-${n}`,title:i.text||i.title||`Checklist Item ${n+1}`,status:i.completed?"completed":"pending",description:i.description||"",metadata:{type:"checklist",required:i.required!==!1}})}),t},getCompletedChecklistItems(e){return e.checklist?e.checklist.filter(t=>t.completed):[]}}},Zj={class:"controls"},Qj=["value"],Jj={class:"grid ticket-grid"},eG=["onClick","onKeydown"],tG={class:"ticket-header"},rG={key:0,class:"selection-checkbox"},iG=["checked","onChange"],nG={class:"ticket-id"},sG={class:"ticket-title"},aG={class:"ticket-description"},oG={class:"ticket-modules"},lG={key:0,class:"completion-summary"},cG={key:1,class:"ticket-progress"},uG={key:2,class:"ticket-checklist"},hG={class:"checklist-header"},dG={class:"checklist-progress"},fG={class:"checklist-items"},pG=["aria-label"],vG={class:"item-text"},gG={class:"ticket-status-row"},mG={class:"ticket-status-control"},yG=["value","onChange"],_G=["value"],bG={class:"ticket-date"};function CG(e,t,r,i,n,s){const a=ot("ProgressIndicator");return j(),G("div",{class:Ye(["tab-content tickets-board",{active:r.active}])},[B("div",Zj,[B("button",{class:"btn danger",type:"button",onClick:t[0]||(t[0]=o=>e.$emit("create"))},"+ New Bug"),B("button",{class:"btn secondary",type:"button",onClick:t[1]||(t[1]=o=>e.$emit("analyze"))}," Python Analysis"),an(B("select",{"onUpdate:modelValue":t[2]||(t[2]=o=>n.localFilter.priority=o)},[...t[7]||(t[7]=[B("option",{value:""},"All Priorities",-1),B("option",{value:"high"},"High",-1),B("option",{value:"medium"},"Medium",-1),B("option",{value:"low"},"Low",-1)])],512),[[Go,n.localFilter.priority]]),an(B("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>n.localFilter.status=o)},[t[8]||(t[8]=B("option",{value:""},"All Status",-1)),(j(!0),G(Pe,null,Ke(r.ticketStatusOptions,o=>(j(),G("option",{key:o.value,value:o.value},re(o.label),9,Qj))),128))],512),[[Go,n.localFilter.status]]),B("button",{class:"btn secondary",type:"button",onClick:t[4]||(t[4]=o=>e.$emit("export"))},"Export JSON"),B("button",{class:Ye(["btn bulk-toggle",{active:e.isInSelectionMode}]),type:"button",onClick:t[5]||(t[5]=(...o)=>e.toggleSelectionMode&&e.toggleSelectionMode(...o)),title:"Toggle bulk selection mode"},re(e.isInSelectionMode?" Exit Selection":" Bulk Select"),3)]),B("div",Jj,[(j(!0),G(Pe,null,Ke(s.filtered,o=>(j(),G("article",{key:o.id,class:Ye(["ticket-card",{"high-priority":o.priority==="high","selection-mode":e.isInSelectionMode,selected:e.isTicketSelected(o.id)}]),onClick:l=>s.handleTicketClick(o,l),onKeydown:l=>s.handleKeyDown(o.id,l),tabindex:"0"},[B("div",tG,[e.isInSelectionMode?(j(),G("div",rG,[B("input",{type:"checkbox",checked:e.isTicketSelected(o.id),onChange:l=>e.toggleTicketSelection(o.id),onClick:t[6]||(t[6]=nn(()=>{},["stop"]))},null,40,iG)])):me("",!0),B("span",{class:Ye(["badge",o.priority])},re(o.priority),3),B("span",nG,"#"+re(o.id),1)]),B("h3",sG,re(o.title),1),B("p",aG,re(o.description),1),B("div",oG,[(j(!0),G(Pe,null,Ke(o.modules,l=>(j(),G("span",{key:l,class:"module-tag"},re(l),1))),128))]),o.completionSummary?(j(),G("div",lG,[t[9]||(t[9]=B("strong",null,"Completion Summary",-1)),B("p",null,re(o.completionSummary),1)])):me("",!0),s.getTicketSteps(o).length>0?(j(),G("div",cG,[st(a,{title:`${o.title} Progress`,steps:s.getTicketSteps(o),compact:!0,"show-header":!1,"show-steps":!1,"show-summary":!1,variant:"minimal"},null,8,["title","steps"])])):me("",!0),o.checklist&&o.checklist.length>0?(j(),G("div",uG,[B("div",hG,[t[10]||(t[10]=B("span",{class:"checklist-title"},"Checklist",-1)),B("span",dG,re(s.getCompletedChecklistItems(o).length)+"/"+re(o.checklist.length),1)]),B("div",fG,[(j(!0),G(Pe,null,Ke(o.checklist,(l,c)=>(j(),G("div",{key:c,class:Ye(["checklist-item",{completed:l.completed}])},[B("span",{class:"checkmark","aria-label":l.completed?"Completed":"Pending"},re(l.completed?"":""),9,pG),B("span",vG,re(l.text||l.title||`Step ${c+1}`),1)],2))),128))])])):me("",!0),B("div",gG,[B("div",mG,[B("span",{class:Ye(["badge",o.status])},re(s.statusLabel(o.status)),3),B("select",{class:"status-select",value:o.status,onChange:l=>e.$emit("status-change",o,l)},[(j(!0),G(Pe,null,Ke(r.ticketStatusOptions,l=>(j(),G("option",{key:l.value,value:l.value},re(l.label),9,_G))),128))],40,yG)]),B("span",bG,re(s.formatDate(o.created)),1)])],42,eG))),128))])],2)}const wG=ht(Xj,[["render",CG]]),SG={name:"FeaturesTab",props:{active:{type:Boolean,default:!1},features:{type:Array,default:()=>[]},modules:{type:Array,default:()=>[]},selectedModules:{type:Array,default:()=>[]},filter:{type:Object,default:()=>({module:"",status:""})},getModuleFeatureCount:{type:Function,required:!0},getModuleName:{type:Function,required:!0}},emits:["create","report","toggle-module","update:filter"],setup(){return $g()},data(){return{localFilter:{...this.filter}}},methods:{featureStatusClass(e){if(!e)return"feature-status-unknown";const t=String(e).toLowerCase().replace(/[^a-z0-9]+/g,"-");return t?`feature-status-${t}`:"feature-status-unknown"},handleFeatureClick(e,t){this.isInSelectionMode&&(t.preventDefault(),this.handleKeyboardSelection(t,e.id,"feature"))},handleKeyDown(e,t){this.isInSelectionMode&&(t.key===" "||t.key==="Enter")&&(t.preventDefault(),this.toggleFeatureSelection(e))}},watch:{filter:{deep:!0,handler(e){this.localFilter={...e}}},localFilter:{deep:!0,handler(e){this.$emit("update:filter",e)}}}},kG={class:"controls"},xG=["value"],TG={class:"tag-cloud"},EG=["onClick"],AG={class:"grid"},BG=["onClick","onKeydown"],DG={class:"feature-card-header"},LG={key:0,class:"selection-checkbox"},RG=["checked","onChange"],MG={class:"feature-card-id"},PG={class:"feature-card-title"},IG={class:"feature-card-description"},FG={class:"feature-card-section"},OG={key:0,class:"feature-card-section"},NG={class:"feature-card-acceptance-list"},$G={class:"feature-card-footer"},zG={class:"feature-card-meta"},HG={class:"feature-card-meta-row"},qG={class:"feature-card-meta-row"};function WG(e,t,r,i,n,s){return j(),G("div",{class:Ye(["tab-content",{active:r.active}])},[B("div",kG,[B("button",{class:"btn feature",type:"button",onClick:t[0]||(t[0]=a=>e.$emit("create"))},"+ New Feature"),an(B("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>n.localFilter.module=a)},[t[6]||(t[6]=B("option",{value:""},"All Modules",-1)),(j(!0),G(Pe,null,Ke(r.modules,a=>(j(),G("option",{key:a.id,value:a.id},re(a.name),9,xG))),128))],512),[[Go,n.localFilter.module]]),an(B("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>n.localFilter.status=a)},[...t[7]||(t[7]=[Uo('<option value="">All Status</option><option value="proposed">Proposed</option><option value="approved">Approved</option><option value="in-development">In Development</option><option value="testing">Testing</option><option value="deployed">Deployed</option>',6)])],512),[[Go,n.localFilter.status]]),B("button",{class:"btn secondary",type:"button",onClick:t[3]||(t[3]=a=>e.$emit("report"))},"Generate Report"),B("button",{class:Ye(["btn bulk-toggle",{active:e.isInSelectionMode}]),type:"button",onClick:t[4]||(t[4]=(...a)=>e.toggleSelectionMode&&e.toggleSelectionMode(...a)),title:"Toggle bulk selection mode"},re(e.isInSelectionMode?" Exit Selection":" Bulk Select"),3)]),B("div",TG,[(j(!0),G(Pe,null,Ke(r.modules,a=>(j(),G("div",{key:a.id,class:Ye(["tag",{selected:r.selectedModules.includes(a.id)}]),onClick:o=>e.$emit("toggle-module",a.id)},re(a.name)+" ("+re(r.getModuleFeatureCount(a.id))+") ",11,EG))),128))]),B("div",AG,[(j(!0),G(Pe,null,Ke(r.features,a=>(j(),G("div",{key:a.id,class:Ye(["card",{"selection-mode":e.isInSelectionMode,selected:e.isFeatureSelected(a.id)}]),onClick:o=>s.handleFeatureClick(a,o),onKeydown:o=>s.handleKeyDown(a.id,o),tabindex:"0"},[B("div",DG,[e.isInSelectionMode?(j(),G("div",LG,[B("input",{type:"checkbox",checked:e.isFeatureSelected(a.id),onChange:o=>e.toggleFeatureSelection(a.id),onClick:t[5]||(t[5]=nn(()=>{},["stop"]))},null,40,RG)])):me("",!0),t[8]||(t[8]=B("span",{class:"badge feature"},"FEATURE",-1)),B("span",MG,"#F-"+re(a.id),1)]),B("h3",PG,re(a.title),1),B("p",IG,re(a.description),1),B("div",FG,[t[9]||(t[9]=B("strong",{class:"feature-card-label"},"Module:",-1)),dt(" "+re(r.getModuleName(a.moduleId)),1)]),a.acceptanceCriteria?(j(),G("div",OG,[t[10]||(t[10]=B("strong",{class:"feature-card-label"},"Acceptance Criteria:",-1)),B("ul",NG,[(j(!0),G(Pe,null,Ke(a.acceptanceCriteria,(o,l)=>(j(),G("li",{key:l},re(o),1))),128))])])):me("",!0),B("div",$G,[B("span",{class:Ye(["badge","feature-status",s.featureStatusClass(a.status)])},re(a.status),3),B("div",zG,[B("div",HG," Priority: "+re(a.priority),1),B("div",qG," Votes: "+re(a.votes),1)])])],42,BG))),128))])],2)}const UG=ht(SG,[["render",WG]]),VG={name:"SummaryMetric",props:{label:{type:String,required:!0},value:{type:[String,Number],required:!0},variant:{type:String,default:"default"}},computed:{variantClass(){return this.variant?`summary-metric--${this.variant}`:"summary-metric--default"}},template:`
    <div :class="['summary-metric', variantClass]">
      <div class="summary-metric-value">{{ value }}</div>
      <div class="summary-metric-label">{{ label }}</div>
    </div>
  `},jG={name:"ModuleListSection",props:{title:{type:String,required:!0},items:{type:Array,default:()=>[]},itemClass:{type:String,default:""}},template:`
    <section class="module-dependencies">
      <div class="module-section-heading">
        {{ title }} ({{ (items || []).length }}):
      </div>
      <div>
        <span
          v-for="item in items || []"
          :key="item"
          class="dependency-item"
          :class="itemClass"
        >
          {{ item }}
        </span>
      </div>
    </section>
  `},GG={name:"ModulesCanvas",components:{SummaryMetric:VG,ModuleListSection:jG},props:{active:{type:Boolean,default:!1},modules:{type:Array,default:()=>[]},summary:{type:Object,default:null},getModuleBugCount:{type:Function,required:!0},getModuleFeatureCount:{type:Function,required:!0}},methods:{moduleHealthClass(e){const t=Number(e);return Number.isFinite(t)?t>=80?"module-health--strong":t>=60?"module-health--warning":"module-health--critical":"module-health--warning"}},emits:["create","detect","analyze","analyze-dependencies"]},KG={class:"controls"},YG={key:0,class:"card modules-summary-card"},XG={class:"modules-summary-metrics"},ZG={class:"grid"},QG={class:"module-header"},JG={class:"module-name"},eK={class:"module-stats"},tK={class:"module-action-footer"},rK=["onClick"];function iK(e,t,r,i,n,s){const a=ot("SummaryMetric"),o=ot("ModuleListSection");return j(),G("div",{class:Ye(["tab-content",{active:r.active}])},[B("div",KG,[B("button",{class:"btn",type:"button",onClick:t[0]||(t[0]=l=>e.$emit("create"))},"+ Add Module"),B("button",{class:"btn secondary",type:"button",onClick:t[1]||(t[1]=l=>e.$emit("detect"))}," Auto-Detect"),B("button",{class:"btn doc",type:"button",onClick:t[2]||(t[2]=l=>e.$emit("analyze-dependencies"))}," Analyze Dependencies")]),r.summary&&r.summary.moduleCount?(j(),G("div",YG,[t[3]||(t[3]=B("div",null,[B("h3",{class:"modules-summary-heading"},"Detection Summary"),B("div",{class:"modules-summary-subtitle"},"Based on live filesystem scan")],-1)),B("div",XG,[st(a,{label:"Modules",value:r.summary.moduleCount,variant:"accent-blue"},null,8,["value"]),st(a,{label:"Links",value:r.summary.dependencyCount,variant:"accent-orange"},null,8,["value"]),st(a,{label:"External",value:r.summary.externalDependencyCount,variant:"accent-cyan"},null,8,["value"]),st(a,{label:"Lines",value:r.summary.totalLines,variant:"accent-pink"},null,8,["value"])])])):me("",!0),B("div",ZG,[(j(!0),G(Pe,null,Ke(r.modules,l=>(j(),G("article",{key:l.id,class:"module-card"},[B("header",QG,[B("div",JG,re(l.name),1),B("div",{class:Ye(["module-health",s.moduleHealthClass(l.health)])},null,2)]),B("section",eK,[st(a,{label:"Bugs",value:r.getModuleBugCount(l.id)},null,8,["value"]),st(a,{label:"Features",value:r.getModuleFeatureCount(l.id)},null,8,["value"]),st(a,{label:"Health",value:`${l.health}%`},null,8,["value"])]),st(o,{title:"Dependencies",items:l.dependencies},null,8,["items"]),l.externalDependencies&&l.externalDependencies.length?(j(),$t(o,{key:0,title:"External Packages",items:l.externalDependencies,"item-class":"external"},null,8,["items"])):me("",!0),l.pathHints&&l.pathHints.length?(j(),$t(o,{key:1,title:"Paths",items:l.pathHints,"item-class":"path"},null,8,["items"])):me("",!0),B("footer",tK,[B("button",{class:"btn module-action-button",type:"button",onClick:c=>e.$emit("analyze",l)}," Analyze Module ",8,rK)])]))),128))])],2)}const nK=ht(GG,[["render",iK]]),sK={name:"RoadmapViewToggle",props:{view:{type:String,required:!0,validator:e=>["minimal","detailed"].includes(e)},disabled:{type:Boolean,default:!1}},emits:["change"],methods:{emitChange(e){this.disabled||e===this.view||this.$emit("change",e)}}},aK={class:"roadmap-view-toggle",role:"tablist","aria-label":"Roadmap view selector"},oK=["aria-selected","disabled"],lK=["aria-selected","disabled"];function cK(e,t,r,i,n,s){return j(),G("div",aK,[B("button",{class:Ye(["view-btn",{active:r.view==="minimal"}]),type:"button","aria-selected":r.view==="minimal",disabled:r.disabled,onClick:t[0]||(t[0]=a=>s.emitChange("minimal"))},[...t[2]||(t[2]=[Uo('<span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect></svg></span><span class="label">Minimal</span>',2)])],10,oK),B("button",{class:Ye(["view-btn",{active:r.view==="detailed"}]),type:"button","aria-selected":r.view==="detailed",disabled:r.disabled,onClick:t[1]||(t[1]=a=>s.emitChange("detailed"))},[...t[3]||(t[3]=[Uo('<span class="icon" aria-hidden="true"><svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="2"></rect><rect x="3" y="10" width="18" height="2"></rect><rect x="3" y="16" width="18" height="2"></rect></svg></span><span class="label">Detailed</span>',2)])],10,lK)])}const uK=ht(sK,[["render",cK]]),dc=260,Fb=4,hK={name:"RoadmapDetailedView",props:{milestones:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},emits:["update-milestone"],setup(e,{emit:t}){const r=ia(null),i=ia(null),n=ia(null),s=ia({start:0,end:0}),a=Lt(()=>e.disabled),o=Lt(()=>e.milestones.length),l=Lt(()=>o.value*dc),c=Lt(()=>e.milestones.slice(s.value.start,s.value.end).map((m,b)=>({...m,_virtualIndex:s.value.start+b}))),u=Lt(()=>s.value.start*dc);va(l,f=>{i.value&&(i.value.style.height=`${f}px`)},{immediate:!0}),va(u,f=>{n.value&&(n.value.style.transform=`translateY(${f}px)`)},{immediate:!0});const h=()=>{const f=r.value;if(!f)return;const m=f.scrollTop,b=f.clientHeight,C=Math.max(0,Math.floor(m/dc)-Fb),S=Math.min(e.milestones.length,Math.ceil((m+b)/dc)+Fb);s.value={start:C,end:S}},d=()=>{h()},p=(f,m,b)=>{a.value||b!=null&&f[m]!==b&&t("update-milestone",{id:f.id,field:m,value:b})},y=f=>{f.blur()},_=(f,m)=>{f.innerText=m||"",f.blur()},v=f=>f?f.split(/[\s_-]+/).filter(Boolean).map(m=>m.charAt(0).toUpperCase()+m.slice(1)).join(" "):"",g=f=>{const m=Number(f);return Number.isFinite(m)?`progress-width-${Math.max(0,Math.min(100,Math.round(m)))}`:"progress-width-0"};return fv(()=>{h()}),pv(()=>{}),va(()=>e.milestones,()=>{h()}),{scrollContainer:r,virtualSpacer:i,virtualWindow:n,visibleMilestones:c,virtualHeight:l,translateY:u,handleScroll:d,updateField:p,blurEditable:y,cancelEdit:_,formatStatus:v,progressWidthClass:g,isDisabled:a}}},dK={class:"virtual-spacer",ref:"virtualSpacer"},fK={class:"virtual-window",ref:"virtualWindow"},pK={class:"detailed-header"},vK={class:"detailed-titles"},gK=["contenteditable","onBlur","onKeydown"],mK=["contenteditable","onBlur","onKeydown"],yK={class:"detailed-progress"},_K={class:"progress-value"},bK={class:"progress-bar"},CK={class:"detailed-meta"},wK={key:0,class:"meta-item"},SK={key:1,class:"meta-item"},kK={key:2,class:"meta-item"},xK={key:3,class:"meta-item"},TK={class:"detailed-links"},EK={key:0,open:""},AK={key:1},BK={key:2};function DK(e,t,r,i,n,s){return j(),G("div",{class:"roadmap-detailed",ref:"scrollContainer",onScroll:t[2]||(t[2]=(...a)=>i.handleScroll&&i.handleScroll(...a))},[B("div",dK,null,512),B("div",fK,[(j(!0),G(Pe,null,Ke(i.visibleMilestones,a=>(j(),G("article",{key:a.id,class:Ye(["detailed-card",`is-${(a.status||"").toLowerCase()}`,{disabled:i.isDisabled}])},[B("header",pK,[B("div",vK,[B("h4",{class:"detailed-title",contenteditable:!i.isDisabled,spellcheck:"false",onBlur:o=>i.updateField(a,"name",o.target.innerText.trim()),onKeydown:[t[0]||(t[0]=na(nn(o=>i.blurEditable(o.target),["prevent"]),["enter"])),na(nn(o=>i.cancelEdit(o.target,a.name),["prevent"]),["esc"])]},re(a.name),41,gK),a.notes?(j(),G("p",{key:0,class:"detailed-notes",contenteditable:!i.isDisabled,spellcheck:"false",onBlur:o=>i.updateField(a,"notes",o.target.innerText.trim()),onKeydown:[t[1]||(t[1]=na(nn(o=>i.blurEditable(o.target),["prevent"]),["enter"])),na(nn(o=>i.cancelEdit(o.target,a.notes),["prevent"]),["esc"])]},re(a.notes),41,mK)):me("",!0)]),B("div",yK,[B("span",_K,re(a.progress)+"%",1),B("div",bK,[B("span",{class:Ye(["progress-fill",i.progressWidthClass(a.progress)])},null,2)])])]),B("section",CK,[a.start||a.startDate?(j(),G("div",wK,[t[3]||(t[3]=B("dt",null,"Start",-1)),B("dd",null,re(a.start||a.startDate),1)])):me("",!0),a.end||a.targetDate?(j(),G("div",SK,[t[4]||(t[4]=B("dt",null,"Target",-1)),B("dd",null,re(a.end||a.targetDate),1)])):me("",!0),a.status?(j(),G("div",kK,[t[5]||(t[5]=B("dt",null,"Status",-1)),B("dd",null,re(i.formatStatus(a.status)),1)])):me("",!0),a.dependencies&&a.dependencies.length?(j(),G("div",xK,[t[6]||(t[6]=B("dt",null,"Dependencies",-1)),B("dd",null,[(j(!0),G(Pe,null,Ke(a.dependencies,o=>(j(),G("span",{key:o,class:"dependency-pill"},re(o),1))),128))])])):me("",!0)]),B("section",TK,[a.linkedTickets&&a.linkedTickets.length?(j(),G("details",EK,[B("summary",null,"Tickets ("+re(a.linkedTickets.length)+")",1),B("ul",null,[(j(!0),G(Pe,null,Ke(a.linkedTickets,o=>(j(),G("li",{key:o},"Ticket #"+re(o),1))),128))])])):me("",!0),a.linkedFeatures&&a.linkedFeatures.length?(j(),G("details",AK,[B("summary",null,"Features ("+re(a.linkedFeatures.length)+")",1),B("ul",null,[(j(!0),G(Pe,null,Ke(a.linkedFeatures,o=>(j(),G("li",{key:o},"Feature #"+re(o),1))),128))])])):me("",!0),a.linkedModules&&a.linkedModules.length?(j(),G("details",BK,[B("summary",null,"Modules ("+re(a.linkedModules.length)+")",1),B("ul",null,[(j(!0),G(Pe,null,Ke(a.linkedModules,o=>(j(),G("li",{key:o},"Module "+re(o),1))),128))])])):me("",!0)])],2))),128))],512)],544)}const LK=ht(hK,[["render",DK]]),RK={name:"RoadmapTab",components:{RoadmapViewToggle:uK,RoadmapDetailedView:LK},props:{active:{type:Boolean,default:!1},state:{type:Object,default:()=>({})},versions:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},updating:{type:Boolean,default:!1},versionsLoading:{type:Boolean,default:!1},error:{type:String,default:""},updateMessage:{type:String,default:""},updateTimestamp:{type:String,default:""},viewMode:{type:String,default:"minimal"},selectedVersion:{type:String,default:""},onRefresh:{type:Function,default:()=>{}},onGenerate:{type:Function,default:()=>{}},onExport:{type:Function,default:()=>{}},onDownload:{type:Function,default:()=>{}},onRollback:{type:Function,default:()=>{}},onSelectVersion:{type:Function,default:()=>{}},onViewMode:{type:Function,default:()=>{}},onFetchVersions:{type:Function,default:()=>{}},onUpdateMilestone:{type:Function,default:()=>{}}},computed:{summary(){var e;return((e=this.state)==null?void 0:e.summary)||{}},history(){var e;return Array.isArray((e=this.state)==null?void 0:e.history)?this.state.history:[]},milestones(){var e;return Array.isArray((e=this.state)==null?void 0:e.milestones)?this.state.milestones:[]},hasMilestones(){return this.milestones.length>0},hasSummary(){return!!(this.summary&&(this.summary.ticketCount||this.summary.moduleCount||this.summary.featureCount))},minimalCards(){const e=Math.max(4,Math.min(this.milestones.length,6));return this.milestones.slice(0,e).map(t=>{const r=t.name||t.title||"Untitled milestone",i=r.length>50?`${r.slice(0,47)}`:r,n=Number(t.progress),s=Number.isFinite(n)?Math.max(0,Math.min(100,n)):0,a=(t.status||"").toLowerCase(),o=t.start||t.startDate||t.startedAt||"",l=t.end||t.targetDate||t.dueDate||"",c=Array.isArray(t.linkedTickets)?t.linkedTickets:[],u=Array.isArray(t.linkedFeatures)?t.linkedFeatures:[],h=Array.isArray(t.linkedModules)?t.linkedModules:[],d=[];c.slice(0,3).forEach(y=>d.push(`Ticket #${y}`)),d.length<3&&u.slice(0,3-d.length).forEach(y=>d.push(`Feature #${y}`)),d.length<3&&h.slice(0,3-d.length).forEach(y=>d.push(`Module ${y}`));const p=c.length+u.length+h.length;return{id:t.id??i,title:i,fullTitle:r,status:a,progress:s,start:o,end:l,linkedPreview:d,totalLinked:p,milestone:t}})},enhancedMilestones(){return this.milestones.map(e=>{const t=e.name||e.title||"Untitled milestone",r=Number(e.progress);return{...e,name:t,title:t,status:(e.status||"").toLowerCase(),progress:Number.isFinite(r)?Math.max(0,Math.min(100,Math.round(r))):0,notes:e.notes||e.description||"",linkedTickets:Array.isArray(e.linkedTickets)?e.linkedTickets:[],linkedFeatures:Array.isArray(e.linkedFeatures)?e.linkedFeatures:[],linkedModules:Array.isArray(e.linkedModules)?e.linkedModules:[],dependencies:Array.isArray(e.dependencies)?e.dependencies:[]}})},lastUpdated(){var e,t;return((e=this.state)==null?void 0:e.lastUpdated)||((t=this.summary)==null?void 0:t.generatedAt)||""}},watch:{active(e){e&&this.ensureData()}},mounted(){this.active&&this.ensureData()},methods:{ensureData(){!this.versions.length&&!this.versionsLoading&&this.onFetchVersions({background:!0}),!this.milestones.length&&!this.loading&&this.handleRefresh()},handleRefresh(){this.onRefresh({background:!1})},handleGenerate(){this.onGenerate()},handleExport(){this.onExport()},handleDownload(){this.onDownload()},handleRollback(){this.onRollback(this.selectedVersion)},setView(e){e!==this.viewMode&&this.onViewMode(e)},formatStatus(e){return e?e.split(/[\s_-]+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "):""},formatVersionLabel(e){return`${e.createdAt?new Date(e.createdAt).toLocaleString():e.filename} (${Math.round((e.size||0)/1024)} KB)`},handleMilestoneUpdate(e){if(!e||!e.id||this.loading||this.updating)return;const t={...e,actor:"ui:roadmap-tab"};this.onUpdateMilestone(t)}}},MK={class:"roadmap-toolbar"},PK={class:"roadmap-actions"},IK=["disabled"],FK=["disabled"],OK=["disabled"],NK={class:"roadmap-meta"},$K={class:"roadmap-version-picker"},zK=["disabled","value"],HK=["value"],qK=["disabled"],WK={key:0,class:"roadmap-updated"},UK={key:0,class:"inline-error"},VK={key:1,class:"inline-success"},jK={key:0,class:"success-timestamp"},GK={key:2,class:"loading-message"},KK={key:3,class:"roadmap-stats"},YK={class:"roadmap-stat"},XK={class:"roadmap-stat-value"},ZK={class:"roadmap-stat"},QK={class:"roadmap-stat-value"},JK={class:"roadmap-stat"},eY={class:"roadmap-stat-value"},tY={class:"roadmap-stat"},rY={class:"roadmap-stat-value"},iY={key:4,class:"roadmap-container"},nY={key:0,class:"roadmap-minimal"},sY={class:"minimal-milestone-grid"},aY=["title"],oY={class:"minimal-card-header"},lY={class:"minimal-card-progress"},cY={class:"minimal-card-progress-value"},uY={class:"minimal-card-meta"},hY={key:0,class:"meta-item"},dY={key:1,class:"meta-item"},fY={key:2,class:"meta-item meta-linked"},pY={key:0,class:"meta-more"},vY={key:5,class:"roadmap-history"},gY={class:"history-date"},mY={class:"history-reason"},yY={class:"history-count"},_Y={key:6,class:"empty-state"};function bY(e,t,r,i,n,s){const a=ot("RoadmapViewToggle"),o=ot("RoadmapDetailedView");return j(),G("div",{class:Ye(["tab-content roadmap-tab",{active:r.active}])},[B("header",MK,[B("div",PK,[B("button",{class:"btn",type:"button",disabled:r.loading||r.updating,onClick:t[0]||(t[0]=(...l)=>s.handleRefresh&&s.handleRefresh(...l))}," Refresh",8,IK),B("button",{class:"btn feature",type:"button",disabled:r.loading||r.updating,onClick:t[1]||(t[1]=(...l)=>s.handleGenerate&&s.handleGenerate(...l))}," Generate",8,FK),B("button",{class:"btn doc",type:"button",disabled:r.loading||r.updating,onClick:t[2]||(t[2]=(...l)=>s.handleExport&&s.handleExport(...l))}," Export JSON",8,OK),B("button",{class:"btn secondary",type:"button",onClick:t[3]||(t[3]=(...l)=>s.handleDownload&&s.handleDownload(...l))}," Download Snapshot")]),st(a,{view:r.viewMode,disabled:r.loading||r.updating,onChange:s.setView},null,8,["view","disabled","onChange"])]),B("section",NK,[B("div",$K,[t[8]||(t[8]=B("label",{for:"roadmap-version-select"},"Version history",-1)),B("select",{id:"roadmap-version-select",disabled:r.versionsLoading||r.loading||r.updating,value:r.selectedVersion,onChange:t[4]||(t[4]=l=>r.onSelectVersion(l.target.value||""))},[t[7]||(t[7]=B("option",{value:""},"Current state",-1)),(j(!0),G(Pe,null,Ke(r.versions,l=>(j(),G("option",{key:l.filename,value:l.filename},re(s.formatVersionLabel(l)),9,HK))),128))],40,zK),B("button",{class:"btn secondary",type:"button",disabled:!r.selectedVersion||r.loading||r.updating,onClick:t[5]||(t[5]=(...l)=>s.handleRollback&&s.handleRollback(...l))},"  Rollback ",8,qK)]),s.lastUpdated?(j(),G("div",WK,[t[9]||(t[9]=B("span",null,"Last updated:",-1)),B("strong",null,re(s.lastUpdated),1)])):me("",!0)]),r.error?(j(),G("p",UK," "+re(r.error),1)):me("",!0),!r.error&&r.updateMessage?(j(),G("p",VK,[dt(" "+re(r.updateMessage),1),r.updateTimestamp?(j(),G("span",jK," ("+re(r.updateTimestamp)+")",1)):me("",!0)])):me("",!0),r.loading?(j(),G("p",GK,"Loading roadmap")):me("",!0),s.hasSummary?(j(),G("div",KK,[B("div",YK,[t[10]||(t[10]=B("div",{class:"roadmap-stat-label"},"Tickets",-1)),B("div",XK,re(s.summary.ticketCount),1)]),B("div",ZK,[t[11]||(t[11]=B("div",{class:"roadmap-stat-label"},"Modules",-1)),B("div",QK,re(s.summary.moduleCount),1)]),B("div",JK,[t[12]||(t[12]=B("div",{class:"roadmap-stat-label"},"Features",-1)),B("div",eY,re(s.summary.featureCount),1)]),B("div",tY,[t[13]||(t[13]=B("div",{class:"roadmap-stat-label"},"Source",-1)),B("div",rY,re(s.summary.source),1)])])):me("",!0),s.hasMilestones?(j(),G("section",iY,[r.viewMode==="minimal"?(j(),G("div",nY,[t[18]||(t[18]=B("h3",null,"Upcoming milestones",-1)),B("ul",sY,[(j(!0),G(Pe,null,Ke(s.minimalCards,l=>(j(),G("li",{key:l.id,class:Ye(["minimal-milestone-card",l.status?`status-${l.status}`:""]),style:Oa({"--progress":l.progress+"%"}),title:l.fullTitle},[B("header",oY,[B("h4",null,re(l.title),1),l.status?(j(),G("span",{key:0,class:Ye(["status-pill",`status-pill-${l.status}`])},re(s.formatStatus(l.status)),3)):me("",!0)]),B("div",lY,[t[14]||(t[14]=B("span",{class:"minimal-card-progress-bar"},null,-1)),B("span",cY,re(l.progress)+"%",1)]),B("dl",uY,[l.start?(j(),G("div",hY,[t[15]||(t[15]=B("dt",null,"Start",-1)),B("dd",null,re(l.start),1)])):me("",!0),l.end?(j(),G("div",dY,[t[16]||(t[16]=B("dt",null,"Target",-1)),B("dd",null,re(l.end),1)])):me("",!0),l.linkedPreview.length?(j(),G("div",fY,[t[17]||(t[17]=B("dt",null,"Linked",-1)),B("dd",null,[(j(!0),G(Pe,null,Ke(l.linkedPreview,c=>(j(),G("span",{key:c},re(c),1))),128)),l.totalLinked>l.linkedPreview.length?(j(),G("span",pY,"+"+re(l.totalLinked-l.linkedPreview.length)+"more",1)):me("",!0)])])):me("",!0)])],14,aY))),128))]),s.milestones.length>s.minimalCards.length?(j(),G("button",{key:0,class:"btn ghost",type:"button",onClick:t[6]||(t[6]=l=>s.setView("detailed"))},"View full timeline ")):me("",!0)])):(j(),$t(o,{key:1,milestones:s.enhancedMilestones,disabled:r.loading||r.updating,onUpdateMilestone:s.handleMilestoneUpdate},null,8,["milestones","disabled","onUpdateMilestone"]))])):me("",!0),s.history.length?(j(),G("section",vY,[t[19]||(t[19]=B("h3",null,"Recent updates",-1)),B("ul",null,[(j(!0),G(Pe,null,Ke(s.history,l=>(j(),G("li",{key:l.timestamp},[B("span",gY,re(l.timestamp),1),B("span",mY,re(l.reason),1),B("span",yY,"Tickets "+re(l.ticketCount)+"  Modules "+re(l.moduleCount)+"  Features "+re(l.featureCount),1)]))),128))])])):me("",!0),!r.loading&&!s.hasMilestones?(j(),G("p",_Y,"No roadmap data yet. Generate a roadmap to get started.")):me("",!0)],2)}const CY=ht(RK,[["render",bY]]),wY={name:"SpecsTab",props:{active:{type:Boolean,default:!1},currentPhase:{type:String,default:"Interview"},questions:{type:Array,default:()=>[]},exportFormat:{type:String,default:"json"},generatedSpec:{type:String,default:""},latestSpecMeta:{type:Object,default:null},cliSessions:{type:Array,default:()=>[]},cliSessionsLoading:{type:Boolean,default:!1},cliSessionsError:{type:String,default:""},selectedSessionId:{type:String,default:null},sessionDetails:{type:Object,default:null},sessionDetailsError:{type:String,default:""},cliGateLog:{type:Array,default:()=>[]},findCliQuestionPrompt:{type:Function,required:!0},formatCliTimestamp:{type:Function,required:!0},formatCliSessionStatus:{type:Function,required:!0},formatGateTimestamp:{type:Function,required:!0},formatGateContext:{type:Function,required:!0}},emits:["generate","refresh-sessions","view-session","close-session","answer","update:export-format","reload-questions"],data(){return{reloadingQuestions:!1,questionDiff:null}},computed:{hasQuestionDiff(){return!!(this.questionDiff&&(this.questionDiff.sections&&this.questionDiff.sections.length||this.questionDiff.questions&&this.questionDiff.questions.length))},questionDiffSummary(){if(!this.questionDiff)return null;const e=this.questionDiff.sections||[],t=this.questionDiff.questions||[];return{sectionsAdded:e.filter(r=>r.type==="added").length,sectionsRemoved:e.filter(r=>r.type==="removed").length,sectionsUpdated:e.filter(r=>r.type==="updated").length,questionsAdded:t.filter(r=>r.type==="added").length,questionsRemoved:t.filter(r=>r.type==="removed").length,questionsUpdated:t.filter(r=>r.type==="updated").length}},diffHighlights(){if(!this.questionDiff)return{sections:[],questions:[]};const e=this.questionDiff.sections||[],t=this.questionDiff.questions||[];return{sections:e.slice(0,3),questions:t.slice(0,5)}}},methods:{emitAnswer(e){this.$emit("answer",e)},onExportFormatChange(e){this.$emit("update:export-format",e)},async reloadQuestions(){const e=t=>{typeof window<"u"&&typeof window.alert=="function"?window.alert(t):console.warn(t)};this.reloadingQuestions=!0,this.questionDiff=null;try{const t=typeof globalThis.fetch=="function"?globalThis.fetch.bind(globalThis):null;if(!t)throw new Error("Fetch API is unavailable in this environment");const r=await t("/api/interviews/reload",{method:"POST",headers:{"Content-Type":"application/json"}}),i=await r.json();if(r.ok&&i.success){const n=i.diff||{sections:[],questions:[]};if(this.questionDiff=n,this.$emit("reload-questions",i),this.$toast){const s=n.sections?n.sections.length:0,a=n.questions?n.questions.length:0,o=s||a?` Sections: ${s}, Questions: ${a}`:"No structural changes detected";this.$toast.success(`Reloaded ${i.questionsReloaded} questions  ${o}`)}else console.log(` Questions reloaded: ${i.questionsReloaded} questions (v${i.newVersion})`,n)}else throw new Error(i.error||"Failed to reload questions")}catch(t){console.error("Failed to reload questions:",t),this.$toast?this.$toast.error(`Failed to reload: ${t.message}`):e(`Failed to reload questions: ${t.message}`)}finally{this.reloadingQuestions=!1}}}},SY={class:"specs-layout"},kY={class:"spec-builder"},xY={class:"spec-builder-header"},TY=["disabled"],EY={key:0},AY={key:1},BY={class:"spec-phase-meta"},DY={class:"spec-phase-value"},LY={key:0,class:"question-diff-panel"},RY={class:"question-diff-header"},MY={class:"question-diff-summary"},PY={class:"question-diff-body"},IY={key:0,class:"question-diff-group"},FY={key:0,class:"question-diff-changes"},OY={key:0},NY={key:1},$Y={key:2},zY={key:1,class:"question-diff-group"},HY={key:0,class:"interview-section-header"},qY={key:0,class:"interview-section-description"},WY={class:"question-label"},UY=["onUpdate:modelValue","placeholder","onChange"],VY=["onUpdate:modelValue","placeholder","onChange"],jY=["onUpdate:modelValue","onChange"],GY=["value"],KY={key:4,class:"question-help"},YY={class:"spec-export-controls"},XY={class:"spec-export-field"},ZY=["value"],QY={key:0,class:"specs-latest-meta"},JY={key:0,class:"generated-spec-wrapper"},eX={class:"api-spec"},tX={class:"cli-sessions-panel"},rX={class:"cli-sessions-header"},iX=["disabled"],nX={key:0,class:"form-error"},sX={key:1,class:"cli-sessions-empty"},aX={key:2,class:"cli-sessions-list"},oX=["onClick"],lX={class:"cli-session-meta"},cX={class:"cli-session-meta specs-cli-session-meta"},uX={key:3,class:"cli-session-detail"},hX={class:"cli-session-detail-header"},dX={class:"cli-session-detail-title"},fX={class:"cli-session-detail-meta"},pX={key:0,class:"form-error"},vX={key:1,class:"cli-session-loading"},gX={class:"cli-session-section"},mX={key:0,class:"cli-session-empty-message"},yX={class:"cli-session-response-question"},_X={class:"cli-session-response-answer"},bX={key:0,class:"cli-session-section"},CX={key:0},wX={key:4,class:"cli-gate-log"},SX={class:"gate-list"},kX={class:"gate-meta"},xX={class:"gate-diagnostics"};function TX(e,t,r,i,n,s){return j(),G("div",{class:Ye(["tab-content",{active:r.active}])},[B("div",SY,[B("section",kY,[B("div",xY,[t[5]||(t[5]=B("h2",{class:"spec-builder-title"},"Intelligent Spec Builder",-1)),B("button",{class:"btn secondary",type:"button",disabled:n.reloadingQuestions,title:"Reload interview questions from disk",onClick:t[0]||(t[0]=(...a)=>s.reloadQuestions&&s.reloadQuestions(...a))},[n.reloadingQuestions?(j(),G("span",AY,"Reloading...")):(j(),G("span",EY," Reload Questions"))],8,TY)]),B("div",BY,[t[6]||(t[6]=B("span",{class:"spec-phase-label"},"Phase: ",-1)),B("span",DY,re(r.currentPhase),1)]),st(zE,{name:"fade"},{default:d1(()=>[s.hasQuestionDiff?(j(),G("section",LY,[B("header",RY,[t[7]||(t[7]=B("h4",null,"Latest question changes",-1)),B("div",MY,[B("span",null,"Sections +"+re(s.questionDiffSummary.sectionsAdded)+" / ~"+re(s.questionDiffSummary.sectionsUpdated)+" / -"+re(s.questionDiffSummary.sectionsRemoved),1),B("span",null,"Questions +"+re(s.questionDiffSummary.questionsAdded)+" / ~"+re(s.questionDiffSummary.questionsUpdated)+" / -"+re(s.questionDiffSummary.questionsRemoved),1)])]),B("div",PY,[s.diffHighlights.sections.length?(j(),G("div",IY,[t[8]||(t[8]=B("h5",null,"Sections",-1)),B("ul",null,[(j(!0),G(Pe,null,Ke(s.diffHighlights.sections,a=>(j(),G("li",{key:a.id},[B("strong",null,re(a.title||a.id),1),dt("  "+re(a.type)+" ",1),a.changes?(j(),G("span",FY,[a.changes.added.length?(j(),G("span",OY,"+"+re(a.changes.added.length),1)):me("",!0),a.changes.updated.length?(j(),G("span",NY," ~"+re(a.changes.updated.length),1)):me("",!0),a.changes.removed.length?(j(),G("span",$Y," -"+re(a.changes.removed.length),1)):me("",!0)])):me("",!0)]))),128))])])):me("",!0),s.diffHighlights.questions.length?(j(),G("div",zY,[t[9]||(t[9]=B("h5",null,"Questions",-1)),B("ul",null,[(j(!0),G(Pe,null,Ke(s.diffHighlights.questions,a=>(j(),G("li",{key:a.sectionId+"-"+a.id},[B("strong",null,re(a.id),1),dt("  "+re(a.type)+" ",1),a.previousQuestion?(j(),G(Pe,{key:0},[dt(" (updated)")],64)):me("",!0)]))),128))])])):me("",!0)])])):me("",!0)]),_:1}),(j(!0),G(Pe,null,Ke(r.questions,a=>(j(),G("article",{key:a.id,class:"question-card"},[a.isSectionFirst?(j(),G("header",HY,[B("h3",null,re(a.sectionTitle),1),a.sectionDescription?(j(),G("p",qY,re(a.sectionDescription),1)):me("",!0)])):me("",!0),B("div",WY,re(a.prompt),1),a.type==="text"?an((j(),G("input",{key:1,"onUpdate:modelValue":o=>a.answer=o,placeholder:a.placeholder,onChange:o=>s.emitAnswer(a)},null,40,UY)),[[Zc,a.answer]]):a.type==="textarea"?an((j(),G("textarea",{key:2,"onUpdate:modelValue":o=>a.answer=o,rows:"4",placeholder:a.placeholder,onChange:o=>s.emitAnswer(a)},null,40,VY)),[[Zc,a.answer]]):a.type==="select"?an((j(),G("select",{key:3,"onUpdate:modelValue":o=>a.answer=o,onChange:o=>s.emitAnswer(a)},[t[10]||(t[10]=B("option",{value:""},"Choose...",-1)),(j(!0),G(Pe,null,Ke(a.options||[],o=>(j(),G("option",{key:o,value:o},re(o),9,GY))),128))],40,jY)),[[Go,a.answer]]):me("",!0),a.help?(j(),G("div",KY,re(a.help),1)):me("",!0)]))),128)),B("div",YY,[B("div",XY,[t[12]||(t[12]=B("label",{class:"spec-export-label"},"Export Format",-1)),B("select",{value:r.exportFormat,class:"spec-export-select",onChange:t[1]||(t[1]=a=>s.onExportFormatChange(a.target.value))},[...t[11]||(t[11]=[B("option",{value:"json"},"JSON",-1),B("option",{value:"markdown"},"Markdown",-1),B("option",{value:"github"},"GitHub Spec Kit",-1)])],40,ZY)]),B("button",{class:"btn feature",type:"button",onClick:t[2]||(t[2]=a=>e.$emit("generate"))},"Generate & Save Spec"),r.latestSpecMeta?(j(),G("div",QY," Saved as "+re(r.latestSpecMeta.filename),1)):me("",!0)]),r.generatedSpec?(j(),G("div",JY,[t[13]||(t[13]=B("h3",{class:"generated-spec-heading"},"Generated Spec:",-1)),B("pre",eX,re(r.generatedSpec),1)])):me("",!0)]),B("aside",tX,[B("header",rX,[t[14]||(t[14]=B("div",null,[B("h3",{class:"cli-sessions-title"},"CLI Sessions"),B("p",{class:"cli-sessions-subtitle"},"Terminal interviews mirrored in real time")],-1)),B("button",{class:"btn secondary",type:"button",disabled:r.cliSessionsLoading,onClick:t[3]||(t[3]=a=>e.$emit("refresh-sessions"))},re(r.cliSessionsLoading?"Refreshing":"Refresh"),9,iX)]),r.cliSessionsError?(j(),G("p",nX,re(r.cliSessionsError),1)):!r.cliSessionsLoading&&!r.cliSessions.length?(j(),G("p",sX,"No CLI interviews recorded yet.")):me("",!0),r.cliSessions.length?(j(),G("div",aX,[(j(!0),G(Pe,null,Ke(r.cliSessions,a=>(j(),G("button",{key:a.sessionId,type:"button",class:"cli-session-item",onClick:o=>e.$emit("view-session",a.sessionId)},[B("div",lX,[B("strong",null,re(a.command||"/"+a.category),1),B("span",{class:Ye(["cli-session-status",{complete:a.completed}])},re(r.formatCliSessionStatus(a)),3)]),B("div",cX,[B("span",null,"Updated "+re(r.formatCliTimestamp(a.updatedAt||a.createdAt)),1)])],8,oX))),128))])):me("",!0),r.selectedSessionId||r.sessionDetails?(j(),G("section",uX,[B("header",hX,[B("div",null,[B("h4",dX," Session "+re(r.sessionDetails&&r.sessionDetails.sessionId||r.selectedSessionId),1),B("p",fX,re(r.sessionDetails&&(r.sessionDetails.command||"/"+r.sessionDetails.category)||"Loading")+"  "+re(r.formatCliTimestamp(r.sessionDetails?r.sessionDetails.updatedAt||r.sessionDetails.createdAt:null)),1)]),B("button",{class:"btn secondary",type:"button",onClick:t[4]||(t[4]=a=>e.$emit("close-session"))},"Close")]),r.sessionDetailsError?(j(),G("div",pX,re(r.sessionDetailsError),1)):r.sessionDetails?(j(),G(Pe,{key:2},[B("section",gX,[t[15]||(t[15]=B("h5",{class:"cli-session-section-title"},"Responses",-1)),!r.sessionDetails.responses||!r.sessionDetails.responses.length?(j(),G("div",mX," No responses recorded yet. ")):me("",!0),(j(!0),G(Pe,null,Ke(r.sessionDetails.responses||[],a=>(j(),G("div",{key:a.questionId,class:"cli-session-response"},[B("div",yX,re(r.findCliQuestionPrompt(r.sessionDetails,a.questionId)),1),B("div",_X,re(a.answer),1)]))),128))]),r.sessionDetails.artifacts&&r.sessionDetails.artifacts.length?(j(),G("section",bX,[t[16]||(t[16]=B("h5",{class:"cli-session-artifacts-title"},"Artifacts",-1)),(j(!0),G(Pe,null,Ke(r.sessionDetails.artifacts,a=>(j(),G("div",{key:a.filename||a.path,class:"cli-session-artifact"},[B("div",null,re(a.filename||a.path),1),a.path?(j(),G("code",CX,re(a.path),1)):me("",!0)]))),128))])):me("",!0)],64)):(j(),G("div",vX,"Loading session details"))])):me("",!0),r.cliGateLog.length?(j(),G("section",wX,[t[17]||(t[17]=B("h4",null,"Recent Alignment Gates",-1)),B("ul",SX,[(j(!0),G(Pe,null,Ke(r.cliGateLog,a=>{var o,l;return j(),G("li",{key:a.timestamp},[B("div",kX,re(a.command)+"  "+re(r.formatGateTimestamp(a.timestamp)),1),B("div",xX," DAIC: "+re(((o=a.diagnostics)==null?void 0:o.daicState)||"unknown")+"  Context: "+re(r.formatGateContext(a))+"  Mode: "+re(((l=a.diagnostics)==null?void 0:l.ultraThinkMode)||"default"),1)])}),128))])])):me("",!0)])])],2)}const EX=ht(wY,[["render",TX]]),AX={name:"DiagramsTab",props:{active:{type:Boolean,default:!1},mermaidCode:{type:String,default:""},generateDiagram:{type:Function,default:null},generateFromModules:{type:Function,default:null},renderMermaid:{type:Function,default:null},updateMermaidCode:{type:Function,default:null},mermaidError:{type:String,default:""}},watch:{active(e){e&&this.mermaidCode&&typeof this.renderMermaid=="function"&&this.renderMermaid()}},methods:{forwardGenerateDiagram(e){typeof this.generateDiagram=="function"&&this.generateDiagram(e)},forwardGenerateFromModules(){typeof this.generateFromModules=="function"&&this.generateFromModules()},forwardRenderMermaid(){typeof this.renderMermaid=="function"&&this.renderMermaid()},onMermaidInput(e){typeof this.updateMermaidCode=="function"&&this.updateMermaidCode(e)}}},BX={class:"controls"},DX={key:0,class:"diagram-status diagram-status--error",role:"alert"},LX=["value"];function RX(e,t,r,i,n,s){return j(),G("div",{class:Ye(["tab-content",{active:r.active}])},[B("div",BX,[B("button",{class:"btn",type:"button",onClick:t[0]||(t[0]=a=>s.forwardGenerateDiagram("architecture"))}," Architecture"),B("button",{class:"btn",type:"button",onClick:t[1]||(t[1]=a=>s.forwardGenerateDiagram("flow"))}," Flow"),B("button",{class:"btn",type:"button",onClick:t[2]||(t[2]=a=>s.forwardGenerateDiagram("sequence"))}," Sequence"),B("button",{class:"btn",type:"button",onClick:t[3]||(t[3]=a=>s.forwardGenerateDiagram("entity"))}," Entity"),B("button",{class:"btn secondary",type:"button",onClick:t[4]||(t[4]=(...a)=>s.forwardGenerateFromModules&&s.forwardGenerateFromModules(...a))}," From Modules")]),t[8]||(t[8]=B("div",{class:"mermaid-container"},[B("div",{id:"mermaid-output"})],-1)),r.mermaidError?(j(),G("div",DX,[t[7]||(t[7]=B("strong",null,"Mermaid Error",-1)),B("span",null,re(r.mermaidError),1)])):me("",!0),B("textarea",{value:r.mermaidCode,class:"diagram-editor",placeholder:"Mermaid code...",onInput:t[5]||(t[5]=a=>s.onMermaidInput(a.target.value))},null,40,LX),B("button",{class:"btn",type:"button",onClick:t[6]||(t[6]=(...a)=>s.forwardRenderMermaid&&s.forwardRenderMermaid(...a))},"Render Diagram")],2)}const MX=ht(AX,[["render",RX]]),PX={name:"ApiTab",props:{active:{type:Boolean,default:!1},apiFormat:{type:String,default:"openapi"},apiSpecContent:{type:String,default:""},apiSpecWarnings:{type:Array,default:()=>[]},generateApiSpec:{type:Function,default:null},exportApiSpec:{type:Function,default:null},testApi:{type:Function,default:null},updateApiFormat:{type:Function,default:null}},methods:{forwardGenerateApiSpec(){typeof this.generateApiSpec=="function"&&this.generateApiSpec()},forwardExportApiSpec(){typeof this.exportApiSpec=="function"&&this.exportApiSpec()},forwardTestApi(){typeof this.testApi=="function"&&this.testApi()},onFormatChange(e){typeof this.updateApiFormat=="function"&&this.updateApiFormat(e)}}},IX={class:"controls"},FX=["value"],OX={key:0,class:"diagram-status diagram-status--warning",role:"status"},NX={class:"api-warning-list"},$X={class:"api-spec"};function zX(e,t,r,i,n,s){return j(),G("div",{class:Ye(["tab-content",{active:r.active}])},[B("div",IX,[B("button",{class:"btn",type:"button",onClick:t[0]||(t[0]=(...a)=>s.forwardGenerateApiSpec&&s.forwardGenerateApiSpec(...a))}," Generate API Spec"),B("select",{value:r.apiFormat,onChange:t[1]||(t[1]=a=>s.onFormatChange(a.target.value))},[...t[4]||(t[4]=[B("option",{value:"openapi"},"OpenAPI 3.0",-1),B("option",{value:"custom"},"Custom Lightweight",-1),B("option",{value:"json"},"JSON Schema",-1)])],40,FX),B("button",{class:"btn secondary",type:"button",onClick:t[2]||(t[2]=(...a)=>s.forwardExportApiSpec&&s.forwardExportApiSpec(...a))}," Export"),B("button",{class:"btn feature",type:"button",onClick:t[3]||(t[3]=(...a)=>s.forwardTestApi&&s.forwardTestApi(...a))}," Test Endpoints")]),r.apiSpecWarnings&&r.apiSpecWarnings.length?(j(),G("div",OX,[t[5]||(t[5]=B("strong",null,"Warnings",-1)),B("ul",NX,[(j(!0),G(Pe,null,Ke(r.apiSpecWarnings,(a,o)=>(j(),G("li",{key:"api-warning-"+o},re(a),1))),128))])])):me("",!0),B("div",$X,re(r.apiSpecContent),1)],2)}const HX=ht(PX,[["render",zX]]),qX={name:"StorybookFrame",props:{active:{type:Boolean,default:!1},theme:{type:String,default:"mole"},status:{type:String,default:""},frameVersion:{type:Number,default:0},onStart:{type:Function,default:null},onRefresh:{type:Function,default:null}},data(){return{starting:!1}},computed:{themeDisplay(){return this.theme.charAt(0).toUpperCase()+this.theme.slice(1)},iframeSrc(){const e="http://localhost:6006/",t=`globals=theme:${this.theme||"mole"}`;return`${e}?${t}`},frameKey(){return`${this.theme}-${this.frameVersion}`}},methods:{async triggerStart(){if(!this.starting){this.starting=!0;try{typeof this.onStart=="function"&&await this.onStart()}finally{this.starting=!1}}},triggerRefresh(){typeof this.onRefresh=="function"&&this.onRefresh({reason:"manual-refresh"})}}},WX={class:"controls"},UX=["disabled"],VX={key:0,class:"storybook-status"},jX={key:0,class:"storybook-shell"},GX=["src"],KX={class:"storybook-indicator"};function YX(e,t,r,i,n,s){return j(),G("div",{class:Ye(["tab-content",{active:r.active}])},[B("div",WX,[B("button",{class:"btn secondary",type:"button",onClick:t[0]||(t[0]=(...a)=>s.triggerStart&&s.triggerStart(...a)),disabled:n.starting},re(n.starting?"Starting":"Start Storybook"),9,UX),B("button",{class:"btn doc",type:"button",onClick:t[1]||(t[1]=(...a)=>s.triggerRefresh&&s.triggerRefresh(...a))},"  Refresh Frame "),r.status?(j(),G("span",VX,re(r.status),1)):me("",!0)]),r.active?(j(),G("div",jX,[(j(),G("iframe",{class:"storybook-frame",key:s.frameKey,src:s.iframeSrc,title:"Storybook"},null,8,GX)),B("div",KX," Theme: "+re(s.themeDisplay),1)])):me("",!0)],2)}const XX=ht(qX,[["render",YX]]),ZX={name:"TechStackTab",props:{active:{type:Boolean,default:!1},summary:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:""},exporting:{type:Boolean,default:!1},exportError:{type:String,default:""},exportResult:{type:Object,default:null}},emits:["refresh","export"],computed:{runtimePreview(){var t,r;return(((r=(t=this.summary)==null?void 0:t.dependencies)==null?void 0:r.items)||[]).slice(0,8)},runtimeRemainder(){var r,i;const e=((i=(r=this.summary)==null?void 0:r.dependencies)==null?void 0:i.total)||0,t=this.runtimePreview.length;return e>t?e-t:0},devPreview(){var t,r;return(((r=(t=this.summary)==null?void 0:t.devDependencies)==null?void 0:r.items)||[]).slice(0,8)},devRemainder(){var r,i;const e=((i=(r=this.summary)==null?void 0:r.devDependencies)==null?void 0:i.total)||0,t=this.devPreview.length;return e>t?e-t:0},frameworks(){var e;return((e=this.summary)==null?void 0:e.frameworks)||[]},moduleTypeBreakdown(){var t,r;const e=((r=(t=this.summary)==null?void 0:t.moduleSummary)==null?void 0:r.byType)||{};return Object.keys(e).sort().map(i=>({type:i,count:e[i]}))},summaryAgeSeconds(){var e,t;return((t=(e=this.summary)==null?void 0:e.cacheInfo)==null?void 0:t.ageSeconds)??null},summaryAgeLabel(){return this.summaryAgeSeconds===null||this.summaryAgeSeconds===void 0?null:this.formatRelativeAge(this.summaryAgeSeconds)},summaryIsStale(){var e,t;return!!((t=(e=this.summary)==null?void 0:e.cacheInfo)!=null&&t.isStale)},categoryBuckets(){return!this.summary||!this.summary.dependencyCategories?[]:Object.entries(this.summary.dependencyCategories).map(([t,r])=>{const i=Array.isArray(r==null?void 0:r.items)?r.items:[];return{key:t,label:(r==null?void 0:r.label)||t,count:i.length,preview:i.slice(0,5),remaining:i.length>5?i.length-5:0}}).filter(t=>t.count>0).sort((t,r)=>t.label.localeCompare(r.label))}},methods:{formatPercent(e){return e==null||Number.isNaN(Number(e))?"":`${Math.max(0,Math.min(100,Number(e)))}%`},formatList(e){return!Array.isArray(e)||e.length===0?"":e.join(", ")},formatCategoryItem(e){if(!e)return"";const t=e.version?`@ ${e.version}`:"",r=e.source&&!e.source.startsWith("module:")?` (${e.source})`:e.source&&e.source.startsWith("module:")?` (${e.source.replace("module:","module ")})`:"";return`${e.name}${t}${r}`.trim()},formatTimestamp(e){if(!e)return"unknown";try{return new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"}).format(new Date(e))}catch{return e}}}},QX={key:0,class:"tech-stack-tab"},JX={class:"tech-stack-header"},eZ={class:"tech-stack-header__info"},tZ={key:0,class:"tech-stack-header__meta"},rZ={key:1,class:"tech-stack-header__meta"},iZ={class:"tech-stack-actions"},nZ=["disabled"],sZ=["disabled"],aZ={key:0,"aria-hidden":"true"},oZ={key:1,class:"tech-stack-spinner","aria-hidden":"true"},lZ={key:0,class:"tech-stack-banner tech-stack-banner--error",role:"alert"},cZ={key:1,class:"tech-stack-banner tech-stack-banner--warning",role:"alert"},uZ={key:2,class:"tech-stack-banner tech-stack-banner--success",role:"status"},hZ={key:3,class:"tech-stack-banner tech-stack-banner--warning",role:"status"},dZ={key:4,class:"tech-stack-loading",role:"status","aria-live":"polite"},fZ={key:0,class:"tech-stack-cards"},pZ={class:"tech-stack-card"},vZ={class:"tech-stack-card"},gZ={class:"tech-stack-list"},mZ={class:"tech-stack-version"},yZ={key:0,class:"tech-stack-remainder"},_Z={class:"tech-stack-card"},bZ={class:"tech-stack-list"},CZ={class:"tech-stack-version"},wZ={key:0,class:"tech-stack-remainder"},SZ={class:"tech-stack-card"},kZ={key:0},xZ={key:1,class:"tech-stack-chips"},TZ={key:0,class:"tech-stack-card tech-stack-card--categories"},EZ={class:"tech-stack-category-grid"},AZ={class:"tech-stack-category__header"},BZ={class:"tech-stack-category__label"},DZ={class:"tech-stack-category__count"},LZ={class:"tech-stack-category__list"},RZ={key:0,class:"tech-stack-remainder"},MZ={class:"tech-stack-card"},PZ={class:"tech-stack-breakdown"},IZ={key:1,class:"tech-stack-table-section"},FZ={class:"tech-stack-table-wrapper"},OZ={class:"tech-stack-table"},NZ={scope:"row"},$Z={key:2,class:"tech-stack-cli-section"},zZ={class:"tech-stack-cli-grid"},HZ={class:"tech-stack-cli-card"},qZ={key:0,class:"tech-stack-empty"},WZ={key:1},UZ={class:"tech-stack-cli-question"},VZ={class:"tech-stack-cli-answer"},jZ={class:"tech-stack-cli-meta"},GZ={class:"tech-stack-cli-card"},KZ={key:0,class:"tech-stack-empty"},YZ={key:1},XZ={class:"tech-stack-cli-question"},ZZ={class:"tech-stack-cli-answer"},QZ={class:"tech-stack-cli-meta"},JZ={key:3,class:"tech-stack-empty"};function eQ(e,t,r,i,n,s){return r.active?(j(),G("section",QX,[B("header",JX,[B("div",eZ,[t[5]||(t[5]=B("h2",null,"Tech Stack Snapshot",-1)),r.summary?(j(),G("p",tZ,[t[3]||(t[3]=dt(" Generated ",-1)),B("span",null,re(s.formatTimestamp(r.summary.generatedAt)),1),s.summaryAgeLabel?(j(),G(Pe,{key:0},[t[2]||(t[2]=dt(" Age: ",-1)),B("span",null,re(s.summaryAgeLabel),1)],64)):me("",!0),t[4]||(t[4]=dt("  CLI sessions analysed: ",-1)),B("span",null,re(r.summary.cliInsights.sessionsAnalyzed),1)])):(j(),G("p",rZ,"Gathering project insights"))]),B("div",iZ,[B("button",{type:"button",class:"tech-stack-button",disabled:r.loading||r.exporting,onClick:t[0]||(t[0]=a=>e.$emit("refresh"))},[...t[6]||(t[6]=[B("span",{"aria-hidden":"true"},"",-1),dt(" Refresh ",-1)])],8,nZ),B("button",{type:"button",class:"tech-stack-button tech-stack-button--accent",disabled:r.exporting||r.loading,onClick:t[1]||(t[1]=a=>e.$emit("export"))},[r.exporting?(j(),G("span",oZ)):(j(),G("span",aZ,"")),t[7]||(t[7]=dt(" Export Markdown ",-1))],8,sZ)])]),r.error?(j(),G("div",lZ,re(r.error),1)):me("",!0),r.exportError?(j(),G("div",cZ,re(r.exportError),1)):me("",!0),r.exportResult?(j(),G("div",uZ,[t[8]||(t[8]=dt(" Tech stack export saved as ",-1)),B("code",null,re(r.exportResult.relativePath||r.exportResult.path),1)])):me("",!0),s.summaryIsStale?(j(),G("div",hZ," Tech stack snapshot is older than the recommended window. Consider refreshing to capture recent changes. ")):me("",!0),r.loading?(j(),G("div",dZ,[...t[9]||(t[9]=[B("span",{class:"tech-stack-spinner","aria-hidden":"true"},null,-1),B("p",null,"Refreshing tech stack summary",-1)])])):(j(),G(Pe,{key:5},[r.summary?(j(),G("div",fZ,[B("article",pZ,[t[13]||(t[13]=B("h3",null,"Package",-1)),B("ul",null,[B("li",null,[t[10]||(t[10]=B("strong",null,"Name:",-1)),dt(" "+re(r.summary.package.name),1)]),B("li",null,[t[11]||(t[11]=B("strong",null,"Version:",-1)),dt(" "+re(r.summary.package.version),1)]),B("li",null,[t[12]||(t[12]=B("strong",null,"Manager:",-1)),dt(" "+re(r.summary.package.packageManager),1)])])]),B("article",vZ,[t[15]||(t[15]=B("h3",null,"Dependencies",-1)),B("p",null,[t[14]||(t[14]=dt("Total runtime packages: ",-1)),B("strong",null,re(r.summary.dependencies.total),1)]),B("ul",gZ,[(j(!0),G(Pe,null,Ke(s.runtimePreview,a=>(j(),G("li",{key:a.name},[B("code",null,re(a.name),1),B("span",mZ,re(a.version),1)]))),128))]),s.runtimeRemainder?(j(),G("p",yZ,"+ "+re(s.runtimeRemainder)+" more",1)):me("",!0)]),B("article",_Z,[t[17]||(t[17]=B("h3",null,"Dev Dependencies",-1)),B("p",null,[t[16]||(t[16]=dt("Total tooling packages: ",-1)),B("strong",null,re(r.summary.devDependencies.total),1)]),B("ul",bZ,[(j(!0),G(Pe,null,Ke(s.devPreview,a=>(j(),G("li",{key:`dev-${a.name}`},[B("code",null,re(a.name),1),B("span",CZ,re(a.version),1)]))),128))]),s.devRemainder?(j(),G("p",wZ,"+ "+re(s.devRemainder)+" more",1)):me("",!0)]),B("article",SZ,[t[18]||(t[18]=B("h3",null,"Frameworks",-1)),s.frameworks.length?(j(),G("ul",xZ,[(j(!0),G(Pe,null,Ke(s.frameworks,a=>(j(),G("li",{key:a},re(a),1))),128))])):(j(),G("p",kZ,"No frameworks detected yet."))]),s.categoryBuckets.length?(j(),G("article",TZ,[t[19]||(t[19]=B("h3",null,"Dependency Categories",-1)),B("div",EZ,[(j(!0),G(Pe,null,Ke(s.categoryBuckets,a=>(j(),G("article",{key:a.key,class:"tech-stack-category"},[B("header",AZ,[B("span",BZ,re(a.label),1),B("span",DZ,re(a.count),1)]),B("ul",LZ,[(j(!0),G(Pe,null,Ke(a.preview,o=>(j(),G("li",{key:a.key+"-"+o.name+(o.source||"")},re(s.formatCategoryItem(o)),1))),128))]),a.remaining?(j(),G("p",RZ,"+ "+re(a.remaining)+" more",1)):me("",!0)]))),128))])])):me("",!0),B("article",MZ,[t[24]||(t[24]=B("h3",null,"Modules",-1)),B("ul",null,[B("li",null,[t[20]||(t[20]=B("strong",null,"Total:",-1)),dt(" "+re(r.summary.moduleSummary.total),1)]),B("li",null,[t[21]||(t[21]=B("strong",null,"Detected:",-1)),dt(" "+re(r.summary.moduleSummary.detectedCount),1)]),B("li",null,[t[22]||(t[22]=B("strong",null,"Manual:",-1)),dt(" "+re(r.summary.moduleSummary.manualCount),1)]),B("li",null,[t[23]||(t[23]=B("strong",null,"External deps:",-1)),dt(" "+re(r.summary.moduleSummary.externalDependencyCount),1)])]),B("dl",PZ,[(j(!0),G(Pe,null,Ke(s.moduleTypeBreakdown,a=>(j(),G(Pe,{key:a.type},[B("dt",null,re(a.type),1),B("dd",null,re(a.count),1)],64))),128))])])])):me("",!0),r.summary&&r.summary.moduleSummary.details.length?(j(),G("section",IZ,[t[26]||(t[26]=B("header",null,[B("h3",null,"Module Catalogue"),B("p",null,"Source, dependencies, and frameworks for every module.")],-1)),B("div",FZ,[B("table",OZ,[t[25]||(t[25]=B("thead",null,[B("tr",null,[B("th",{scope:"col"},"Module"),B("th",{scope:"col"},"Type"),B("th",{scope:"col"},"Source"),B("th",{scope:"col"},"Health"),B("th",{scope:"col"},"Coverage"),B("th",{scope:"col"},"Frameworks"),B("th",{scope:"col"},"Dependencies"),B("th",{scope:"col"},"External")])],-1)),B("tbody",null,[(j(!0),G(Pe,null,Ke(r.summary.moduleSummary.details,a=>(j(),G("tr",{key:a.id},[B("th",NZ,re(a.name||a.id),1),B("td",null,re(a.type),1),B("td",null,re(a.manual?"manual":a.source),1),B("td",null,re(s.formatPercent(a.health)),1),B("td",null,re(s.formatPercent(a.coverage)),1),B("td",null,re(s.formatList(a.frameworks)),1),B("td",null,re(s.formatList(a.dependencies)),1),B("td",null,re(s.formatList(a.externalDependencies)),1)]))),128))])])])])):me("",!0),r.summary?(j(),G("section",$Z,[t[29]||(t[29]=B("header",null,[B("h3",null,"CLI Insights"),B("p",null,"Latest answers collected from interactive interviews.")],-1)),B("div",zZ,[B("article",HZ,[t[27]||(t[27]=B("h4",null,"Project Context",-1)),r.summary.cliInsights.project.length?(j(),G("ul",WZ,[(j(!0),G(Pe,null,Ke(r.summary.cliInsights.project,a=>(j(),G("li",{key:`project-${a.questionId}`},[B("p",UZ,re(a.prompt),1),B("p",VZ,re(a.answer),1),B("p",jZ,re(s.formatTimestamp(a.recordedAt)),1)]))),128))])):(j(),G("p",qZ,"No project-level responses yet."))]),B("article",GZ,[t[28]||(t[28]=B("h4",null,"Module Context",-1)),r.summary.cliInsights.module.length?(j(),G("ul",YZ,[(j(!0),G(Pe,null,Ke(r.summary.cliInsights.module,a=>(j(),G("li",{key:`module-${a.questionId}`},[B("p",XZ,re(a.prompt),1),B("p",ZZ,re(a.answer),1),B("p",QZ,re(s.formatTimestamp(a.recordedAt)),1)]))),128))])):(j(),G("p",KZ,"No module-level responses yet."))])])])):me("",!0),r.summary?me("",!0):(j(),G("p",JZ,"No tech stack data available yet. Run module detection or CLI interviews to populate insights."))],64))])):me("",!0)}const tQ=ht(ZX,[["render",eQ]]),rQ={name:"DocsViewer",props:{docTitle:{type:String,default:"Project Overview"},generatedDocs:{type:String,default:""},docGenerationError:{type:String,default:""},latestDoc:{type:Object,default:null},latestDocContent:{type:String,default:""},latestDocHtml:{type:String,default:""},docGenerating:{type:Boolean,default:!1},runbookGenerationError:{type:String,default:""},latestRunbook:{type:Object,default:null},latestRunbookContent:{type:String,default:""},latestRunbookHtml:{type:String,default:""},runbookMessages:{type:Array,default:()=>[]}},computed:{fallbackDocText(){return this.latestDocContent?this.latestDocContent:this.latestDoc&&this.latestDoc.content?this.latestDoc.content:"Documentation file created."}}},iQ={class:"docs-viewer"},nQ={key:0,class:"form-error"},sQ={key:1,class:"form-error"},aQ={key:2,class:"doc-status"},oQ={class:"card"},lQ={class:"doc-card-title"},cQ=["innerHTML"],uQ={key:3,class:"card doc-export-card"},hQ={class:"doc-export-header"},dQ={class:"doc-filename"},fQ={class:"doc-meta"},pQ={key:0},vQ=["innerHTML"],gQ={key:1,class:"doc-preview"},mQ={key:4,class:"card runbook-card"},yQ={class:"runbook-card-header"},_Q={class:"runbook-filename"},bQ={class:"runbook-meta"},CQ={key:0,class:"runbook-messages"},wQ=["innerHTML"];function SQ(e,t,r,i,n,s){return j(),G("div",iQ,[r.docGenerationError?(j(),G("p",nQ,re(r.docGenerationError),1)):me("",!0),r.runbookGenerationError?(j(),G("p",sQ,re(r.runbookGenerationError),1)):me("",!0),r.docGenerating?(j(),G("div",aQ,"Generating documentation...")):me("",!0),B("div",oQ,[B("h2",lQ,re(r.docTitle),1),B("div",{innerHTML:r.generatedDocs},null,8,cQ)]),r.latestDoc?(j(),G("div",uQ,[B("div",hQ,[t[0]||(t[0]=B("h2",null,"Documentation Export",-1)),B("span",dQ,re(r.latestDoc.filename),1)]),B("div",fQ,[B("span",null,[t[1]||(t[1]=B("strong",null,"Workspace:",-1)),dt(" "+re(r.latestDoc.relativePath||r.latestDoc.path),1)]),r.latestDoc.format?(j(),G("span",pQ,[t[2]||(t[2]=B("strong",null,"Format:",-1)),dt(" "+re(r.latestDoc.format),1)])):me("",!0)]),r.latestDocHtml?(j(),G("div",{key:0,class:"doc-preview doc-preview-html",innerHTML:r.latestDocHtml},null,8,vQ)):(j(),G("pre",gQ,re(s.fallbackDocText),1))])):me("",!0),r.latestRunbook?(j(),G("div",mQ,[B("div",yQ,[t[3]||(t[3]=B("h2",null,"Operational Runbook",-1)),B("span",_Q,re(r.latestRunbook.filename),1)]),B("div",bQ,[B("span",null,[t[4]||(t[4]=B("strong",null,"Workspace:",-1)),dt(" "+re(r.latestRunbook.workspacePath),1)]),B("span",null,[t[5]||(t[5]=B("strong",null,"Export:",-1)),dt(" "+re(r.latestRunbook.specRelativePath),1)])]),r.runbookMessages&&r.runbookMessages.length?(j(),G("div",CQ,[t[6]||(t[6]=B("h4",null,"Interview Notes",-1)),B("ul",null,[(j(!0),G(Pe,null,Ke(r.runbookMessages,(a,o)=>(j(),G("li",{key:"runbook-msg-"+o},re(a),1))),128))])])):me("",!0),B("div",{class:"runbook-preview",innerHTML:r.latestRunbookHtml||r.latestRunbookContent},null,8,wQ)])):me("",!0)])}const kQ=ht(rQ,[["render",SQ]]),xQ={name:"DocsTab",components:{DocsViewer:kQ},props:{active:{type:Boolean,default:!1},docType:{type:String,default:"overview"},docTitle:{type:String,default:"Project Overview"},generatedDocs:{type:String,default:""},docGenerationError:{type:String,default:""},latestDocMeta:{type:Object,default:null},latestDocContent:{type:String,default:""},latestDocHtml:{type:String,default:""},docGenerating:{type:Boolean,default:!1},runbookGenerationError:{type:String,default:""},latestRunbook:{type:Object,default:null},latestRunbookContent:{type:String,default:""},latestRunbookHtml:{type:String,default:""},runbookMessages:{type:Array,default:()=>[]},generateDocs:{type:Function,default:null},exportDocs:{type:Function,default:null},updateDocType:{type:Function,default:null},startRunbookInterview:{type:Function,default:null},quickGenerateRunbook:{type:Function,default:null},runbookGenerating:{type:Boolean,default:!1},runbookInterviewLoading:{type:Boolean,default:!1}},computed:{runbookBusy(){return this.runbookGenerating||this.runbookInterviewLoading}},methods:{async forwardGenerateDocs(){typeof this.generateDocs=="function"&&await this.generateDocs()},forwardExportDocs(){typeof this.exportDocs=="function"&&this.exportDocs()},onDocTypeChange(e){typeof this.updateDocType=="function"&&this.updateDocType(e)},forwardStartRunbookInterview(){typeof this.startRunbookInterview=="function"&&this.startRunbookInterview()},forwardQuickGenerateRunbook(){typeof this.quickGenerateRunbook=="function"&&this.quickGenerateRunbook()}}},TQ={class:"controls"},EQ=["disabled"],AQ=["disabled"],BQ=["disabled"],DQ=["disabled"],LQ=["value"];function RQ(e,t,r,i,n,s){const a=ot("DocsViewer");return j(),G("div",{class:Ye(["tab-content",{active:r.active}])},[B("div",TQ,[B("button",{class:"btn feature",type:"button",onClick:t[0]||(t[0]=(...o)=>s.forwardStartRunbookInterview&&s.forwardStartRunbookInterview(...o)),disabled:s.runbookBusy}," Runbook Interview",8,EQ),B("button",{class:"btn doc",type:"button",onClick:t[1]||(t[1]=(...o)=>s.forwardGenerateDocs&&s.forwardGenerateDocs(...o)),disabled:r.docGenerating}," Generate Documentation",8,AQ),B("button",{class:"btn secondary",type:"button",onClick:t[2]||(t[2]=(...o)=>s.forwardExportDocs&&s.forwardExportDocs(...o)),disabled:r.docGenerating}," Export Markdown",8,BQ),B("button",{class:"btn secondary",type:"button",onClick:t[3]||(t[3]=(...o)=>s.forwardQuickGenerateRunbook&&s.forwardQuickGenerateRunbook(...o)),disabled:s.runbookBusy}," Generate Runbook",8,DQ),B("select",{value:r.docType,onChange:t[4]||(t[4]=o=>s.onDocTypeChange(o.target.value))},[...t[5]||(t[5]=[B("option",{value:"overview"},"Project Overview",-1),B("option",{value:"modules"},"Module Documentation",-1),B("option",{value:"api"},"API Documentation",-1),B("option",{value:"features"},"Feature Specifications",-1)])],40,LQ)]),st(a,{"doc-title":r.docTitle,"generated-docs":r.generatedDocs,"doc-generation-error":r.docGenerationError,"latest-doc":r.latestDocMeta,"latest-doc-content":r.latestDocContent,"latest-doc-html":r.latestDocHtml,"doc-generating":r.docGenerating,"runbook-generation-error":r.runbookGenerationError,"latest-runbook":r.latestRunbook,"latest-runbook-content":r.latestRunbookContent,"latest-runbook-html":r.latestRunbookHtml,"runbook-messages":r.runbookMessages},null,8,["doc-title","generated-docs","doc-generation-error","latest-doc","latest-doc-content","latest-doc-html","doc-generating","runbook-generation-error","latest-runbook","latest-runbook-content","latest-runbook-html","runbook-messages"])],2)}const MQ=ht(xQ,[["render",RQ]]),PQ={name:"TabContentRouter",components:{CanvasTab:vj,TicketsBoard:wG,FeaturesTab:UG,ModulesCanvas:nK,RoadmapTab:CY,SpecsTab:EX,DiagramsTab:MX,ApiTab:HX,StorybookFrame:XX,TechStackTab:tQ,DocsTab:MQ},props:{activeTab:{type:String,required:!0},canvasProps:{type:Object,default:()=>({})},ticketsProps:{type:Object,default:()=>({})},featuresProps:{type:Object,default:()=>({})},modulesProps:{type:Object,default:()=>({})},roadmapProps:{type:Object,default:()=>({})},specsProps:{type:Object,default:()=>({})},diagramsProps:{type:Object,default:()=>({})},apiProps:{type:Object,default:()=>({})},storybookProps:{type:Object,default:()=>({})},techStackProps:{type:Object,default:()=>({})},docsProps:{type:Object,default:()=>({})}}},IQ={class:"tab-content-router"};function FQ(e,t,r,i,n,s){const a=ot("CanvasTab"),o=ot("TicketsBoard"),l=ot("FeaturesTab"),c=ot("ModulesCanvas"),u=ot("RoadmapTab"),h=ot("SpecsTab"),d=ot("DiagramsTab"),p=ot("ApiTab"),y=ot("StorybookFrame"),_=ot("TechStackTab"),v=ot("DocsTab");return j(),G("section",IQ,[r.activeTab==="canvas"?(j(),$t(a,{key:0,active:r.canvasProps.active,onLayout:r.canvasProps.onLayout,onDetect:r.canvasProps.onDetect,onAnalyze:r.canvasProps.onAnalyze,onExport:r.canvasProps.onExport},null,8,["active","onLayout","onDetect","onAnalyze","onExport"])):r.activeTab==="bugs"?(j(),$t(o,{key:1,active:r.ticketsProps.active,tickets:r.ticketsProps.tickets,"ticket-status-options":r.ticketsProps.ticketStatusOptions,filter:r.ticketsProps.filter,onCreate:r.ticketsProps.onCreate,onAnalyze:r.ticketsProps.onAnalyze,onExport:r.ticketsProps.onExport,onStatusChange:r.ticketsProps.onStatusChange,"onUpdate:filter":r.ticketsProps.onUpdateFilter},null,8,["active","tickets","ticket-status-options","filter","onCreate","onAnalyze","onExport","onStatusChange","onUpdate:filter"])):r.activeTab==="features"?(j(),$t(l,{key:2,active:r.featuresProps.active,features:r.featuresProps.features,modules:r.featuresProps.modules,"selected-modules":r.featuresProps.selectedModules,filter:r.featuresProps.filter,"get-module-feature-count":r.featuresProps.getModuleFeatureCount,"get-module-name":r.featuresProps.getModuleName,onCreate:r.featuresProps.onCreate,onReport:r.featuresProps.onReport,onToggleModule:r.featuresProps.onToggleModule,"onUpdate:filter":r.featuresProps.onUpdateFilter},null,8,["active","features","modules","selected-modules","filter","get-module-feature-count","get-module-name","onCreate","onReport","onToggleModule","onUpdate:filter"])):r.activeTab==="modules"?(j(),$t(c,{key:3,active:r.modulesProps.active,modules:r.modulesProps.modules,summary:r.modulesProps.summary,"get-module-bug-count":r.modulesProps.getModuleBugCount,"get-module-feature-count":r.modulesProps.getModuleFeatureCount,onCreate:r.modulesProps.onCreate,onDetect:r.modulesProps.onDetect,onAnalyzeDependencies:r.modulesProps.onAnalyzeDependencies,onAnalyze:r.modulesProps.onAnalyze},null,8,["active","modules","summary","get-module-bug-count","get-module-feature-count","onCreate","onDetect","onAnalyzeDependencies","onAnalyze"])):r.activeTab==="roadmap"?(j(),$t(u,Ux(H1({key:4},r.roadmapProps)),null,16)):r.activeTab==="specs"?(j(),$t(h,{key:5,active:r.specsProps.active,"current-phase":r.specsProps.currentPhase,questions:r.specsProps.questions,"export-format":r.specsProps.exportFormat,"generated-spec":r.specsProps.generatedSpec,"latest-spec-meta":r.specsProps.latestSpecMeta,"cli-sessions":r.specsProps.cliSessions,"cli-sessions-loading":r.specsProps.cliSessionsLoading,"cli-sessions-error":r.specsProps.cliSessionsError,"selected-session-id":r.specsProps.selectedSessionId,"session-details":r.specsProps.sessionDetails,"session-details-error":r.specsProps.sessionDetailsError,"cli-gate-log":r.specsProps.cliGateLog,"find-cli-question-prompt":r.specsProps.findCliQuestionPrompt,"format-cli-timestamp":r.specsProps.formatCliTimestamp,"format-cli-session-status":r.specsProps.formatCliSessionStatus,"format-gate-timestamp":r.specsProps.formatGateTimestamp,"format-gate-context":r.specsProps.formatGateContext,"onUpdate:exportFormat":r.specsProps.onUpdateExportFormat,onGenerate:r.specsProps.onGenerate,onRefreshSessions:r.specsProps.onRefreshSessions,onViewSession:r.specsProps.onViewSession,onCloseSession:r.specsProps.onCloseSession,onAnswer:r.specsProps.onAnswer,onReloadQuestions:r.specsProps.onReloadQuestions},null,8,["active","current-phase","questions","export-format","generated-spec","latest-spec-meta","cli-sessions","cli-sessions-loading","cli-sessions-error","selected-session-id","session-details","session-details-error","cli-gate-log","find-cli-question-prompt","format-cli-timestamp","format-cli-session-status","format-gate-timestamp","format-gate-context","onUpdate:exportFormat","onGenerate","onRefreshSessions","onViewSession","onCloseSession","onAnswer","onReloadQuestions"])):r.activeTab==="diagrams"?(j(),$t(d,{key:6,active:r.diagramsProps.active,"mermaid-code":r.diagramsProps.mermaidCode,"generate-diagram":r.diagramsProps.generateDiagram,"generate-from-modules":r.diagramsProps.generateFromModules,"render-mermaid":r.diagramsProps.renderMermaid,"update-mermaid-code":r.diagramsProps.updateMermaidCode,"mermaid-error":r.diagramsProps.mermaidError},null,8,["active","mermaid-code","generate-diagram","generate-from-modules","render-mermaid","update-mermaid-code","mermaid-error"])):r.activeTab==="api"?(j(),$t(p,{key:7,active:r.apiProps.active,"api-format":r.apiProps.apiFormat,"api-spec-content":r.apiProps.apiSpecContent,"api-spec-warnings":r.apiProps.apiSpecWarnings,onGenerateApiSpec:r.apiProps.onGenerateApiSpec,onExportApiSpec:r.apiProps.onExportApiSpec,onTestApi:r.apiProps.onTestApi,"onUpdate:apiFormat":r.apiProps.onUpdateApiFormat},null,8,["active","api-format","api-spec-content","api-spec-warnings","onGenerateApiSpec","onExportApiSpec","onTestApi","onUpdate:apiFormat"])):r.activeTab==="storybook"?(j(),$t(y,{key:8,active:r.storybookProps.active,theme:r.storybookProps.theme,status:r.storybookProps.status,"frame-version":r.storybookProps.frameVersion,"on-start":r.storybookProps.onStart,"on-refresh":r.storybookProps.onRefresh},null,8,["active","theme","status","frame-version","on-start","on-refresh"])):r.activeTab==="stack"?(j(),$t(_,{key:9,active:r.techStackProps.active,summary:r.techStackProps.summary,loading:r.techStackProps.loading,error:r.techStackProps.error,exporting:r.techStackProps.exporting,"export-error":r.techStackProps.exportError,"export-result":r.techStackProps.exportResult,onRefresh:r.techStackProps.onRefresh,onExport:r.techStackProps.onExport},null,8,["active","summary","loading","error","exporting","export-error","export-result","onRefresh","onExport"])):r.activeTab==="docs"?(j(),$t(v,{key:10,active:r.docsProps.active,"doc-type":r.docsProps.docType,"doc-title":r.docsProps.docTitle,"generated-docs":r.docsProps.generatedDocs,"runbook-generation-error":r.docsProps.runbookGenerationError,"latest-runbook":r.docsProps.latestRunbook,"latest-runbook-content":r.docsProps.latestRunbookContent,"latest-runbook-html":r.docsProps.latestRunbookHtml,"runbook-messages":r.docsProps.runbookMessages,"runbook-generating":r.docsProps.runbookGenerating,"runbook-interview-loading":r.docsProps.runbookInterviewLoading,onGenerateDocs:r.docsProps.onGenerateDocs,onExportDocs:r.docsProps.onExportDocs,"onUpdate:docType":r.docsProps.onUpdateDocType,onStartRunbookInterview:r.docsProps.onStartRunbookInterview,onQuickGenerateRunbook:r.docsProps.onQuickGenerateRunbook},null,8,["active","doc-type","doc-title","generated-docs","runbook-generation-error","latest-runbook","latest-runbook-content","latest-runbook-html","runbook-messages","runbook-generating","runbook-interview-loading","onGenerateDocs","onExportDocs","onUpdate:docType","onStartRunbookInterview","onQuickGenerateRunbook"])):me("",!0)])}const OQ=ht(PQ,[["render",FQ]]),NQ={name:"RunbookModal",props:{active:{type:Boolean,default:!1},interviewError:{type:String,default:""},generating:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},submitting:{type:Boolean,default:!1},history:{type:Array,default:()=>[]},currentQuestion:{type:Object,default:null},draftAnswer:{type:String,default:""},latestRunbook:{type:Object,default:null},skipDisabled:{type:Boolean,default:!1}},emits:["close","update:draftAnswer","submit","skip"],methods:{onAnswerInput(e){this.$emit("update:draftAnswer",e)},submit(){this.$emit("submit")}}},$Q={class:"modal-content runbook-modal"},zQ={key:0,class:"form-error"},HQ={key:1,class:"form-success"},qQ={key:2,class:"runbook-loading"},WQ={key:3},UQ={key:0,class:"runbook-history"},VQ={key:1,class:"runbook-question"},jQ={key:0,class:"question-help"},GQ=["value","placeholder"],KQ=["value","placeholder"],YQ=["value"],XQ=["value"],ZQ=["value","placeholder"],QQ={class:"modal-actions"},JQ=["disabled"],eJ=["disabled"],tJ={key:2,class:"runbook-generating"},rJ={key:3,class:"runbook-latest"};function iJ(e,t,r,i,n,s){return j(),G("div",{class:Ye(["modal",{active:r.active}])},[B("div",$Q,[B("button",{class:"close-modal",type:"button",onClick:t[0]||(t[0]=a=>e.$emit("close"))},""),t[10]||(t[10]=B("h2",{class:"runbook-modal-title"},"Operational Runbook Interview",-1)),t[11]||(t[11]=B("p",{class:"runbook-modal-lead"}," Answer the targeted operational questions or skip directly to generation. Responses feed the shared runbook generator. ",-1)),r.interviewError?(j(),G("div",zQ,re(r.interviewError),1)):me("",!0),r.generating?(j(),G("div",HQ,"Generating runbook artefact...")):me("",!0),r.loading?(j(),G("div",qQ,"Loading runbook question bank")):(j(),G("div",WQ,[r.history&&r.history.length?(j(),G("div",UQ,[t[8]||(t[8]=B("h4",null,"Answered",-1)),B("ul",null,[(j(!0),G(Pe,null,Ke(r.history,(a,o)=>(j(),G("li",{key:"rb-history-"+o},[B("strong",null,re(a.prompt||a.questionId),1),B("span",null,re(a.answer),1)]))),128))])])):me("",!0),r.currentQuestion?(j(),G("div",VQ,[B("h3",null,re(r.currentQuestion.prompt),1),r.currentQuestion.help?(j(),G("p",jQ,re(r.currentQuestion.help),1)):me("",!0),r.currentQuestion.type==="text"?(j(),G("input",{key:1,value:r.draftAnswer,placeholder:r.currentQuestion.placeholder,onInput:t[1]||(t[1]=a=>s.onAnswerInput(a.target.value)),onKeyup:t[2]||(t[2]=na(nn((...a)=>s.submit&&s.submit(...a),["prevent"]),["enter"]))},null,40,GQ)):r.currentQuestion.type==="textarea"?(j(),G("textarea",{key:2,value:r.draftAnswer,placeholder:r.currentQuestion.placeholder,rows:"5",onInput:t[3]||(t[3]=a=>s.onAnswerInput(a.target.value))},null,40,KQ)):r.currentQuestion.type==="select"?(j(),G("select",{key:3,value:r.draftAnswer,onChange:t[4]||(t[4]=a=>s.onAnswerInput(a.target.value))},[t[9]||(t[9]=B("option",{value:""},"Choose...",-1)),(j(!0),G(Pe,null,Ke(r.currentQuestion.options||[],a=>(j(),G("option",{key:a,value:a},re(a),9,XQ))),128))],40,YQ)):(j(),G("input",{key:4,value:r.draftAnswer,placeholder:r.currentQuestion.placeholder,onInput:t[5]||(t[5]=a=>s.onAnswerInput(a.target.value))},null,40,ZQ)),B("div",QQ,[B("button",{class:"btn",type:"button",disabled:r.submitting,onClick:t[6]||(t[6]=(...a)=>s.submit&&s.submit(...a))},re(r.submitting?"Submitting":"Submit Answer"),9,JQ),B("button",{class:"btn secondary",type:"button",disabled:r.skipDisabled,onClick:t[7]||(t[7]=a=>e.$emit("skip"))}," Skip & Generate ",8,eJ)])])):r.generating?(j(),G("div",tJ," Generating runbook from collected data ")):r.latestRunbook?(j(),G("div",rJ," Latest runbook saved as "+re(r.latestRunbook.filename)+". ",1)):me("",!0)]))])],2)}const nJ=ht(NQ,[["render",iJ]]),sJ={name:"BugModal",props:{active:{type:Boolean,default:!1},bug:{type:Object,default:()=>({title:"",description:"",priority:"medium",modules:[],tagsText:""})},modules:{type:Array,default:()=>[]}},emits:["close","submit","update:bug"],methods:{update(e,t){const r={...this.bug,[e]:t};this.$emit("update:bug",r)},toggleModule(e,t){const r=new Set(this.bug.modules||[]);t?r.add(e):r.delete(e),this.update("modules",Array.from(r))}}},aJ={class:"modal-content"},oJ={class:"form-group"},lJ=["value"],cJ={class:"form-group"},uJ=["value"],hJ={class:"form-group"},dJ=["value"],fJ={class:"form-group"},pJ={class:"bug-modules-list"},vJ=["value","checked","onChange"],gJ={class:"form-group"},mJ=["value"];function yJ(e,t,r,i,n,s){return j(),G("div",{class:Ye(["modal bug-modal ticket-modal",{active:r.active}]),role:"dialog","aria-labelledby":"bug-modal-title"},[B("div",aJ,[B("button",{class:"close-modal",type:"button",onClick:t[0]||(t[0]=a=>e.$emit("close"))},""),t[12]||(t[12]=B("h2",{id:"bug-modal-title",class:"bug-modal-title"},"Report New Bug",-1)),B("div",oJ,[t[6]||(t[6]=B("label",null,"Title",-1)),B("input",{value:r.bug.title,type:"text",placeholder:"Bug title...",onInput:t[1]||(t[1]=a=>s.update("title",a.target.value))},null,40,lJ)]),B("div",cJ,[t[7]||(t[7]=B("label",null,"Description",-1)),B("textarea",{value:r.bug.description,rows:"4",placeholder:"Describe the bug...",onInput:t[2]||(t[2]=a=>s.update("description",a.target.value))},null,40,uJ)]),B("div",hJ,[t[9]||(t[9]=B("label",null,"Priority",-1)),B("select",{value:r.bug.priority,onChange:t[3]||(t[3]=a=>s.update("priority",a.target.value))},[...t[8]||(t[8]=[B("option",{value:"high"},"High",-1),B("option",{value:"medium"},"Medium",-1),B("option",{value:"low"},"Low",-1)])],40,dJ)]),B("div",fJ,[t[10]||(t[10]=B("label",null,"Modules (select multiple)",-1)),B("div",pJ,[(j(!0),G(Pe,null,Ke(r.modules,a=>(j(),G("label",{key:a.id,class:"bug-module-option"},[B("input",{type:"checkbox",value:a.id,checked:r.bug.modules.includes(a.id),class:"bug-module-checkbox",onChange:o=>s.toggleModule(a.id,o.target.checked)},null,40,vJ),dt(" "+re(a.name),1)]))),128))])]),B("div",gJ,[t[11]||(t[11]=B("label",null,"Tags (comma separated)",-1)),B("input",{value:r.bug.tagsText,type:"text",placeholder:"BUG, AUTH, BACKEND",onInput:t[4]||(t[4]=a=>s.update("tagsText",a.target.value))},null,40,mJ)]),B("button",{class:"btn danger",type:"button",onClick:t[5]||(t[5]=a=>e.$emit("submit"))},"Submit Bug")])],2)}const _J=ht(sJ,[["render",yJ]]),bJ={name:"TicketCompletionModal",props:{active:{type:Boolean,default:!1},summary:{type:String,default:""},error:{type:String,default:""}},emits:["cancel","confirm","update:summary"]},CJ={class:"modal-content"},wJ={class:"form-group"},SJ=["value"],kJ={key:0,class:"form-error"},xJ={class:"modal-actions"};function TJ(e,t,r,i,n,s){return j(),G("div",{class:Ye(["modal",{active:r.active}])},[B("div",CJ,[B("button",{class:"close-modal",type:"button",onClick:t[0]||(t[0]=a=>e.$emit("cancel"))},""),t[5]||(t[5]=B("h2",{class:"ticket-completion-title"},"Wrap Up Ticket",-1)),t[6]||(t[6]=B("p",{class:"ticket-completion-lead"}," Provide a concise summary of what changed, how it was validated, and any follow-up actions before closing this ticket. ",-1)),B("div",wJ,[t[4]||(t[4]=B("label",null,"Summary of Work Completed",-1)),B("textarea",{value:r.summary,rows:"5",placeholder:"Describe the fix, validation steps, and remaining follow-ups...",onInput:t[1]||(t[1]=a=>e.$emit("update:summary",a.target.value))},null,40,SJ)]),r.error?(j(),G("p",kJ,re(r.error),1)):me("",!0),B("div",xJ,[B("button",{class:"btn secondary",type:"button",onClick:t[2]||(t[2]=a=>e.$emit("cancel"))},"Cancel"),B("button",{class:"btn success",type:"button",onClick:t[3]||(t[3]=a=>e.$emit("confirm"))},"Mark as Finished")])])],2)}const EJ=ht(bJ,[["render",TJ]]),AJ={name:"FeatureModal",props:{active:{type:Boolean,default:!1},feature:{type:Object,default:()=>({title:"",description:"",moduleId:"",priority:"medium",criteriaText:""})},modules:{type:Array,default:()=>[]}},emits:["close","submit","update:feature"],methods:{update(e,t){const r={...this.feature,[e]:t};this.$emit("update:feature",r)}}},BJ={class:"modal-content"},DJ={class:"form-group"},LJ=["value"],RJ={class:"form-group"},MJ=["value"],PJ={class:"form-group"},IJ=["value"],FJ=["value"],OJ={class:"form-group"},NJ=["value"],$J={class:"form-group"},zJ=["value"];function HJ(e,t,r,i,n,s){return j(),G("div",{class:Ye(["modal feature-modal",{active:r.active}]),role:"dialog","aria-labelledby":"feature-modal-title"},[B("div",BJ,[B("button",{class:"close-modal",type:"button",onClick:t[0]||(t[0]=a=>e.$emit("close"))},""),t[13]||(t[13]=B("h2",{id:"feature-modal-title",class:"feature-modal-title"},"Propose New Feature",-1)),B("div",DJ,[t[7]||(t[7]=B("label",null,"Title",-1)),B("input",{value:r.feature.title,type:"text",placeholder:"Feature title...",onInput:t[1]||(t[1]=a=>s.update("title",a.target.value))},null,40,LJ)]),B("div",RJ,[t[8]||(t[8]=B("label",null,"Description",-1)),B("textarea",{value:r.feature.description,rows:"4",placeholder:"Describe the feature...",onInput:t[2]||(t[2]=a=>s.update("description",a.target.value))},null,40,MJ)]),B("div",PJ,[t[9]||(t[9]=B("label",null,"Module",-1)),B("select",{value:r.feature.moduleId,onChange:t[3]||(t[3]=a=>s.update("moduleId",a.target.value))},[(j(!0),G(Pe,null,Ke(r.modules,a=>(j(),G("option",{key:a.id,value:a.id},re(a.name),9,FJ))),128))],40,IJ)]),B("div",OJ,[t[11]||(t[11]=B("label",null,"Priority",-1)),B("select",{value:r.feature.priority,onChange:t[4]||(t[4]=a=>s.update("priority",a.target.value))},[...t[10]||(t[10]=[B("option",{value:"critical"},"Critical",-1),B("option",{value:"high"},"High",-1),B("option",{value:"medium"},"Medium",-1),B("option",{value:"low"},"Low",-1)])],40,NJ)]),B("div",$J,[t[12]||(t[12]=B("label",null,"Acceptance Criteria (one per line)",-1)),B("textarea",{value:r.feature.criteriaText,rows:"4",placeholder:`- User can do X
- System validates Y
- Data is saved to Z`,onInput:t[5]||(t[5]=a=>s.update("criteriaText",a.target.value))},null,40,zJ)]),B("button",{class:"btn feature",type:"button",onClick:t[6]||(t[6]=a=>e.$emit("submit"))},"Submit Feature")])],2)}const qJ=ht(AJ,[["render",HJ]]),WJ={name:"AddModuleModal",props:{active:{type:Boolean,default:!1},moduleDraft:{type:Object,default:()=>({name:"",id:"",path:"",depsString:"",type:"custom"})}},emits:["close","submit","update:moduleDraft"],methods:{update(e,t){const r={...this.moduleDraft,[e]:t};this.$emit("update:moduleDraft",r)}}},UJ={class:"modal-content"},VJ={class:"form-group"},jJ=["value"],GJ={class:"form-group"},KJ=["value"],YJ={class:"form-group"},XJ=["value"],ZJ={class:"form-group"},QJ=["value"],JJ={class:"form-group"},eee=["value"];function tee(e,t,r,i,n,s){return j(),G("div",{class:Ye(["modal",{active:r.active}])},[B("div",UJ,[B("button",{class:"close-modal",type:"button",onClick:t[0]||(t[0]=a=>e.$emit("close"))},""),t[13]||(t[13]=B("h2",{class:"add-module-modal-title"},"Add New Module",-1)),B("div",VJ,[t[7]||(t[7]=B("label",null,"Module Name",-1)),B("input",{value:r.moduleDraft.name,placeholder:"Authentication",onInput:t[1]||(t[1]=a=>s.update("name",a.target.value))},null,40,jJ)]),B("div",GJ,[t[8]||(t[8]=B("label",null,"Module ID",-1)),B("input",{value:r.moduleDraft.id,placeholder:"auth",onInput:t[2]||(t[2]=a=>s.update("id",a.target.value))},null,40,KJ)]),B("div",YJ,[t[9]||(t[9]=B("label",null,"Relative Path",-1)),B("input",{value:r.moduleDraft.path,placeholder:"src/auth",onInput:t[3]||(t[3]=a=>s.update("path",a.target.value))},null,40,XJ)]),B("div",ZJ,[t[10]||(t[10]=B("label",null,"Dependencies (comma-separated)",-1)),B("input",{value:r.moduleDraft.depsString,placeholder:"database, crypto, utils",onInput:t[4]||(t[4]=a=>s.update("depsString",a.target.value))},null,40,QJ)]),B("div",JJ,[t[12]||(t[12]=B("label",null,"Module Type",-1)),B("select",{value:r.moduleDraft.type,onChange:t[5]||(t[5]=a=>s.update("type",a.target.value))},[...t[11]||(t[11]=[Uo('<option value="custom">Custom</option><option value="frontend">Frontend</option><option value="backend">Backend</option><option value="service">Service</option><option value="documentation">Documentation</option>',5)])],40,eee)]),B("button",{class:"btn",type:"button",onClick:t[6]||(t[6]=a=>e.$emit("submit"))},"Add Module")])],2)}const ree=ht(WJ,[["render",tee]]),iee={name:"ModalsLayer",components:{RunbookModal:nJ,BugModal:_J,TicketCompletionModal:EJ,FeatureModal:qJ,AddModuleModal:ree},props:{runbookModalActive:Boolean,runbookInterviewError:{type:String,default:""},runbookGenerating:Boolean,runbookInterviewLoading:Boolean,runbookInterviewSubmitting:Boolean,runbookHistory:{type:Array,default:()=>[]},runbookCurrentQuestion:{type:Object,default:null},runbookDraftAnswer:{type:String,default:""},latestRunbook:{type:Object,default:null},bugModalActive:Boolean,bugDraft:{type:Object,default:()=>({})},modules:{type:Array,default:()=>[]},ticketModalActive:Boolean,ticketCompletionSummary:{type:String,default:""},ticketCompletionError:{type:String,default:""},featureModalActive:Boolean,featureDraft:{type:Object,default:()=>({})},addModuleModalActive:Boolean,moduleDraft:{type:Object,default:()=>({})}}},nee={class:"modals-layer","aria-live":"polite"};function see(e,t,r,i,n,s){const a=ot("RunbookModal"),o=ot("BugModal"),l=ot("TicketCompletionModal"),c=ot("FeatureModal"),u=ot("AddModuleModal");return j(),G("div",nee,[r.runbookModalActive?(j(),$t(a,{key:0,active:r.runbookModalActive,"interview-error":r.runbookInterviewError,generating:r.runbookGenerating,loading:r.runbookInterviewLoading,submitting:r.runbookInterviewSubmitting,history:r.runbookHistory,"current-question":r.runbookCurrentQuestion,"draft-answer":r.runbookDraftAnswer,"latest-runbook":r.latestRunbook,"skip-disabled":r.runbookGenerating,onClose:t[0]||(t[0]=h=>e.$emit("close-runbook")),"onUpdate:draftAnswer":t[1]||(t[1]=h=>e.$emit("update-runbook-draft",h)),onSubmit:t[2]||(t[2]=h=>e.$emit("submit-runbook")),onSkip:t[3]||(t[3]=h=>e.$emit("skip-runbook"))},null,8,["active","interview-error","generating","loading","submitting","history","current-question","draft-answer","latest-runbook","skip-disabled"])):me("",!0),r.bugModalActive?(j(),$t(o,{key:1,active:r.bugModalActive,bug:r.bugDraft,modules:r.modules,onClose:t[4]||(t[4]=h=>e.$emit("close-bug")),onSubmit:t[5]||(t[5]=h=>e.$emit("submit-bug")),"onUpdate:bug":t[6]||(t[6]=h=>e.$emit("update-bug",h))},null,8,["active","bug","modules"])):me("",!0),r.ticketModalActive?(j(),$t(l,{key:2,active:r.ticketModalActive,summary:r.ticketCompletionSummary,error:r.ticketCompletionError,onCancel:t[7]||(t[7]=h=>e.$emit("cancel-ticket")),onConfirm:t[8]||(t[8]=h=>e.$emit("confirm-ticket")),"onUpdate:summary":t[9]||(t[9]=h=>e.$emit("update-ticket-summary",h))},null,8,["active","summary","error"])):me("",!0),r.featureModalActive?(j(),$t(c,{key:3,active:r.featureModalActive,feature:r.featureDraft,modules:r.modules,onClose:t[10]||(t[10]=h=>e.$emit("close-feature")),onSubmit:t[11]||(t[11]=h=>e.$emit("submit-feature")),"onUpdate:feature":t[12]||(t[12]=h=>e.$emit("update-feature",h))},null,8,["active","feature","modules"])):me("",!0),r.addModuleModalActive?(j(),$t(u,{key:4,active:r.addModuleModalActive,"module-draft":r.moduleDraft,onClose:t[13]||(t[13]=h=>e.$emit("close-add-module")),onSubmit:t[14]||(t[14]=h=>e.$emit("submit-add-module")),"onUpdate:moduleDraft":t[15]||(t[15]=h=>e.$emit("update-module-draft",h))},null,8,["active","module-draft"])):me("",!0)])}const aee=ht(iee,[["render",see]]),oee={name:"BulkOperationsToolbar",props:{type:{type:String,required:!0,validator:e=>["tickets","features"].includes(e)},items:{type:Array,default:()=>[]}},emits:["refresh","export"],setup(){return $g()},data(){return{showDeleteConfirmation:!1,showStatusConfirmation:!1,showUndoMenu:!1,pendingStatusChange:null,completionSummary:"",lastOperationResult:null}},computed:{isVisible(){return this.isInSelectionMode&&(this.hasSelectedTickets||this.hasSelectedFeatures)},canUndo(){return this.undoHistory.length>0}},methods:{async updateStatus(e){this.pendingStatusChange=e,this.completionSummary="",this.showStatusConfirmation=!0},async confirmStatusChange(){try{const e={status:this.pendingStatusChange};this.pendingStatusChange==="finished"&&this.completionSummary.trim()&&(e.completionSummary=this.completionSummary.trim());let t;this.type==="tickets"?t=await this.bulkUpdateTickets(e):t=await this.bulkUpdateFeatures(e),this.showOperationResult(!0,t.message),this.showStatusConfirmation=!1,this.$emit("refresh")}catch(e){this.showOperationResult(!1,e.message)}},async updatePriority(e){try{const t=await this.bulkUpdateTickets({priority:e});this.showOperationResult(!0,t.message),this.$emit("refresh")}catch(t){this.showOperationResult(!1,t.message)}},async confirmDelete(){try{let e;if(this.type==="tickets")e=await this.bulkDeleteTickets();else throw new Error("Bulk feature deletion not yet implemented");this.showOperationResult(!0,e.message),this.showDeleteConfirmation=!1,this.$emit("refresh")}catch(e){this.showOperationResult(!1,e.message)}},selectAll(){this.type==="tickets"?this.selectAllTickets(this.items):this.selectAllFeatures(this.items)},exportSelected(){this.$emit("export",{type:this.type,items:this.getSelectedItems()})},getSelectedItems(){return this.type==="tickets"?this.items.filter(e=>this.isTicketSelected(e.id)):this.items.filter(e=>this.isFeatureSelected(e.id))},async undoOperation(e){try{const t=await this.undoOperation(e,this.type);this.showOperationResult(!0,t.message),this.showUndoMenu=!1,this.$emit("refresh")}catch(t){this.showOperationResult(!1,t.message)}},async clearUndoHistory(){try{await this.clearUndoHistory(),this.showUndoMenu=!1,this.showOperationResult(!0,"Undo history cleared")}catch(e){this.showOperationResult(!1,e.message)}},showOperationResult(e,t){this.lastOperationResult={success:e,message:t},setTimeout(()=>{this.lastOperationResult=null},5e3)},formatTimestamp(e){return new Date(e).toLocaleTimeString()}},mounted(){document.addEventListener("click",e=>{this.$el.contains(e.target)||(this.showUndoMenu=!1)})}},lee={class:"toolbar-content"},cee={class:"selection-summary"},uee={class:"selection-count"},hee={class:"action-buttons"},dee={key:0,class:"action-group"},fee=["disabled"],pee=["disabled"],vee=["disabled"],gee={key:1,class:"action-group"},mee=["disabled"],yee=["disabled"],_ee=["disabled"],bee=["disabled"],Cee=["disabled"],wee={key:2,class:"action-group"},See=["disabled"],kee=["disabled"],xee=["disabled"],Tee={class:"action-group danger-actions"},Eee=["disabled"],Aee={class:"action-group utility-actions"},Bee=["disabled"],Dee=["disabled"],Lee={key:0,class:"undo-section"},Ree=["disabled"],Mee={key:0,class:"undo-menu"},Pee=["onClick"],Iee={class:"undo-description"},Fee={class:"undo-timestamp"},Oee={class:"undo-menu-footer"},Nee={key:1,class:"loading-indicator"},$ee={class:"modal-body"},zee={class:"modal-footer"},Hee=["disabled"],qee={class:"modal-body"},Wee={key:0,class:"completion-summary-input"},Uee={class:"modal-footer"},Vee=["disabled"];function jee(e,t,r,i,n,s){return j(),G("div",{class:Ye(["bulk-operations-toolbar",{visible:s.isVisible}])},[B("div",lee,[B("div",cee,[B("span",uee,re(e.selectionSummary),1),B("button",{class:"btn-icon",onClick:t[0]||(t[0]=(...a)=>e.clearSelections&&e.clearSelections(...a)),title:"Clear selection"},[...t[27]||(t[27]=[B("span",{class:"icon"},"",-1)])])]),B("div",hee,[r.type==="tickets"?(j(),G("div",dee,[t[28]||(t[28]=B("label",{class:"action-label"},"Status:",-1)),B("button",{class:"btn status-btn reported",onClick:t[1]||(t[1]=a=>s.updateStatus("reported")),disabled:e.isLoading,title:"Mark as Reported"},"  Reported ",8,fee),B("button",{class:"btn status-btn in-progress",onClick:t[2]||(t[2]=a=>s.updateStatus("inProgress")),disabled:e.isLoading,title:"Mark as In Progress"},"  In Progress ",8,pee),B("button",{class:"btn status-btn finished",onClick:t[3]||(t[3]=a=>s.updateStatus("finished")),disabled:e.isLoading,title:"Mark as Finished"},"  Finished ",8,vee)])):me("",!0),r.type==="features"?(j(),G("div",gee,[t[29]||(t[29]=B("label",{class:"action-label"},"Status:",-1)),B("button",{class:"btn status-btn proposed",onClick:t[4]||(t[4]=a=>s.updateStatus("proposed")),disabled:e.isLoading,title:"Mark as Proposed"},"  Proposed ",8,mee),B("button",{class:"btn status-btn approved",onClick:t[5]||(t[5]=a=>s.updateStatus("approved")),disabled:e.isLoading,title:"Mark as Approved"},"  Approved ",8,yee),B("button",{class:"btn status-btn in-development",onClick:t[6]||(t[6]=a=>s.updateStatus("in-development")),disabled:e.isLoading,title:"Mark as In Development"},"  In Development ",8,_ee),B("button",{class:"btn status-btn testing",onClick:t[7]||(t[7]=a=>s.updateStatus("testing")),disabled:e.isLoading,title:"Mark as Testing"},"  Testing ",8,bee),B("button",{class:"btn status-btn deployed",onClick:t[8]||(t[8]=a=>s.updateStatus("deployed")),disabled:e.isLoading,title:"Mark as Deployed"},"  Deployed ",8,Cee)])):me("",!0),r.type==="tickets"?(j(),G("div",wee,[t[30]||(t[30]=B("label",{class:"action-label"},"Priority:",-1)),B("button",{class:"btn priority-btn low",onClick:t[9]||(t[9]=a=>s.updatePriority("low")),disabled:e.isLoading,title:"Set Low Priority"},"  Low ",8,See),B("button",{class:"btn priority-btn medium",onClick:t[10]||(t[10]=a=>s.updatePriority("medium")),disabled:e.isLoading,title:"Set Medium Priority"},"  Medium ",8,kee),B("button",{class:"btn priority-btn high",onClick:t[11]||(t[11]=a=>s.updatePriority("high")),disabled:e.isLoading,title:"Set High Priority"},"  High ",8,xee)])):me("",!0),B("div",Tee,[B("button",{class:"btn danger",onClick:t[12]||(t[12]=a=>n.showDeleteConfirmation=!0),disabled:e.isLoading,title:"Delete selected items"},"  Delete ",8,Eee)]),B("div",Aee,[B("button",{class:"btn secondary",onClick:t[13]||(t[13]=(...a)=>s.selectAll&&s.selectAll(...a)),disabled:e.isLoading,title:"Select all visible items"},"  Select All ",8,Bee),B("button",{class:"btn secondary",onClick:t[14]||(t[14]=(...a)=>s.exportSelected&&s.exportSelected(...a)),disabled:e.isLoading,title:"Export selected items"},"  Export ",8,Dee)])]),s.canUndo?(j(),G("div",Lee,[B("button",{class:"btn undo-btn",onClick:t[15]||(t[15]=a=>n.showUndoMenu=!n.showUndoMenu),disabled:e.isLoading,title:"Undo last operation"},"  Undo ",8,Ree),n.showUndoMenu?(j(),G("div",Mee,[t[31]||(t[31]=B("div",{class:"undo-menu-header"},"Recent Operations",-1)),(j(!0),G(Pe,null,Ke(e.undoHistory.slice(0,5),a=>(j(),G("div",{key:a.id,class:"undo-item",onClick:o=>s.undoOperation(a.id)},[B("div",Iee,re(a.description),1),B("div",Fee,re(s.formatTimestamp(a.timestamp)),1)],8,Pee))),128)),B("div",Oee,[B("button",{class:"btn-link",onClick:t[16]||(t[16]=(...a)=>s.clearUndoHistory&&s.clearUndoHistory(...a))},"Clear History")])])):me("",!0)])):me("",!0),e.isLoading?(j(),G("div",Nee,[...t[32]||(t[32]=[B("span",{class:"spinner"},null,-1),dt(" Processing... ",-1)])])):me("",!0)]),n.showDeleteConfirmation?(j(),G("div",{key:0,class:"modal-overlay",onClick:t[20]||(t[20]=a=>n.showDeleteConfirmation=!1)},[B("div",{class:"modal",onClick:t[19]||(t[19]=nn(()=>{},["stop"]))},[t[34]||(t[34]=B("div",{class:"modal-header"},[B("h3",null,"Confirm Deletion")],-1)),B("div",$ee,[B("p",null,"Are you sure you want to delete "+re(e.selectionSummary)+"?",1),t[33]||(t[33]=B("p",{class:"warning-text"},"This action cannot be undone.",-1))]),B("div",zee,[B("button",{class:"btn secondary",onClick:t[17]||(t[17]=a=>n.showDeleteConfirmation=!1)},"Cancel"),B("button",{class:"btn danger",onClick:t[18]||(t[18]=(...a)=>s.confirmDelete&&s.confirmDelete(...a)),disabled:e.isLoading},"Delete",8,Hee)])])])):me("",!0),n.showStatusConfirmation?(j(),G("div",{key:1,class:"modal-overlay",onClick:t[25]||(t[25]=a=>n.showStatusConfirmation=!1)},[B("div",{class:"modal",onClick:t[24]||(t[24]=nn(()=>{},["stop"]))},[t[37]||(t[37]=B("div",{class:"modal-header"},[B("h3",null,"Confirm Status Change")],-1)),B("div",qee,[B("p",null,[dt("Change status of "+re(e.selectionSummary)+" to ",1),B("strong",null,re(n.pendingStatusChange),1),t[35]||(t[35]=dt("?",-1))]),n.pendingStatusChange==="finished"&&r.type==="tickets"?(j(),G("div",Wee,[t[36]||(t[36]=B("label",{for:"completionSummary"},"Completion Summary (required):",-1)),an(B("textarea",{id:"completionSummary","onUpdate:modelValue":t[21]||(t[21]=a=>n.completionSummary=a),placeholder:"Describe what was completed...",rows:"3",required:""},null,512),[[Zc,n.completionSummary]])])):me("",!0)]),B("div",Uee,[B("button",{class:"btn secondary",onClick:t[22]||(t[22]=a=>n.showStatusConfirmation=!1)},"Cancel"),B("button",{class:"btn primary",onClick:t[23]||(t[23]=(...a)=>s.confirmStatusChange&&s.confirmStatusChange(...a)),disabled:e.isLoading||n.pendingStatusChange==="finished"&&!n.completionSummary.trim()}," Update Status ",8,Vee)])])])):me("",!0),n.lastOperationResult?(j(),G("div",{key:2,class:Ye(["toast",n.lastOperationResult.success?"success":"error"])},[dt(re(n.lastOperationResult.message)+" ",1),B("button",{class:"toast-close",onClick:t[26]||(t[26]=a=>n.lastOperationResult=null)},"")],2)):me("",!0)],2)}const Gee=ht(oee,[["render",jee]]),Kee={...Kf,components:{...Kf.components||{},AppHeader:CU,WorkbenchStrip:WV,BreadcrumbNavigation:ij,TabNavigation:hj,TabContentRouter:OQ,ModalsLayer:aee,BulkOperationsToolbar:Gee},methods:{...Kf.methods||{},handleBreadcrumbNavigation(e){if(e.startsWith("/")&&e.length>1){const t=e.split("/")[1];this.mainTabs.find(r=>r.id===t)&&this.setTab(t)}}}},Yee={class:"app-container"};function Xee(e,t,r,i,n,s){var p,y,_,v;const a=ot("AppHeader"),o=ot("WorkbenchStrip"),l=ot("BreadcrumbNavigation"),c=ot("TabNavigation"),u=ot("TabContentRouter"),h=ot("BulkOperationsToolbar"),d=ot("ModalsLayer");return j(),G("div",Yee,[st(a,{"current-theme":e.currentTheme,onSetTheme:e.setTheme},null,8,["current-theme","onSetTheme"]),st(o,{"claude-command":e.claudeCommand,"task-queue":e.taskQueue,stats:e.stats,"ticket-progress":e.ticketProgress,"latest-audit":e.latestAudit,"terminal-history":e.terminalHistory,"terminal-command":e.terminalCommand,"terminal-working-directory":e.terminalWorkingDirectory,"terminal-loading":e.terminalLoading,"terminal-running":e.terminalRunning,"terminal-error":e.terminalError,"branch-status":e.branchStatus,"branch-status-loading":e.branchStatusLoading,"branch-status-error":e.branchStatusError,"context-status":e.contextStatus,"context-status-loading":e.contextStatusLoading,"context-status-error":e.contextStatusError,"onUpdate:claudeCommand":t[0]||(t[0]=g=>e.claudeCommand=g),onExecuteCommand:e.executeClaudeCommand,onClearTasks:e.clearTaskQueue,"onUpdate:terminalCommand":t[1]||(t[1]=g=>e.terminalCommand=g),"onUpdate:terminalWorkingDirectory":t[2]||(t[2]=g=>e.terminalWorkingDirectory=g),onRunTerminalCommand:e.runTerminalCommand,onClearTerminal:e.clearTerminalHistory},null,8,["claude-command","task-queue","stats","ticket-progress","latest-audit","terminal-history","terminal-command","terminal-working-directory","terminal-loading","terminal-running","terminal-error","branch-status","branch-status-loading","branch-status-error","context-status","context-status-loading","context-status-error","onExecuteCommand","onClearTasks","onRunTerminalCommand","onClearTerminal"]),st(l,{"active-tab":e.activeTab,"main-tabs":e.mainTabs,"context-status":e.contextStatus,"branch-status":e.branchStatus,"current-session-id":(p=e.selectedCliSession)==null?void 0:p.id,"current-task-id":(y=e.contextStatus)==null?void 0:y.currentTask,"current-module":(_=e.selectedModules)==null?void 0:_[0],"current-ticket":e.ticketBeingUpdated,"current-feature":(v=e.newFeature)!=null&&v.title?e.newFeature:null,onNavigate:s.handleBreadcrumbNavigation},null,8,["active-tab","main-tabs","context-status","branch-status","current-session-id","current-task-id","current-module","current-ticket","current-feature","onNavigate"]),st(c,{"main-tabs":e.mainTabs,"active-tab":e.activeTab,stats:e.stats,"branch-status":e.branchStatus,"context-status":e.contextStatus,"terminal-running":e.terminalRunning,"terminal-error":e.terminalError,onSelectTab:e.setTab},null,8,["main-tabs","active-tab","stats","branch-status","context-status","terminal-running","terminal-error","onSelectTab"]),st(u,{"active-tab":e.activeTab,"canvas-props":e.canvasProps,"tickets-props":e.ticketsProps,"features-props":e.featuresProps,"modules-props":e.modulesProps,"roadmap-props":e.roadmapProps,"specs-props":e.specsProps,"diagrams-props":e.diagramsProps,"api-props":e.apiProps,"storybook-props":e.storybookProps,"tech-stack-props":e.techStackProps,"docs-props":e.docsProps},null,8,["active-tab","canvas-props","tickets-props","features-props","modules-props","roadmap-props","specs-props","diagrams-props","api-props","storybook-props","tech-stack-props","docs-props"]),e.activeTab==="bugs"?(j(),$t(h,{key:0,type:"tickets",items:e.tickets,onRefresh:e.refreshTickets,onExport:e.handleBulkExport},null,8,["items","onRefresh","onExport"])):me("",!0),e.activeTab==="features"?(j(),$t(h,{key:1,type:"features",items:e.features,onRefresh:e.refreshFeatures,onExport:e.handleBulkExport},null,8,["items","onRefresh","onExport"])):me("",!0),st(d,{"runbook-modal-active":e.runbookModalOpen,"runbook-interview-error":e.runbookInterviewError,"runbook-generating":e.runbookGenerating,"runbook-interview-loading":e.runbookInterviewLoading,"runbook-interview-submitting":e.runbookInterviewSubmitting,"runbook-history":e.runbookHistory,"runbook-current-question":e.runbookCurrentQuestion,"runbook-draft-answer":e.runbookDraftAnswer,"latest-runbook":e.latestRunbook,"bug-modal-active":e.showBugModal,"bug-draft":e.newBug,modules:e.modules,"ticket-modal-active":e.showTicketCompletionModal,"ticket-completion-summary":e.ticketCompletionSummary,"ticket-completion-error":e.ticketCompletionError,"feature-modal-active":e.showFeatureModal,"feature-draft":e.newFeature,"add-module-modal-active":e.showAddModuleModal,"module-draft":e.newModule,onCloseRunbook:e.closeRunbookModal,onUpdateRunbookDraft:e.updateRunbookDraft,onSubmitRunbook:e.submitRunbookAnswer,onSkipRunbook:e.skipRunbookInterview,onCloseBug:e.closeBugModal,onSubmitBug:e.addBug,onUpdateBug:e.updateBugDraft,onCancelTicket:e.cancelTicketCompletion,onConfirmTicket:e.confirmTicketCompletion,onUpdateTicketSummary:e.updateTicketCompletionSummary,onCloseFeature:e.closeFeatureModal,onSubmitFeature:e.addFeature,onUpdateFeature:e.updateFeatureDraft,onCloseAddModule:e.closeAddModuleModal,onSubmitAddModule:e.addModule,onUpdateModuleDraft:e.updateModuleDraft},null,8,["runbook-modal-active","runbook-interview-error","runbook-generating","runbook-interview-loading","runbook-interview-submitting","runbook-history","runbook-current-question","runbook-draft-answer","latest-runbook","bug-modal-active","bug-draft","modules","ticket-modal-active","ticket-completion-summary","ticket-completion-error","feature-modal-active","feature-draft","add-module-modal-active","module-draft","onCloseRunbook","onUpdateRunbookDraft","onSubmitRunbook","onSkipRunbook","onCloseBug","onSubmitBug","onUpdateBug","onCancelTicket","onConfirmTicket","onUpdateTicketSummary","onCloseFeature","onSubmitFeature","onUpdateFeature","onCloseAddModule","onSubmitAddModule","onUpdateModuleDraft"])])}const Zee=ht(Kee,[["render",Xee]]);d2(Zee).mount("#app");export{Tn as $,Mo as A,Fo as B,jH as C,VH as D,zH as E,b4 as F,hte as G,ZH as H,sz as I,GO as J,ig as K,fS as L,Ll as M,gS as N,ete as O,Nw as P,eF as Q,Hr as R,Kr as S,eq as T,lte as U,Sk as V,Sg as W,$8 as X,M8 as Y,zi as Z,ng as _,UH as a,Va as a$,E_ as a0,e3 as a1,al as a2,vb as a3,dte as a4,W8 as a5,iz as a6,zs as a7,R$ as a8,x$ as a9,ote as aA,ste as aB,tte as aC,rte as aD,ute as aE,nte as aF,cte as aG,Vn as aH,Xe as aI,$i as aJ,Pl as aK,Ua as aL,Tu as aM,m$ as aN,i8 as aO,Ml as aP,Au as aQ,h$ as aR,YS as aS,vN as aT,gN as aU,vs as aV,ib as aW,mN as aX,vg as aY,pN as aZ,bN as a_,M$ as aa,P$ as ab,rk as ac,Ah as ad,Rh as ae,Bu as af,dN as ag,pg as ah,nk as ai,tk as aj,u$ as ak,a$ as al,T$ as am,F$ as an,Il as ao,Dn as ap,yte as aq,Rl as ar,ze as as,Ve as at,GH as au,lg as av,ite as aw,ate as ax,P_ as ay,M_ as az,qH as b,ts as b0,Q_ as b1,gg as b2,ZS as b3,Gp as b4,xN as b5,Wf as b6,vz as b7,KI as b8,HH as c,ri as d,jk as e,_r as f,Ag as g,Lu as h,Ra as i,rF as j,bg as k,Ue as l,uz as m,m4 as n,FH as o,rz as p,Y8 as q,fk as r,WH as s,E8 as t,mte as u,dS as v,lz as w,uF as x,PN as y,fg as z};
